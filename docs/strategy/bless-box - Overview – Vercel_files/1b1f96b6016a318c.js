;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="882a357a-11f4-61ad-17e7-b5f7d11de701")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4400915,e=>{"use strict";var t=e.i(9588242);e.s(["Bar",()=>t.default])},1924179,e=>{"use strict";var t=e.i(7185353),a=["tooltipOpen"];function i(){return(i=Object.assign.bind()).apply(this,arguments)}e.s(["useTooltip",0,function(e){var r=(0,t.useState)(i({tooltipOpen:!1},e)),s=r[0],l=r[1],n=(0,t.useCallback)(function(e){return l("function"==typeof e?function(t){t.tooltipOpen;var r=function(e,t){if(null==e)return{};var a,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)a=s[i],t.indexOf(a)>=0||(r[a]=e[a]);return r}(t,a);return i({},e(r),{tooltipOpen:!0})}:{tooltipOpen:!0,tooltipLeft:e.tooltipLeft,tooltipTop:e.tooltipTop,tooltipData:e.tooltipData})},[l]),o=(0,t.useCallback)(function(){return l({tooltipOpen:!1,tooltipLeft:void 0,tooltipTop:void 0,tooltipData:void 0})},[l]);return{tooltipOpen:s.tooltipOpen,tooltipLeft:s.tooltipLeft,tooltipTop:s.tooltipTop,tooltipData:s.tooltipData,updateTooltip:l,showTooltip:n,hideTooltip:o}}],1924179)},3851902,e=>{"use strict";var t=e.i(1230902),a=e.i(9107401),i=e.i(9598279),r=e.i(1736425),s=e.i(4495794),l=e.i(4405391);e.s(["formatDate",0,(e,a)=>{let i=new Date(e);switch(a){case"hour":return(0,t.format)(i,"MMM d HH:mm");case"week":default:return(0,t.format)(i,"MMM d");case"month":return(0,t.format)(i,"MMM d, y")}},"formatFullDateWithRange",0,function(e,l,n,o){let c,d=new Date(e),u=!n||d>=n?d:n;switch(l){case"hour":return c=(0,a.addHours)(d,1),c=!o||c<=o?c:o,(0,t.format)(u,"MMM d HH:mm")+" – "+(0,t.format)(c,"MMM d HH:mm");case"week":c=(0,r.addWeeks)(d,1),c=!o||c<=o?c:o;break;case"month":c=(0,s.addMonths)(d,1),c=!o||c<=o?c:o;break;default:c=(0,i.addDays)(d,1),c=!o||c<=o?c:o}return c||=(0,i.addDays)(d,1),(0,t.format)(u,"MMM d, y HH:mm")+" – "+(0,t.format)(c,"MMM d, y HH:mm")},"formatPercentage",0,(e,t)=>{if(0===t||!(0,l.isNumber)(e))return"0%";let a=e/t*100;return a.toFixed(+(a%1!=0))+"%"}])},3513482,e=>{"use strict";e.s(["defaultMetricColors",0,["var(--ds-blue-700)","var(--ds-amber-700)","var(--ds-green-700)","var(--ds-teal-700)","var(--ds-purple-700)","var(--ds-pink-700)","var(--ds-red-700)","var(--ds-gray-700)","var(--ds-blue-600)","var(--ds-red-600)","var(--ds-amber-600)","var(--ds-green-600)","var(--ds-teal-600)","var(--ds-purple-600)","var(--ds-pink-600)","var(--ds-red-600)","var(--ds-gray-600)","var(--ds-blue-400)","var(--ds-red-400)","var(--ds-amber-400)","var(--ds-green-400)","var(--ds-teal-400)","var(--ds-purple-400)","var(--ds-pink-400)","var(--ds-red-400)","var(--ds-gray-400)"]])},4006531,e=>{"use strict";var t=e.i(991605),a=e.i(4405391);e.s(["sizeFormatter",0,function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(!(0,a.isNumber)(e))return"–";let s=(0,t.default)(e,{maximumFractionDigits:"short"===i?0:r,minimumFractionDigits:2!==r?r:void 0});return"short"===i&&s.length<5?(0,t.default)(e,{maximumFractionDigits:r}):s}])},157972,e=>{"use strict";var t=e.i(7338866);e.s(["scalePoint",()=>t.default])},1878918,e=>{"use strict";var t=e.i(847684),a=e.i(6401841),i=e.i(7185353);e.s(["PieChart",0,function(e){let{value:r}=e,s=(0,i.useMemo)(()=>0===r?0:r<.05?.05:r>1?1:r,[r]);return(0,i.useMemo)(()=>r>1,[r])?(0,t.jsx)("span",{className:"flex flex-col items-center justify-center flex-initial",style:{width:18,height:18},children:(0,t.jsx)(a.Stop,{color:"red-700",size:16})}):(0,t.jsx)("span",{className:"flex flex-col items-center justify-center flex-initial",style:{width:18,height:18},children:(0,t.jsxs)("svg",{height:16,viewBox:"0 0 20 20",width:16,children:[(0,t.jsx)("circle",{cx:"10",cy:"10",fill:"var(--accents-1)",r:"9",stroke:"var(--accents-4)",strokeWidth:1.25}),(0,t.jsx)("circle",{cx:"10",cy:"10",fill:"transparent",r:"5",stroke:"var(--accents-4)",strokeDasharray:`calc(${s} * 31.415) 31.415`,strokeWidth:"8.5",transform:"rotate(-90) translate(-20)"})]})})}])},7752924,266062,e=>{"use strict";var t=e.i(847684),a=e.i(5255926),i=e.i(5468328),r=e.i(5169576),s=e.i(57106),l=e.i(9668517),n=e.i(4011256),o=e.i(7712782),c=e.i(1878918),d=e.i(5074599),u=e.i(4006531),x=e.i(6493958);let h=e=>t=>"bytes"===e.trim().toLowerCase()?(0,u.sizeFormatter)(t):["$","usd","us dollars","dollars","dollar","us$"].includes(e.trim().toLowerCase())?`$ ${(0,x.countFormatter)(Math.round(100*t)/100,"long")}`:`${(0,x.countFormatter)(Math.round(100*t)/100,"short-precision")} ${e}`;function f(e){return(0,t.jsx)("p",{className:"text-[13px] font-medium leading-[16px] text-gray-900",children:e.children})}function p(e){var a,i;let r=e.usage.periodValue/(e.usage.planValue??1),s=0===r?0:Math.max(r,.02);return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1.5 flex-initial shrink-0",children:[(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-1.5 flex-initial",children:(0,t.jsx)("p",{className:"text-[13px] font-medium leading-[16px] text-gray-900 capitalize",children:e.usage.name})}),(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start flex-initial gap-1",children:[e.usage.planValue?(0,t.jsx)(c.PieChart,{value:s}):null,(0,t.jsx)("p",{className:"text-copy-14",children:(a=e.usage.periodValue,h(e.usage.units)(a))}),e.usage.planValue?(0,t.jsx)("p",{className:"text-copy-14 text-gray-800",children:`/ ${(i=e.usage.planValue,h(e.usage.units)(i))}`}):null]})]})}function m(e){let a=(0,l.useTeamSlug)();if(e.resource.capabilities?.billable===!1)return(0,t.jsx)(t.Fragment,{});let c=e.resource.billingPlan,u=e.resource.billingDataV2,x=u?.credit,h=u?.spending;if(x||c?.type==="prepayment")return(0,t.jsx)(t.Fragment,{children:e.resource.product.integration.supportsInstallationBillingPlans?(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1.5 flex-initial shrink-0",children:[(0,t.jsx)(f,{children:"Balance"}),(0,t.jsxs)(s.Link,{href:(0,n.getInstallationDetailsLink)({teamSlug:a??"",configurationId:e.resource.product.integrationConfigurationId,integrationSlug:e.resource.product.integration.slug,isMarketplace:!0,path:"usage"}),children:["See ",(0,d.getInstallationTitleBySlug)(e.resource.product)]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1.5 flex-initial shrink-0",children:[(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-1.5 flex-initial",children:[(0,t.jsx)(f,{children:"Balance"}),(0,t.jsx)(i.Tooltip,{text:(0,t.jsxs)("p",{className:"text-copy-14",children:["See"," ",(0,t.jsx)(s.Link,{href:e.usagePath,underline:!0,children:"Usage"})," ","for details"]}),children:(0,t.jsx)(r.Information,{color:"gray-900"})})]}),x?(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-0.5 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14 inline",children:[(0,n.formatMarketplaceBillingTotal)(x.balanceTotalCent/100),(0,t.jsxs)("p",{className:"text-copy-14 text-gray-800 inline",children:[" ","as of"," ",(0,o.ago)(Date.now()-new Date(x.timestamp).getTime())]})]}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-800",children:" / "}),(0,t.jsx)(s.Link,{href:`${e.settingsLink}#credit-balance`,children:(0,t.jsx)("div",{className:"rounded-md border border-solid border-gray-500 px-[6px] py-0 text-sm ",children:(0,t.jsx)("span",{className:"text-copy-14 text-gray-900",children:"Add funds"})})})]}):(0,t.jsx)(s.Link,{href:`${e.settingsLink}#credit-balance`,children:(0,t.jsx)("div",{className:"rounded-md border border-solid border-gray-500 px-[6px] py-0 text-sm ",children:(0,t.jsx)("span",{className:"text-copy-14 text-gray-900",children:"Add funds"})})})]})});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1.5 flex-initial shrink-0",children:[(0,t.jsx)(f,{children:"Plan"}),(0,t.jsx)("p",{className:"text-copy-14",children:e.resource.billingPlan?.name})]}),e.resource.product.integration.supportsInstallationBillingPlans?(0,t.jsx)(t.Fragment,{children:p()}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1.5 flex-initial shrink-0",children:[(0,t.jsx)(f,{children:"Current Period"}),(0,t.jsx)("p",{className:"text-copy-14",children:h?(0,n.formatMarketplacePeriod)(h.periodStart,h.periodEnd):"-"})]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1.5 flex-initial shrink-0",children:[p(),(0,t.jsx)("p",{className:"text-copy-14",children:h?(0,n.formatMarketplaceBillingTotal)(h.totalCent/100):"-"})]})]})]});function p(){return e.resource.product.integration.supportsInstallationBillingPlans?(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1.5 flex-initial shrink-0",children:[(0,t.jsx)(f,{children:"Period Total"}),(0,t.jsxs)(s.Link,{className:"leading-[20px]",href:(0,n.getInstallationDetailsLink)({teamSlug:a??"",configurationId:e.resource.product.integrationConfigurationId,integrationSlug:e.resource.product.integration.slug,isMarketplace:!0,path:"settings"}),children:["See ",(0,d.getInstallationTitleBySlug)(e.resource.product)]})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-1.5 flex-initial",children:[(0,t.jsx)(f,{children:"Period Total"}),(0,t.jsx)(i.Tooltip,{text:h?(0,t.jsx)("p",{className:"text-copy-14",children:(0,t.jsx)(s.Link,{className:"leading-[20px]",href:e.usagePath,children:"See Usage for details"})}):(0,t.jsx)("p",{className:"text-copy-14",children:"No data available yet for the current period"}),children:(0,t.jsx)(r.Information,{color:"gray-900"})})]})})}}e.s(["formatUsageValueByUnit",0,h],266062);e.s(["ResourceUsageMetrics",0,function(e){let i=e.resource?.billingDataV2,r=i?.usage?.items;return(0,t.jsxs)(t.Fragment,{children:[e.resource?(0,t.jsx)(m,{resource:e.resource,settingsLink:e.settingsLink,usagePath:e.usagePath}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-1.5 flex-initial shrink-0",children:(0,t.jsx)(a.Skeleton,{boxHeight:20,height:16,vcenter:!0,width:200})})}),r?.map(e=>(0,t.jsx)(p,{usage:e},`${e.name}_${e.units}`))]})}],7752924)},3467212,e=>{e.v({locked:"index-module__8QoHLa__locked",tooltip:"index-module__8QoHLa__tooltip"})},8719390,e=>{e.v({"auto-visibility":"chart-container-module__ANdnOW__auto-visibility",container:"chart-container-module__ANdnOW__container",figure:"chart-container-module__ANdnOW__figure"})},2892045,e=>{e.v({colorDot:"legend-module__1rStOa__colorDot",title:"legend-module__1rStOa__title"})},2593092,e=>{e.v({bar:"bar-chart-module__h5ayfW__bar","bar-overlay":"bar-chart-module__h5ayfW__bar-overlay",chartContent:"bar-chart-module__h5ayfW__chartContent",chartWrapper:"bar-chart-module__h5ayfW__chartWrapper"})},2815631,1091997,5225151,2800132,e=>{"use strict";var t=e.i(847684),a=e.i(7185353),i=e.i(6881349),r=e.i(8161149),s=e.i(57106),l=e.i(5338940),n=e.i(7275883),o=e.i(4011256),c=e.i(7909933),d=e.i(277234),u=e.i(4244280),x=e.i(5779481),h=e.i(4400915),f=e.i(8521780),p=e.i(6856435),m=e.i(8125826),g=e.i(8522445),j=e.i(8545185),v=e.i(5158601),y=e.i(8295952),b=e.i(3489437),k=e.i(2480776),N=e.i(157972);function M(e){let{data:t=[],width:i,range:r,keys:s,colors:l,granularity:n}=e,o=t.map(e=>{let{date:t}=e;return t}),{valueScale:c,tickXValues:d,tickYValues:u}=(0,a.useMemo)(()=>{let e=Math.round(o.length/(i<480?3:i<720||"hour"===n?4:8));return{valueScale:(0,b.scaleLinear)({domain:[0,r],range:[200,0],clamp:!0}),tickXValues:o.length<=3?o:o.filter((t,a)=>a%e==e>>1),tickYValues:0===r?[0]:[0,r/5,2*r/5,3*r/5,4*r/5,r]}},[o,n,r,i]);return{valueScale:c,colorScale:(0,a.useMemo)(()=>(0,k.scaleOrdinal)({domain:s,range:l}),[l,s]),tickYValues:u,tickXValues:d}}var w=e.i(3513482),T=e.i(1924179),C=e.i(7385039),S=e.i(9982408),L=e.i(3467212);let _=e=>{let{left:a,top:i,containerWidth:r,children:s}=e,l="-50%",n="0",o="0";if(void 0!==a){let{innerWidth:e}=window,t=a+(e<741?-150:0)+(e-r)/2,i=e-t-300;t<0&&(l=-t/3-50+"%",n=`calc(${t/3+50}% - 8px)`,o="unset"),i<0&&(l=i/3-50+"%",n="unset",o=`calc(${i/3+50}% - 8px)`)}let c=(0,S.useSpring)({left:a,top:i,transform:`translate3d(${l}, -100%, 0)`,config:{mass:.05,tension:400,friction:30}});return(0,t.jsx)(C.animated.div,{className:L.default.tooltip,style:{...c,"--arrow-left":n,"--arrow-right":o},children:s})};var I=e.i(3851902);function D(){let{tooltipOpen:e,tooltipLeft:t,tooltipTop:i,tooltipData:r,hideTooltip:s,showTooltip:l}=(0,T.useTooltip)(),n=(0,a.useRef)(null),o=(0,a.useCallback)(()=>{n.current=window.setTimeout(()=>{s()},200)},[s]);return{tooltipData:r,showTooltip:l,hideTooltip:o,cancelHideTooltip:(0,a.useCallback)(()=>{n.current&&(clearTimeout(n.current),n.current=null)},[]),usageTooltipProps:{isOpen:e,left:t,top:i,data:r,hide:o}}}let P=(0,a.memo)(function(e){let{isOpen:a,width:i,left:r,top:s,data:l,formatter:n}=e;if(!a||!l)return null;let{date:o,records:c}=l.data;return(0,t.jsx)(_,{containerWidth:i,left:r,top:s,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial p-4",children:[Object.keys(c).map(e=>(0,t.jsxs)("p",{className:"text-[14px] leading-[20px] font-medium",children:[e," - ",n(c[e])]},e)),(0,t.jsx)("p",{className:"text-copy-14",children:(0,I.formatFullDateWithRange)(o)})]})})});var O=e.i(3518484),B=e.i(1777823),$=e.i(6578653),F=e.i(9134700),W=e.i(9722978),R=e.i(5255926);function V(){return(0,t.jsx)(R.Skeleton,{height:234,style:{marginTop:5},width:"100%"})}var H=e.i(8719390);function A(e){let{chartRef:i,chartScales:{dateScale:r,valueScale:s},children:l,formatter:n,loading:o,tickXValues:c,tickYValues:d,usageTooltip:{cancelHideTooltip:u,hideTooltip:x,usageTooltipProps:h},width:f}=e,p=(0,a.useRef)(null),m=(0,a.useRef)(null);return o?(0,t.jsx)(V,{}):(0,t.jsxs)("figure",{className:H.default.figure,onMouseEnter:u,onMouseLeave:x,ref:i,style:{visibility:f?"visible":"hidden"},children:[(0,t.jsxs)("div",{className:(0,W.clsx)(H.default.container,H.default["auto-visibility"]),children:[(0,t.jsx)("svg",{height:227,width:m.current?m.current.getBBox().width:50,ref:m,children:(0,t.jsx)($.AxisLeft,{hideAxisLine:!0,hideTicks:!0,left:8,scale:s,tickFormat:e=>n(e),tickLabelProps:()=>({fill:"var(--accents-5)",fontSize:14,textAnchor:"start"}),tickValues:d,top:5})}),(0,t.jsxs)("svg",{height:227,ref:p,width:"calc(100% - 50px)",children:[(0,t.jsx)(B.AxisBottom,{hideAxisLine:!0,hideTicks:!0,scale:r,tickFormat:e=>(0,I.formatDate)(e),tickLabelProps:()=>({fill:"var(--accents-5)",fontSize:14,textAnchor:"middle"}),tickValues:c,top:200}),(0,t.jsx)(F.GridRows,{scale:s,stroke:"var(--accents-2)",tickValues:d,width:p.current?p.current.clientWidth-20:400,left:20}),(0,t.jsx)(O.Group,{children:l})]})]}),(0,t.jsx)(P,{...h,formatter:n,width:f})]})}var U=e.i(2892045);function z(e){let{title:a,color:i,value:r,formatter:l,suffix:n,linkMapper:o}=e;return(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-between flex-initial",children:[(0,t.jsxs)("p",{className:`text-heading-14 ${U.default.title}`,title:a,children:[(0,t.jsx)("span",{className:U.default.colorDot,style:{background:i}}),o?(0,t.jsx)(s.Link,{href:o(a),children:a}):a]}),r?(0,t.jsx)("p",{className:"text-copy-14",title:a,children:`${n??""}: ${l(r)}`}):null]})}var E=e.i(2593092);function G(e){let i,{chartData:r=[],formatter:s,title:l,description:n,legendSuffix:o,linkMapper:c}=e,[d,{width:u}]=(0,g.default)(),{range:x,keys:y}=(0,a.useMemo)(()=>{let e=Object.keys(r[0].records),t=r.reduce((t,a)=>[...t,e.reduce((e,t)=>Math.max(e,Number(a.records[t]??0)),0)],[]);return{keys:e,range:Math.max(...t)}},[r]),{colorScale:b,dateScale:k,valueScale:T,tickYValues:C,tickXValues:S}=function(e){let{data:t=[],width:i}=e;return{dateScale:(0,a.useMemo)(()=>{let e=t.map(e=>{let{date:t}=e;return t});return(0,N.scalePoint)({domain:e,range:[0,i-36],padding:.3})},[t,i]),...M(e)}}({data:r,width:u,range:x,keys:y,colors:w.defaultMetricColors}),{usageTooltipProps:L,tooltipData:_,showTooltip:I,hideTooltip:P,cancelHideTooltip:O}=D(),B=(0,a.useMemo)(()=>{let e,t,a;return e=k.domain(),t=k(e[0])??0,a=k.step(),i=>Math.max(0,Math.min(Math.round((i-t)/a),e.length-1))},[k]),$=(0,a.useMemo)(()=>Object.fromEntries(y.map(e=>{let t=r.map(t=>t.records[e]).filter(e=>void 0!==e);return[e,t.at(-1)]})),[y,r]),F=(0,a.useCallback)(e=>{let t;O();let{x:a,y:i}=(0,j.localPoint)(e)||{x:0,y:0},s=B(a),l=r[s],n=Object.values(l.records).filter(e=>"number"==typeof e).sort((e,t)=>e-t);if(!n.length)return;let o=T.invert(i),c=(t=n.length-1,(0,m.bisector)(e=>e).left(n,o,0,t));if(_&&s===_.index&&c===_.yIndex)return;let d=(T(n[c])||0)-22,u=(k(l.date)||0)+50;I({tooltipData:{data:l,index:s,yIndex:c},tooltipLeft:u,tooltipTop:d})},[O,r,k,B,I,_,T]);return void 0!==L.left&&(i=B(L.left-50)),(0,t.jsxs)("div",{className:(0,W.default)("flex flex-col items-stretch justify-start flex-initial",E.default.chartWrapper),children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial p-6",children:[(0,t.jsx)("p",{className:"text-heading-16 capitalize",children:l}),(0,t.jsx)("p",{className:"text-copy-14",children:n})]}),(0,t.jsx)("div",{className:(0,W.default)("flex flex-col items-stretch justify-start flex-initial p-6",E.default.chartContent),children:(0,t.jsxs)(A,{chartRef:d,chartScales:{dateScale:k,valueScale:T},formatter:s,loading:!1,tickXValues:S,tickYValues:C,usageTooltip:{cancelHideTooltip:O,hideTooltip:P,usageTooltipProps:L},width:u,children:[void 0!==L.left&&(0,t.jsx)(f.Line,{from:{x:L.left-50,y:0},pointerEvents:"none",stroke:"var(--accents-2)",strokeWidth:1,to:{x:L.left-50,y:200}}),y.map(e=>{let a=b(e),s=r.map(t=>({date:t.date,value:t.records[e]})),l="number"==typeof i?s[i]?.value:void 0,n=void 0!==l?T(l):void 0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.LinePath,{curve:v.curveLinear,data:r,stroke:a,strokeWidth:2,x:e=>{let{date:t}=e;return k(t)??0},y:t=>T(t.records[e]??0)}),void 0!==L.left&&void 0!==n&&(0,t.jsx)("circle",{cx:L.left-50,cy:n,fill:a,pointerEvents:"none",r:4,stroke:"white",strokeWidth:2}),(0,t.jsx)(h.Bar,{fill:"transparent",height:200,onMouseMove:F,onTouchMove:F,rx:0,width:u,x:0,y:0})]})})]})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial p-6",children:y.map(e=>(0,t.jsx)(z,{color:b(e),formatter:s,linkMapper:c,suffix:o,title:e,value:$[e]},e))})]})}e.s(["MarketplaceLineChart",0,G],1091997);var X=e.i(9522361);function Y(e){let{chartData:i=[],formatter:r,title:s,description:l,legendSuffix:n,linkMapper:o}=e,[c,{width:d}]=(0,g.default)(),{range:u,keys:x}=(0,a.useMemo)(()=>{let e=Object.keys(i[0].records),t=i.reduce((t,a)=>[...t,e.reduce((e,t)=>e+a.records[t]?Number(a.records[t]):0,0)],[]);return{keys:e,range:Math.max(...t)}},[i]),{valueScale:h,dateScale:f,tickYValues:p,tickXValues:m,colorScale:v}=function(e){let{data:t=[],width:i}=e;return{dateScale:(0,a.useMemo)(()=>{let e=t.map(e=>{let{date:t}=e;return t});return(0,y.scaleBand)({domain:e,range:[0,i-36],padding:.4375,paddingOuter:.3})},[t,i]),...M(e)}}({data:i,width:d,range:u,keys:x,colors:w.defaultMetricColors}),{usageTooltipProps:b,tooltipData:k,showTooltip:N,hideTooltip:T,cancelHideTooltip:C}=D();return(0,t.jsxs)("div",{className:(0,W.default)("flex flex-col items-stretch justify-start flex-initial",E.default.chartWrapper),children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial p-6",children:[(0,t.jsx)("p",{className:"text-heading-16 capitalize",children:s}),(0,t.jsx)("p",{className:"text-copy-14",children:l})]}),(0,t.jsx)("div",{className:(0,W.default)("flex flex-col items-stretch justify-start flex-initial p-6",E.default.chartContent),children:(0,t.jsx)(A,{chartRef:c,chartScales:{dateScale:f,valueScale:h},formatter:r,tickXValues:m,tickYValues:p,usageTooltip:{cancelHideTooltip:C,hideTooltip:T,usageTooltipProps:b},width:d,children:(0,t.jsx)(X.BarStack,{color:v,data:i,keys:x,value:(e,t)=>e.records[t]??0,x:e=>{let{date:t}=e;return t},xScale:f,yScale:h,children:e=>[e[e.length-1]?.bars.map(a=>(0,t.jsx)("rect",{className:E.default["bar-overlay"],height:h(0),onMouseMove:()=>{if(!k||a.index!==k.index){let e=Math.round((h(a.bar[1])||0)-22),t=Math.round(a.x+50+a.width/2);N({tooltipData:{data:a.bar.data,index:a.index,yIndex:0},tooltipTop:e,tooltipLeft:t})}},onTouchMove:t=>{C();let{x:i}=(0,j.localPoint)(t)||{x:0},r=~~(i/(a.width/.5625)),s=e[e.length-1].bars[r];if(s&&(!k||s.index!==k.index)){let e=Math.round((h(s.bar[1])||0)-22),t=Math.round(s.x+50+s.width/2);N({tooltipData:{data:s.bar.data,index:r,yIndex:0},tooltipTop:e,tooltipLeft:t})}},width:a.width/.5625,x:a.x-.4375*a.width*.5/.5625,y:0},`bar-stack-${a.index}-overlay`)),...e.map(e=>e.bars.map(a=>(0,t.jsx)("rect",{className:E.default.bar,fill:a.color,height:a.height,width:a.width,x:a.x,y:a.y},`bar-stack-${e.index}-${a.index}`)))]})})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial p-6",children:x.map(e=>(0,t.jsx)(z,{color:w.defaultMetricColors[x.indexOf(e)],formatter:r,linkMapper:o,suffix:n,title:e,value:i.reduce((t,a)=>t+a.records[e],0)},e))})]})}function K(e){return(0,t.jsxs)("div",{className:(0,W.default)("flex flex-col items-stretch justify-start flex-initial",E.default.chartWrapper),children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial p-6",children:[e.title?(0,t.jsx)("p",{className:"text-heading-16 capitalize",children:e.title}):(0,t.jsx)(R.Skeleton,{boxHeight:24,height:24,width:120}),e.description?(0,t.jsx)("p",{className:"text-copy-14",children:e.description}):(0,t.jsx)(R.Skeleton,{boxHeight:20,height:20,width:220})]}),(0,t.jsx)("div",{className:(0,W.default)("flex flex-col items-stretch justify-start flex-initial p-6",E.default.chartContent),children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial pt-6 pb-3",children:(0,t.jsx)(R.Skeleton,{height:227,width:"calc(100% - 50px)"})})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial p-6",children:[...Array(e.dimensions).keys()].map(e=>(0,t.jsx)(R.Skeleton,{boxHeight:20,height:16,width:180},e))})]})}e.s(["MarketplaceBarChart",0,Y,"MarketplaceChartPlaceholder",0,K],5225151);var Q=e.i(266062),q=e.i(5074599);e.i(3092247);var J=e.i(397510);e.s(["ResourceUsageCharts",0,function(e){var h;let{resourceId:f}=e,{data:p}=(0,x.useResourceItem)({resourceId:f}),m=p?.store,g=!m||m.product.integration.supportsInstallationBillingPlans,{team:j}=(0,l.useTeam)(),[v,y]=(0,a.useState)("week"),{data:b}=(h=m&&j?{integrationConfigurationId:m.product.integrationConfigurationId,resourceId:m.id,teamId:j.id,period:v}:null,(0,c.default)(()=>{if(!h)return null;let{integrationConfigurationId:e,resourceId:t,teamId:a,period:i}=h,r=new URLSearchParams;return r.append("teamId",a),r.append("period",i),`${u.API_INTEGRATION_CONTROLLER}/installations/${e}/resources/${t}/billing/data/series?${r.toString()}`},d.fetchAPI)),k=(0,a.useMemo)(()=>{if(!m||!b)return;let e=b.credit?.balanceTotalCent.length?b.credit.balanceTotalCent.map(e=>({records:{[m.name]:e.value/100},date:new Date(e.timestamp).getTime()})):void 0,t=b.spending?.totalCent.length?b.spending.totalCent.map(e=>({records:{[m.name]:e.value/100},date:new Date(e.timestamp).getTime()})):void 0,a=b.usage?b.usage.byMetrics.map(e=>({metric:e,data:e.usageItems.map(e=>({records:{[m.name]:e.value},date:new Date(e.timestamp).getTime()}))})):void 0;return{noData:!e&&!t&&!a,prepayment:e,subscription:t,usageByMetric:a}},[m,b]);return m&&k?k.noData?g?(0,t.jsx)(r.EmptyState.Root,{description:(0,t.jsxs)(t.Fragment,{children:["Usage tracking is available at the organization level."," ",(0,t.jsxs)(s.Link,{variant:"primary",href:j?(0,o.getInstallationDetailsLink)({teamSlug:j.slug,configurationId:m.product.integrationConfigurationId,integrationSlug:m.product.integration.slug,isMarketplace:!0,path:"usage"}):"",children:["See"," ",(0,q.getInstallationTitleBySlug)({slug:m.product.integration.slug})]})]}),icon:(0,t.jsx)(r.EmptyState.Icon,{icon:(0,t.jsx)(n.ChartBarPeak,{size:32})})}):(0,t.jsx)(r.EmptyState.Root,{description:"edgedb"===m.product.integration.slug?"There are no data available yet for this period.":"Usage tracking is not yet available for this service.",icon:(0,t.jsx)(r.EmptyState.Icon,{icon:(0,t.jsx)(n.ChartBarPeak,{size:32})}),title:"No data available",children:(0,t.jsx)(J.OpenInPartnerDashboardButton,{componentType:"button",buttonVariant:"secondary",integrationConfigurationId:m.product.integrationConfigurationId,label:`See usage in ${m.product.integration.name}`,teamIdOrSlug:j?.id,path:"usage"})}):(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-5 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-heading-20",children:"Usage Report"}),(0,t.jsxs)(i.Combobox,{clearable:!1,noInputPrefix:!0,onChange:e=>{e&&y(e)},value:v,width:140,children:[(0,t.jsx)(i.Combobox.Input,{}),(0,t.jsxs)(i.Combobox.List,{children:[(0,t.jsx)(i.Combobox.Option,{value:"week",children:"Last 7 days"}),(0,t.jsx)(i.Combobox.Option,{value:"month",children:"Last month"}),(0,t.jsx)(i.Combobox.Option,{value:"year",children:"Last year"})]})]})]}),m.product.integration.supportsInstallationBillingPlans?null:(0,t.jsxs)(t.Fragment,{children:[k.prepayment?(0,t.jsx)(G,{chartData:k.prepayment,description:"This chart shows the balance over time.",formatter:o.formatMarketplaceBillingTotal,legendSuffix:"Balance",title:"Balance"}):null,k.subscription?(0,t.jsx)(G,{chartData:k.subscription,description:"This chart shows the cost over time.",formatter:o.formatMarketplaceBillingTotal,legendSuffix:"Total Cost",title:"Total Cost"}):null]}),k.usageByMetric?.map(e=>"total"===e.metric.type?(0,t.jsx)(G,{chartData:e.data,description:`This chart shows the ${e.metric.name} over time.`,formatter:(0,Q.formatUsageValueByUnit)(e.metric.units),legendSuffix:`Total ${e.metric.name}`,title:e.metric.name},e.metric.name):(0,t.jsx)(Y,{chartData:e.data,description:`This chart shows the ${e.metric.name} over time.`,formatter:(0,Q.formatUsageValueByUnit)(e.metric.units),legendSuffix:`Total ${e.metric.name}`,title:e.metric.name},e.metric.name))]}):(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-5 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-heading-20",children:"Usage Report"}),(0,t.jsxs)(i.Combobox,{clearable:!1,noInputPrefix:!0,value:"week",width:140,children:[(0,t.jsx)(i.Combobox.Input,{}),(0,t.jsx)(i.Combobox.List,{children:(0,t.jsx)(i.Combobox.Option,{value:"week",children:"Last 7 days"})})]})]}),g?null:(0,t.jsx)(K,{dimensions:1})]})}],2800132),e.i(7752924),e.s([],2815631)}]);

//# debugId=882a357a-11f4-61ad-17e7-b5f7d11de701
//# sourceMappingURL=864ff324e9073fb7.js.map