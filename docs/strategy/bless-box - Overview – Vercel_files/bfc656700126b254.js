;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="9cbd0d5c-69a5-71a1-17d1-fdb1bf5fab84")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,916685,e=>{"use strict";var t=e.i(7946377),s=e.i(9567020),a=e.i(1138941),i=e.i(8042625),r=e.i(277234),n=e.i(5338940),l=e.i(2415772),o=e.i(7185353),c=e.i(7909933),d=e.i(9928621),u=e.i(188217),p=e.i(9576722);let m={keepPreviousData:!0,shouldRetryOnError:e=>403!==(e.statusCode||e.status)},x=(e,s)=>{let{range:l,filter:d,environment:u,limit:x=250,pause:h,jsonProperty:y,...f}=e,{isReady:g,team:j}=(0,n.useTeam)(),v=(0,a.useProjectIdOrName)(),{isEnabled:b,isLoading:S}=(0,p.useWebAnalyticsStatus)(),N=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.encode)({from:l.from.toISOString(),to:l.to.toISOString(),tz:(0,t.getClientTimezone)(),teamId:j?.id,projectId:v,filter:JSON.stringify(d),environment:u,limit:x,jsonProperty:y,...f,...e})},[u,d,x,v,l.from,l.to,y,f,j?.id]),A="/api/web-analytics/stats",w=(0,o.useCallback)(async e=>{let{type:t,search:s}=e,a=await (0,r.fetchAPI)(`${A}${N({type:t,search:s})}`,{throwOnHTTPError:!0});if(Array.isArray(a.data))for(let e of a.data)e.jsonProperty=y;return a},[A,N,y]),{data:T,isLoading:C}=(0,c.default)(g&&b&&!S&&!h?`${A}${N()}`:"",e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),{...m,...s});return{data:(0,o.useMemo)(()=>(T?.data||[]).map(e=>({...e,jsonProperty:y})),[T,y]),isLoading:!g||C||S,searchTopStats:w}};e.s(["useAsyncSearchTopStats",0,()=>{let{hasData:e}=(0,d.useWebAnalyticsContext)(),[t]=(0,s.useWebAnalyticsQueryState)(),a=(0,u.useGenericOptions)(),{searchTopStats:i}=x({type:t.client_type,...a},{fallbackData:e?void 0:{data:[]}});return(0,o.useCallback)(async(e,t)=>(await i({search:e,type:t})).data,[i])},"useOverviewData",0,(e,s)=>{let{range:l,filter:o,environment:d}=e,{isReady:u,team:x}=(0,n.useTeam)(),h=(0,a.useProjectIdOrName)(),{isEnabled:y,isLoading:f}=(0,p.useWebAnalyticsStatus)();return(0,c.default)(u&&y&&!f?`/api/web-analytics/overview${(0,i.encode)({from:l.from.toISOString(),to:l.to.toISOString(),tz:(0,t.getClientTimezone)(),teamId:x?.id,projectId:h,filter:JSON.stringify(o),environment:d})}`:"",e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),{...m,...s})},"useRealtimeData",0,(e,t)=>{let{filter:s,environment:l}=e,{isReady:o,team:d}=(0,n.useTeam)(),u=(0,a.useProjectIdOrName)(),{isEnabled:x,isLoading:h}=(0,p.useWebAnalyticsStatus)();return(0,c.default)(o&&x&&!h?`/api/web-analytics/realtime${(0,i.encode)({teamId:d?.id,projectId:u,filter:JSON.stringify(s),environment:l})}`:"",e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),{...m,...t})},"useTimeseriesData",0,(e,s,l)=>{let{range:d,filter:u,environment:x,groupBy:h,jsonProperty:y}=e,{isReady:f,team:g}=(0,n.useTeam)(),j=(0,a.useProjectIdOrName)(),{isEnabled:v,isLoading:b}=(0,p.useWebAnalyticsStatus)(),{data:S,isLoading:N}=(0,c.default)(f&&v&&!b&&!s.pause?`/api/web-analytics/timeseries${(0,i.encode)({from:d.from.toISOString(),to:d.to.toISOString(),tz:(0,t.getClientTimezone)(),teamId:g?.id,projectId:j,groupBy:h,filter:JSON.stringify(u),jsonProperty:y,environment:x})}`:"",e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),{...m,...l}),A=(0,o.useMemo)(()=>({groupCount:1,groups:{all:s.showPlaceholder?[76,73,80,75,40,56,58,60,65,56,52,48,34,40,40,35,33,25,30,16,12,10].map(e=>e/5).map((e,t)=>({key:new Date(Date.now()-24*t*36e5).toISOString().slice(0,10),devices:1e3*e,total:1e4*e,bounceRate:50})).reverse():[]}}),[s.showPlaceholder]);return{data:S?.data??A,isLoading:!f||N}},"useTopStatsData",0,x,"useUserEvents",0,(e,t)=>{let{range:s,filter:o,environment:d,userId:u}=e,{isReady:x,team:h}=(0,n.useTeam)(),y=(0,a.useProjectIdOrName)(),{isEnabled:f,isLoading:g}=(0,p.useWebAnalyticsStatus)(),j=(0,c.default)(x&&f&&!g&&u&&""!==u?`/api/web-analytics/users/${u}/events${(0,i.encode)({from:s.from.toISOString(),to:s.to.toISOString(),teamId:h?.id,projectId:y,filter:JSON.stringify(o),environment:d})}`:"",e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),{shouldRetryOnError:m.shouldRetryOnError,...t});return{isLoading:j.isLoading,data:{events:j.data?.events.map(e=>({...e,timestamp:(0,l.fromTbDateTimeString)(e.timestamp)}))||[]}}},"useUserList",0,(e,t)=>{let{range:s,filter:o,environment:d}=e,{isReady:u,team:x}=(0,n.useTeam)(),h=(0,a.useProjectIdOrName)(),{isEnabled:y,isLoading:f}=(0,p.useWebAnalyticsStatus)(),g=(0,c.default)(u&&y&&!f?`/api/web-analytics/users/list${(0,i.encode)({from:s.from.toISOString(),to:s.to.toISOString(),teamId:x?.id,projectId:h,filter:JSON.stringify(o),environment:d})}`:"",e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),{...m,...t});return{isLoading:g.isLoading,data:{users:g.data?.users.map(e=>({...e,lastActivity:(0,l.fromTbDateTimeString)(e.lastActivity)}))||[]}}}])},7944103,e=>{"use strict";var t=e.i(847684),s=e.i(7300),a=e.i(7433697),i=e.i(709626),r=e.i(1649649),n=e.i(9567020),l=e.i(2979333),o=e.i(4394132),c=e.i(9031150),d=e.i(7432042),u=e.i(7185353),p=e.i(9928621),m=e.i(916685),x=e.i(5307161),h=e.i(188217),y=e.i(9576722);function f(){let e=(0,x.useBillingPlan)(),{isPlus:f}=(0,r.useIsWebAnalyticsBilling)(),{period:g,range:j}=(0,h.useTimeSelection)(e,"webAnalyticsPlans",f),{hasData:v}=(0,p.useWebAnalyticsContext)(),{setEnvironment:b}=(0,a.useEnvironment)(),[S,N]=(0,n.useWebAnalyticsQueryState)(),{showPlaceholder:A,isEnabled:w,hasData:T,isLoading:C}=(0,y.useWebAnalyticsStatus)();(0,u.useEffect)(()=>{!C&&(T||b("all"))},[T,w,C,b]);let{filter:k}=(0,i.useWebAnalyticsFilter)(),P=k.event_name&&!(0,n.isPropertiesFilterValue)(k.event_name)?k.event_name.values[0]:void 0,I=(0,h.useGenericOptions)(),{data:_}=(0,m.useOverviewData)(I,{refreshInterval:(0,d.default)("10s"),fallbackData:v?void 0:{devices:0,total:0}}),{data:D}=(0,m.useOverviewData)({...I,range:(0,h.getDateRangeBefore)(j)},{revalidateOnFocus:!1}),L=S.tab;return(0,t.jsxs)(s.Tabs,{children:[(0,t.jsx)(s.Tab,{active:L===o.AnalyticsType.Visitors,label:"Visitors",loading:!_||A,onClick:(0,c.withAwaitPaint)(()=>N({tab:o.AnalyticsType.Visitors})),period:g,trend:D&&_?(0,l.getPercentageTrend)(D.devices,_.devices):void 0,value:A?0:_?.devices??0}),(0,t.jsx)(s.Tab,{active:L===o.AnalyticsType.TotalCount,label:P||"Page Views",loading:!_||A,onClick:(0,c.withAwaitPaint)(()=>N({tab:o.AnalyticsType.TotalCount})),period:g,trend:D&&_?(0,l.getPercentageTrend)(D.total,_.total):void 0,value:A?0:_?.total??0}),(0,t.jsx)(s.Tab,{active:L===o.AnalyticsType.BounceRate,className:"!border-r",label:"Bounce Rate",loading:!_||A,onClick:(0,c.withAwaitPaint)(()=>N({tab:o.AnalyticsType.BounceRate})),period:g,trend:D&&_?(0,l.getPercentageTrend)(D.bounceRate,_.bounceRate,{isPercent:!0,isNegativeGood:!0}):void 0,value:A?0:_?.bounceRate??0,valueSuffix:(0,t.jsx)("span",{children:"%"})})]})}function g(){return(0,t.jsxs)(s.Tabs,{children:[(0,t.jsx)(s.Tab,{active:!1,label:"Visitors",loading:!0,period:"7d",value:0}),(0,t.jsx)(s.Tab,{active:!1,label:"Page Views",loading:!0,period:"7d",value:0}),(0,t.jsx)(s.Tab,{active:!1,className:"!border-r",label:"Bounce Rate",loading:!0,period:"7d",value:0,valueSuffix:(0,t.jsx)("span",{children:"%"})})]})}e.s(["CategoryTabs",0,function(){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(g,{}),children:(0,t.jsx)(f,{})})}])},2296385,e=>{"use strict";var t=e.i(9567020);e.s(["useFilterHostname",0,function(){let[e]=(0,t.useWebAnalyticsQueryState)();return e.filter.hostname&&"values"in e.filter.hostname?e.filter.hostname.values[0]:null}])},7320407,9547191,3663372,449488,e=>{"use strict";var t=e.i(847684),s=e.i(5074502),a=e.i(60582),i=e.i(5343305),r=e.i(8238875),n=e.i(215852),l=e.i(1905601);function o(){let e=(0,r.useParams)()??{teamSlug:"",project:""};return function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,n.useIsomorphicSuspenseSWR)((0,l.getProjectDomainsKey)({teamId:e,projectName:t,...s}),async(e,t)=>(await t(e)).domains,a)}(e.teamSlug,e.project)}e.s(["useCurrentProjectDomains",0,o],9547191);var c=e.i(579135),d=e.i(9239936),u=e.i(4313344),p=e.i(1649649),m=e.i(9567020),x=e.i(3343953),h=e.i(7952834),y=e.i(7917902),f=e.i(6352514),g=e.i(4759942),j=e.i(5255926),v=e.i(1794286),b=e.i(6143247),S=e.i(7185353),N=e.i(5757634),A=e.i(9928621),w=e.i(188217),T=e.i(9576722),C=e.i(7432042),k=e.i(916685),P=e.i(9161090);function I(e){let{hasData:s}=e,[a]=(0,m.useWebAnalyticsQueryState)(),{data:i}=(0,k.useRealtimeData)({..."all"!==a.environment?{environment:a.environment}:{},...a.filter.hostname?{filter:{hostname:a.filter.hostname}}:{}},{refreshInterval:(0,C.default)("5s"),fallbackData:s?void 0:{devices:0}});return(0,t.jsx)("span",{className:"ml-2 inline-block border-0 border-l border-[var(--accents-2)] pl-2",children:(0,t.jsx)(P.VisitorCount,{count:i?.devices||0,loading:!i})})}e.s(["OnlineVisitorCounter",0,I],3663372);var _=e.i(5468328),D=e.i(992159),L=e.i(57106),W=e.i(376725);function F(e){let{hostname:s,children:a,withFavicon:i=!0}=e;return(0,t.jsxs)("span",{className:"flex h-6 flex-row items-center gap-1",children:[(0,t.jsx)(L.Link,{external:!0,href:`https://${s}`,style:{paddingTop:1,gap:2},children:(0,t.jsxs)("span",{className:"flex flex-row items-center gap-1",children:[i?(0,t.jsx)(W.Favicon,{url:s},`favicon-${s}`):null,(0,t.jsx)("p",{className:"max-w-80 truncate font-[500] text-gray-1000",children:s})]})}),(0,t.jsx)("span",{className:"flex flex-row items-center",children:a})]})}function O(e){let{domains:s,production:a,filteredDomain:i,children:r}=e,n=i??a??"";return(0,t.jsxs)(F,{hostname:n,children:[i?(0,t.jsx)(D.Filter,{}):(0,t.jsx)(E,{domains:s,production:a}),r]})}function E(e){let{domains:s,production:a}=e;if(!s||s.length<=1||!a)return null;let i=s.filter(e=>e.name!==a).toSorted((e,t)=>e.name.localeCompare(t.name));return(0,t.jsxs)(_.Tooltip,{className:"mt-px cursor-pointer text-xs tracking-wider",delay:!1,maxWidth:"auto",position:"bottom",text:(0,t.jsx)("span",{className:"p4",children:i.map(e=>(0,t.jsx)(F,{hostname:e.name,withFavicon:!1},e.name))}),children:["+",s.length-1]})}var B=e.i(2296385);function U(e){let{domains:s,production:a,children:i}=e,r=(0,B.useFilterHostname)();return(0,t.jsx)(O,{domains:s,filteredDomain:r,production:a,children:i})}function R(){let{hasData:e,microfrontendsDataInDefaultApp:s}=(0,A.useWebAnalyticsContext)(),{data:a}=(0,i.useCurrentDashboardProject)(),{data:r}=o();return(0,t.jsx)(U,{domains:r,production:a.domain||null,children:s?null:(0,t.jsx)(I,{hasData:e})})}e.s(["PageHostnameWithFilter",0,U],449488),e.s(["ControlBar",0,function(){let e=(0,r.useRouter)(),[i,n]=(0,m.useWebAnalyticsQueryState)(),{environment:l}=i,{user:o,team:C}=(0,y.useAccount)(),k=C||o,P=k?.billing?.plan||"hobby",I=(0,c.useCurrentProjectNameAndIdSuspense)(),{mutate:_}=(0,N.useSWRConfig)(),{isEnabled:D}=(0,T.useWebAnalyticsStatus)(),{setUpgradeModalSource:L,microfrontendsDataInDefaultApp:W}=(0,A.useWebAnalyticsContext)(),{isPlus:F}=(0,p.useIsWebAnalyticsBilling)(),O=(0,w.useTimeSelection)(P,"webAnalyticsPlans",F,"7d"),E=(0,S.useMemo)(()=>(0,s.findAvailablePresets)(P,"webAnalyticsPlans",F),[P,F]);return W?null:(0,t.jsxs)("div",{className:"flex flex-col items-start md:items-start lg:items-end justify-center gap-2 flex-initial self-stretch",children:[D?(0,t.jsx)(d.LimitBanner,{onClickUpgrade:()=>{g.analytics.track(f.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:P,projectId:I.id,teamId:C?.id||o?.uid,type:"usage-banner"}),L("limit_banner")}}):null,(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-between gap-4",children:[a.IS_DASH?(0,t.jsx)("div",{className:(0,b.cn)("-mt-1 flex-1",a.IS_DASH&&"pl-1"),children:(0,t.jsx)(S.Suspense,{fallback:(0,t.jsx)(j.Skeleton,{width:100}),children:(0,t.jsx)(R,{})})}):null,(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial -mx-4 md:mx-0",children:[(0,t.jsx)(u.EnvironmentSelector,{environment:l,onChange:e=>{n({environment:e})}}),(0,t.jsx)(v.Calendar,{compact:!0,minValue:O.minAllowedDate,onChange:(e,t)=>{let{start:s,end:a}=e;t?n({period:t}):n({from:new Date(s),to:new Date(a)})},onLockedClick:()=>{g.analytics.track(f.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:P,projectId:I.id,teamId:C?.id||o?.uid,type:"calendar"}),L("calendar")},presetIndex:Object.values(E).findIndex(e=>e.period===O.period),presets:E,value:{start:O.range.from,end:O.range.to},width:"164px"}),a.IS_DASH?null:(0,t.jsx)(x.OptionsMenu,{revalidateFeatureState:()=>{(0,h.revalidateProject)(_,I),e.refresh()}})]})]})]})}],7320407)},7906826,e=>{"use strict";var t=e.i(847684),s=e.i(7185353),a=e.i(5255926),i=e.i(2652226),r=e.i(3663372),n=e.i(449488),l=e.i(5343305),o=e.i(9547191),c=e.i(9928621),d=e.i(7320407),u=e.i(60582);function p(){return(0,t.jsx)(i.default,{buttonsClassName:"self-stretch",dashPreventButtonPortaling:!u.IS_DASH,...!u.IS_DASH?{buttons:(0,t.jsx)(s.Suspense,{fallback:null,children:(0,t.jsx)(d.ControlBar,{})})}:{},description:(0,t.jsx)("div",{className:"-mt-1",children:(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(a.Skeleton,{width:100}),children:(0,t.jsx)(m,{})})}),title:(0,t.jsx)("h1",{className:"text-[32px] leading-[40px] tracking-[-0.79px] font-medium",children:"Web Analytics"})})}function m(){let{hasData:e,microfrontendsDataInDefaultApp:s}=(0,c.useWebAnalyticsContext)(),{data:a}=(0,l.useCurrentDashboardProject)(),{data:i}=(0,o.useCurrentProjectDomains)();return(0,t.jsx)(n.PageHostnameWithFilter,{domains:i,production:a.domain||null,children:s?null:(0,t.jsx)(r.OnlineVisitorCounter,{hasData:e})})}var x=e.i(7087273);function h(e){return(0,t.jsx)(i.default,{buttons:e.cards?(0,t.jsx)(x.Scroller,{childrenContainerClassName:"gap-4",overflow:"x",withButtons:!0,children:e.cards.map(e=>(0,s.createElement)(y,{...e,key:e.title}))}):void 0,buttonsClassName:"flex-1 w-full lg:w-3/5",columnClassName:"flex-1",containerStyle:{marginBottom:"3rem",...e.containerStyle},dashPreventButtonPortaling:!0,description:(0,t.jsx)("span",{className:"flex gap-8",children:(0,t.jsxs)("span",{className:"flex flex-1 flex-col gap-8",children:["string"==typeof e.description?(0,t.jsxs)("p",{className:"text-copy-14",children:[" ",e.description," "]}):e.description,e.children]})}),title:e.title})}function y(e){let{icon:s,title:a,children:i}=e;return(0,t.jsx)("span",{className:"w-80 shrink-0 p-0.5",children:(0,t.jsxs)("div",{className:"flex flex-initial flex-col items-stretch justify-start material-base gap-2 p-6",children:[s,(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium mt-4",children:a}),i]})})}var f=e.i(57106),g=e.i(2504781),j=e.i(2640326),v=e.i(1101517),b=e.i(9658738),S=e.i(3228096),N=e.i(3884708),A=e.i(2375916),w=e.i(2442931),T=e.i(5155984),C=e.i(5468328),k=e.i(8238875);e.i(6483798);var P=e.i(8287059),I=e.i(6000680),_=e.i(7952834),D=e.i(5338940),L=e.i(6891161),W=e.i(455575),F=e.i(5757634),O=e.i(9957872),E=e.i(1438473),B=e.i(1513230);function U(e){let{plan:s,planIteration:a}=e;return(0,t.jsx)(O.ChoiceboxGroup.Item,{contentClassName:"p-2 px-4",description:"Included in your plan",tabIndex:0,title:(0,t.jsxs)("p",{className:"text-[14px] leading-[20px] font-medium",children:["Web Analytics ","hobby"===s?"on Hobby":""]}),value:"included",children:"pro"===s?(0,t.jsx)(B.ProFeatures,{isProPlus:"pro"===s&&"plus"===a}):(0,t.jsx)(B.HobbyFeatures,{})})}var R=e.i(6450656);function M(e){let{currency:s}=e;return(0,t.jsx)(O.ChoiceboxGroup.Item,{contentClassName:"p-2 px-4",description:(0,R.withPricing)("{fee} / month (once for your entire team)",{currency:s}),tabIndex:0,title:(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Web Analytics Plus"}),value:"addon",children:(0,t.jsx)(B.PlusFeatures,{})})}var H=e.i(2924439),G=e.i(2466450);function q(e){let{currency:s}=e;return(0,t.jsx)(O.ChoiceboxGroup.Item,{contentClassName:"p-2 px-4",description:`${(0,G.formatCurrency)(H.pricingMenu.pro.price,s)} / month`,tabIndex:0,title:(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Web Analytics on Pro"}),value:"upgraded",children:(0,t.jsx)(B.ProFeatures,{isProPlus:!0})})}var $=e.i(8914449),V=e.i(6352514),z=e.i(4759942);e.i(1307729);var Q=e.i(7416719);let J="web-analytics-enable-modal",Y={step:"choose",isProcessing:!1,selectedOption:"included"},K=(0,$.create)((e,t)=>({...Y,team:null,projectId:null,plan:"hobby",planIteration:void 0,currency:"USD",isPlusEnabled:!1,isTrialing:!1,setProps:t=>{let{isPlusEnabled:s,team:a,projectId:i,source:r,onSuccess:n,onClose:l,onError:o,upgradeTeamModalStore:c}=t,d=a?.billing?.plan??"hobby",u=a?.billing?.planIteration;e({team:a,projectId:i,plan:d,planIteration:u,source:r,currency:a?.billing?.currency??"USD",isTrialing:"pro"===d&&a?.billing?.status==="trialing",isPlusEnabled:s,onSuccess:n,onError:o,onClose:l,upgradeTeamModalStore:c})},open:async s=>{e(Y);let{isPlusEnabled:a,isProcessing:i,doNext:r,plan:n,onClose:l,onSuccess:o}=t();(!1===s||"enterprise"===n||"pro"===n&&a)&&!i&&(l?.(),await r(),o?.("included"))},select:s=>{let{plan:a,projectId:i}=t();e({selectedOption:s,addOnToBeEnabled:{type:"pro"===a?"webAnalyticsPlus":"webAnalytics",additionalConfigurations:{projectId:i,source:"enable-modal"}}})},startProcessing:()=>e({isProcessing:!0}),stopProcessing:()=>e({isProcessing:!1}),doNext:async()=>{let{addOnToBeEnabled:s,isTrialing:a,onClose:i,onSuccess:r,plan:n,projectId:l,selectedOption:o,step:c,team:d,upgradeTeamModalStore:u,source:p,onError:m}=t();function x(){e({isProcessing:!0})}function h(){e({isProcessing:!1})}if("confirm"===c||"included"===o)try{x(),await (0,Q.enableWebAnalytics)({team:d,projectId:l,withPlus:"addon"===o,source:p}),r?.(o)}catch(e){m?.(e?.message??"Unknown error")}finally{h(),i?.()}else"pro"!==n||a?(i?.(),e({step:"closed"}),u?.open({source:J,teamHint:d?.id,trialBehavior:"disallow-trial",forceImmediateUpgrade:a,addOn:s,onConversionStart:x,onConversionError:h,onConversionSuccess:()=>{h(),r?.(o)},disabledSteps:["team-members"]}),z.analytics.track(V.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:n,type:"enable-modal"})):e({step:"confirm"})}}));function Z(e){let{onClose:s}=e,{currency:a,isProcessing:i,plan:r,planIteration:n,selectedOption:l,select:o,doNext:c}=K(),d=K(e=>(function(e){let{selectedOption:s}=e;return"included"===s?{label:"Enable"}:{label:"Continue",type:"secondary",suffix:(0,t.jsx)(E.ArrowRight,{})}})(e));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(L.Modal.Body,{className:"tailwind-preflight",children:[(0,t.jsx)(L.Modal.Header,{children:(0,t.jsx)(L.Modal.Title,{children:"Enable Web Analytics"})}),(0,t.jsx)("p",{className:"text-label-13 text-gray-900",style:{marginBottom:"0.5rem"},children:"Options"}),(0,t.jsxs)(O.ChoiceboxGroup,{direction:"column",label:"plan",onChange:e=>{o(e)},type:"radio",value:l,children:[(0,t.jsx)(U,{plan:r,planIteration:n}),"pro"===r?(0,t.jsx)(M,{currency:a}):(0,t.jsx)(q,{currency:a})]})]}),(0,t.jsxs)(L.Modal.Actions,{children:[(0,t.jsx)(L.Modal.Action,{onClick:s,type:"secondary",children:"Cancel"}),(0,t.jsx)(L.Modal.Action,{loading:i,onClick:()=>void c(),suffix:d.suffix,type:d.type,children:d.label})]})]})}function X(e){let{project:a,active:i,onClose:r,onEnabling:n,source:l}=e,{mutate:o}=(0,F.useSWRConfig)(),{isProcessing:c,setProps:d,step:u,open:p,doNext:m,startProcessing:x,stopProcessing:h}=K(),y=(0,W.useToasts)(),f=(0,k.useRouter)(),g=(0,P.useOpenUpgradeModal)(),j=(0,P.useUpgradeModalIsOpen)(),{enableWebAnalyticsPlus:v,WebAnalyticsPlusModal:b,isWebAnalyticsPlusEnabled:S}=(0,I.useToggleWebAnalyticsPlus)({source:J,skipPostConfirm:!0,onStart:x,onSuccess:()=>void m(),onClose:()=>{r(),h()}}),{team:N,isTeam:A}=(0,D.useTeam)();return(0,s.useEffect)(()=>d({team:N,projectId:a.id,source:l,upgradeTeamModalStore:{isOpen:j,open:g},isPlusEnabled:S,onClose:r,onSuccess(){let e=new URL(window.location.toString());e.searchParams.delete("enable"),(0,_.revalidateProject)(o,a),f.replace(e.toString()),f.refresh()},onError(e){y.error(e)}}),[S,r,g,a,f,d,N,l,j,o,y.error]),(0,s.useEffect)(()=>n?.(c),[c,n]),(0,s.useEffect)(()=>{i&&p(A)},[i,p,A]),(0,s.useEffect)(()=>{"confirm"===u&&i&&v?.()},[i,v,u]),"choose"===u?(0,t.jsx)(L.Modal.Modal,{active:i,onClickOutside:r,children:(0,t.jsx)(Z,{onClose:r})}):b}function ee(e){let a=(0,w.useCanToggleWebAnalytics)(),i=(0,k.useSearchParams)(),[r,n]=(0,s.useState)(!1),[l,o]=(0,s.useState)(!1),c=(0,s.useCallback)(()=>n(!1),[n]),d=(0,s.useCallback)(()=>n(!0),[n]);return(0,s.useEffect)(()=>{i?.get("enable")==="1"&&n(!0)},[i]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.Tooltip,{text:a?void 0:"Additional permissions are required to enable this feature.",children:(0,t.jsx)(g.Button,{disabled:!a,loading:l,onClick:d,width:120,children:"Enable"})}),e.project?(0,t.jsx)(T.CompatRouterAllowed,{children:(0,t.jsx)(X,{active:r,onClose:c,onEnabling:e=>o(e),project:e.project,source:i?.get("source")??void 0})}):null]})}function et(e){let{project:s}=e;return(0,t.jsx)(h,{cards:[{icon:(0,t.jsx)(j.Analytics,{}),title:"Real-time insights into your traffic",children:(0,t.jsx)("p",{className:"text-copy-14",children:"Ensure smooth performance with real-time bandwidth analysis."})},{icon:(0,t.jsx)(N.Lightning,{}),title:"Deeper insights with custom events",children:(0,t.jsx)("p",{className:"text-copy-14",children:"Track whatever is relevant for your website."})},{icon:(0,t.jsx)(A.Shield,{}),title:"Respects visitor privacy",children:(0,t.jsx)("p",{className:"text-copy-14",children:"Web Analytics doesn't rely on cookies and doesn't store personal information."})},{icon:(0,t.jsx)(S.Globe,{}),title:"First-party, at the edge",children:(0,t.jsx)("p",{className:"text-copy-14",children:"Data is collected through your own domain."})},{icon:(0,t.jsx)(v.CodeBlock,{}),title:"Easy integration",children:(0,t.jsx)("p",{className:"text-copy-14",children:"Start collecting data with one line of code. Supports all major frameworks."})},{icon:(0,t.jsx)(b.Gauge,{}),title:"Your site stays fast",children:(0,t.jsx)("p",{className:"text-copy-14",children:"The light-weight trackings script is less than 5kb."})}],description:"Collect valuable insights on user behavior and site performance with detailed page view metrics. Gain knowledge on top pages.",title:(0,t.jsxs)("h1",{className:"text-[32px] leading-[40px] tracking-[-0.79px] font-medium",children:[" ","Web Analytics"," "]}),children:(0,t.jsxs)("span",{className:"flex items-center gap-3",children:[(0,t.jsx)(ee,{project:s}),(0,t.jsx)(g.Button,{type:"tertiary",children:(0,t.jsx)(f.Link,{external:!0,href:"/docs/analytics/limits-and-pricing",children:"Limits & Pricing"})})]})})}function es(){let{data:e}=(0,l.useCurrentDashboardProject)();return(0,t.jsx)(et,{project:e})}e.s(["DynamicHeading",0,function(){let{isFeatureEnabled:e}=(0,c.useWebAnalyticsContext)();return e?(0,t.jsx)(p,{}):(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)(et,{project:null}),children:(0,t.jsx)(es,{})})}],7906826)},5521320,e=>{"use strict";var t=e.i(847684),s=e.i(7185353),a=e.i(9722978),i=e.i(60582),r=e.i(9928621),n=e.i(5838627),l=e.i(57106),o=e.i(2327481),c=e.i(6292193),d=e.i(3969752),u=e.i(9576722),p=e.i(7977213);let m=[{id:"nextjs",name:"Next.js",addStep:{snippet:'import { Analytics } from "@vercel/analytics/next"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," React component into your app's layout."]})}},{id:"remix",name:"Remix",addStep:{snippet:'import { Analytics } from "@vercel/analytics/remix"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," React component into your root file."]})}},{id:"create-react-app",name:"React",addStep:{snippet:'import { Analytics } from "@vercel/analytics/react"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," React component into your main app file."]})}},{id:"sveltekit",name:"Sveltekit",addStep:{snippet:"import { injectAnalytics } from '@vercel/analytics/sveltekit'",title:"Add injectAnalytics()",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"injectAnalytics()"})," function in your main layout file."]})}},{id:"nuxtjs",name:"Nuxt",addStep:{snippet:"import { Analytics } from '@vercel/analytics/nuxt'",title:"Add the Vue component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," Vue component into main component."]})}},{id:"astro",name:"Astro",addStep:{snippet:"import Analytics from '@vercel/analytics/astro'",title:"Add the Astro component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(c.InlineCode,{children:"<Analytics/>"})," Astro component into your base layout."]})}},{id:"other",name:"Other",addStep:{snippet:'import { inject } from "@vercel/analytics"',title:"Call inject()",description:(0,t.jsxs)(t.Fragment,{children:["Import the ",(0,t.jsx)(c.InlineCode,{children:"inject()"})," function and call it in your app's layout or main component."]})}}].map(e=>{let{id:s,name:a,addStep:i}=e;return{id:s,name:a,icon:(0,t.jsx)("div",{}),steps:function(e){let{snippet:s,title:a,description:i}=e;return[{title:"Install our package",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("span",{children:"Start by installing @vercel/analytics in your existing project."}),(0,t.jsx)(d.DependencySnippet,{dependency:"@vercel/analytics"})]})},{title:(0,t.jsx)("span",{className:"whitespace-nowrap",children:a}),content:(0,t.jsxs)("span",{children:[i,(0,t.jsx)(n.CodeBlock,{className:"grid",hideLineNumbers:!0,language:"javascript",textToCopy:s,children:s}),(0,t.jsxs)("span",{children:["For full examples and further reference, please refer to our"," ",(0,t.jsx)(l.Link,{external:!0,href:"/docs/analytics/quickstart#add-the-analytics-component-to-your-app",variant:"highlight",children:"documentation"})]})]})},{title:"Deploy & Visit your Site",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{children:"Deploy your changes and visit the deployment to collect your page views."}),(0,t.jsx)("p",{className:"text-gray-900",children:"If you don't see data after 30 seconds, please check for content blockers and try to navigate between pages on your site."})]})}]}(i)}});function x(e){let{hasData:s,isEnabled:a}=e,{isEnabled:i,isLoading:r,hasData:n}=(0,u.useWebAnalyticsStatus)();return(0,t.jsx)(o.Onboarding,{agentInstallationType:p.InstallationType.WebAnalytics,description:"To start counting visitors and page views, follow these steps.",frameworks:m,title:"Get Started",visible:r?a&&!s:i&&!n})}var h=e.i(8522580),y=e.i(5255926),f=e.i(9307255),g=e.i(9148191);function j(e){let{hasData:s}=e,{defaultProjectName:a,defaultProjectBaseUrl:i,groupName:r,isLoading:n}=(0,g.useMicrofrontendsProjectInfo)(),{getProjectUrl:o}=(0,f.useDashboardNavigation)();return n?(0,t.jsx)(v,{children:(0,t.jsx)(y.Skeleton,{height:124,width:512})}):(0,t.jsxs)(v,{children:[(0,t.jsxs)("span",{className:"inline-block",children:[(0,t.jsx)("span",{className:"font-medium",children:"Web Analytics"})," is enabled for this project, ",s?"but data is being":"and data will be"," sent to"," ",(0,t.jsx)(l.Link,{className:"underline",href:`${i}/analytics`,children:a}),", the default app for the"," ",(0,t.jsx)(l.Link,{className:"underline",href:`${i}/settings/microfrontends`,children:r})," ","microfrontends group.",(0,t.jsx)("br",{}),"To send data to this project instead, visit the"," ",(0,t.jsx)(l.Link,{className:"underline",href:o("/settings/microfrontends#observability-routing"),children:"microfrontends settings"}),"."]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsx)(l.ButtonLink,{href:`${i}/analytics`,children:"View Default App"}),(0,t.jsx)(l.ButtonLink,{href:"/docs/microfrontends/managing-microfrontends#observability-data-routing",tab:!0,type:"secondary",children:"Learn More"})]}),s?null:(0,t.jsxs)(h.Note,{type:"warning",children:["You still need to install the package in your project.",(0,t.jsx)("br",{})]})]})}function v(e){let{children:s}=e;return(0,t.jsx)("div",{className:"bg-background-100 border rounded-lg py-10",children:(0,t.jsx)("span",{className:"flex flex-col items-center text-center gap-4 mx-auto max-w-[360px] md:max-w-[512px]",children:s})})}var b=e.i(7320407);e.s(["DynamicPageWrapper",0,function(e){let{children:n}=e,{hasData:l,isFeatureEnabled:o,microfrontendsDataInDefaultApp:c}=(0,r.useWebAnalyticsContext)();return(0,t.jsxs)("div",{className:(0,a.clsx)("container",{"-mt-6":!i.IS_DASH,"max-h-[880px] overflow-y-hidden pt-px":!o}),children:[i.IS_DASH&&o?(0,t.jsx)("div",{className:"pb-4 pt-0",children:(0,t.jsx)(b.ControlBar,{})}):null,o?(0,t.jsx)(s.Suspense,{fallback:null,children:(0,t.jsx)(x,{hasData:l,isEnabled:o})}):null,c?(0,t.jsx)(j,{hasData:l}):n,o?null:(0,t.jsx)("div",{className:"absolute inset-0 -mt-6 bg-gradient-to-b from-transparent from-0% via-background-100 to-background-100"})]})}],5521320)},963717,e=>{"use strict";var t=e.i(847684),s=e.i(3175682),a=e.i(709626),i=e.i(9567020);e.i(1538684);var r=e.i(109088),n=e.i(2504781),l=e.i(9096446),o=e.i(1971436),c=e.i(7185353);let d="--split-by--",u={className:"!h-6 !font-normal [&>:last-child]:!-mx-1",size:"small",suffix:(0,t.jsx)(l.CrossSmall,{color:"gray-900"}),type:"secondary",children:"Remove split"};e.s(["SPLIT_FILTER_TAG",0,d,"useFilterProps",0,e=>{let{filter:l={},removeFilter:p,toggleFilter:m,setGroupBy:x,groupBy:h}=(0,a.useWebAnalyticsFilter)(),y=(0,s.useCopyAction)(),f=(0,c.useMemo)(()=>l[e],[l,e]),g=h===e,j=(0,c.useMemo)(()=>i.allowedGroupBys.includes(e)?()=>{g?x(null):x(e)}:void 0,[g,e,x]),v=(0,c.useMemo)(()=>{let e=[];return g&&e.push([d]),f&&((0,i.isPropertiesFilterValue)(f)?e.push(...Object.entries(f.properties)):e.push(...f.values.map(e=>[e]))),e},[e,f,g]),b=(0,c.useCallback)(()=>{p(e)},[p,e]),S=(0,c.useMemo)(()=>(0,t.jsx)(n.Button,{...u,onClick:()=>x(null)}),[x]);return{getKey:(0,c.useCallback)(e=>e[1]?.toString()||e[0],[]),activeBreakdown:g,onBreakdownClick:j,filterTags:v,removeSplitButton:S,renderFilterTag:(0,c.useCallback)(e=>e[0]===d?S:(0,t.jsx)(n.Button,{...u,onClick:b,children:"Remove filter"}),[S,b]),buildActions:(0,c.useCallback)(s=>{let a=v.some(e=>e[0]===s.key||e[0]===s.jsonProperty&&e[1]===s.key);return[y({text:s.key}),{icon:a?(0,t.jsx)(r.FilterOffSmall,{}):(0,t.jsx)(o.FilterSmall,{}),label:a?"Remove filter":"Filter",onClick(){a?p(e,s.jsonProperty):m({[e]:s.jsonProperty?{properties:{[s.jsonProperty]:s.key},operator:"eq"}:{values:[s.key],operator:"eq"}})}}]},[m,p,e,v,y])}}])},6692046,e=>{"use strict";var t=e.i(847684),s=e.i(9567020),a=e.i(2590593),i=e.i(4394132),r=e.i(7185353),n=e.i(9928621),l=e.i(916685),o=e.i(963717),c=e.i(188217),d=e.i(9576722);function u(){let[e,a]=(0,s.useWebAnalyticsQueryState)(),i=(0,o.useFilterProps)(e.client_type),{hasData:u}=(0,n.useWebAnalyticsContext)(),{showPlaceholder:m}=(0,d.useWebAnalyticsStatus)(),x=(0,c.useGenericOptions)(),{data:h,isLoading:y}=(0,l.useTopStatsData)({type:e.client_type,...x},{fallbackData:u?void 0:{data:[]}}),f={items:h,range:x.range,loading:y,skeleton:m,type:e.tab},g=(0,r.useMemo)(()=>"device_type"===e.client_type?"Devices":"Browsers",[e.client_type]),j=(0,r.useMemo)(()=>"device_type"===e.client_type?"Which devices your visitors are using":"Which browsers your visitors are using",[e.client_type]);return(0,t.jsx)(p,{...i,...f,description:j,onTitleSwitcherChange:e=>{"Devices"===e&&a({client_type:"device_type"}),"Browsers"===e&&a({client_type:"client_name"})},renderItemTitle:t=>"device_type"===e.client_type&&s.DeviceLabelByValue.get(t.key)||t.key,title:g})}function p(e){return(0,t.jsx)(a.Panel,{description:"Which devices your visitors are using",title:"Devices",...e,limit:5,titleSwitcherItems:["Devices","Browsers"],valueDisplayMode:"percentage"})}e.s(["TopBrowsers",0,function(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(p,{loading:!0,items:[],type:i.AnalyticsType.Visitors}),children:(0,t.jsx)(u,{})})}])},8230391,e=>{"use strict";var t=e.i(847684),s=e.i(7950227),a=e.i(7946377),i=e.i(9567020),r=e.i(2590593),n=e.i(4394132),l=e.i(7185353),o=e.i(9928621),c=e.i(916685),d=e.i(963717),u=e.i(188217),p=e.i(9576722);function m(){let e=(0,d.useFilterProps)("country"),{hasData:s}=(0,o.useWebAnalyticsContext)(),{showPlaceholder:a}=(0,p.useWebAnalyticsStatus)(),r=(0,u.useGenericOptions)(),[n]=(0,i.useWebAnalyticsQueryState)(),{data:l,isLoading:m}=(0,c.useTopStatsData)({type:"country",...r},{fallbackData:s?void 0:{data:[]}});return(0,t.jsx)(x,{...e,items:l,range:r.range,loading:m,skeleton:a,type:n.tab})}function x(e){return(0,t.jsx)(r.Panel,{...e,description:"Which countries your visitors are from",limit:5,renderItemPrefix:e=>(0,t.jsx)(s.Flag,{countryCode:e.key}),renderItemTitle:e=>(0,a.getCountryName)(e.key),title:"Countries",valueDisplayMode:"percentage"})}e.s(["TopCountries",0,function(){return(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)(x,{loading:!0,items:[],type:n.AnalyticsType.Visitors}),children:(0,t.jsx)(m,{})})}])},5104554,e=>{"use strict";var t=e.i(847684),s=e.i(57106),a=e.i(2640326),i=e.i(992159);e.s(["EmptyState",0,function(e){let{emptyIcon:r,emptyMessage:n}=function(e){let{hasFilter:r,type:n}=e;return r?{emptyIcon:(0,t.jsx)(i.Filter,{className:"!text-gray-700"}),emptyMessage:"No data for active filter"}:{emptyIcon:(0,t.jsx)(a.Analytics,{className:"!text-gray-700"}),emptyMessage:"route"===n?(0,t.jsxs)(t.Fragment,{children:["No route data found.",(0,t.jsx)("br",{}),"If you have not already, please"," ",(0,t.jsx)(s.Link,{external:!0,href:"/docs/analytics/quickstart#add-@vercel/analytics-to-your-project",children:"upgrade"})," ","to the latest version of ",(0,t.jsx)("code",{children:"@vercel/analytics"})]}):"No data found for selected period."}}(e);return(0,t.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center gap-2",children:[r,(0,t.jsx)("span",{className:"px-8 text-center text-sm text-gray-900",children:n})]})}])},5717396,e=>{"use strict";var t=e.i(847684),s=e.i(579135);e.i(6483798);var a=e.i(8287059),i=e.i(3110195),r=e.i(709626),n=e.i(9567020),l=e.i(2590593),o=e.i(205804),c=e.i(4394132),d=e.i(57106),u=e.i(7917902),p=e.i(6352514),m=e.i(4759942),x=e.i(2504781),h=e.i(7185353),y=e.i(6380887),f=e.i(9928621),g=e.i(916685),j=e.i(963717),v=e.i(188217),b=e.i(9576722),S=e.i(5104554);function N(){let{filter:e}=(0,r.useWebAnalyticsFilter)(),{user:i,team:l,isTeam:o}=(0,u.useAccount)(),c=l||i,d=c?.billing?.plan||"hobby",x="hobby"===d,y=(0,a.useOpenUpgradeModal)(),{setUpgradeModalSource:j,hasData:S}=(0,f.useWebAnalyticsContext)(),{showPlaceholder:N}=(0,b.useWebAnalyticsStatus)(),w=(0,v.useGenericOptions)(),{range:T}=w,[C,k]=(0,n.useWebAnalyticsQueryState)(),P=C.tab,I=C.event_property,[_,D]=(0,h.useState)([]),[L,W]=(0,h.useState)(null),{data:F,isLoading:O}=(0,g.useTopStatsData)({type:L||e.event_name?"event_data":"event_name",...w,...L&&{jsonProperty:L},pause:x},{fallbackData:S?void 0:{data:[]}}),E=(0,h.useMemo)(()=>x?[]:F,[F,x]),B=(0,h.useCallback)(e=>k({event_property:e??null}),[k]);if((0,h.useEffect)(()=>{L&&L!==I&&B(L)},[I,L,B]),e.event_name&&!O&&F.length>0&&!L){let e=F[0];D(F.map(e=>e.key)),I?W(I):e.key===L||I||W(e.key)}!e.event_name&&L&&(W(null),D([]),B(void 0));let U=(0,s.useCurrentProjectNameAndId)();return(0,t.jsx)(A,{data:E,eventProperties:_,loading:O,onClickUpgrade:()=>{m.analytics.track(p.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:d,projectId:U?.id,teamId:l?.id||i?.uid,type:"custom-events"}),o?j("top_events"):y({source:"web-analytics-custom-event-upsell",forceCreateTeam:!0})},onSelectProperty:W,range:T,requiresCreation:!o,requiresUpgrade:x,selectedProperty:L,skeleton:N,type:P})}function A(e){let{data:s,loading:a,skeleton:n,selectedProperty:o,type:c,range:d,eventProperties:u,onSelectProperty:p,requiresCreation:m,requiresUpgrade:x,onClickUpgrade:h}=e,{filter:y,removeFilter:f,groupBy:v,setGroupBy:b}=(0,r.useWebAnalyticsFilter)(),N=(0,j.useFilterProps)("event_name"),A=(0,j.useFilterProps)("event_data"),w=Object.keys(y).length>0,C=(0,g.useAsyncSearchTopStats)();return"event_name"===v&&o&&b("event_data"),(0,t.jsx)(l.Panel,{...y.event_name?A:N,filterTags:(A.filterTags??[]).concat(N.filterTags??[]),description:"Which events are triggered the most",items:s,limit:5,loading:a,onSearch:e=>C(e,o||y.event_name?"event_data":"event_name"),range:d,valueDisplayMode:"all-values",...y.event_name&&o&&p&&u?{renderTabBar:()=>(0,t.jsx)(l.PanelTabBar,{activeTab:o,onSelectTab:p,tabs:u})}:{},renderEmptyState:()=>w?(0,t.jsx)(S.EmptyState,{hasFilter:!0}):(0,t.jsx)(T,{onClickUpgrade:h,requiresCreation:m,requiresUpgrade:x}),renderFilterTag:e=>2===e.length?(0,t.jsx)(i.FilterTag,{by:"event_data",prefix:e[0],value:e[1],removeFilter:f,size:"small"}):e[0]!==j.SPLIT_FILTER_TAG?(0,t.jsx)(i.FilterTag,{by:"event_name",value:e[0],removeFilter:f,size:"small"}):A.removeSplitButton,renderItemTitle:e=>e.key||"Unknown",skeleton:n,title:"Events",totalCountLabel:"Total",type:c})}function w(e){return(0,t.jsx)(l.Panel,{...e,description:"Which events are triggered the most",limit:5,valueDisplayMode:"all-values",renderItemTitle:e=>e.key||"Unknown",title:"Events",totalCountLabel:"Total"})}function T(e){let{requiresUpgrade:s,onClickUpgrade:a,requiresCreation:i}=e;return(0,t.jsx)("div",{className:o.default["empty-state-wrapper"],children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-3 flex-initial",children:[(0,t.jsx)("div",{className:"rounded-full border border-gray-100 p-2",children:(0,t.jsx)("svg",{fill:"none",height:"24",viewBox:"0 0 32 32",width:"24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M17.1111 5L6 18.3333H15.9999L14.8889 27.2222L25.9999 13.8889H15.9999L17.1111 5Z",stroke:"var(--accents-5)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})})}),(0,t.jsx)("h4",{className:"font-semibold text-gray-1000",children:"No custom events"}),(0,t.jsxs)("div",{className:o.default["empty-state-description"],children:[(0,t.jsx)(y.Balancer,{children:"Set up custom events to gain a deeper understanding of user behavior on your site."}),(0,t.jsx)("div",{style:{marginTop:2},children:(0,t.jsxs)(y.Balancer,{children:[s?(0,t.jsxs)(t.Fragment,{children:[i?"Create ":"Upgrade to "," a ",(0,t.jsx)("b",{children:"Pro"})," ","team to access this feature."," "]}):(0,t.jsxs)(t.Fragment,{children:["Track button clicks, form submissions, and other user actions."," "]}),(0,t.jsx)(d.Link,{external:!0,href:"/docs/analytics/custom-events",variant:"highlight",children:"Learn more"})]})}),s?(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"flex flex-col items-center justify-start flex-initial",children:(0,t.jsx)("div",{style:{marginTop:"var(--geist-gap-half)"},children:(0,t.jsx)(x.Button,{onClick:a,size:"small",children:i?"Create a team":"Upgrade to Pro"})})})}):null]})]})})}e.s(["TopEvents",0,function(){return(0,t.jsx)(h.Suspense,{fallback:(0,t.jsx)(w,{loading:!0,items:[],type:c.AnalyticsType.Visitors}),children:(0,t.jsx)(N,{})})}])},5670055,e=>{"use strict";var t=e.i(847684),s=e.i(579135),a=e.i(3110195),i=e.i(709626),r=e.i(9567020),n=e.i(2590593),l=e.i(205804),o=e.i(4394132),c=e.i(57106),d=e.i(7917902),u=e.i(6352514),p=e.i(4759942),m=e.i(3306538),x=e.i(2504781),h=e.i(2065543),y=e.i(7185353),f=e.i(6380887),g=e.i(9928621),j=e.i(916685),v=e.i(5307161),b=e.i(963717),S=e.i(188217),N=e.i(9576722),A=e.i(5104554);function w(){let{filter:e,removeFilter:s}=(0,i.useWebAnalyticsFilter)(),n=(0,b.useFilterProps)("flags"),l=Object.keys(e).length>0,o="hobby"===(0,v.useBillingPlan)(),{hasData:c}=(0,g.useWebAnalyticsContext)(),{showPlaceholder:d}=(0,N.useWebAnalyticsStatus)(),u=(0,S.useGenericOptions)(),{range:p}=u,[m]=(0,r.useWebAnalyticsQueryState)(),x=m.tab,h=(0,y.useMemo)(()=>{let e=m.filter.flags;if(e)return(0,r.isPropertiesFilterValue)(e)?Object.keys(e.properties)[0]:e.values[0]},[m.filter.flags]),{data:f,isLoading:w}=(0,j.useTopStatsData)({type:"flags",...u,jsonProperty:h},{fallbackData:c?void 0:{data:[]}}),C=(0,y.useMemo)(()=>o?[]:f,[f,o]);return(0,t.jsx)(T,{...n,items:C,loading:w,range:p,renderEmptyState:()=>l?(0,t.jsx)(A.EmptyState,{hasFilter:!0}):(0,t.jsx)(k,{}),renderFilterTag:e=>2===e.length?(0,t.jsx)(a.FilterTag,{by:"flags",prefix:e[0],value:e[1],removeFilter:s,size:"small"}):e[0]!==b.SPLIT_FILTER_TAG?(0,t.jsx)(a.FilterTag,{by:"flags",value:e[0],removeFilter:s,size:"small"}):n.removeSplitButton,skeleton:d,type:x})}function T(e){return(0,t.jsx)(n.Panel,{...e,description:"Which flags are recorded the most",limit:5,renderItemTitle:e=>e.key||"Unknown",title:"Flags",titleBadge:(0,t.jsx)(m.Badge,{size:"sm",variant:"pink",children:"Beta"}),totalCountLabel:"Total",valueDisplayMode:"all-values"})}function C(e){let{children:a}=e,{user:i,team:r}=(0,d.useAccount)(),n=r||i,l=n?.billing?.plan||"hobby",o=(0,s.useCurrentProjectNameAndId)();return(0,t.jsx)("div",{className:"tailwind flex-1",onClick:()=>{setTimeout(()=>{let e=!1;try{let t=JSON.parse(new URL(location.href).searchParams.get("filter")||"{}");e="flags"in t}catch{}p.analytics.track(u.AnalyticsEvent.ANALYTICS_CLICKED_ON_FLAGS,{currentPlan:l,projectId:o?.id,teamId:r?.id||i?.uid,hasFlagsFilter:e})},100)},children:a})}function k(e){let{requiresUpgrade:s,onClickUpgrade:a,requiresCreation:i}=e;return(0,t.jsx)("div",{className:l.default["empty-state-wrapper"],children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-3 flex-initial",children:[(0,t.jsx)("div",{className:"flex size-[42px] items-center justify-center rounded-full border border-gray-100 p-2 text-gray-800",children:(0,t.jsx)(h.ToggleOnAlt,{size:16})}),(0,t.jsx)("h4",{className:"font-semibold text-gray-1000",children:"No flags"}),(0,t.jsxs)("div",{className:l.default["empty-state-description"],children:[(0,t.jsx)(f.Balancer,{children:"Gain insights into how active feature flags impact user behavior."}),(0,t.jsx)("div",{style:{marginTop:2},children:(0,t.jsxs)(f.Balancer,{children:[s?(0,t.jsxs)(t.Fragment,{children:[i?"Create ":"Upgrade to "," a ",(0,t.jsx)("b",{children:"Pro"})," ","team to access this feature."," "]}):(0,t.jsx)(t.Fragment,{children:"Get started by setting up flag tracking. "}),(0,t.jsx)(c.Link,{external:!0,href:"/docs/feature-flags/integrate-with-web-analytics",variant:"highlight",children:"Learn more"})]})}),s?(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"flex flex-col items-center justify-start flex-initial",children:(0,t.jsx)("div",{style:{marginTop:"var(--geist-gap-half)"},children:(0,t.jsx)(x.Button,{onClick:a,size:"small",children:i?"Create a team":"Upgrade to Pro"})})})}):null]})]})})}e.s(["TopFlags",0,function(){return(0,t.jsx)(y.Suspense,{fallback:(0,t.jsx)(T,{loading:!0,items:[],type:o.AnalyticsType.Visitors}),children:(0,t.jsx)(C,{children:(0,t.jsx)(w,{})})})}])},5607014,e=>{"use strict";var t=e.i(847684),s=e.i(9567020),a=e.i(2590593),i=e.i(4394132),r=e.i(7185353),n=e.i(9928621),l=e.i(916685),o=e.i(963717),c=e.i(188217),d=e.i(9576722);function u(){let e=(0,o.useFilterProps)("os_name"),[a]=(0,s.useWebAnalyticsQueryState)(),{hasData:i}=(0,n.useWebAnalyticsContext)(),{showPlaceholder:r}=(0,d.useWebAnalyticsStatus)(),u=(0,c.useGenericOptions)(),{data:m,isLoading:x}=(0,l.useTopStatsData)({type:"os_name",...u},{fallbackData:i?void 0:{data:[]}});return(0,t.jsx)(p,{...e,items:m,range:u.range,loading:x,skeleton:r,type:a.tab})}function p(e){return(0,t.jsx)(a.Panel,{...e,description:"Which operating systems your visitors are using",limit:5,title:"Operating Systems",valueDisplayMode:"percentage"})}e.s(["TopOperatingSystems",0,function(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(p,{loading:!0,items:[],type:i.AnalyticsType.Visitors}),children:(0,t.jsx)(u,{})})}])},4870288,e=>{"use strict";var t=e.i(847684),s=e.i(1319302),a=e.i(9567020),i=e.i(2590593),r=e.i(205804),n=e.i(4394132),l=e.i(57106),o=e.i(3748432),c=e.i(7432042),d=e.i(7185353),u=e.i(9928621),p=e.i(916685),m=e.i(2296385),x=e.i(963717),h=e.i(188217),y=e.i(9576722),f=e.i(5104554);let g=["Pages","Routes","Hostnames"];function j(){let{showPlaceholder:e}=(0,y.useWebAnalyticsStatus)(),{hasData:i}=(0,u.useWebAnalyticsContext)(),n=(0,h.usePageHostname)(),g=(0,h.useGenericOptions)(),[j,b]=(0,a.useWebAnalyticsQueryState)(),{data:S,isLoading:N}=(0,p.useTopStatsData)({type:j.page_type,...g},{refreshInterval:(0,c.default)("60s"),...{fallbackData:i?void 0:{data:[]}}}),A=(0,p.useAsyncSearchTopStats)(),w=(0,x.useFilterProps)(j.page_type),T=(0,m.useFilterHostname)(),C=(0,d.useMemo)(()=>"route"===j.page_type?"Routes":"hostname"===j.page_type?"Hostnames":"Pages",[j.page_type]),k=T||n;return(0,t.jsx)(o.ConditionalNavigationMarker,{enabled:!N,phase:"content",label:"InternalTopPages",children:(0,t.jsx)(v,{...w,type:j.tab,loading:N,skeleton:e,items:S,range:g.range,onSearch:e=>A(e,j.page_type),onTitleSwitcherChange:e=>{"Pages"===e&&b({page_type:"path"}),"Routes"===e&&b({page_type:"route"}),"Hostnames"===e&&b({page_type:"hostname"})},renderEmptyState:()=>(0,t.jsx)(f.EmptyState,{hasFilter:Object.keys(j.filter).length>0,type:j.page_type}),renderItemTitle:e=>k&&"path"===j.page_type?(0,t.jsx)(l.Link,{className:r.default["hover-link"],href:`https://${k}${e.key}`,prefetch:!1,children:(0,t.jsx)(s.RouteHighlighter,{route:e.key})}):(0,t.jsx)(s.RouteHighlighter,{route:e.key}),title:C})})}function v(e){return(0,t.jsx)(i.Panel,{description:"Which pages are the most visited in your project",title:g[0],titleSwitcherItems:g,...e})}e.s(["TopPages",0,function(){return(0,t.jsx)(d.Suspense,{fallback:(0,t.jsx)(v,{loading:!0,items:[],type:n.AnalyticsType.Visitors}),children:(0,t.jsx)(j,{})})}])},3218526,e=>{"use strict";var t=e.i(847684),s=e.i(579135);e.i(6483798);var a=e.i(8287059),i=e.i(3110195),r=e.i(376725),n=e.i(709626),l=e.i(1649649),o=e.i(9567020),c=e.i(2590593),d=e.i(205804),u=e.i(4394132),p=e.i(57106),m=e.i(7917902),x=e.i(6352514),h=e.i(4759942),y=e.i(2504781),f=e.i(3162826),g=e.i(5756088),j=e.i(7432042),v=e.i(7185353),b=e.i(9928621),S=e.i(916685),N=e.i(963717),A=e.i(188217),w=e.i(9576722),T=e.i(5104554);let C=new Map(Array.from(o.UTMLabelByParam).map(e=>{let[t,s]=e;return[s,t]}));function k(){let{user:e,team:u,isTeam:v}=(0,m.useAccount)(),k=u||e,I=k?.billing?.plan||"hobby",_=(0,s.useCurrentProjectNameAndId)(),{isPlus:D,plan:L}=(0,l.useIsWebAnalyticsBilling)(),W=D||"enterprise"===I,{showPlaceholder:F}=(0,w.useWebAnalyticsStatus)(),O=(0,a.useOpenUpgradeModal)(),{setUpgradeModalSource:E,hasData:B}=(0,b.useWebAnalyticsContext)(),U={fallbackData:B?void 0:{data:[]}},R=(0,A.useGenericOptions)(),[M,H]=(0,o.useWebAnalyticsQueryState)(),{data:G,isLoading:q}=(0,S.useTopStatsData)({type:"referrer",...R},{refreshInterval:(0,j.default)("60s"),...U}),{data:$,isLoading:V}=(0,S.useTopStatsData)({type:"query_params",jsonProperty:M.search_param,pause:!W||"utm"!==M.source_type,...R},U),z=(0,S.useAsyncSearchTopStats)(),Q="referrer"===M.source_type?q:V,J=M.tab,Y="referrer"===M.source_type?G:$,K=R.range,Z=!v,X=()=>{h.analytics.track(x.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:I,projectId:_?.id,teamId:u?.id||e?.uid,type:"utm-parameters"}),v?E("utm_parameters"):O({source:"web-analytics-utm-parameters-upsell",forceCreateTeam:!0})},ee="utm"===M.source_type,et=ee?"query_params":"referrer",es=(0,N.useFilterProps)(et),{filter:ea,removeFilter:ei,groupBy:er}=(0,n.useWebAnalyticsFilter)(),en=D||"enterprise"===L,el="Referrers";return ee&&(el="UTM Parameters"),(0,t.jsx)(P,{...es,items:Y,loading:Q,onSearch:e=>z(e,et),range:K,renderEmptyState:()=>en||!ee?(0,t.jsx)(T.EmptyState,{hasFilter:Object.keys(ea).length>0}):(0,t.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center gap-3",children:[(0,t.jsx)(g.LockClosed,{color:"gray-800"}),(0,t.jsxs)("span",{className:"text-sm text-gray-900",children:[Z?"Create a pro team, then upgrade to ":"Upgrade to ",(0,t.jsx)("span",{className:"font-medium text-gray-1000",children:"Web Analytics Plus"})," ","to access this feature"]}),(0,t.jsxs)("div",{className:"mt-1 flex items-center justify-center gap-4",children:["pro"===L?(0,t.jsx)(y.Button,{onClick:X,size:"small",type:"secondary",children:Z?"Create a team":"Upgrade"}):null,(0,t.jsx)(p.Link,{external:!0,href:"/docs/analytics/limits-and-pricing",title:"Learn more about Web Analytics Plus",type:"highlight",children:"Learn more"})]})]}),renderItemPrefix:e=>"referrer"!==M.source_type?null:""===e.key?(0,t.jsx)(f.CornerDownRight,{color:"gray-700"}):(0,t.jsx)(r.Favicon,{url:e.key},e.key),renderItemTitle:e=>{let s=e.key,a=`https://${s}`;return"referrer"!==M.source_type?(0,t.jsx)(t.Fragment,{children:e.key}):""===s||"unknown"===s?"Direct":ea.referrer&&"values"in ea.referrer&&"t.co"===ea.referrer.values[0]?(0,t.jsx)(p.Link,{className:d.default["hover-link"],href:`https://x.com/search?q=${encodeURIComponent(a)}`,prefetch:!1,referrerPolicy:"no-referrer",children:s}):(0,t.jsx)(p.Link,{className:d.default["hover-link"],href:a,prefetch:!1,referrerPolicy:"no-referrer",children:s})},skeleton:F,title:el,titleSwitcherItems:["Referrers","UTM Parameters"],...ee&&{filterTags:("query_params"===er?[[N.SPLIT_FILTER_TAG]]:[]).concat(Object.entries(ea.query_params&&(0,o.isPropertiesFilterValue)(ea.query_params)?ea.query_params.properties:{})),renderFilterTag:e=>e[0]!==N.SPLIT_FILTER_TAG?(0,t.jsx)(i.FilterTag,{by:"query_params",value:e[1],prefix:e[0],removeFilter:ei,size:"small"}):es.removeSplitButton,renderTabBar:()=>(0,t.jsx)(c.PanelTabBar,{activeTab:o.UTMLabelByParam.get(M.search_param)??"Source",onSelectTab:e=>{H({search_param:C.get(e)})},tabs:Array.from(o.UTMLabelByParam.values())})},onTitleSwitcherChange:e=>{"Referrers"===e&&H({source_type:"referrer"}),"UTM Parameters"===e&&H({source_type:"utm"})},type:J})}function P(e){return(0,t.jsx)(c.Panel,{description:"Which sites refer the most traffic to your project",title:"Referrers",titleSwitcherItems:["Referrers","UTM Parameters"],...e})}e.s(["TopReferrers",0,function(){return(0,t.jsx)(v.Suspense,{fallback:(0,t.jsx)(P,{loading:!0,items:[],type:u.AnalyticsType.Visitors}),children:(0,t.jsx)(k,{})})}])},6577918,e=>{"use strict";var t=e.i(847684),s=e.i(709626),a=e.i(205804),i=e.i(9771394),r=e.i(9722978),n=e.i(8436238),l=e.i(7185353),o=e.i(9576722);function c(e){let{setShowPlaceholder:t,setUsedWebAnalyticsFilter:a}=e,{showPlaceholder:i}=(0,o.useWebAnalyticsStatus)();(0,l.useEffect)(()=>{t(i)},[t,i]);let{usedWebAnalyticsFilter:r}=(0,s.useWebAnalyticsFilter)();return(0,l.useEffect)(()=>{a(r)},[a,r]),null}e.s(["PlaceholderProvider",0,function(e){let{children:s}=e,[o,d]=(0,l.useState)(!1),[u,p]=(0,l.useState)(!1);return(0,t.jsx)(n.motion.div,{className:(0,r.clsx)(o&&"no-skeleton-animations",!u&&a.default["fast-filter-tooltip"]),layout:"position",children:(0,t.jsxs)(i.PlaceholderContext.Provider,{value:o,children:[(0,t.jsx)(l.Suspense,{fallback:null,children:(0,t.jsx)(c,{setShowPlaceholder:d,setUsedWebAnalyticsFilter:p})}),s]})})}])},1738815,e=>{e.v({chart:"page-module__r1m6Pq__chart",faded:"page-module__r1m6Pq__faded",gray:"page-module__r1m6Pq__gray",headerWrapper:"page-module__r1m6Pq__headerWrapper"})},3814106,e=>{"use strict";var t=e.i(847684),s=e.i(9567020),a=e.i(1203839),i=e.i(9028632);function r(e){let{data:r,type:n,loading:l,range:o,overwriteUnitLabel:c,formatYAxis:d,formatGroupName:u}=e,[p,m]=(0,s.useWebAnalyticsQueryState)();return l||Array.isArray(r)&&0===r.length?null:(0,t.jsx)(a.ParentSize,{children:e=>{let{width:s,height:a}=e;return(0,t.jsx)(i.Graph,{data:r,formatYAxis:d,formatGroupName:u,height:a,onSelectionChange:e=>{let[t,s]=e;m({from:t,to:s})},overwriteUnitLabel:c,range:o,type:n,width:s})}})}var n=e.i(7946377),l=e.i(709626),o=e.i(4394132),c=e.i(9722978),d=e.i(7432042),u=e.i(7185353),p=e.i(9928621),m=e.i(916685),x=e.i(188217),h=e.i(9576722),y=e.i(1738815);function f(){let{hasData:e,microfrontendsDataInDefaultApp:a}=(0,p.useWebAnalyticsContext)(),[i]=(0,s.useWebAnalyticsQueryState)(),{showPlaceholder:u}=(0,h.useWebAnalyticsStatus)(),{filter:f,groupBy:g,groupByProperty:j}=(0,l.useWebAnalyticsFilter)(),v=f.event_name&&!(0,s.isPropertiesFilterValue)(f.event_name)?f.event_name.values[0]:void 0,b=(0,x.useGenericOptions)(),S=!!f.event_name,N=!!(("event_name"===g||"event_data"===g)&&S&&!i.event_property),{data:A,isLoading:w}=(0,m.useTimeseriesData)({...b,groupBy:g,jsonProperty:j},{showPlaceholder:u,pause:N},{refreshInterval:(0,d.default)(g?"30s":"10s"),fallbackData:e?void 0:{data:{groupCount:1,groups:{all:Array(7).fill(0).map((e,t)=>({key:new Date(Date.now()-24*t*36e5).toISOString().slice(0,10),devices:0,total:0})).reverse()}}}}),T=i.tab;return(0,t.jsxs)("div",{className:(0,c.clsx)((w||N)&&`${y.default.faded} pointer-events-none`,u&&"grayscale"),style:{position:"relative",height:400},children:[(0,t.jsx)(r,{data:a?{groups:{},groupCount:0}:A,formatGroupName:e=>"country"===g?(0,n.getCountryName)(e):e,groupBy:j||g||void 0,overwriteUnitLabel:T===o.AnalyticsType.TotalCount?v:void 0,range:b.range,type:T,...T===o.AnalyticsType.BounceRate&&{formatYAxis:e=>`${e}%`}}),u&&!a?(0,t.jsx)("div",{className:"absolute right-6 top-2 rounded bg-gray-100 px-1.5 py-0.5 text-xs font-medium text-gray-800",children:"Demo Data"}):null]})}function g(){return(0,t.jsx)("div",{className:(0,c.clsx)(y.default.faded,"pointer-events-none"),style:{position:"relative",height:400}})}e.s(["TimeseriesChart",0,function(){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(g,{}),children:(0,t.jsx)(f,{})})}],3814106)},4951496,e=>{"use strict";var t=e.i(847684),s=e.i(7185353),a=e.i(9928621),i=e.i(5903121),r=e.i(579135);e.s(["UpgradeModalEntry",0,function(){let{upgradeModalSource:e,setUpgradeModalSource:n}=(0,a.useWebAnalyticsContext)(),l=(0,r.useCurrentProjectNameAndId)(),o=(0,s.useCallback)(()=>n(null),[n]);return(0,t.jsx)(i.UpgradeModal,{onClose:o,projectId:l?.id,source:e})}])},2090290,e=>{"use strict";var t=e.i(847684),s=e.i(7185353),a=e.i(188217),i=e.i(916685),r=e.i(4597921),n=e.i(5806401),l=e.i(2504781),o=e.i(8735244),c=e.i(5255926),d=e.i(3306538),u=e.i(6942035),p=e.i(6143247),m=e.i(9722978),x=e.i(1319302),h=e.i(3683485),y=e.i(3285452),f=e.i(7399351),g=e.i(1933683),j=e.i(3884708),v=e.i(7432042),b=e.i(376725);let S=e=>{let s,{url:a,className:i}=e;try{s=new URL(a).hostname.replace("www.","")}catch{s=a}return(0,t.jsxs)("div",{title:a,className:(0,m.default)(i,"flex items-center space-x-1.5 text-xs text-gray-700 bg-white shadow-sm rounded-full px-2 py-1"),children:[(0,t.jsx)(b.Favicon,{url:a,size:14}),(0,t.jsx)("span",{className:"truncate",children:s})]})},N=e=>{let t="undefined"!=typeof navigator?navigator.language:"en-US";return e.toLocaleTimeString(t,{hour:"numeric",minute:"numeric"})},A=e=>e?(0,v.default)(1e3*e,{long:!0}):"",w=e=>e.toISOString().split("T")[0],T=e=>t=>{if(0===t.length)return[];let s=[],a=[t[0]];for(let i=1;i<t.length;i++){let r=t[i];e(a[a.length-1],r)?a.push(r):(s.push(a),a=[r])}return s.push(a),s},C=T((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()<(0,v.default)("30m")),k=T((e,t)=>{let s=e?.[0]?.[0],a=t?.[0]?.[0];return!!s&&!!a&&w(s.timestamp)===w(a.timestamp)}),P=e=>{let{event:s,active:a,onClick:i,showTime:r=!0}=e,n="pageview"===s.type,l=n?s.route||s.path:"event"===s.type?s.eventName:"Unknown Event",o;return(0,t.jsxs)("div",{className:(0,m.default)("relative w-full first:rounded-t last:rounded-b","transition-all duration-200",a?"bg-blue-50 shadow-md":"bg-white hover:bg-gray-50"),children:[(0,t.jsxs)("button",{type:"button",onClick:i,className:(0,m.default)("flex items-center w-full px-2 py-1.5 pr-4 text-left bg-transparent","cursor-pointer transition-all duration-200",a&&"transform translate-y-1"),children:[(0,t.jsxs)("div",{className:(0,m.default)("flex items-center justify-center w-8 h-8 mr-1 relative",n?"text-blue-500":"text-amber-500"),children:[(0,t.jsx)("div",{className:(0,m.default)("absolute inset-0 rounded-full transition-all duration-200",n?"bg-blue-500":"bg-amber-500",a?"opacity-20":"opacity-0 hover:opacity-10")}),n?(0,t.jsx)(g.Eye,{color:"currentColor",className:"w-4 h-4"}):(0,t.jsx)(j.Lightning,{color:"currentColor",className:"w-4 h-4"})]}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-1000 truncate",children:n?(0,t.jsx)(I,{route:s.route||"",path:s.path}):l}),!n&&"event"===s.type&&s.eventData&&(0,t.jsx)("p",{className:"text-xs text-gray-700 truncate",children:Object.entries(s.eventData).filter(e=>{let[t]=e;return"eventName"!==t}).map(e=>{let[t,s]=e;return`${t}: ${s}`}).join("  ")})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-xs text-gray-700",children:[o&&(0,t.jsx)("span",{children:A(o)}),a?(0,t.jsx)(f.ChevronUp,{color:"gray-700",className:"w-4 h-4"}):r&&(0,t.jsx)("span",{children:N(s.timestamp)})]})]})})]}),a&&(0,t.jsxs)("div",{className:"px-3 pb-3 text-xs text-gray-800",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Time:"})," ",N(s.timestamp)]}),n&&o&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Duration:"})," ",A(o)]})]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Event Data:"}),(0,t.jsx)("pre",{className:"mt-1 text-xs bg-white p-2 rounded bg-background-200 overflow-x-auto",children:JSON.stringify("event"===s.type?{path:s.path,route:s.route,referrer:s.referrer,queryParams:s.queryParams,eventName:s.eventName,eventData:s.eventData}:{path:s.path,route:s.route,referrer:s.referrer,queryParams:s.queryParams},null,2)})]})]})]})},I=e=>{let{route:s,path:a,className:i}=e;return(0,t.jsx)("div",{className:(0,m.default)("flex truncate relative",i),title:a,children:(0,t.jsx)("span",{className:"text-gray-1000 mr-2",children:(0,t.jsx)(x.RouteHighlighter,{route:s||a,path:a})})})},_=e=>{let{className:s}=e;return(0,t.jsx)("div",{className:(0,m.default)("flex items-center justify-start px-6",s),children:(0,t.jsx)("div",{className:"w-px h-2 bg-gray-300"})})},D=e=>{let{pageGroup:s,activeEventId:a,onEventClick:i,direction:r}=e,n=[...s].sort((e,t)=>e.type!==t.type?"pageview"===e.type?-1:1:e.timestamp.getTime()-t.timestamp.getTime()),l=e=>e.toLocaleTimeString([],{hour:"numeric",minute:"numeric"});return(0,t.jsx)("div",{className:(0,m.default)("bg-white rounded-md shadow-sm overflow-hidden flex divide-y divide-gray-200","asc"===r?"flex-col-reverse":"flex-col"),children:n.map((e,s)=>{let r=0===s||l(e.timestamp)!==l(n[s-1].timestamp);return(0,t.jsx)(P,{event:e,active:a===E(e),onClick:()=>i(E(e)),showTime:r},E(e))})})},L=e=>{let{referrer:s}=e;return(0,t.jsx)("div",{className:"relative flex flex-col items-start ml-2",children:s?(0,t.jsx)(S,{url:s}):(0,t.jsx)("div",{className:"flex items-center space-x-1.5 text-xs text-gray-700 bg-white shadow-sm rounded-full px-2 py-1",children:(0,t.jsx)("span",{children:"Direct"})})})},W=e=>{let{session:a,activeEventId:i,onEventClick:r,direction:n}=e,l=[...a].sort((e,t)=>{let s=e[0],a=t[0];return s&&a?s.timestamp.getTime()-a.timestamp.getTime():0}),o=l[0],c=o?.[0],d=c?.referrer;return(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("div",{className:(0,m.default)("pl-1.5 flex","asc"===n?"flex-col-reverse":"flex-col"),children:[(0,t.jsx)(L,{referrer:d}),(0,t.jsx)(_,{}),l.map((e,a)=>(0,t.jsxs)(s.default.Fragment,{children:[(0,t.jsx)(D,{pageGroup:e,activeEventId:i,onEventClick:r,direction:n},E(e[0])),a<l.length-1&&(0,t.jsx)(_,{})]},E(e[0])))]})})},F=e=>{let{day:a,activeEventId:i,onEventClick:r,direction:n}=e,l=a?.[0]?.[0]?.[0];if(!l)return null;let o=(e=>{let t=new Date,s=new Date(t);if(s.setDate(t.getDate()-1),w(e)===w(t))return"Today";{if(w(e)===w(s))return"Yesterday";let t="undefined"!=typeof navigator?navigator.language:"en-US";return e.toLocaleDateString(t,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}})(l.timestamp),c=a.flat().flat().length,d=[...a].sort((e,t)=>{let s=e[0]?.[0],a=t[0]?.[0];return s&&a?s.timestamp.getTime()-a.timestamp.getTime():0});return(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("div",{className:"sticky top-0 z-10 flex items-center justify-center py-2 bg-gradient-to-b from-background-200 to-transparent",children:(0,t.jsxs)("div",{className:"px-3 py-1 bg-gray-300 text-gray-1000 text-xs font-medium rounded-full",children:[o,"  ",c," events"]})}),(0,t.jsx)("div",{className:(0,m.default)("max-w-2xl mx-auto flex gap-10 pt-10","asc"===n?"flex-col-reverse":"flex-col"),children:d.map(e=>(0,t.jsx)(s.default.Fragment,{children:(0,t.jsx)(W,{session:e,activeEventId:i,onEventClick:r,direction:n})},E(e[0][0])))})]})},O=e=>{let{direction:s,onClick:a}=e;return(0,t.jsx)("button",{type:"button",onClick:a,className:(0,m.default)("flex items-center justify-center w-10 h-10 bg-white border border-gray-300 rounded-lg","hover:bg-gray-100 active:bg-gray-100 transition-colors duration-200","text-gray-800 hover:text-gray-900","bg-transparent"),children:(0,t.jsx)(y.ArrowDown,{className:(0,m.default)("w-5 h-5 transition-transform duration-200","asc"===s&&"rotate-180")})})},E=e=>{let t="pageview"===e.type?{path:e.path,route:e.route,referrer:e.referrer,queryParams:e.queryParams}:"event"===e.type?{path:e.path,route:e.route,referrer:e.referrer,queryParams:e.queryParams,eventName:e.eventName,eventData:e.eventData}:{path:e.path,route:e.route,referrer:e.referrer,queryParams:e.queryParams};return`${e.type}-${e.timestamp.getTime()}-${JSON.stringify(t).split("").reduce((e,t)=>e+t.charCodeAt(0),0)}`};function B(e){let{events:a=[]}=e,[i,r]=(0,s.useState)("desc"),[n,l]=(0,s.useState)(null),o=(0,s.useMemo)(()=>{let e=[...a].sort((e,t)=>e.timestamp.getTime()-t.timestamp.getTime()),t=e=>{let t=[],s=[];for(let a of e)"pageview"===a.type?(s.length>0&&t.push(s),s=[a]):0===s.length?t.push([a]):s.push(a);return s.length>0&&t.push(s),t};return[...(0,h.pipe)(e,C,e=>e.map(t),k)].reverse()},[a]),c=e=>{l(t=>t===e?null:e)};return 0===o.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-700",children:"No events found"})}):(0,t.jsxs)("div",{className:"bg-background-200",children:[(0,t.jsx)("div",{className:"absolute top-12 right-4 z-20",children:(0,t.jsx)(O,{direction:i,onClick:()=>{r(e=>"asc"===e?"desc":"asc")}})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:o.map((e,s)=>{let a=e?.[0]?.[0]?.[0];return(0,t.jsx)(F,{day:e,activeEventId:n,onEventClick:c,direction:i},a?E(a):`day-${s}`)})})]})}var U=e.i(2590593),R=e.i(205804),M=e.i(7950227),H=e.i(7946377);let G=e=>{let{user:s,onClick:a}=e;return(0,t.jsxs)("div",{className:"flex items-center px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 gap-3",onClick:a,role:"button",tabIndex:0,children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-copy-14 text-xs font-medium text-gray-600",children:s.id.slice(-3).toUpperCase()})}),(0,t.jsx)("p",{className:"text-copy-14 truncate font-medium text-sm ml-2",children:"Anonymous"}),(0,t.jsxs)("p",{className:"text-copy-14 text-xs text-gray-700 ml-4 flex items-center gap-2",children:[(0,t.jsx)(M.Flag,{countryCode:s.country.toUpperCase()}),(0,H.getCountryName)(s.country)]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)("p",{className:"text-copy-14 truncate text-xs text-gray-500 ml-1",children:["#",s.id.slice(-8)]}),(0,t.jsxs)("p",{className:"text-copy-14 text-xs text-gray-700 ml-4",children:[s.events," events"]}),(0,t.jsx)("p",{className:"text-copy-14 text-xs text-gray-500 ml-auto w-20 text-right",children:(e=>{let t=Math.floor((new Date().getTime()-e.getTime())/36e5);if(t<1)return"Just now";{if(t<24)return`${t}h ago`;let e=Math.floor(t/24);return`${e}d ago`}})(s.lastActivity)})]})},q=()=>(0,t.jsxs)("div",{className:(0,m.clsx)("flex flex-col items-stretch justify-start tailwind flex-1",R.default.container),children:[(0,t.jsx)(U.PanelHeader,{title:"User Journeys",titleBadge:(0,t.jsx)(d.Badge,{size:"sm",variant:"gray",children:"Internal"}),description:"User journey data",className:"min-h-[73px]",labels:["Last Seen"]}),(0,t.jsx)("div",{className:"flex flex-col my-2",children:Array.from({length:5},(e,t)=>`skeleton-${t}`).map(e=>(0,t.jsx)("div",{className:"flex items-center px-3",style:{height:40},children:(0,t.jsx)(c.Skeleton,{animated:!0,height:32,style:{opacity:.5,width:"100%"}})},e))})]}),$=e=>{let{user:s,onClose:a,events:i,loading:r=!1}=e;return s?(0,t.jsxs)(n.Sheet,{onOpenChange:e=>!e&&a(),open:!!s,children:[(0,t.jsx)(n.SheetOverlay,{}),(0,t.jsx)(n.SheetContent,{className:(0,p.cn)("m-3 h-[calc(100%-1.5rem)] w-[calc(100%-1.5rem)] rounded-[1rem] bg-white p-0 lg:w-3/4 sm:max-w-[auto] overflow-hidden"),side:"right",children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0 w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-copy-14 text-sm font-bold text-gray-600",children:s.id.slice(-3).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-copy-14 text-lg font-bold",children:"Anonymous User"}),(0,t.jsxs)("p",{className:"text-copy-14 text-sm text-gray-700",children:["#",s.id.slice(-8)]}),(0,t.jsx)("p",{className:"text-copy-14 text-sm text-gray-600",children:s.country})]})]}),(0,t.jsx)(l.Button,{"aria-label":"Close",className:"!px-1.5",onClick:a,size:"medium",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(u.Cross,{})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto bg-background-200",children:r?(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(o.Spinner,{}),(0,t.jsx)("p",{className:"text-copy-14 ml-2 text-sm text-gray-600",children:"Loading events..."})]}):(0,t.jsx)(B,{events:i})})]})})]}):null};function V(e){let{users:s=[],loading:a=!1,onClickUser:i}=e;return a?(0,t.jsx)(q,{}):(0,t.jsxs)("div",{className:(0,m.clsx)("flex flex-col items-stretch justify-start tailwind flex-1",R.default.container),children:[(0,t.jsx)(U.PanelHeader,{title:"User Journeys",titleBadge:(0,t.jsx)(d.Badge,{size:"sm",variant:"gray",children:"Internal"}),description:"User journey data",labels:["Last Seen"],className:"min-h-[73px]"}),(0,t.jsx)("div",{className:"flex flex-col",children:0===s.length?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("p",{className:"text-copy-14 text-sm text-gray-600",children:"No users found"})}):s.slice(0,6).map(e=>(0,t.jsx)(G,{user:e,onClick:()=>i?.(e)},e.id))})]})}var z=e.i(409142);function Q(){let{state:e,set:r}=(0,z.useSearchParamsState)({userId:{defaultValue:void 0}}),[n,l]=(0,s.useState)(null),o=(0,a.useGenericOptions)(),{data:c,isLoading:d}=(0,i.useUserList)({...o}),{data:u,isLoading:p}=(0,i.useUserEvents)({...o,userId:e.userId??""}),m=e.userId&&u?.events||[];return(0,t.jsxs)("div",{children:[(0,t.jsx)(V,{users:c?.users||[],loading:d,onClickUser:e=>{l(e),r({userId:e.id})}}),(0,t.jsx)($,{events:m,user:n,loading:p,onClose:()=>{l(null),r({userId:void 0})}})]})}e.s(["UserList",0,function(){return(0,r.useServerFlag)("enable-analytics-journey-view",!1)?(0,t.jsx)(s.Suspense,{fallback:null,children:(0,t.jsx)(Q,{})}):null}],2090290)},7418298,e=>{"use strict";var t=e.i(847684),s=e.i(6582838),a=e.i(85322),i=e.i(8238875),r=e.i(9928621);e.s(["ContextLoader",0,function(){let e=(0,i.useParams)()||{teamSlug:"",project:""},{data:n}=(0,s.useDashboardProject)({teamSlug:e.teamSlug,project:e.project}),l=(0,a.isFeatureEnabled)(n.webAnalytics),o=!!(l&&n.microfrontendsConfig?.enabled&&!n.microfrontendsConfig?.isDefaultApp&&!n.microfrontendsConfig?.routeObservabilityToThisProject);return(0,t.jsx)(r.DefaultValuesSetter,{defaultValues:{isLoadingDefaults:!1,isFeatureEnabled:l,microfrontendsDataInDefaultApp:o}})}])}]);

//# debugId=9cbd0d5c-69a5-71a1-17d1-fdb1bf5fab84
//# sourceMappingURL=bda07bd848abd38f.js.map