;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b06409ba-36f6-6c84-ff96-74438fa78ef3")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8122440,e=>{"use strict";var t=e.i(4244280),i=e.i(8042625),n=e.i(7909933),r=e.i(277234);e.s(["useReverseProxyStatus",0,function(e){let{projectIdOrName:a,teamIdOrSlug:s}=e;return(0,n.default)(`${t.API_FIREWALL}/proxy/status${(0,i.encode)({projectId:a,teamId:s})}`,r.fetchAPI)},"useReverseProxyStatusV2",0,function(e){let{projectIdOrName:a,teamIdOrSlug:s}=e;return(0,n.default)(`${t.API_FIREWALL_PROXY_STATUS_V2}${(0,i.encode)({projectId:a,teamId:s})}`,r.fetchAPI)}])},8114130,e=>{"use strict";e.s(["globalBypassStatus",0,function(e){let t=e?.security?.firewallBypassIps;if(!t)return{enabled:!1};let i={enabled:!1};for(let e of t){let t=e.split("#");if("0.0.0.0/0"===t[0]||"::/0"===t[0]&&t.length>=2){let e=Number.parseInt(t[1],10);!Number.isNaN(e)&&e>Date.now()/1e3&&(i={enabled:!0,ttl:e})}}return i}])},681099,e=>{"use strict";var t=e.i(7909933),i=e.i(8042625),n=e.i(277234),r=e.i(5338940);e.s(["useMicrofrontendsGroupProjects",0,function(e){let{isReady:a,team:s}=(0,r.useTeam)();return(0,t.default)(()=>e&&a?`/api/v1/microfrontends/groups/${e}/projects${(0,i.encode)({teamId:s?.id})}`:null,e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),{fallbackData:{projects:[]}})}])},9148191,e=>{"use strict";var t=e.i(7185353),i=e.i(8238875),n=e.i(5338940),r=e.i(6161994),a=e.i(681099),s=e.i(6060673);e.s(["useMicrofrontendsProjectInfo",0,function(){let e=(0,i.useParams)(),{data:o}=(0,s.useProject)(e?.project),l=o?.microfrontends?.groupIds[0],{isReady:c,team:u}=(0,n.useTeam)(),{data:d,isLoading:f}=(0,r.useMicrofrontendsGroups)(),{data:p,isLoading:m}=(0,a.useMicrofrontendsGroupProjects)(l),h=p?.projects.find(e=>e.microfrontends?.isDefaultApp),g=o?.microfrontends!==void 0&&!o.microfrontends.isDefaultApp;return(0,t.useMemo)(()=>({defaultProjectName:h?.name,defaultProjectBaseUrl:h?`/${u?.slug}/${h.name}`:null,groupName:d?.groups.find(e=>e.group.id===l)?.group.name??h?.name,isChildMicrofrontend:g,isLoading:!c||!u||m||f,isMicrofrontend:(o?.microfrontends?.groupIds?.length??0)>0}),[h,l,g,f,m,c,o?.microfrontends?.groupIds?.length,u,d])}])},9367781,e=>{"use strict";var t=e.i(847684),i=e.i(9148191),n=e.i(7132425);e.s(["MicrofrontendsHelpBadge",0,function(e){let{childHelp:r,parentHelp:a}=e,{isChildMicrofrontend:s,isMicrofrontend:o}=(0,i.useMicrofrontendsProjectInfo)();if(!o)return null;let l=s?r:a;return l?(0,t.jsx)(n.MicrofrontendsBadge,{pageContext:l}):null}])},6319736,e=>{"use strict";var t=e.i(847684),i=e.i(7185353);let n=!1;e.s(["EnsureSWRData",0,function(e){let{fallback:r,data:a,children:s}=e;return!function(){let e=(0,i.useRef)(n),[,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{e.current||(n=!0,e.current=!0,t())},[]),n}()||a.includes(void 0)?(0,t.jsx)(t.Fragment,{children:r}):(0,t.jsx)(t.Fragment,{children:s})}],6319736)},523386,e=>{"use strict";var t=e.i(847684),i=e.i(421794);e.s(["ChangeLineItem",0,function(e){let{change:n,isCurrentUser:r,managedRulesets:a}=e,{principal:s,rule:o,actionTaken:l}=(0,i.createActionConfig)(n,a,r);return"ip.insert"===n.action||"ip.remove"===n.action?"ip.insert"===n.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[s," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]}),"for host"," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[n.value.hostname," "]}),"on IP"," ",(0,t.jsx)("span",{className:"text-[14px] leading-[20px] font-medium",children:n.value.ip})]}):(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[s," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]})]}):"firewallEnabled"===n.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[s," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," to "]}),n.value?"enabled":"disabled"]}):"crs.update"===n.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[s," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]}),"configuration"]}):"rules.insert"===n.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[s," "]}),l,n.value.active?" and enabled ":" ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]})]}):"rules.remove"===n.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[s," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]})]}):"rules.update"===n.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[s," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]}),"configuration"]}):"managedRules.update"===n.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[s," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]}),n.value.active?(0,t.jsxs)(t.Fragment,{children:["in"," ",(0,t.jsx)("span",{className:"text-[14px] leading-[20px] font-medium",children:n.value.action})," ","mode"]}):null]}):"botId.toggle"===n.action?(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[s," "]}),(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[l," "]}),(0,t.jsx)("span",{className:"text-copy-14",children:o})]}):(0,t.jsxs)("p",{className:"text-copy-14",children:[(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[s," "]}),l," ",(0,t.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[o," "]}),"configuration"]})}])},3420813,e=>{"use strict";var t=e.i(847684),i=e.i(7185353),n=e.i(2504781),r=e.i(455575),a=e.i(1717203),s=e.i(7557283),o=e.i(594750),l=e.i(3774835),c=e.i(6891161),u=e.i(8522580),d=e.i(57106),f=e.i(7917902),p=e.i(7218483),m=e.i(9148191),h=e.i(523386),g=e.i(8651268);function y(e){let{changes:i=[],disabled:n,isDiscarding:r,isPublishing:a,managedRulesets:s,onClose:o,onDiscard:l,onPublish:p,open:g}=e,{user:y}=(0,f.useAccount)(),v=r||a||n,{defaultProjectBaseUrl:b,defaultProjectName:w,groupName:j,isChildMicrofrontend:P,isMicrofrontend:A}=(0,m.useMicrofrontendsProjectInfo)();return(0,t.jsxs)(c.Modal.Modal,{active:g,drawerClassname:"z-[5002]",onClickOutside:o,children:[(0,t.jsxs)(c.Modal.Body,{className:"tailwind-preflight",children:[(0,t.jsx)(c.Modal.Header,{children:(0,t.jsx)(c.Modal.Title,{children:1===i.length?"Review Change":`Review ${i.length} Changes`})}),(0,t.jsx)("div",{className:"flex w-full flex-col rounded-md border divide-y",children:i.map(e=>(0,t.jsx)(x,{change:e,viewerId:y?.uid,children:(0,t.jsx)(h.ChangeLineItem,{change:e,isCurrentUser:e.userId===y?.uid,managedRulesets:s})},`${e.createdAt}-${e.id}`))}),P?(0,t.jsxs)(u.Note,{className:"mt-4",children:["These changes will only be applied to paths routed to this microfrontend. Firewall rules for the entire domain should be added to"," ",(0,t.jsx)(d.Link,{href:`${b}/firewall/configure`,icon:!1,children:w}),"."]}):null,A&&!P?(0,t.jsxs)(u.Note,{className:"mt-4",children:["These rules will apply to all microfrontends in the"," ",(0,t.jsx)(d.Link,{href:`${b}/settings/microfrontends`,children:j})," ","group."]}):null]}),(0,t.jsxs)(c.Modal.Actions,{children:[(0,t.jsx)(c.Modal.Action,{onClick:o,type:"secondary",children:"Cancel"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Modal.Action,{disabled:v,loading:r,onClick:()=>l().then(o,()=>null),type:"secondary",children:"Discard All Changes"}),(0,t.jsx)(c.Modal.Action,{disabled:v,loading:a,onClick:()=>p().then(o,()=>null),children:"Publish"})]})]})]})}function x(e){let{change:i,children:n,viewerId:r}=e;return(0,t.jsxs)("div",{className:"flex h-[72px] items-center justify-between gap-x-4 p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,t.jsx)(g.PrincipalAvatar,{principalId:i.userId,principal:{type:"user",uid:i.userId,username:i.username},viewerId:r}),n]}),(0,t.jsx)("p",{className:"text-copy-14 whitespace-nowrap text-gray-900",children:(0,p.useAgo)(new Date(i.createdAt).getTime())})]})}let v=(0,i.createContext)({open:!1,setOpen:()=>{}});v.displayName="ReviewChangeContext";let b="review-firewall-changes-key";e.s(["ReviewChangeProvider",0,function(e){let{children:c,projectIdOrName:u,teamIdOrSlug:d}=e,f=(0,r.useToasts)(),{can:p}=(0,a.default)(),[m,h]=(0,i.useState)(!1),g=(0,i.useRef)(null),x=(0,i.useMemo)(()=>({open:m,setOpen:h}),[m,h]),{config:w,isDiscarding:j,isPublishing:P,publishChanges:A,discardChanges:_}=(0,o.useFirewallConfig)({projectId:u}),{data:L}=(0,l.useManagedRulesets)({projectIdOrName:u,teamIdOrSlug:d}),R=p(s.Action.All,s.Resource.SeawallConfig),I=(0,i.useCallback)(()=>{f.removeToastByKey(b),g.current=null},[f]);return(0,i.useEffect)(()=>{m&&I()},[m,I]),(0,i.useEffect)(()=>{if(!m)return w?.changes&&w.changes.length>0&&null===g.current?(g.current=b,f.message({key:b,text:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Review changes to publish the updated Firewall configuration to production"}),(0,t.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,t.jsx)(n.Button,{onClick:()=>{setTimeout(()=>h(!0),30)},size:"small",children:"Review Changes"})})]}),hideX:!0,preserve:!0})):null===g.current||w?.changes&&0!==w.changes.length||(f.removeToastByKey(g.current),g.current=null),()=>{g.current&&(f.removeToastByKey(g.current),g.current=null)}},[w,f,m]),(0,t.jsxs)(v.Provider,{value:x,children:[c,(0,t.jsx)(y,{changes:w?.changes||[],disabled:!R,isDiscarding:j,isPublishing:P,managedRulesets:L??{},onClose:()=>h(!1),onDiscard:_,onPublish:A,open:m&&w?.changes&&w.changes.length>0||!1})]})},"useReviewChangeContext",0,function(){return(0,i.useContext)(v)}],3420813)},2801134,e=>{"use strict";var t=e.i(847684),i=e.i(7557283),n=e.i(1717203),r=e.i(3306538),a=e.i(2504781),s=e.i(972022),o=e.i(6319736),l=e.i(3420813);e.s(["ReviewChangesButton",0,function(e){let{currentConfig:c}=e,{setOpen:u}=(0,l.useReviewChangeContext)(),d=(0,n.useCanAct)(i.Resource.SeawallConfig,[i.Action.Read,i.Action.List]);return(0,t.jsx)(o.EnsureSWRData,{data:[c],fallback:null,children:c?.changes&&c.changes.length>0&&d?(0,t.jsx)(a.Button,{onClick:()=>u(!0),prefix:(0,t.jsx)(s.CloudUpload,{size:16}),suffix:(0,t.jsx)(r.Badge,{className:"min-w-[28px]",size:"sm",variant:"blue",children:c.changes.length}),variant:"secondary",children:"Review Changes"}):null})}])},2679877,(e,t,i)=>{"use strict";var n,r="object"==typeof Reflect?Reflect:null,a=r&&"function"==typeof r.apply?r.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(e,t){return new Promise(function(i,n){var r,a,s;function o(i){e.removeListener(t,l),n(i)}function l(){"function"==typeof e.removeListener&&e.removeListener("error",o),i([].slice.call(arguments))}y(e,t,l,{once:!0}),"error"!==t&&(r=e,a=o,s={once:!0},"function"==typeof r.on&&y(r,"error",a,s))})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,i,n){if(c(i),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),a=e._events),s=a[t]),void 0===s)s=a[t]=i,++e._eventsCount;else if("function"==typeof s?s=a[t]=n?[i,s]:[s,i]:n?s.unshift(i):s.push(i),(r=u(e))>0&&s.length>r&&!s.warned){s.warned=!0;var r,a,s,o=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=s.length,console&&console.warn&&console.warn(o)}return e}function f(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=f.bind(n);return r.listener=i,n.wrapFn=r,r}function m(e,t,i){var n=e._events;if(void 0===n)return[];var r=n[t];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(e){for(var t=Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(r):g(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function g(e,t){for(var i=Array(t),n=0;n<t;++n)i[n]=e[n];return i}function y(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else if("function"==typeof e.addEventListener)e.addEventListener(t,function r(a){n.once&&e.removeEventListener(t,r),i(a)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||s(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var s,o=Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else for(var c=l.length,u=g(l,c),i=0;i<c;++i)a(u[i],this,t);return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},o.prototype.removeListener=function(e,t){var i,n,r,a,s;if(c(t),void 0===(n=this._events)||void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,a=i.length-1;a>=0;a--)if(i[a]===t||i[a].listener===t){s=i[a].listener,r=a;break}if(r<0)return this;0===r?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,r),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0==arguments.length){var r,a=Object.keys(i);for(n=0;n<a.length;++n)"removeListener"!==(r=a[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return m(this,e,!0)},o.prototype.rawListeners=function(e){return m(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},3774835,e=>{"use strict";var t=e.i(277234),i=e.i(7909933);e.s(["useManagedRulesets",0,function(e){let{projectIdOrName:n,teamIdOrSlug:r}=e;return(0,i.default)(["/v1/security/firewall/managed-rules",new URLSearchParams({projectId:n,teamId:r}).toString()],e=>{let[i,n]=e;return(0,t.default)(`${i}?${n}`)})}])},7829532,(e,t,i)=>{var n=e.r(3219719);t.exports=function(e,t,i){return null==e?e:n(e,t,i)}},5120311,(e,t,i)=>{var n=e.r(716543);t.exports=function(e){return n(e,5)}},3219719,(e,t,i)=>{var n=e.r(263217),r=e.r(660575),a=e.r(5729582),s=e.r(7791606),o=e.r(2728359);t.exports=function(e,t,i,l){if(!s(e))return e;t=r(t,e);for(var c=-1,u=t.length,d=u-1,f=e;null!=f&&++c<u;){var p=o(t[c]),m=i;if("__proto__"===p||"constructor"===p||"prototype"===p)break;if(c!=d){var h=f[p];void 0===(m=l?l(h,p,f):void 0)&&(m=s(h)?h:a(t[c+1])?[]:{})}n(f,p,m),f=f[p]}return e}},421794,e=>{"use strict";let t={gen:{name:"Generic Attack",description:"Provide broad protection from various undefined or novel attack vectors."},java:{name:"Java Attack",description:"Mitigate risks of exploitation targeting Java-based applications or components."},lfi:{name:"Local File Inclusion Attack",description:"Prevent unauthorized access to local files through web applications."},ma:{name:"Multipart Attack",description:"Block attempts to bypass security controls using multipart/form-data encoding."},php:{name:"PHP Attack",description:"Safeguard against vulnerability exploits in PHP-based applications."},rce:{name:"Remote Execution Attack",description:"Prevent unauthorized execution of remote scripts or commands."},rfi:{name:"Remote File Inclusion Attack",description:"Prohibit unauthorized upload or execution of remote files."},sd:{name:"Scanner Detection",description:"Detect and prevent reconnaissance activities from network scanning tools."},sf:{name:"Session Fixation Attack",description:"Prevent unauthorized takeover of user sessions by enforcing unique session IDs."},sqli:{name:"SQL Injection Attack",description:"Prohibit unauthorized use of SQL commands to manipulate databases."},xss:{name:"XSS Attack",description:"Prevent injection of malicious scripts into trusted webpages."}};function i(e){return e.endsWith("update")?"modified":e.endsWith("insert")?"created":e.endsWith("remove")?"deleted":e.endsWith("priority")?"reordered":"firewallEnabled"===e?"changed":""}function n(e,t){return"bot_filter"===t?e.bot_filter??e.bot_protection:"bot_protection"===t?e.bot_protection??e.bot_filter:e[t]}e.s(["RULES_TO_NAMES",0,t,"botProtectionFromConfig",0,function(e){let t=e?.managedRules;return t?.bot_filter??t?.bot_protection},"botProtectionFromRulesets",0,function(e){return e.bot_filter??e.bot_protection},"createActionConfig",0,function(e,t,r){let a=r?"You":e.username,{id:s,action:o}=e;return"crs.update"===e.action?{id:s||"",principal:a,rule:s?t.owasp.ruleGroups?.[s].name??s:"",actionTaken:i(o)}:"ip.insert"===e.action||"ip.remove"===e.action?{id:s||"",principal:a,rule:(e.action,"IP Blocking Rule"),actionTaken:i(o)}:"rules.insert"===e.action||"rules.update"===e.action?{id:s||"",principal:a,rule:e.value.name,actionTaken:i(o)}:"rules.remove"===e.action?{id:s||"",principal:a,rule:"a Custom Rule",actionTaken:i(o)}:"rules.priority"===e.action?{id:s||"",principal:a,rule:"Rule",actionTaken:i(o)}:"managedRules.update"===e.action?{id:s||"",principal:a,rule:(()=>{if(!s)return"";let e=n(t,s);return e?e.name:s})(),actionTaken:e.value.active?"enabled":"disabled"}:"botId.toggle"===e.action?{id:s||"",principal:a,rule:"BotID Deep Analysis",actionTaken:e.value?"enabled":"disabled"}:{principal:a,id:s||"",rule:"Firewall",actionTaken:i(o)}},"crsRuleToConfig",0,function(e){return t[e]},"getRulesetFromRulesets",0,n,"isBotProtectionData",0,function(e){return"managed_bot_filter"===e||"managed_bot_protection"===e},"isBotProtectionManagedRuleset",0,function(e){return"bot_filter"===e||"bot_protection"===e}])},594750,e=>{"use strict";var t=e.i(7185353),i=e.i(455575),n=e.i(7909933),r=e.i(4005781),a=e.i(5120311),s=e.i(7829532),o=e.i(2793676),l=e.i(8238875),c=e.i(8042625),u=e.i(277234),d=e.i(4244280),f=e.i(5338940),p=e.i(421794);function m(e){if(!e)return;let t=e.draft??e.active;if(!t)return t;let i=new Map,n=Object.keys(t.crs).map(e=>{let{name:n,description:r}=(0,p.crsRuleToConfig)(e),a={id:e,action:t.crs[e].action,active:t.crs[e].active,name:n,description:r};return i.set(a.id,{...a,type:"owas"}),a}).sort((e,t)=>e.name.localeCompare(t.name)),r=t.rules.map(e=>{let t={id:e.id,description:e.description,name:e.name,action:e.action?.mitigate?.action==="rate_limit"?e.action.mitigate.rateLimit?.action||"log":e.action?.mitigate?.action||"log",active:e.active,value:e,isRateLimit:e.action?.mitigate?.action==="rate_limit"};return i.set(t.id,{...t,type:"custom_rule"}),t});t.ips.forEach(e=>{i.set(e.id,{...e,type:"ip_block"})});let a=t.changes.sort((e,t)=>t.createdAt.localeCompare(e.createdAt));return{currentConfig:t,crsRules:n,rules:r,changes:a,ruleMap:i}}async function h(e){let[t]=e;return(await (0,u.fetchAPI)(t,{method:"GET",throwOnHTTPError:!0,returnStatus:!0})).body}async function g(e,t){let{arg:i}=t,n=(0,a.default)(i);return n.value&&"object"==typeof n.value&&("valid"in n.value&&delete n.value.valid,"validationErrors"in n.value&&delete n.value.validationErrors),(await (0,u.fetchAPI)(e,{method:"PATCH",throwOnHTTPError:!0,returnStatus:!0,body:JSON.stringify(n)})).body}async function y(e,t){let[i,n]=e,{arg:r="draft"}=t;return await (0,u.fetchAPI)(`${i}${r}${n}`,{method:"POST",throwOnHTTPError:!0,returnStatus:!0,body:JSON.stringify({})})}async function x(e){return await (0,u.fetchAPI)(e,{method:"DELETE",throwOnHTTPError:!0,returnStatus:!0})}e.s(["formatPatchRule",0,function(e,t){if(Object.hasOwn(e,"value")){let i=(0,a.default)(e);return i=(0,o.default)(i,"value.id"),"action"===t.type?i.isRateLimit?(0,s.default)(i,"value.action.mitigate.rateLimit.action",t.value):(0,s.default)(i,"value.action.mitigate.action",t.value):(0,s.default)(i,"value.active",t.value),{id:e.id,action:"rules.update",value:i.value}}let i="action"===t.type?{action:t.value,active:e.active}:{action:"disable"===e.action?"log":e.action,active:t.value};return{id:e.id,action:"crs.update",value:i}},"useFirewallConfig",0,function(e){let{projectId:a,ruleId:s}=e,{team:o}=(0,f.useTeam)(),u=(0,l.useRouter)(),p=(0,c.encode)({teamId:o?.id,projectId:a}),{data:v,mutate:b,isLoading:w}=(0,n.default)(o&&a?[`${d.API_FIREWALL}/firewall/config${p}`,p]:null,async e=>h(e)),j=(0,i.useToasts)(),P=(0,t.useMemo)(()=>m(v?{...v,draft:null}:void 0),[v]),A=(0,t.useMemo)(()=>m(v),[v]),{trigger:_,isMutating:L}=(0,r.default)(`${d.API_FIREWALL}/firewall/config/draft${p}`,g),{trigger:R,isMutating:I}=(0,r.default)([`${d.API_FIREWALL}/firewall/config/`,`/activate${p}`],y),{trigger:k}=(0,r.default)(`${d.API_FIREWALL}/firewall/config${p}`,g),{trigger:S,isMutating:N}=(0,r.default)(`${d.API_FIREWALL}/firewall/config/draft${p}`,x),C=(0,t.useCallback)(async e=>{try{let t=await g(`${d.API_FIREWALL}/firewall/config/draft${p}`,{arg:e});b({...v||{active:null,versions:[t]},draft:t},{revalidate:!1}).then(()=>null,()=>null)}catch(e){throw j.error(e.message||"Failed to update Firewall. Please try again."),e}},[p,j,v,b]),M=(0,t.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2?arguments[2]:void 0;try{await k(e),t&&(await b(),u.refresh(),i?.())}catch(e){throw j.error(e.message||"Failed to update Firewall. Please try again."),e}},[b,j,v,k,u.refresh]),T=(0,t.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2?arguments[2]:void 0;try{let n=await _(e);await b({...v||{active:null,versions:[n]},draft:n},{revalidate:!1}),t&&(i?.(),b().then(()=>null,()=>null))}catch(e){throw j.error(e.message||"Failed to update Firewall. Please try again."),e}},[b,_,j,v]),E=(0,t.useCallback)(async()=>{try{await S(),await b()}catch(e){throw j.error(e.message||"Failed to discard Firewall changes. Please try again."),e}},[b,S,j]),O=(0,t.useCallback)(async(e,t)=>{try{await R(t);let i=e?.toastSuccessMessage??"Your Firewall changes have been applied successfully";j.success(i),u.refresh(),await b().catch(()=>null)}catch(t){throw j.error(e?.toastErrorMessage||t.message||"Failed to publish Firewall changes. Please try again."),t}},[R,b,j,u]),B=(0,t.useCallback)(()=>{b().then(()=>null,()=>null)},[b]),F=(0,t.useMemo)(()=>{if(!s||!A)return;let e=A.rules.find(e=>e.id===s);if(e)return e.value},[s,A]),$=(0,t.useMemo)(()=>!A||!A.rules.some(e=>e.isRateLimit),[A]);return{activeConfig:P,config:A,showRateLimitModal:$,selectedRule:F,forceConfig:M,updateConfig:T,reorderItem:C,discardChanges:E,publishChanges:O,isPublishing:I,isDiscarding:N,isUpdatingConfig:L,isLoadingConfig:w&&!v,refresh:B}}],594750)},3538015,e=>{"use strict";var t=e.i(421794);let i=JSON.stringify({name:"",description:"",active:!0,conditionGroup:[{conditions:[{type:"path",op:"eq",value:""}]}],action:{mitigate:{action:"rate_limit",rateLimit:{action:"rate_limit",algo:"fixed_window",window:"60",limit:"100",keys:["ip"]}}}}),n={sys_dos_mitigation:{label:"DDoS Mitigation",groupBy:"System",rank:11},ip_blocking:{label:"IP Blocking",groupBy:"System",rank:12}},r={owasp_anomaly_detection:{label:"OWASP Anomaly Detection",groupBy:"System",rank:3,keys:["gen","java","ma","sd"]},owasp_xss_detection:{label:"OWASP XSS Detection",groupBy:"System",rank:4,keys:["xss"]},owasp_sqli_detection:{label:"OWASP SQL Injection Detection",groupBy:"System",rank:5,keys:["sqli"]},owasp_rfi_detection:{label:"OWASP RFI Detection",groupBy:"System",rank:6,keys:["rfi"]},owasp_lfi_detection:{label:"OWASP LFI Detection",groupBy:"System",rank:7,keys:["lfi"]},owasp_rce_detection:{label:"OWASP RCE Detection",groupBy:"System",rank:8,keys:["rce"]},owasp_php_detection:{label:"OWASP PHP Injection Detection",groupBy:"System",rank:9,keys:["php"]},owasp_session_fixation_detection:{label:"OWASP Session Fixation Detection",groupBy:"System",rank:10,keys:["sf"]}},a={default_web_traffic:{label:"Allowed Requests",groupBy:"System",rank:1},challenge_mode:{label:"Attack Mode",groupBy:"System",rank:2},...r,...n},s={hobby:{customRules:3,ipBlocks:10,ipBypass:0,rateLimit:1},pro:{customRules:40,ipBlocks:100,ipBypass:25,rateLimit:40},enterprise:{customRules:1e3,ipBlocks:1e3,ipBypass:100,rateLimit:1e3}},o={pro:{customRules:{title:"Need more custom rules?",description:"Upgrade to Enterprise Plan"},ipBlocks:{title:"Need to block more IPs?",description:"Upgrade to Enterprise Plan"},ipBypass:{title:"Need to allow more IPs?",description:"Upgrade to Enterprise Plan"},rateLimit:{title:"Need more rate limit rules?",description:"Upgrade to Enterprise Plan"}},hobby:{customRules:{title:"Need more custom rules?",description:`Upgrade to pro to add up to ${s.pro.customRules} custom rules`},ipBlocks:{title:"Need to block more IPs?",description:`Upgrade to pro to block up to ${s.pro.ipBlocks} IPs`},ipBypass:{title:"Need to setup an IP bypass?",description:`Upgrade to pro to allow up to ${s.pro.ipBypass} IPs`},rateLimit:{title:"Need more rate limit rules?",description:`Upgrade to pro to add up to ${s.pro.rateLimit} rate limit rules`}}},l=[{label:a.default_web_traffic.label,value:"default_web_traffic",action:"allow"},{label:a.challenge_mode.label,value:"challenge_mode",action:"challenge"},...Object.entries(n).map(e=>{let[t,i]=e;return{label:i.label,value:t,action:"deny"}})],c=Object.entries(a).reduce((e,t)=>{let[i,n]=t;return Object.assign(e,{[i]:n.rank})},{});e.s(["allowedFirewallActions",0,function(e,t){let i=[{value:"log",label:"Log",subtext:"Log traffic and do nothing more"},{value:"deny",label:t?"Deny (403)":"Deny",subtext:"Block traffic from accessing your site"},{value:"challenge",label:"Challenge",subtext:"Verify traffic at a security checkpoint before allowing access to your site"}];return t||i.push({value:"bypass",label:"Bypass",subtext:"Bypass existing rules and allow traffic access to your site"}),e&&i.push({value:"rate_limit",label:t?"Too Many Requests (429)":"Rate Limit",subtext:"Enforce frequency limitations on traffic"}),t||i.push({value:"redirect",label:"Redirect",subtext:"Redirect traffic to a different page"}),i},"defaultFilter",0,[{label:"User Agent",value:"clientUserAgent"},{label:"Country",value:"clientIpCountry"},{label:"IP Address",value:"clientIp"},{label:"Request Path",value:"requestPath"},{label:"Vercel Region",value:"edgeNetworkRegion"},{label:"Route",value:"sourcePath"},{label:"JA4 Digest",value:"clientJa4Digest"},{label:"Host",value:"requestHostname"}],"defaultShowSystemRules",0,l,"firewallPlanLimits",0,s,"getRuleName",0,function(e,i,n){if(n&&e.startsWith("managed_")){let[,i]=e.split("managed_"),r=(0,t.getRulesetFromRulesets)(n,i);if(r)return r.name}let r=[];i&&(r.push(...i.rules),r.push(...i.crsRules),r.push(...i.currentConfig.ips.map(e=>({id:e.id,name:`IP Block ${"*"===e.hostname?"":e.hostname} ${e.ip}`}))));let s=r.find(t=>t.id===e);if(s)return s.name;let o=a[e];return o?o.label:"deployment_rules"===e?"Deployment Rules":"deployment_defined_rules"===e?"Deployment Defined Rules":e},"isLimitedSystemRule",0,function(e){return e in n},"owaspToCrsConfig",0,function(e){return Object.entries(r).reduce((t,i)=>{let[n,r]=i,a=e.filter(e=>r.keys.includes(e.id)&&e.active);if(a.length>0){let e=Array.from(a.reduce((e,t)=>(e.add(t.action),e),new Set));t.push({label:r.label,value:n,action:e.join(" / ")})}return t},[])},"planLimitText",0,o,"rateLimitTemplate",0,i,"ruleToMappings",0,a,"stableSort",0,function(e,t){let[i]=e.split("$"),[n]=t.split("$"),r=c[i],a=c[n];return r&&a?r-a:r?-r:a||e.localeCompare(t)},"systemFilter",0,[{label:"IP Address",value:"clientIp"},{label:"Country",value:"clientIpCountry"},{label:"JA4 Digest",value:"clientJa4Digest"},{label:"Host",value:"requestHostname"}]])},5963711,7212454,e=>{"use strict";var t=e.i(4708200),i=e.i(3863657),n=e.i(6493958),r=e.i(3538015);function a(e){return e?e.rules.filter(e=>"value"in e&&e.value.action?.mitigate?.action==="rate_limit"&&!!e.value.action.mitigate.rateLimit&&!!e.value.active).length:0}function s(e){return"rate-limit"===e?"rate_limit":e}e.s(["countRateLimitRules",0,a],7212454),e.s(["denormalizeFirewallAction",0,function(e){return"rate_limit"===e?"rate-limit":e},"formatFirewallActionForDisplay",0,function(e){return void 0===e?"":s(e).replace("_"," ")},"formatShortPrecision",0,function(e){return(0,n.countFormatter)(e,"short-precision").replace(/\s/g,"")},"formatTableHeader",0,function(e,t){let i=e.find(e=>e.value===t);return i?i.label:t},"getOffsetTop",0,function(e){let t=e,i=0;for(;t;)i+=t.offsetTop,t=t.offsetParent;return i},"getSonarSeriesData",0,function(e,n,r,a){let o=new Map,l=e=>{let r=[];for(let i of n){let n=e[i];if(null==n||("wafAction"===i?n=s(n||"allow"):"wafRuleId"===i&&(n||="default_web_traffic"),!n&&a.groupBy===i))return t.hideDataKey;r.push(n)}return r.join(i.SEPARATOR)},c=!0,u=new Set;for(let i of e){let e=l(i);e!==t.hideDataKey&&(c=!1),o.has(e)||e===t.hideDataKey||o.set(e,[]);let n=i.timestamp;u.add(n.toISOString()),o.get(e)?.push({...i,date:n,key:e})}if(n.every(e=>["wafRuleId","wafAction"].includes(e))){let e=Array.from(u.values()).map(e=>new Date(e));for(let t of r){let n=[t.value,t.action].join(i.SEPARATOR);o.has(n)||"all_rules"===t.value||o.set(n,e.map(e=>({date:e,timestamp:e,key:n,value:0})))}}return c?new Map:o},"isCustomRuleId",0,function(e){return"string"==typeof e&&(e.startsWith("rule_")||"deployment_defined_rules"===e)},"isOthersAggregate",0,function(e){return RegExp(`(Others(${i.SEPARATOR})?)+`).test(e)},"isPlanLimitReached",0,function(e){let{teamPlan:t,config:i,bypassRules:n,type:s}=e;if(!t)return!0;let o=r.firewallPlanLimits[t][s];return"ipBypass"===s?"hobby"===t||!!n&&n.length>=o:null!==i&&(void 0===i||("ipBlocks"===s?i.currentConfig.ips.length>=o:"rateLimit"===s?a(i)>=o:i.rules.length>=o))},"isValidEdgeRateLimitKey",0,function(e){switch(e){case"ip":case"ja4":return!0;default:return e.startsWith("header:")}},"normalizeFirewallAction",0,s,"wafRuleId",0,function(e){return"default_web_traffic"===e?"":"managed_bot_filter"===e?"managed_bot_protection":e}],5963711)},9943777,e=>{"use strict";var t=e.i(4422664);e.s(["getRuleTemplateSignature",0,function(e){let i=`${e};technicallyasecretbutwejustwanttomakethisharder`;return t.default.createHash("sha1").update(i).digest("hex")}])},9465698,e=>{"use strict";var t=e.i(7185353),i=e.i(7909933),n=e.i(4005781),r=e.i(8042625),a=e.i(277234),s=e.i(4244280),o=e.i(5338940),l=e.i(455575),c=e.i(6060673);async function u(e,t){let{arg:i}=t,n=JSON.stringify(i);return await (0,a.fetchAPI)(e,{method:"POST",throwOnHTTPError:!0,returnStatus:!0,body:n})}async function d(e,t){let{arg:i}=t,n=JSON.stringify(i);return await (0,a.fetchAPI)(e,{method:"DELETE",throwOnHTTPError:!0,returnStatus:!0,body:n})}async function f(e){let t=JSON.stringify({allSources:!0,projectScope:!0});return await (0,a.fetchAPI)(e,{method:"POST",throwOnHTTPError:!0,returnStatus:!0,body:t})}async function p(e){let t=JSON.stringify({allSources:!0,projectScope:!0});return await (0,a.fetchAPI)(e,{method:"DELETE",throwOnHTTPError:!0,returnStatus:!0,body:t})}e.s(["useFirewallBypass",0,function(e){let{projectId:m}=e,h=(0,l.useToasts)(),{team:g}=(0,o.useTeam)(),{data:y,mutate:x}=(0,c.useProject)(m),v=(0,r.encode)({teamId:g?.id,projectId:m}),{data:b,mutate:w,isLoading:j}=(0,i.default)(g&&m?`${s.API_FIREWALL}/firewall/bypass${v}`:null,a.fetchAPI),P=(0,t.useMemo)(()=>(function(e,t){if(!e&&!t)return null;let i=[];if(e)for(let t of e)i.push(t);if(t){let n=Math.floor(Date.now()/1e3);for(let r of t){let t=r.split("#");if(!["0.0.0.0/0","::/0"].includes(t[0])||t.length<2||Number.parseInt(t[1],10)>n){if(e?.find(e=>e.Ip===t[0]&&"*"===e.Domain))continue;i.push({Ip:t[0],Domain:"*",Note:"",Id:`*#${t[0]}`})}}}return i})(b?.result,y?.security?.firewallBypassIps),[b,y]),{trigger:A,isMutating:_}=(0,n.default)(`${s.API_FIREWALL}/firewall/bypass${v}`,f),{trigger:L,isMutating:R}=(0,n.default)(`${s.API_FIREWALL}/firewall/bypass${v}`,p),{trigger:I,isMutating:k}=(0,n.default)(`${s.API_FIREWALL}/firewall/bypass${v}`,u),{trigger:S,isMutating:N}=(0,n.default)(`${s.API_FIREWALL}/firewall/bypass${v}`,d),C=(0,t.useCallback)(async e=>{let t=e?A:L;try{await t(),h.success(`${e?"Paused":"Resumed"} System Mitigations`)}catch(t){throw h.error(t.message||`Failed to ${e?"Pause":"Resume"} system mitigations. Please try again.`),t}},[A,L,h]);return{bypassRules:P,updateBypass:(0,t.useCallback)(async(e,t)=>{("*"===t.domain||"All hosts"===t.domain)&&(t.projectScope=!0,t.domain=void 0);try{e?(await S(t),h.success(`Removed system bypass for ${t.sourceIp}`)):(await I(t),h.success(`Added system bypass for ${t.sourceIp}`)),await w(),t.projectScope&&await x()}catch(e){throw h.error(e.message||"Failed to update system bypass. Please try again."),e}},[I,S,h,w,x]),updateMitigationsBypassAll:C,isLoading:j||_||R||k||N}}],9465698)},6482765,e=>{"use strict";var t=e.i(847684),i=e.i(3869281),n=e.i(6891161),r=e.i(3500331),a=e.i(57106),s=e.i(1438473),o=e.i(7185353);e.s(["MitigationsBypassModal",0,function(e){let{open:l,isEnabled:c,isLoading:u,onClose:d,onSubmit:f,confirmText:p}=e,[m,h]=(0,o.useState)(!1),[g,y]=(0,o.useState)(!1),x=u||!c&&(!g||!m);!l&&(m||g)&&(h(!1),y(!1));let v=c?"Resume":"Pause",b=c?(0,t.jsx)("p",{children:"Are you sure you want to resume all system mitigations?"}):(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["You are pausing ",(0,t.jsx)("strong",{children:"all DDoS protections"}),". Here's what to expect:"]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial pl-3 pt-3",children:[(0,t.jsxs)("div",{className:"flex flex-row items-start justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-600",children:"•"}),(0,t.jsxs)("p",{className:"text-copy-14",children:["All traffic will be accepted by your project over the"," ",(0,t.jsx)("strong",{children:"next 24 hours"})]})]}),(0,t.jsxs)("div",{className:"flex flex-row items-start justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-600",children:"•"}),(0,t.jsx)("p",{className:"text-copy-14",children:"You will incur usage fees for all malicious traffic, including failed requests"})]}),(0,t.jsxs)("div",{className:"flex flex-row items-start justify-start gap-2 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-600",children:"•"}),(0,t.jsx)("p",{className:"text-copy-14",children:"Malicious traffic and associated fees will continue until DDoS protection is manually resumed or after 24 hours elapses"})]})]}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-1 flex-initial pt-2",children:(0,t.jsxs)("p",{className:"text-copy-14",children:["System mitigations should be paused as a temporary measure. Permanent system bypasses may be applied through the firewall configuration page."," ",(0,t.jsxs)(a.Link,{href:"./firewall/configure",variant:"blend",className:"inline-flex items-center gap-1",children:["Configure ",(0,t.jsx)(s.ArrowRight,{size:12})]})]})})]});return(0,t.jsxs)(n.Modal.Modal,{active:l,onClickOutside:d,children:[(0,t.jsx)(n.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(n.Modal.Title,{children:`${v} System Mitigations`}),(0,t.jsx)(n.Modal.P,{children:b}),c?null:(0,t.jsx)(n.Modal.Inset,{last:!0,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["To confirm, enter the project name ",(0,t.jsxs)("b",{children:[p," "]})," ","below:"]}),(0,t.jsx)(r.Input,{"aria-label":"Project name",disabled:u,name:"projectName",onChange:e=>y(()=>e.target.value===p)}),(0,t.jsx)(i.Checkbox,{onChange:e=>h(e.target.checked),children:"I understand that pausing system mitigations may result in additional fees due to unmitigated attack traffic."})]})})]})}),(0,t.jsxs)(n.Modal.Actions,{children:[(0,t.jsx)(n.Modal.Action,{onClick:d,type:"secondary",children:"Cancel"}),(0,t.jsx)(n.Modal.Action,{disabled:x,loading:u,onClick:f,children:v})]})]})}])},8362250,5793260,e=>{"use strict";var t=e.i(847684),i=e.i(57106),n=e.i(6891161),r=e.i(2713868),a=e.i(7185353);e.s(["ConfirmationAttackMode",0,function(e){let{open:s,isEnabled:o,onClose:l,onSubmit:c}=e,u=o?"Disable":"Enable",d=(0,a.useRef)(null);return(0,t.jsxs)(n.Modal.Modal,{active:s,onClickOutside:l,children:[(0,t.jsxs)(n.Modal.Body,{children:[(0,t.jsx)(n.Modal.Header,{children:(0,t.jsx)(n.Modal.Title,{children:`${u} Attack Mode`})}),o?(0,t.jsx)(n.Modal.P,{children:"Are you sure you want to disable Attack Mode?"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.Modal.P,{children:["When you enable Attack Mode, all traffic, excluding verified bots, will be challenged. This means:",(0,t.jsxs)("ul",{className:"my-2 flex flex-col gap-2 pl-4",children:[(0,t.jsx)("li",{className:"text-copy-14",children:"• Verified bots will still have access"}),(0,t.jsxs)("li",{className:"text-copy-14",children:["• All other traffic will be served a"," ",(0,t.jsx)(i.Link,{external:!0,href:"/docs/vercel-firewall/firewall-concepts#challenge",isDifferentZone:!0,variant:"highlight",children:"challenge"})," ","to verify it is originating from real browsers"]}),(0,t.jsx)("li",{className:"text-copy-14",children:"• Bots that fail challenges will be blocked"}),(0,t.jsx)("li",{className:"text-copy-14",children:"• Human visitors in browsers will continue normally after solving the challenge"})]}),"We recommend enabling this mode only when experiencing a very large and unexpected spike in traffic to stop unwanted automated traffic from accessing your site."]}),(0,t.jsx)(i.Link,{external:!0,href:"/docs/attack-challenge-mode",isDifferentZone:!0,variant:"highlight",children:"Learn More"})]})]}),(0,t.jsx)("div",{ref:d,className:"contents",children:(0,t.jsxs)(n.Modal.Actions,{children:[(0,t.jsx)(n.Modal.Action,{onClick:l,type:"secondary",children:"Cancel"}),o?(0,t.jsx)(n.Modal.Action,{onClick:()=>c(),children:u}):(0,t.jsx)("div",{children:(0,t.jsx)(r.SplitButton,{buttonProps:{onClick:()=>c(36e5)},menuAlignment:"bottom-end",menuButtonLabel:"Select Duration",menuItems:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.SplitButtonMenuItem,{menuItemProps:{onClick:()=>c(216e5)},title:"Enable for 6 Hours"}),(0,t.jsx)(r.SplitButtonMenuItem,{menuItemProps:{onClick:()=>c(864e5)},title:"Enable for 24 Hours"})]}),menuProps:{width:192,containerRef:d},children:"Enable for 1 Hour"})})]})})]})}],8362250);var s=e.i(4005781),o=e.i(8042625),l=e.i(277234),c=e.i(4244280),u=e.i(5338940);async function d(e,t){let{arg:i}=t;return await (0,l.fetchAPI)(e,{method:"POST",throwOnHTTPError:!0,returnStatus:!0,body:JSON.stringify(i)})}e.s(["useUpdateAttackMode",0,function(){let{team:e}=(0,u.useTeam)(),t=(0,o.encode)({teamId:e?.id});return(0,s.default)(`${c.API_SECURITY}/attack-mode${t}`,d)}],5793260)}]);

//# debugId=b06409ba-36f6-6c84-ff96-74438fa78ef3
//# sourceMappingURL=f020c58d85c55f01.js.map