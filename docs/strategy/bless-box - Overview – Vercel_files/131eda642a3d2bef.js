;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f3e6b92c-02ad-afbd-e834-d2ceb14448ea")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1961840,e=>{"use strict";var t=e.i(7909933),n=e.i(8042625),a=e.i(277234),i=e.i(4244280),r=e.i(5338940);e.s(["default",0,function(e,s){let{isReady:l,team:o}=(0,r.useTeam)();return(0,t.default)(()=>e&&l?`${(0,i.API_PROJECTS_VERSION)("v7")}/${encodeURIComponent(e)}/system-env-values${(0,n.encode)({teamId:o?.id})}`:"",e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),s)}])},3245331,e=>{"use strict";var t=e.i(847684);e.s(["default",0,function(e){return(0,t.jsx)("form",{...e,onKeyDown:e=>{if("Enter"===e.key&&e.metaKey){let t=e.target;t.form&&t.form.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}},onSubmit:t=>{t.preventDefault(),e.onSubmit?.(t)}})}])},7332807,e=>{e.v({popoverBottom:"styled-combobox-module__rI3xva__popoverBottom",popoverShadow:"styled-combobox-module__rI3xva__popoverShadow",projectOptionList:"styled-combobox-module__rI3xva__projectOptionList",themeBorder:"styled-combobox-module__rI3xva__themeBorder"})},3845686,e=>{"use strict";var t=e.i(847684),n=e.i(7185353),a=e.i(9722978),i=e.i(6881349),r=e.i(7332807);e.s(["StyledCombobox",0,function(e){let{items:s,selectedItems:l,hideSelectedItems:o,placeholderText:d,OptionComponent:c,search:u,setSearch:m,onChange:v,ListFooterComponent:p,disabled:h,size:x,classNames:f}=e,[y,g]=(0,n.useState)(!1),j=(0,n.useMemo)(()=>o?s.filter(e=>!l.find(t=>e.id===t.id)):s,[o,s,l]);return(0,t.jsxs)(i.Combobox,{className:(0,a.clsx)(r.default.portal,f?.combobox),disabled:h,onChange:v,onChangeOpen:g,placeholder:d,size:x,value:u,children:[(0,t.jsx)(i.Combobox.Input,{className:(0,a.clsx)(r.default.themeBorder,r.default.inputBox,{[r.default.popoverShadow]:y},f?.input),onChange:e=>{m(e.target.value)}}),(0,t.jsx)(i.Combobox.List,{ListFooterComponent:p,avoidCollisions:!1,className:(0,a.clsx)(r.default.projectOptionList,r.default.themeBorder,r.default.popoverBottom,r.default.popoverShadow,f?.list),children:j.map(e=>(0,t.jsx)(c,{item:e},e.id))})]})}])},8916169,e=>{"use strict";var t=e.i(847684),n=e.i(2504781),a=e.i(6352514),i=e.i(4759942),r=e.i(9544652);e.s(["default",0,e=>{let s=(0,r.useDisabled)(e.disabled),l=e.loading??e.swr?.isLoadingMore,o="Load More";return!e.swr?.initialDataLoaded||e.swr?.isReachingEnd?null:(0,t.jsx)(n.Button,{type:"secondary",width:"100%",...e,disabled:s,loading:l,onClick:t=>{let n=e.onClick??e.swr?.loadMore;n?.(t),i.analytics.track(a.AnalyticsEvent.CLICK_EVENT,{click_name:"dashboard_cta",click_value:o})},children:o})}])},2383382,e=>{"use strict";var t=e.i(7909933),n=e.i(3924999),a=e.i(7185353),i=e.i(8042625),r=e.i(277234),s=e.i(4244280),l=e.i(1717203),o=e.i(7557283);function d(e){let{teamId:t,projectId:n,ids:a}=e;return`${s.API_SHARED_ENV_VARIABLES}/all${(0,i.encode)({teamId:t,projectId:n,ids:a})}`}e.s(["getUseSharedEnvsSWRKey",0,d,"useSharedEnvVarsInfinite",0,function(e){let{teamId:l,projectId:o,ids:d,excludeIds:c,excludeProjectId:u}=e,{limit:m=8,search:v,revalidateFirstPage:p=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},x=arguments.length>3&&void 0!==arguments[3]&&arguments[3],f=arguments.length>4&&void 0!==arguments[4]&&arguments[4],y=(0,n.default)((e,t)=>{if(!e)return`${s.API_SHARED_ENV_VARIABLES}${(0,i.encode)({limit:m,search:v,teamId:l,projectId:o,ids:d,exclude:{ids:c??null,projectId:u??null}})}`;if(t&&t.length>=m){let e=t[t.length-1];return`${s.API_SHARED_ENV_VARIABLES}${(0,i.encode)({until:e.updatedAt||e.createdAt-1,limit:m,search:v,teamId:l,projectId:o,ids:d,exclude:{ids:c??null,projectId:u??null}})}`}return null},async e=>(await (0,r.fetchAPI)(e,{throwOnHTTPError:!0})).data,{...h,keepPreviousData:f,revalidateFirstPage:p,persistSize:!0}),g=!!y.data,j=g&&y.data[y.data.length-1]?.length<m,b=(0,a.useMemo)(()=>y.data?y.data.flat():[],[y.data]),E=g&&0===b.length,_=g&&y.size>y.data.length;return(0,t.default)(()=>{if(!x||!y.data||j)return null;let e=y.data[y.data.length-1];return`${s.API_SHARED_ENV_VARIABLES}${(0,i.encode)({until:(e[e.length-1].updatedAt??e[e.length-1].createdAt)-1,limit:m,search:v,teamId:l,projectId:o,ids:d,exclude:{ids:c??null,projectId:u??null}})}`},e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0})),[y,{envVars:b,initialDataLoaded:g,isEmpty:E,loadMore:()=>y.setSize(e=>e+1),isLoadingMore:_,isReachingEnd:j,isValidating:y.isValidating}]},"useTeamSharedEnvs",0,function(e,n,a,i){let{can:s,isLoading:c}=(0,l.default)(n?{projectIdOrName:n}:void 0),u=s(o.Action.List,o.Resource.ProjectEnvVars),m=e&&!c&&u;return(0,t.default)(()=>m?d({teamId:e,ids:a,projectId:n}):"",async e=>{let{data:t}=await (0,r.fetchAPI)(e,{throwOnHTTPError:!0});return{envs:t}},i)}])},4171299,e=>{"use strict";var t=e.i(8042625),n=e.i(277234),a=e.i(4244280),i=e.i(1080700);async function r(e){let{envVar:r,teamId:s,payload:l,applyToAllCustomEnvironments:o}=e,d={};return r.key!==l.key&&(d.key=l.key),r.value!==l.value&&(d.value=l.value),(0,i.arraysEqual)(r.target.sort(),l.target.sort())||(d.target=[...l.target]),l.projectIdUpdates&&(d.projectIdUpdates=l.projectIdUpdates),void 0!==l.comment&&(d.comment=l.comment),void 0!==o&&(d.applyToAllCustomEnvironments=o),(0,n.fetchAPI)(`${a.API_SHARED_ENV_VARIABLES}${(0,t.encode)({teamId:s})}`,{method:"PATCH",body:JSON.stringify({updates:{[r.id]:d}}),throwOnHTTPError:!0})}async function s(e){let{envVar:i,projectId:r,teamId:s}=e,l=`${a.API_SHARED_ENV_VARIABLES}/${i.id}/unlink/${r}${(0,t.encode)({teamId:s})}`;await (0,n.fetchAPI)(l,{method:"PATCH",throwOnHTTPError:!0,body:{}})}async function l(e){let{envVars:i,projectId:r,teamId:s}=e,l={};i.forEach(e=>{if(e.projectId.includes(r))throw Error("Project already added to env var");l[e.id]={projectIdUpdates:{link:[r],unlink:[]}},e.applyToAllCustomEnvironments&&(l[e.id].applyToAllCustomEnvironments=e.applyToAllCustomEnvironments)}),await (0,n.fetchAPI)(`${a.API_SHARED_ENV_VARIABLES}${(0,t.encode)({teamId:s})}`,{method:"PATCH",body:JSON.stringify({updates:l}),throwOnHTTPError:!0})}e.s(["addProjectToSharedEnvVars",0,l,"removeProjectFromSharedEnvVar",0,s,"updateSharedEnvVar",0,r])},9307140,e=>{e.v({fullWidthHR:"full-width-hr-module__8ZqTOq__fullWidthHR"})},809476,e=>{"use strict";var t=e.i(847684),n=e.i(8206804),a=e.i(9307140);e.s(["FullWidthHR",0,function(){return(0,t.jsx)("div",{"aria-hidden":!0,children:(0,t.jsx)(n.default,{className:a.default.fullWidthHR,margin:0})})}])},4089015,e=>{"use strict";var t=e.i(8042625),n=e.i(277234),a=e.i(4244280),i=e.i(5927860);async function r(e){let{projectId:r,kvs:s,target:l,type:o=i.EnvType.Encrypted,teamId:d,applyToAllCustomEnvironments:c}=e;return(0,n.fetchAPI)(`${a.API_SHARED_ENV_VARIABLES}${(0,t.encode)({teamId:d})}`,{method:"POST",body:JSON.stringify({evs:s,projectId:r,target:l,type:o,applyToAllCustomEnvironments:c}),throwOnHTTPError:!0})}e.s(["addSharedEnvs",0,r])},5601055,e=>{"use strict";var t=e.i(847684),n=e.i(7185353),a=e.i(1821888),i=e.i(2504781),r=e.i(3869281),s=e.i(8735244),l=e.i(5468328),o=e.i(3753138),d=e.i(4482823),c=e.i(2560270),u=e.i(4345845),m=e.i(2634426),v=e.i(5756088),p=e.i(6107899),h=e.i(3394346),x=e.i(9722978),f=e.i(1114103),y=e.i(8436238),g=e.i(5166685),j=e.i(7713873),b=e.i(5927860),E=e.i(4004502),_=e.i(1138941),C=e.i(7957424),S=e.i(1516738),k=e.i(2928617),w=e.i(6060673);let T=(0,j.brandCustomEnvId)("applyToAllCustomEnvironments");function N(e){let{env:n,onChange:a,enabled:i,hideCheckbox:s,customLabel:o,name:d,testId:c,disabled:u}=e,m=(0,j.isCustomEnvironment)(n),p="missingPermission"===u?`Additional permissions are required to create ${(0,j.envName)(n)} environment variables.`:"Sensitive environment variables cannot be created in the Development environment";return(0,t.jsx)(l.Tooltip,{className:"block",disableTriggers:!u,text:p,children:(0,t.jsxs)("label",{className:`flex h-9 shrink-0 select-none items-center justify-between rounded bg-background-100 px-2 py-[6px] text-gray-1000 transition-colors hover:bg-gray-alpha-300 focus-visible:bg-gray-alpha-300 ${u?"hover:cursor-not-allowed":"hover:cursor-pointer"}`,"data-testid":(0,E.tid)("env-variables","label",o||(0,j.envName)(n)),children:[(0,t.jsxs)("span",{className:"flex w-[calc(100%-16px)] items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-gray-900",children:(0,t.jsx)(S.EnvironmentIcon,{id:n.id})}),(0,t.jsxs)("span",{className:"flex w-[calc(100%-36px)] gap-1",children:[(0,t.jsx)("span",{className:"overflow-hidden text-ellipsis text-nowrap",children:o||(0,j.envName)(n)}),n.slug&&m?(0,t.jsx)("span",{className:"hidden max-w-[38ch] cursor-pointer truncate rounded-sm bg-gray-100 px-[6px] font-mono text-[13px] leading-5 text-gray-900 outline-0 transition-colors hover:bg-gray-200 focus-visible:shadow-focus-ring active:bg-gray-300 md:inline",children:n.slug}):null]})]}),u?(0,t.jsx)(v.LockClosed,{}):(0,t.jsx)(r.Checkbox,{checked:i,className:(0,x.clsx)(s&&"opacity-0"),"data-testid":(0,E.tid)("env-variables",c),name:d,onChange:e=>{a(e.target.checked)}}),s?(0,t.jsx)(P,{enabled:i}):null]})})}function I(e){let{branch:n,onChange:a,enabled:i}=e;return(0,t.jsxs)("label",{className:(0,x.clsx)("flex h-9 shrink-0 select-none items-center justify-between rounded bg-background-100 px-2 py-[6px] text-gray-1000 transition-colors hover:cursor-pointer hover:bg-gray-alpha-300 focus-visible:bg-gray-alpha-300"),children:[(0,t.jsxs)("span",{className:"flex w-[calc(100%-16px)] items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-gray-900",children:(0,t.jsx)(u.GitBranch,{})}),(0,t.jsx)("span",{className:"flex w-[calc(100%-36px)] gap-1",children:(0,t.jsx)("span",{className:"overflow-hidden text-ellipsis text-nowrap",children:n.ref})})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(r.Checkbox,{checked:i,className:"pointer-events-none absolute inset-0 opacity-0",onChange:e=>{a(e.target.checked)}}),(0,t.jsx)(P,{enabled:i})]})]})}function P(e){let{enabled:n}=e;return(0,t.jsx)(f.AnimatePresence,{initial:!1,children:n?(0,t.jsx)(y.motion.span,{children:(0,t.jsx)(y.motion.svg,{fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)(y.motion.path,{animate:{strokeDashoffset:0,opacity:1,transition:{duration:.15,ease:"easeIn"}},d:"M1.5 10L4.29289 12.7929C4.68342 13.1834 5.31658 13.1834 5.70711 12.7929L14.5 4",exit:{strokeDashoffset:0,opacity:0,transition:{duration:.2}},initial:{strokeDashoffset:1},pathLength:"1",stroke:"currentColor",strokeLinecap:"butt",strokeLinejoin:"round",strokeWidth:"1.5px",style:{strokeDasharray:"1"}})})}):null})}function L(e){let{selectedEnvironmentIds:t,isPreviewEnvironment:a=!1}=e,i=(0,_.useProjectIdOrName)(),{data:{environments:r},isLoading:s}=(0,C.useAllEnvironments)(i),l=""===i,o=r.filter(j.isCustomEnvironment),d=(0,n.useMemo)(()=>l?[j.PreviewEnvironment.id,j.DevelopmentEnvironment.id,T]:[j.PreviewEnvironment.id,j.DevelopmentEnvironment.id,...o.map(e=>e.id)],[o,l]),c=(0,n.useMemo)(()=>d.every(e=>t.has(e)),[d,t]),u=(0,n.useMemo)(()=>d.some(e=>t.has(e))?d.every(e=>t.has(e)):d.every(e=>!t.has(e)),[d,t]),m=o.length>0,{label:v,icon:p,environmentNamesList:h}=(0,n.useMemo)(()=>A({selectedEnvironmentIds:t,environments:r,isAllPreProductionEnvironmentsSelected:c,isPreviewEnvironment:a}),[t,r,a,c]);return{isLoading:s,isAllPreProductionEnvironmentsSelected:c,isAllPreProductionEnvironmentsIndeterminate:u,hasCustomEnvironments:m,preProductionEnvironmentIds:d,customEnvironments:o,label:v,environmentNamesList:h,icon:p}}let A=e=>{var n;let a,{selectedEnvironmentIds:i,environments:r,isPreviewEnvironment:s,isAllPreProductionEnvironmentsSelected:l}=e;if(s&&1===i.size){let e=Array.from(i),n=r.find(t=>t.id===e[0]);return n&&n.id===(0,j.brandCustomEnvId)(b.EnvTarget.Preview)?{environmentNamesList:["Preview"],label:"Preview",icon:(0,t.jsx)(p.PreviewEye,{color:"gray-900"})}:{environmentNamesList:[e[0]],label:e[0],icon:(0,t.jsx)(u.GitBranch,{color:"gray-900"})}}if(0===i.size)return{environmentNamesList:[],label:"No Environments",icon:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.Layers,{color:"gray-900"}),(0,t.jsx)("div",{className:"absolute left-px top-0 box-content h-[1.5px] w-[131%] origin-top-left rotate-[44deg] bg-gray-900",style:{borderBottom:"1.5px solid var(--ds-background-200)"}})]})};if(i.has(j.ProductionEnvironment.id)&&l)return{environmentNamesList:["Production","Preview","Development","All Custom Environments"],label:"All Environments",icon:(0,t.jsx)(m.Layers,{color:"gray-900"})};if(l)return{environmentNamesList:["All Pre-Production Environments"],label:"All Pre-Production Environments",icon:(0,t.jsx)(m.Layers,{color:"gray-900"})};if(1===i.size){if(i.has(T))return{environmentNamesList:["All Custom Environments"],label:"All Custom Environments",icon:(0,t.jsx)(m.Layers,{color:"gray-900"})};let e=r.find(e=>e.id===Array.from(i)[0]);if(void 0===e)return{environmentNamesList:["All Custom Environments"],label:"All Custom Environments",icon:(0,t.jsx)(m.Layers,{color:"gray-900"})};if(e.id===(0,j.brandCustomEnvId)(b.EnvTarget.Production))return{environmentNamesList:["Production"],label:"Production",icon:(0,t.jsx)(o.ArrowCircleUp,{color:"gray-900"})};if(e.id===(0,j.brandCustomEnvId)(b.EnvTarget.Preview))return{environmentNamesList:["Preview"],label:"Preview",icon:(0,t.jsx)(p.PreviewEye,{color:"gray-900"})};if(e.id===(0,j.brandCustomEnvId)(b.EnvTarget.Development))return{environmentNamesList:["Development"],label:"Development",icon:(0,t.jsx)(h.Wrench,{color:"gray-900"})}}let d=(n=Array.from(i).flatMap(e=>{let t=r.find(t=>t.id===e);return t?[(0,j.envName)(t)]:[]}),a={Production:1,Preview:2,Development:4,"All Custom Environments":5},n.sort((e,t)=>{let n=a[e]||3,i=a[t]||3;return n!==i?n-i:3===n&&3===i?e.localeCompare(t):0}));if(i.has(T)&&d.push("All Custom Environments"),d.length>3){let e=d.slice(0,3),n=d.slice(3),a=[...e,`${n.length} more`];return{environmentNamesList:d,label:`${(0,g.toListSentence)(a)}`,icon:(0,t.jsx)(m.Layers,{color:"gray-900"})}}return{environmentNamesList:d,label:`${(0,g.toListSentence)(d)}`,icon:(0,t.jsx)(m.Layers,{color:"gray-900"})}};e.s(["CustomEnvironmentEnvVarPicker",0,function(e){let{canCreateProductionEnvVars:n,disabled:l=!1,onChange:o,selectedEnvironmentIds:u=new Set([j.PreviewEnvironment.id,j.DevelopmentEnvironment.id]),isPreviewEnvironment:m,disableDevelopmentEnvironment:v}=e,p=(0,_.useProjectIdOrName)(),h=""===p,{isLoading:x,isAllPreProductionEnvironmentsIndeterminate:f,isAllPreProductionEnvironmentsSelected:y,preProductionEnvironmentIds:g,hasCustomEnvironments:b,customEnvironments:E,label:C,icon:S}=L({selectedEnvironmentIds:u,isPreviewEnvironment:m}),{data:P}=(0,w.useProject)(m?p:void 0),{data:A=[]}=(0,k.useProjectBranches)(m?P?.id:void 0),V=e=>t=>{if(m)o([e]);else{let n=new Set(u);return t?n.add(e):n.delete(e),o(Array.from(n)),n}};return(0,t.jsxs)(a.Root,{children:[(0,t.jsx)(a.Trigger,{asChild:!0,children:(0,t.jsx)(i.Button,{className:"group !justify-between !pl-0 !font-normal",disabled:l,name:"add-form-environments-picker",suffix:(0,t.jsx)(c.ChevronDown,{}),type:"secondary",typeName:"button",width:"100%",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial -ml-1.5 h-10",children:[(0,t.jsx)("span",{className:"-my-4 grid size-10 shrink-0 place-items-center rounded-l border-r bg-background-200 group-disabled:bg-gray-100",children:x?(0,t.jsx)(s.Spinner,{}):S}),(0,t.jsx)("span",{className:"block w-full gap-2 overflow-hidden text-ellipsis text-gray-1000 ",children:C})]})})}),(0,t.jsx)(a.Portal,{children:(0,t.jsx)("div",{className:"tailwind-preflight",children:(0,t.jsxs)(a.Content,{className:"flex max-h-[calc(var(--radix-popover-content-available-height)-32px)] w-[var(--radix-popover-trigger-width)] flex-col gap-px overflow-auto rounded-lg bg-background-100 p-2 shadow-md",sideOffset:5,children:[!m&&(0,t.jsx)(N,{enabled:u.has(j.ProductionEnvironment.id),env:j.ProductionEnvironment,disabled:n?void 0:"missingPermission",name:"add-form-production",onChange:e=>{V(j.ProductionEnvironment.id)(e)},testId:"production-checkbox"}),(b||h)&&!m?(0,t.jsxs)("label",{className:"group flex h-9 shrink-0 select-none items-center justify-between rounded bg-background-100 px-2 py-[6px] text-gray-1000 transition-colors hover:cursor-pointer hover:bg-gray-alpha-300 focus-visible:bg-gray-alpha-300",children:[(0,t.jsx)("span",{className:"text-[12px] leading-[16px] font-medium text-gray-900 transition-colors group-hover:!text-gray-1000",children:"Pre-Production Environments"}),(0,t.jsx)(r.Checkbox,{checked:f?y:void 0,indeterminate:!f||void 0,onChange:e=>{let t=new Set(u);g.forEach(n=>{e.target.checked?t.add(n):t.delete(n)}),o(Array.from(t))}})]}):null,(0,t.jsx)(N,{customLabel:"Preview",enabled:u.has(j.PreviewEnvironment.id),env:j.PreviewEnvironment,hideCheckbox:m,name:"add-form-preview",onChange:e=>{V(j.PreviewEnvironment.id)(e)},testId:"preview-checkbox"}),h||m?null:(0,t.jsx)(t.Fragment,{children:E.sort((e,t)=>e.slug.localeCompare(t.slug)).map(e=>(0,t.jsx)(N,{enabled:u.has(e.id),env:e,name:`add-form-custom-environment-${e.slug}`,onChange:t=>{V(e.id)(t)},testId:e.slug},e.id))}),m?(0,t.jsx)(t.Fragment,{children:A.sort((e,t)=>e.ref.localeCompare(t.ref)).filter(e=>e.ref!==P?.link?.productionBranch).map(e=>(0,t.jsx)(I,{branch:e,enabled:u.has((0,j.brandCustomEnvId)(e.ref)),onChange:t=>{V((0,j.brandCustomEnvId)(e.ref))(t)}},e.ref))}):null,!m&&(0,t.jsx)(N,{enabled:u.has(j.DevelopmentEnvironment.id),env:j.DevelopmentEnvironment,disabled:v?"sensitive":void 0,name:"add-form-development",onChange:e=>{V(j.DevelopmentEnvironment.id)(e)},testId:"development-checkbox"}),h?(0,t.jsxs)("label",{className:"flex h-9 shrink-0 select-none items-center justify-between rounded bg-background-100 px-2 py-[6px] text-gray-1000 transition-colors hover:cursor-pointer hover:bg-gray-alpha-300 focus-visible:bg-gray-alpha-300",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"text-gray-900",children:(0,t.jsx)(d.Asterisk,{})}),(0,t.jsx)("span",{className:"flex gap-1",children:(0,t.jsx)("span",{children:"Include all custom environments"})})]}),(0,t.jsx)(r.Checkbox,{checked:u.has(T),onChange:e=>{V(T)(e.target.checked)}})]}):null]})})})]})},"INCLUDE_ALL_CUSTOM_ENVIRONMENTS_ID",0,T,"useCustomEnvironmentsPrettyLabel",0,L])},1642786,e=>{e.v({bold:"tev-environments-selector-module__yCytCa__bold",selectGitBranch:"tev-environments-selector-module__yCytCa__selectGitBranch",truncate:"tev-environments-selector-module__yCytCa__truncate"})},1847448,4805353,e=>{"use strict";var t=e.i(8230165),n=e.i(8128646),a=e.i(5927860),i=e.i(187815),r=e.i(847684),s=e.i(7185353),l=e.i(8238875),o=e.i(2504781),d=e.i(6881349),c=e.i(3671642),u=e.i(5468328),m=e.i(5338940),v=e.i(3322724),p=e.i(7713873),h=e.i(57106),x=e.i(1717203),f=e.i(7557283),y=e.i(6060673),g=e.i(2928617),j=e.i(5601055),b=e.i(7401972),E=e.i(1642786),_=e.i(9722978),C=e.i(2988836);function S(e){return{production:e.target.includes(a.EnvTarget.Production),preview:e.target.includes(a.EnvTarget.Preview),development:e.target.includes(a.EnvTarget.Development),gitBranch:!!e.gitBranch,customEnvironmentIds:e.applyToAllCustomEnvironments?[j.INCLUDE_ALL_CUSTOM_ENVIRONMENTS_ID]:[],applyToAllCustomEnvironments:e.applyToAllCustomEnvironments}}function k(e){let{gitBranch:t,checkedState:n,dispatch:a}=e,i=(0,l.useParams)()?.project,{data:o}=(0,y.useProject)(i),{teamSlug:c}=(0,m.useTeam)(),v=o?.id,{data:p}=(0,g.useProjectBranches)(v),[,{branches:x}]=(0,b.useProjectDeployedBranches)({project:o,query:t}),f=(0,s.useMemo)(()=>Array.from(new Set([...x||[],...(p||[]).filter(Boolean).map(e=>e.ref)])),[p,x]);return n.gitBranch?o?.link?(0,r.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-4 flex-initial",children:[(0,r.jsxs)(d.Combobox,{className:E.default.selectGitBranch,onChange:e=>a({type:"set_git_branch_name",payload:{branchName:e||void 0}}),placeholder:"All Preview Branches",size:"small",value:t||null,children:[(0,r.jsx)(d.Combobox.Input,{onChange:e=>{a({type:"set_git_branch_name",payload:{branchName:e.target.value.trim()||void 0}})},trimValue:!0}),(0,r.jsxs)(d.Combobox.List,{emptyMessage:"No preview branches",maxWidth:450,children:[(0,r.jsx)(r.Fragment,{children:t&&!f.find(e=>e===t)?(0,r.jsx)(d.Combobox.Option,{displayValue:!0,value:t||"",children:`Use "${t}"`}):null}),(0,r.jsx)(r.Fragment,{children:f.map(e=>{let t=String(o.link?.productionBranch)===e;return t?null:(0,r.jsx)(d.Combobox.Option,{disabled:t,value:e,children:e},e)})})]})]}),(0,r.jsx)(u.Tooltip,{text:(0,r.jsx)("span",{children:"If a branch is selected, these variables apply only to the Preview Deployments from that branch."}),children:(0,r.jsx)(C.InformationFillSmall,{})})]}):(0,r.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-4 flex-initial",children:(0,r.jsx)(h.ButtonLink,{as:`/${c}/${o?.name}/settings/git`,href:"/[teamSlug]/[project]/settings/git",size:"small",type:"secondary",children:"Connect Git Repository"})}):null}e.s(["TEVEnvironmentSelector",0,function(e){let{dispatch:t,state:n,mustBeSensitive:a,teamId:i,variant:l,gitBranch:d,restrictToEnvironmentIds:u,disableEnvironmentPicker:m,disableDevelopmentEnvironment:h}=e,{can:y,isLoading:g}=(0,x.default)({teamId:i}),b=(0,v.useIsTablet)()||"project"===l,E=n.target,C=E.production||E.preview,S=y(f.Action.Create,"project"===l?f.Resource.ProjectEnvVarsProduction:f.Resource.SharedEnvVarsProduction);(0,s.useEffect)(()=>{!g&&(S||t({type:"update_target",payload:{target:{production:!1}}}),(n.sensitive||a)&&C&&t({type:"update_target",payload:{target:{development:!1}}}))},[S,g,a,n.sensitive,C,E.production,t]);let w=!!u?.length,T=u?.length===1&&u[0]===p.PreviewEnvironment.id;(0,s.useEffect)(()=>{if(u?.length)if(T)t({type:"update_custom_environment_target",payload:{target:{customEnvironmentIds:[],development:!1,preview:!0,production:!1}}});else{let e=[],n=[];u.forEach(t=>{["production","development","preview"].includes(t)?e.push(t):n.push(t)}),t({type:"update_custom_environment_target",payload:{target:{customEnvironmentIds:n,applyToAllCustomEnvironments:n.includes(j.INCLUDE_ALL_CUSTOM_ENVIRONMENTS_ID),development:e.includes("development"),preview:e.includes("preview"),production:e.includes("production")}}})}},[t,T,u]);let N=w?T&&!m:!m;return(0,r.jsxs)("div",{className:(0,_.default)("flex flex-col items-stretch justify-start flex-initial",b?"gap-1":""),children:[(0,r.jsx)(c.Label,{value:"Environments"}),(0,r.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,r.jsx)(j.CustomEnvironmentEnvVarPicker,{canCreateProductionEnvVars:S,disabled:w||m,disableDevelopmentEnvironment:h,isPreviewEnvironment:T,onChange:e=>{if(u?.length&&!T)return;if(T&&1===e.length){let n="preview"===e[0]?void 0:e[0];n&&t({type:"set_git_branch_name",payload:{branchName:n}}),t({type:"update_custom_environment_target",payload:{target:{customEnvironmentIds:[],development:!1,preview:!0,production:!1,gitBranch:!!n}}});return}let n=[],a=[];e.forEach(e=>{["production","development","preview"].includes(e)?n.push(e):a.push(e)}),t({type:"update_custom_environment_target",payload:{target:{customEnvironmentIds:a,development:n.includes("development"),preview:n.includes("preview"),production:n.includes("production"),gitBranch:!1,applyToAllCustomEnvironments:a.includes(j.INCLUDE_ALL_CUSTOM_ENVIRONMENTS_ID)}}})},selectedEnvironmentIds:new Set(u?.length?u:[...n.target.customEnvironmentIds,n.target.production&&"production",n.target.development&&"development",n.target.preview&&"preview",n.target.applyToAllCustomEnvironments&&j.INCLUDE_ALL_CUSTOM_ENVIRONMENTS_ID].filter(Boolean))}),"project"===l&&N?(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Label,{value:"Branch"}),(0,r.jsxs)("div",{className:"flex flex-row items-stretch w-full justify-start gap-3 flex-1",children:[(0,r.jsx)(o.Button,{onClick:()=>{t({type:"update_target",payload:{target:{customEnvironmentIds:[],production:!1,development:!1,preview:!0,gitBranch:!E.gitBranch}}})},size:"small",type:"secondary",typeName:"button",variant:"invert",children:E.gitBranch?"Cancel":"Select a custom Preview branch"}),E.gitBranch?(0,r.jsx)(k,{checkedState:E,dispatch:t,gitBranch:d}):null]})]}):null]})]})},"getEnvironmentTargets",0,function(e){let t=[];return e.development&&t.push(a.EnvTarget.Development),e.preview&&t.push(a.EnvTarget.Preview),e.production&&t.push(a.EnvTarget.Production),t},"getEnvironmentTargetsStateFromEnv",0,S],4805353);let w={kvs:[{key:"",value:"",tempId:(0,t.default)("env_"),comment:""}],projects:[],target:{development:!0,production:!0,preview:!0,gitBranch:!1,customEnvironmentIds:[]},error:void 0,isProcessing:!1,gitBranch:""};e.s(["EnvironmentVariablesReducer",0,(e,r)=>(0,n.produce)(e,e=>{switch(r.type){case"add_new_kv":return e.kvs=[...e.kvs,{key:"",value:"",tempId:(0,t.default)("env_")}],e;case"remove_kv":return e.kvs=e.kvs.filter(e=>e.tempId!==r.payload.id),0===e.kvs.length&&(e.kvs=[{key:"",value:"",tempId:(0,t.default)("env_")}]),e;case"update_kv":return e.kvs[r.payload.index]={...e.kvs[r.payload.index],...r.payload.update},e.error&&(e.error.envVarIds=e.error.envVarIds.filter(t=>t!==e.kvs[r.payload.index].tempId)),e;case"prefill_form":{let{envVar:t}=r.payload;return e.kvs=[{key:t.key,value:t.value,tempId:t.id}],e.target=S(t),e.gitBranch=t.gitBranch||"",e.projects=t.projects??[],e.sensitive=t.type===a.EnvType.Sensitive,e}case"update_target":return e.target={...e.target,...r.payload.target},e.target.preview||(e.gitBranch=void 0,e.target.gitBranch=!1),e;case"update_custom_environment_target":return e.target={...e.target,...r.payload.target},e;case"add_project":{let{project:t}=r.payload;return e.projects.find(e=>e.id===t.id)||(e.projects=[...e.projects,t]),e}case"remove_project":{let{id:t}=r.payload;return e.projects=e.projects.filter(e=>e.id!==t),e}case"error":return e.error={errorObject:r.payload.error,envVarIds:e.kvs.map(e=>e.tempId)},e;case"processing":return e.isProcessing=r.payload.isProcessing,e;case"sensitive":return e.sensitive=r.payload.sensitive,e;case"reset":return e.kvs=w.kvs,e.projects=w.projects,e.error=w.error,e.sensitive=w.sensitive,e;case"import_file":{let{fileData:n,insertAtIndex:a}=r.payload,s=Object.entries((0,i.parseEnv)(n));if(0===s.length)return e;return e.kvs=[...e.kvs.slice(0,a),...s.map(e=>{let[n,a]=e;return{key:n,value:a,tempId:(0,t.default)("env_")}}),...e.kvs.slice(a+1)],e}case"set_git_branch_name":{let{branchName:t}=r.payload;return e.gitBranch=t,e}case"form_submitted":{let{response:t}=r.payload;if(0===t.failed.length)return e.kvs=w.kvs,e.projects=w.projects,e.error=w.error,e;let n=e.kvs.filter(e=>!t.created.find(t=>t.key===e.key));return e.kvs=n,e.error={errorObject:t.failed[0].error,envVarIds:n.map(e=>e.tempId)},e}default:return e}}),"initialEnvVariableFormState",0,w],1847448)},1728195,e=>{e.v({container:"input-module__1EzHua__container",error:"input-module__1EzHua__error",input:"input-module__1EzHua__input",keyboardFocus:"input-module__1EzHua__keyboardFocus",large:"input-module__1EzHua__large",mediumSmall:"input-module__1EzHua__mediumSmall",noPrefixStyle:"input-module__1EzHua__noPrefixStyle",noSuffixStyle:"input-module__1EzHua__noSuffixStyle",prefix:"input-module__1EzHua__prefix",small:"input-module__1EzHua__small",suffix:"input-module__1EzHua__suffix",xSmall:"input-module__1EzHua__xSmall"})},538090,e=>{e.v({bold:"tev-add-form-module__PZYaGG__bold",button:"tev-add-form-module__PZYaGG__button",commentField:"tev-add-form-module__PZYaGG__commentField",container:"tev-add-form-module__PZYaGG__container "+e.i(1728195).container,dragEffectBackground:"tev-add-form-module__PZYaGG__dragEffectBackground",envVarsForm:"tev-add-form-module__PZYaGG__envVarsForm",error:"tev-add-form-module__PZYaGG__error "+e.i(1728195).error,keyboardFocus:"tev-add-form-module__PZYaGG__keyboardFocus",label:"tev-add-form-module__PZYaGG__label",large:"tev-add-form-module__PZYaGG__large",projectList:"tev-add-form-module__PZYaGG__projectList",projectName:"tev-add-form-module__PZYaGG__projectName",selectedProjectEntity:"tev-add-form-module__PZYaGG__selectedProjectEntity",small:"tev-add-form-module__PZYaGG__small",textAreaHeight:"tev-add-form-module__PZYaGG__textAreaHeight",textarea:"tev-add-form-module__PZYaGG__textarea "+e.i(1728195).input,textareaInput:"tev-add-form-module__PZYaGG__textareaInput",textareaStack:"tev-add-form-module__PZYaGG__textareaStack",textareaWrapper:"tev-add-form-module__PZYaGG__textareaWrapper",viewValueButton:"tev-add-form-module__PZYaGG__viewValueButton"})},7280270,e=>{"use strict";var t=e.i(847684),n=e.i(7185353),a=e.i(2504781),i=e.i(6881349),r=e.i(3671642),s=e.i(5255926),l=e.i(7917902),o=e.i(7957251),d=e.i(2107254),c=e.i(5819220),u=e.i(979715),m=e.i(4712634),v=e.i(8916169),p=e.i(7710663),h=e.i(6319736),x=e.i(6509836),f=e.i(1138941),y=e.i(538090),g=e.i(3845686);function j(e){let{project:n,removeProject:i}=e,r=(0,f.useFramework)(n);return(0,t.jsxs)(c.Entity,{actions:(0,t.jsx)(a.Button,{"aria-label":"remove row",className:y.default.button,onClick:()=>{i(n)},style:{"--themed-bg":"var(--ds-gray-1000)"},svgOnly:!0,type:"tertiary",children:(0,t.jsx)(o.MinusCircle,{})}),className:y.default.selectedProjectEntity,thumbnail:(0,t.jsx)(m.EntityThumbnail,{size:20,wrap:!0,children:r?(0,t.jsx)(x.FrameworkIcon,{framework:r,size:20}):null}),children:[(0,t.jsx)(u.EntityField,{className:y.default.bold,title:n.name}),n.targets?.production?.alias?.[0]?(0,t.jsx)(u.EntityField,{description:n.targets.production.alias[0]}):null]},n.id)}function b(e){let{selectedProjects:a,selectProject:i}=e,[r,l]=(0,n.useState)(""),[o,c]=(0,d.useProjectListInfinite)({limit:20,latestDeployments:0,search:r},{},!1,!0);if(void 0===o.data)return(0,t.jsx)(s.Skeleton,{height:40,width:"100%"});let{projects:u}=c;return(0,t.jsx)(g.StyledCombobox,{ListFooterComponent:(0,t.jsx)(v.default,{swr:c}),OptionComponent:E,classNames:{list:y.default.projectList},hideSelectedItems:!0,items:u,onChange:e=>{let t=u.find(t=>t.name===e)??null;t&&i(t)},placeholderText:"Search for a Project to link to…",search:r,selectedItems:a,setSearch:l})}function E(e){let{item:n}=e,a=(0,f.useFramework)(n);return(0,t.jsx)(i.Combobox.Option,{prefix:a?(0,t.jsx)(x.FrameworkIcon,{framework:a,size:24}):void 0,suffix:n.targets?.production?.alias?.[0]??void 0,truncateSuffix:!0,value:n.name,children:(0,t.jsx)("span",{className:y.default.projectName,children:n.name})})}e.s(["TEVProjectSelectComponent",0,function(e){let{dispatch:n,selectedProjects:a,SWRDataToWaitFor:i}=e,{data:o}=(0,p.useFrameworks)(),{account:d}=(0,l.useAccount)();return(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:(0,t.jsx)(r.Label,{value:"Link to Projects",children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-1",children:(0,t.jsxs)(h.EnsureSWRData,{data:[d,o,...i],fallback:(0,t.jsx)(s.Skeleton,{height:40,width:"100%"}),children:[(0,t.jsx)(b,{selectProject:e=>{n({type:"add_project",payload:{project:e}})},selectedProjects:a}),!!a.length&&(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-1",children:a.map(e=>(0,t.jsx)(j,{project:e,removeProject:()=>{n({type:"remove_project",payload:{id:e.id}})}},e.id))})]})})})})}])},2183562,e=>{e.v({amber:"index-module__G9ddHW__amber",hidden:"index-module__G9ddHW__hidden",muted:"index-module__G9ddHW__muted",overlay:"index-module__G9ddHW__overlay",symbol:"index-module__G9ddHW__symbol",tooltipContainer:"index-module__G9ddHW__tooltipContainer",tooltipContainerContainer:"index-module__G9ddHW__tooltipContainerContainer",tooltipContent:"index-module__G9ddHW__tooltipContent"})},6024244,e=>{e.v({container:"tev-key-input-module__L-kdSa__container",inputSpacer:"tev-key-input-module__L-kdSa__inputSpacer",monoInput:"tev-key-input-module__L-kdSa__monoInput",overlay:"tev-key-input-module__L-kdSa__overlay",tooltipContainer:"tev-key-input-module__L-kdSa__tooltipContainer",tooltipContainerContainer:"tev-key-input-module__L-kdSa__tooltipContainerContainer",tooltipContent:"tev-key-input-module__L-kdSa__tooltipContent",warn:"tev-key-input-module__L-kdSa__warn"})},5451849,1081769,e=>{"use strict";var t=e.i(847684),n=e.i(7185353),a=e.i(9722978),i=e.i(5468328),r=e.i(762945),s=e.i(1114103),l=e.i(8436238),o=e.i(6380887),d=e.i(2183562);function c(e){let t=/^\s+$/;for(let n=0;n<e.length;n++)if(!t.test(e[n]))return n;return -1}let u={"\n":{symbol:"↵\n",class:d.default.amber},"\r":{symbol:"↵\n",class:d.default.amber},"	":{symbol:"⇥",class:d.default.amber},"\v":{symbol:"␋",class:d.default.amber}," ":{symbol:"␣"},"\f":{symbol:"␌",class:d.default.amber}," ":{symbol:"␣"}," ":{symbol:"␣"},"​":{symbol:"␣"},"‌":{symbol:"␣"},"‍":{symbol:"␣"},"\u2028":{symbol:"␣"},"\u2029":{symbol:"␣"}," ":{symbol:"␣"}," ":{symbol:"␣"},"　":{symbol:"␣"},"\uFEFF":{symbol:"␣"}};e.s(["EnvVariableValueOverlay",0,function(e){var m;let v,p,h,x,f,{value:y,width:g,id:j,className:b}=e,[E,_]=(0,n.useState)(!1),C=0===y.length,S=C?" ":y.replace(/\n$/,"\n "),k=C?[]:S.split(""),w=!C&&/^\s+/gm.exec(S),T=!C&&/\s+$/gm.exec(S),N=S.includes("\r")||S.includes("\n"),I=S.includes("\0"),P=[];return w&&T?P.push("starts and ends with whitespace"):w?P.push("starts with whitespace"):T&&P.push("ends with whitespace"),N&&P.push("has return characters"),I&&P.push("contains null characters"),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("pre",{"aria-hidden":"true",className:(0,a.clsx)(d.default.overlay,b),style:{width:g??"100%"},children:(v=c(m=k),p=c([...m].reverse()),h=m.slice(0,v),x=m.slice(v,m.length-p),f=m.slice(m.length-p,m.length),[...h.map(e=>({symbol:u[e].symbol||u[" "].symbol,class:d.default.amber})),...x.map(e=>{let t=u[e];return t?{symbol:t.symbol,class:t.class||d.default.muted}:{symbol:e}}),...f.map((e,t)=>t===f.length-1&&"\n"===f[t-1]&&" "===f[t]?{symbol:e}:{symbol:u[e].symbol||u[" "].symbol,class:d.default.amber})]).map((e,n)=>e.class?(0,t.jsx)("span",{className:(0,a.clsx)(d.default.symbol,e.class),children:e.symbol},n):(0,t.jsx)("span",{className:d.default.hidden,children:e.symbol},n))}),(0,t.jsx)(s.AnimatePresence,{children:P.length>0&&!E?(0,t.jsx)(l.motion.div,{animate:{opacity:1},"aria-label":`This value ${P.join(" and ")}.`,className:d.default.tooltipContainerContainer,exit:{opacity:0},id:j,initial:{opacity:0},transition:{duration:0},children:(0,t.jsx)(l.motion.div,{animate:{opacity:1},className:d.default.tooltipContainer,exit:{opacity:0,transition:{duration:0}},initial:{opacity:0},children:!E&&(0,t.jsx)(i.Tooltip,{"aria-label":"Hide warning",as:"button",delay:!1,htmlType:"button",onClick:()=>{_(!0)},sticky:!0,text:(0,t.jsx)("div",{onClick:e=>{e.stopPropagation()},className:(0,a.clsx)("flex flex-row items-center justify-between gap-2 flex-initial",d.default.tooltipContent),children:(0,t.jsxs)(o.Balancer,{children:["This value ",P.join(" and "),"."]})}),children:(0,t.jsx)(r.Warning,{size:14})})})},"tooltip"):null})]})}],5451849);var m=e.i(3500331),v=e.i(361349),p=e.i(8238875),h=e.i(6060673),x=e.i(1138941),f=e.i(4551858),y=e.i(6024244);let g=["NEXT_PUBLIC_","VUE_APP_","REACT_APP_","GATSBY_","GRIDSOME_","NUXT_PUBLIC_","STORYBOOK_","VITE_","PUBLIC_"],j=["password","key","private","access_token","access","auth","secret","jwt","signature"],b=e=>{let t=_();return(t?[...g,t]:g).find(t=>e.toLowerCase().startsWith(t.toLowerCase()))};function E(e){let o,{keyValue:d,inputRef:c}=e,[u,m]=(0,n.useState)(d),[p,h]=(0,n.useState)(!1),[x,f]=(0,n.useState)(!1),g=b(d),E=`${g||""} exposes this value to the browser. Verify it is safe to share publicly`,_=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"font-mono text-[12px] leading-[16px] font-medium",children:g})," ","exposes this value to the browser. Verify it is safe to share publicly."]}),C=!!g,S=(o=RegExp(j.join("|"),"i").exec(d))?o[0]:null;return null!==S&&(E=`This key, which is prefixed with ${g||""} and includes the term ${S}, might expose sensitive information to the browser. Verify it is safe to share publicly.`,_=(0,t.jsxs)(t.Fragment,{children:["This key, which is prefixed with"," ",(0,t.jsx)("span",{className:"font-mono text-[12px] leading-[16px] font-medium",children:g})," ","and includes the term"," ",(0,t.jsx)("span",{className:"font-mono text-[12px] leading-[16px] font-medium",children:S}),", might expose sensitive information to the browser. Verify it is safe to share publicly."]})),(0,n.useEffect)(()=>{p&&d!==u&&h(!1)},[p,d,u]),(0,v.useInterval)(()=>{c?.current&&f(c.current.scrollWidth>c.current.clientWidth+4&&0===c.current.scrollLeft)},50),(0,t.jsx)(s.AnimatePresence,{children:C&&g&&!p?(0,t.jsxs)(l.motion.div,{animate:{opacity:1},"aria-label":E,className:y.default.tooltipContainerContainer,exit:{opacity:0},initial:{opacity:0},transition:{duration:0},children:[(0,t.jsx)(l.motion.div,{animate:{opacity:+!!x},className:y.default.overlay,style:{pointerEvents:"none"},transition:{duration:0}}),(0,t.jsx)(l.motion.div,{animate:{opacity:1},className:(0,a.clsx)(y.default.tooltipContainer,{[y.default.warn]:S}),exit:{opacity:0,transition:{duration:0}},initial:{opacity:0},children:(0,t.jsx)(i.Tooltip,{"aria-label":"Hide warning",as:"button",delay:!1,htmlType:"button",onClick:()=>{h(!0),m(d)},sticky:!0,text:(0,t.jsx)("div",{onClick:e=>{e.stopPropagation()},className:(0,a.clsx)("flex flex-row items-center justify-between gap-2 flex-initial",y.default.tooltipContent),children:(0,t.jsx)("span",{children:_})}),children:(0,t.jsx)(r.Warning,{size:14})})})]},"tooltip"):null})}let _=()=>{var e;let t,{data:n}=(0,h.useProject)((0,x.useProjectIdOrName)()),{data:a}=(0,h.useProject)(n?.id),i=(0,p.useParams)()?.teamSlug,r=a?.framework,s=!1;(void 0===r||"sveltekit-1"!==r&&"sveltekit-2"!==r)&&(s=!0);let l=a?.targets?.production?.id;void 0===l&&(s=!0);let o=new URL(`/api/v7/deployments/${l||""}/files/get`,"https://vercel.com");o.searchParams.append("path","svelte.config.js");let{data:d}=(0,f.useFileContent)(s?null:{type:"file",name:"svelte.config.js",link:o.toString(),mime:"application/javascript"},i);return void 0!==d&&"string"==typeof d?(e=d,(t=/publicPrefix:\s*'(?<value>[^']*)'/.exec(e))?t[1]:null):null};e.s(["EnvVariableKeyInput",0,function(e){let{inputRef:n,isErrorState:i,disabled:r,testId:s,onChange:l,id:o,placeholder:d,value:c,onPaste:u}=e,v=b(c);return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-1",children:[(0,t.jsxs)("div",{className:(0,a.clsx)("flex flex-col items-stretch justify-start flex-initial",y.default.container),children:[(0,t.jsx)(m.Input,{"aria-label":"environment variable key",className:y.default.monoInput,"data-testid":s,disabled:r,id:o,label:n?"key":null,maxLength:256,onChange:l,onPaste:u,placeholder:d,ref:n,style:{paddingRight:v?"36px":"12px"},type:i?"error":"default",value:c}),(0,t.jsx)(E,{inputRef:n,keyValue:c})]}),(0,t.jsx)("div",{className:y.default.inputSpacer})]})}],1081769)},4981189,e=>{"use strict";var t=e.i(847684),n=e.i(7185353),a=e.i(7880321),i=e.i(9722978),r=e.i(9318197),s=e.i(3671642),l=e.i(2504781),o=e.i(3500331),d=e.i(4030453),c=e.i(6300206),u=e.i(7957251),m=e.i(5883567),v=e.i(1933683),p=e.i(3973638),h=e.i(5756088),x=e.i(4004502),f=e.i(5927860),y=e.i(9544652),g=e.i(692265),j=e.i(2446691),b=e.i(5451849),E=e.i(1081769),_=e.i(187815),C=e.i(538090);let S=(0,n.forwardRef)((e,a)=>{let{disabled:u,label:m,resize:f,width:E,error:_,type:S,size:w,className:T,wrapperClassName:N,spellCheck:I=!1,autoCapitalize:P="off",autoComplete:L="off",autoCorrect:A="off",isEditing:V=!1,isSensitive:R=!1,inputType:B,...F}=e,O=(0,g.useId)("aria"),D=m?s.Label:"label",{focusProps:M,isFocusVisible:$}=(0,c.useFocusRing)({isTextInput:!0}),G={...m?{value:m,withInput:!0,className:(0,i.clsx)(N,C.default.label)}:{className:N}},H=(0,y.useDisabled)()||u,z=(0,g.useId)("textarea-"),W=(0,j.useType)(_?"error":S),[U,Y]=(0,n.useState)(!!R);(0,n.useEffect)(()=>{Y(!!R)},[R]);let Z=U||R&&V,q=!!(R&&!V)&&(0,t.jsx)(l.Button,{"aria-label":"Toggle sensitive value visibility",className:(0,i.clsx)(C.default.button,C.default.viewValueButton,"!-mr-1 !ml-3"),onClick:()=>Y(!U),svgOnly:!0,title:"Toggle sensitive value visibility",type:"secondary",typeName:"button",children:U?(0,t.jsx)(v.Eye,{size:16,style:{flexShrink:0}}):(0,t.jsx)(p.EyeOff,{size:16,style:{flexShrink:0}})});return(0,t.jsxs)(D,{"data-version":"v1",...G,children:[(0,t.jsxs)("div",{className:`flex flex-row items-stretch justify-start flex-initial ${(0,i.clsx)(C.default.textareaStack,Z?C.default.textAreaHeight:"")}`,children:[(0,t.jsx)("div",{className:(0,i.clsx)(C.default.container,W,C.default.textareaWrapper),children:Z?(0,t.jsx)(o.Input,{...F,autoCapitalize:P,autoComplete:L,autoCorrect:A,className:(0,i.clsx)(C.default.textarea,W,{[C.default.large]:"large"===w,[C.default.small]:"small"===w},T,C.default.textareaInput),"data-testid":(0,x.tid)("env-variables","add-form","value-input"),disabled:H,innerWrapperClassName:"!shadow-none",prefix:R&&V?(0,t.jsx)(h.LockClosed,{size:16}):null,prefixStyling:!1,ref:a,spellCheck:I,typeName:B,width:E??"100%"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("textarea",{"aria-describedby":O,...F,autoCapitalize:P,autoComplete:L,autoCorrect:A,className:(0,i.clsx)(C.default.textarea,W,{[C.default.large]:"large"===w,[C.default.small]:"small"===w,[String(C.default.keyboardFocus)]:$},T,C.default.textareaInput),"data-testid":(0,x.tid)("env-variables","add-form","value-input"),disabled:H,ref:a,spellCheck:I,style:{resize:f,width:E},...M}),(0,t.jsx)(b.EnvVariableValueOverlay,{id:O,value:F.value,width:E})]})}),q]}),_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Spacer,{y:.5}),(0,t.jsx)(d.Error,{"data-testid":F["data-testid"]?(0,x.tid)(F["data-testid"],"error"):void 0,error:_,id:`${z}-error`,size:k[w||"small"],style:{width:E}})]}):null]})}),k={xSmall:"small",small:"small",mediumSmall:"small",large:"large"};function w(e){let{inputRef:a,valueInputRef:i,dispatch:r,index:s,kv:d,enableBulk:c=!1,isEditing:m=!1,isErrorState:v,isSensitive:p}=e,[h,y]=(0,n.useState)(!!p),g=(0,n.useRef)(null);return(0,n.useEffect)(()=>{y(!!p)},[p]),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-evenly gap-3 flex-1 group",children:[(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-evenly gap-3 flex-1",children:[(0,t.jsx)(E.EnvVariableKeyInput,{disabled:!!p&&m,inputRef:a,isErrorState:v,onChange:e=>{r({type:"update_kv",payload:{index:s,update:{key:e.target.value}}})},onPaste:e=>{c&&0!==Object.entries((0,_.parseEnv)(e.clipboardData.getData("text"))).length&&(e.preventDefault(),r({type:"import_file",payload:{fileData:e.clipboardData.getData("text"),insertAtIndex:s}}))},placeholder:"CLIENT_KEY…",testId:(0,x.tid)("env-variables","add-form","name-input"),value:d.key}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-1",children:(0,t.jsx)(S,{"aria-label":"shared environment variable value",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputType:h&&!m?"password":"text",isEditing:m,isSensitive:p,label:a?"value":null,onChange:e=>r({type:"update_kv",payload:{index:s,update:{value:e.target.value}}}),ref:i,type:v?"error":"default",placeholder:p&&m?"This value is sensitive":void 0,value:d.value})}),(0,t.jsx)("div",{className:"flex flex-row items-start justify-start gap-2 flex-initial group-first:mt-7",children:c?(0,t.jsx)(l.Button,{"aria-label":"remove row",className:C.default.button,onClick:()=>r({type:"remove_kv",payload:{id:d.tempId}}),svgOnly:!0,title:"Delete row",type:"secondary",typeName:"button",children:(0,t.jsx)(u.MinusCircle,{size:16,style:{flexShrink:0}})}):(0,t.jsx)("div",{"aria-hidden":!0,style:{width:40}})})]}),(0,t.jsx)(o.Input,{"aria-label":"shared environment variable comment",id:"comment",innerWrapperClassName:a?void 0:C.default.commentField,label:a?"Note":null,maxLength:f.ENV_VAR_COMMENT_MAX_LENGTH,onChange:e=>r({type:"update_kv",payload:{index:s,update:{comment:e.target.value}}}),placeholder:"Describe how you created this environment variable and how it is used",ref:g,value:d.comment,wrapperClassName:a?C.default.commentField:void 0})]})}S.displayName="Textarea",e.s(["TEVInputSection",0,function(e){let{kvs:i,dispatch:r,enableBulk:s=!1,isEditing:o=!1,firstInputRef:d,error:c,isSensitive:u}=e,[v,p]=(0,a.useQueryState)("new",a.parseAsString),h=(0,n.useRef)(null);return(0,n.useEffect)(()=>{v&&v&&i.length>0&&""===i[0].key&&(r({type:"update_kv",payload:{index:0,update:{key:v}}}),h.current&&h.current.focus(),p(null))},[v,i,r,p]),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[i.map((e,n,a)=>(0,t.jsx)(w,{dispatch:r,enableBulk:s,index:n,inputRef:0===n?d:void 0,valueInputRef:0===n?h:void 0,isEditing:o,isErrorState:c?.envVarIds.includes(e.tempId),isSensitive:u,kv:e},e.tempId)),s?(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-3 flex-1",children:(0,t.jsx)(l.Button,{onClick:()=>r({type:"add_new_kv"}),prefix:(0,t.jsx)(m.PlusCircle,{}),size:"small",type:"secondary",typeName:"button",children:"Add Another"})}):null]})}])},2215529,e=>{"use strict";var t=e.i(847684),n=e.i(7185353),a=e.i(7277131),i=e.i(8248823),r=e.i(134877),s=e.i(8238875),l=e.i(3993360),o=e.i(2504781),d=e.i(455575),c=e.i(4030453),u=e.i(4004502),m=e.i(9722978),v=e.i(5433449),p=e.i(5927860),h=e.i(1717203),x=e.i(7557283),f=e.i(3245331),y=e.i(8432052),g=e.i(4089015),j=e.i(4171299),b=e.i(6060673),E=e.i(9512272),_=e.i(5601055),C=e.i(6949145),S=e.i(1847448),k=e.i(4805353),w=e.i(7280270),T=e.i(4981189),N=e.i(809476),I=e.i(538090),P=e.i(3671642),L=e.i(1906681),A=e.i(5468328),V=e.i(57106);function R(e){let{dispatch:a,state:i}=e,r=!!i.target.development;return(0,n.useEffect)(()=>{a({type:"sensitive",payload:{sensitive:!i.target.development&&!!i.sensitive}})},[i.target.development]),(0,t.jsxs)("div",{className:"flex flex-col items-start justify-start gap-0 flex-initial",children:[(0,t.jsx)(P.Label,{value:"Sensitive"}),(0,t.jsxs)("div",{className:"flex flex-col items-start justify-start gap-2 flex-initial",children:[(0,t.jsxs)("p",{className:"text-copy-14",children:["If enabled, you and your team will not be able to read the values after creation."," ",(0,t.jsx)(V.Link,{external:!0,href:"/docs/environment-variables/sensitive-environment-variables",type:"highlight",children:"Learn more"})]}),(0,t.jsx)(A.Tooltip,{disableTriggers:!i.target.development,text:"Sensitive environment variables cannot be created in the Development environment.",children:(0,t.jsx)(L.Toggle,{"aria-labelledby":"label-for-sensitive-toggle",checked:!!i.sensitive,direction:"switch-first",disabled:r,name:"add-form-sensitive",onChange:()=>{a({type:"sensitive",payload:{sensitive:!i.sensitive}}),!1===i.sensitive&&a({type:"update_target",payload:{target:{development:!1}}})},size:"large",children:(0,t.jsx)("p",{className:"text-copy-14",id:"label-for-sensitive-toggle",children:i.sensitive?"Enabled":"Disabled"})})})]})]})}function B(e){var s;let{formSubmit:l,onSave:v,isEditing:h,canCreateSharedEnvVars:x,arePermissionsLoading:g,bulkEnvVarEnabled:j,envVar:b,envVarWithProjects:E,secondaryAction:_,destructiveAction:P,teamId:L,fileUploadRef:A,variant:V,formClassName:B,containerClassName:F,restrictToEnvironmentIds:O,disableEnvironmentPicker:D}=e,M=b?{gitBranch:(s=b).gitBranch||"",isProcessing:!1,kvs:[],projects:[],sensitive:s.type===p.EnvType.Sensitive,target:(0,k.getEnvironmentTargetsStateFromEnv)(s)}:S.initialEnvVariableFormState,[$,G]=(0,n.useReducer)(S.EnvironmentVariablesReducer,M),{team:H,isTeamReady:z,isLoading:W}=(0,C.useSensitiveEnvironmentVariablePolicy)(),U=z&&!W&&(0,C.getBooleanValueFromOnOffDefault)(H?.sensitiveEnvironmentVariablePolicy),Y=(0,n.useRef)(null),Z=(0,n.useRef)(null),q=(0,d.useToasts)();(0,n.useEffect)(()=>{let e=A?.current;if(e)return document.addEventListener("dragenter",t),document.addEventListener("dragover",n),document.addEventListener("dragleave",a),document.addEventListener("drop",s),e.addEventListener("change",r),()=>{document.removeEventListener("dragenter",t),document.removeEventListener("dragover",n),document.removeEventListener("dragleave",a),document.removeEventListener("drop",s),e.removeEventListener("change",r)};function t(e){Z.current&&e.dataTransfer?.items[0].kind==="file"&&Z.current.classList.add("drag-enter")}function n(e){Z.current&&e.target===Z.current&&(e.preventDefault(),Z.current.classList.add("drag-over"))}function a(e){Z.current&&e.target===Z.current&&(Z.current.classList.remove("drag-over"),Z.current.classList.remove("drag-enter"))}function i(e){if(!e||"text/plain"!==e.type&&""!==e.type)return void q.error("Please upload a valid env file");let t=new FileReader;t.onload=e=>{let t=e.target?.result;t&&G({type:"import_file",payload:{fileData:t.toString(),insertAtIndex:$.kvs.length-1}})},t.readAsText(e)}function r(e){i(e.target.files?.[0])}function s(e){Z.current&&(e.target===Z.current&&(e.preventDefault(),i(e.dataTransfer?.files[0])),Z.current.classList.remove("drag-over"),Z.current.classList.remove("drag-enter"))}},[A,$.kvs.length,q]),(0,n.useEffect)(()=>{(E?.type===p.EnvType.Sensitive||E?.decrypted)&&G({type:"prefill_form",payload:{envVar:E}})},[E]);let K=(0,n.useCallback)(async()=>{G({type:"processing",payload:{isProcessing:!0}});try{let e,t=await l($);if(G({type:"form_submitted",payload:{response:t}}),E?.id){let t=new Set(E.projectId),n=new Set($.projects.map(e=>e.id)),a=[...t].filter(e=>n.has(e)).concat([...n].filter(e=>!t.has(e)));e={id:E.id,key:$.kvs[0].key,value:$.sensitive?"":$.kvs[0].value,target:(0,k.getEnvironmentTargets)($.target),projectId:a,type:$.sensitive?p.EnvType.Sensitive:p.EnvType.Encrypted,updatedAt:(E.updatedAt??0)+1}}v(e),G({type:"reset"})}catch(e){G({type:"error",payload:{error:(0,r.isAPIError)(e)&&"envs_size_too_large"===e.code?Error("Unable to save environment variables. Insufficient space. Consider deleting some variables."):(0,i.normalizeError)(e)}})}G({type:"processing",payload:{isProcessing:!1}}),Y.current?.focus()},[E?.id,E?.updatedAt,E?.projectId,l,v,$]),X=$.error?(0,t.jsx)(c.Error,{"data-testid":(0,u.tid)("env-variables","error-message"),error:$.error.errorObject}):null;return(0,t.jsxs)(f.default,{className:(0,m.clsx)(I.default.envVarsForm,"tailwind"),"data-testid":(0,u.tid)("env-variables","add-form"),onSubmit:()=>void K(),children:[(0,t.jsx)("div",{className:I.default.dragEffectBackground,ref:Z}),(0,t.jsx)(y.EntityForm,{className:(0,m.clsx)("bg-background-100 p-0",B),destructiveAction:P,disabled:g||!x,footerClassName:"p-4 bg-background-200 rounded-bl-[var(--geist-radius)] rounded-br-[var(--geist-radius)] env-vars-footer",footerNote:null,footerSeparator:!1,primaryAction:(0,t.jsx)(o.Button,{loading:$.isProcessing,size:"small",typeName:"submit",children:"Save"}),secondaryAction:_,title:null,children:(0,t.jsxs)("div",{className:(0,m.clsx)("flex flex-col items-stretch justify-start gap-4 flex-initial p-4 pb-0",F),children:[h||U?null:(0,t.jsx)(R,{dispatch:G,state:$}),(0,t.jsx)(N.FullWidthHR,{}),(0,t.jsx)(k.TEVEnvironmentSelector,{disableEnvironmentPicker:D,disableDevelopmentEnvironment:!!$.sensitive,dispatch:G,gitBranch:$.gitBranch,mustBeSensitive:U,restrictToEnvironmentIds:O,state:$,teamId:L,variant:V}),(0,t.jsx)(N.FullWidthHR,{}),(0,t.jsx)(a.NuqsAdapter,{children:(0,t.jsx)(T.TEVInputSection,{dispatch:G,enableBulk:j,error:$.error,firstInputRef:Y,isEditing:h,isLoading:null===E,isSensitive:$.sensitive,kvs:$.kvs})}),X,"shared"===V&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.FullWidthHR,{}),(0,t.jsx)(w.TEVProjectSelectComponent,{SWRDataToWaitFor:[null===E?void 0:null],dispatch:G,selectedProjects:$.projects})]}),(0,t.jsx)(N.FullWidthHR,{})]})})]})}e.s(["ProjectEnvVariablesAddForm",0,function(e){let{teamId:a,onSave:i,formClassName:r,containerClassName:l,restrictToEnvironmentIds:d}=e,{project:c}=(0,s.useParams)()??{project:""},{data:u}=(0,b.useProject)(c),m=u?.id,{can:f,isLoading:y}=(0,h.default)({teamId:a}),g=f(x.Action.Create,x.Resource.ProjectEnvVars),j=(0,n.useRef)(null),_=(0,n.useCallback)(e=>{let t=(0,k.getEnvironmentTargets)(e.target);if(void 0===m)throw Error("Couldn't find project");return(0,E.addEnvs)(m,e.kvs.map(n=>{let a={name:n.key,value:n.value,target:t,type:e.sensitive?p.EnvType.Sensitive:p.EnvType.Encrypted,gitBranch:e.target.gitBranch&&e.gitBranch?e.gitBranch:void 0,comment:n.comment};return a.customEnvironmentIds=e.target.customEnvironmentIds,a}),a)},[m,a]);return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(B,{arePermissionsLoading:y,bulkEnvVarEnabled:!0,canCreateSharedEnvVars:g,containerClassName:l,destructiveAction:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{accept:"env","aria-hidden":!0,multiple:!1,ref:j,style:{display:"none"},type:"file"}),(0,t.jsx)(o.Button,{disabled:!j.current,onClick:()=>j.current?.click(),prefix:(0,t.jsx)(v.FileText,{}),size:"small",type:"secondary",typeName:"button",children:"Import .env"})]}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"or paste the .env contents above"})]}),fileUploadRef:j,formClassName:r,formSubmit:_,onSave:e=>{i?.(e)},restrictToEnvironmentIds:d,teamId:a,variant:"project"})})},"TeamEnvVariablesAddForm",0,function(e){let{teamId:a,onSave:i}=e,{can:r,isLoading:s}=(0,h.default)({teamId:a}),c=r(x.Action.Create,x.Resource.SharedEnvVars),u=(0,d.useToasts)(),m=(0,n.useRef)(null),v=(0,n.useCallback)(e=>(0,g.addSharedEnvs)({kvs:e.kvs,projectId:e.projects.map(e=>e.id),target:(0,k.getEnvironmentTargets)(e.target),teamId:a,type:e.sensitive?p.EnvType.Sensitive:p.EnvType.Encrypted,applyToAllCustomEnvironments:e.target.customEnvironmentIds.includes(_.INCLUDE_ALL_CUSTOM_ENVIRONMENTS_ID)}),[a]);return(0,t.jsx)(B,{arePermissionsLoading:s,bulkEnvVarEnabled:!0,canCreateSharedEnvVars:c,destructiveAction:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{accept:"env","aria-hidden":!0,multiple:!1,ref:m,style:{display:"none"},type:"file"}),(0,t.jsx)(o.Button,{disabled:!m.current,onClick:()=>m.current?.click(),prefix:(0,t.jsx)(l.Download,{}),size:"small",type:"secondary",typeName:"button",children:"Import"})]}),(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"or paste the .env contents above"})]}),fileUploadRef:m,formSubmit:v,onSave:e=>{u.success("Added Shared Environment Variable successfully."),i?.(e)},teamId:a,variant:"shared"})},"TeamEnvVariablesEditForm",0,function(e){let{isEditing:a,envVar:i,teamId:r,onSave:s,onCancel:l,disableEnvironmentPicker:c,containerClassName:u}=e,{can:m,isLoading:v}=(0,h.default)({teamId:r}),f=m(x.Action.Update,x.Resource.SharedEnvVars),y=(0,d.useToasts)(),{data:g,isLoading:E}=(0,b.useProjects)(i.projectId,{config:{revalidateOnFocus:!1}}),[C,S]=(0,n.useState)(null);(0,n.useEffect)(()=>{!E&&(i.type===p.EnvType.Sensitive||i.decrypted)&&S({...i,projects:g})},[g,i,E]);let w=(0,n.useCallback)(e=>{let t=new Set(e.projects.map(e=>e.id)),n=new Set(i.projectId),a=[...t].filter(e=>!n.has(e)),s=[...n].filter(e=>!t.has(e));return(0,j.updateSharedEnvVar)({envVar:i,payload:{...e.kvs[0],target:(0,k.getEnvironmentTargets)(e.target),projectIdUpdates:{link:a,unlink:s}},teamId:r,applyToAllCustomEnvironments:e.target.customEnvironmentIds.includes(_.INCLUDE_ALL_CUSTOM_ENVIRONMENTS_ID)})},[i,r]);return(0,t.jsx)(B,{arePermissionsLoading:v,bulkEnvVarEnabled:!1,canCreateSharedEnvVars:f,containerClassName:u,disableEnvironmentPicker:c,envVar:i,envVarWithProjects:C,formSubmit:w,isEditing:a,onSave:e=>{y.success("Updated Shared Environment Variable successfully."),s(e)},secondaryAction:(0,t.jsx)(o.Button,{onClick:l,size:"small",type:"secondary",children:"Cancel"}),teamId:r,variant:"shared"})}],2215529)},6116602,e=>{e.v({optionBranch:"env-variables-filter-module__XqclKW__optionBranch"})},1411137,e=>{"use strict";var t=e.i(847684),n=e.i(5323212),a=e.i(6881349),i=e.i(5255926),r=e.i(4004502),s=e.i(5927860),l=e.i(7713873),o=e.i(8835183),d=e.i(4345845),c=e.i(8249095),u=e.i(7957424),m=e.i(6116602);e.s(["EnvVariablesFilter",0,function(e){let{envs:v,search:p,setSearch:h,envOrBranchFilter:x,setEnvOrBranchFilter:f,sortTarget:y,setSortTarget:g,disabled:j,disableEnvironmentSelector:b,isLoading:E,project:_}=e,C=Array.from(new Set((v||[]).map(e=>e.gitBranch??null).filter(Boolean))).sort((e,t)=>e.localeCompare(t)),{isLoading:S,data:{environments:k}}=(0,u.useAllEnvironments)(_);return(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-[50%]",children:(0,t.jsx)(o.SearchInput,{"data-testid":(0,r.tid)("env-variables-filter","search-input"),disabled:j,maxLength:256,onChange:e=>h(e.target.value),placeholder:"Search…",value:p,width:"100%"})}),f?(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-[25%]",children:(0,t.jsxs)(a.Combobox,{clearable:!1,"data-testid":(0,r.tid)("env-variables-filter","select"),disabled:j||b,noInputPrefix:!0,onChange:e=>f(e||l.allEnvironmentsFilter),value:x,children:[(0,t.jsx)(i.Skeleton,{show:!!(S||E),children:(0,t.jsx)(a.Combobox.Input,{})}),(0,t.jsx)(a.Combobox.List,{maxWidth:450,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Combobox.Option,{value:l.allEnvironmentsFilter,children:"All Environments"}),void 0===_&&(0,t.jsx)(a.Combobox.Option,{value:l.allCustomEnvironmentsFilter,children:"All Custom Environments"}),(0,t.jsx)(a.Combobox.Option,{value:(0,l.mapToEnvFilter)(s.EnvTarget.Production),children:"Production"}),(0,t.jsx)(a.Combobox.Option,{value:(0,l.mapToEnvFilter)(s.EnvTarget.Development),children:"Development"}),(0,t.jsx)(a.Combobox.Option,{value:(0,l.mapToEnvFilter)(s.EnvTarget.Preview),children:"Preview"}),k.filter(e=>(0,l.isCustomEnvId)(e.id)).sort((e,t)=>e.slug.localeCompare(t.slug)).map(e=>(0,t.jsx)(a.Combobox.Option,{className:m.default.optionBranch,value:e.id,children:e.slug},e.id)),C.map(e=>(0,t.jsx)(a.Combobox.Option,{prefix:(0,t.jsx)(d.GitBranch,{}),value:e,children:(0,t.jsx)("span",{className:`text-copy-14-mono ${m.default.optionBranch}`,children:e})},e))]})})]})}):null,(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start max-w-[184px] flex-[25%]",children:(0,t.jsxs)(n.Select,{disabled:j,onChange:e=>g(e.target.value),placeholder:"Sort by…",prefix:(0,t.jsx)(c.SortDescending,{}),value:y,children:[(0,t.jsx)("option",{value:"createdAt",children:"Last Updated"}),(0,t.jsx)("option",{value:"key",children:"Name"}),(0,t.jsx)("option",{value:"type",children:"Type"})]})})]})}])},1558786,e=>{e.v({iconContainer:"env-variables-icon-module__0YD5da__iconContainer"})},42012,7855500,3225137,e=>{"use strict";var t=e.i(847684),n=e.i(9722978),a=e.i(3627160),i=e.i(5756088),r=e.i(4585051),s=e.i(4450569),l=e.i(5328446),o=e.i(7743427),d=e.i(6417808);let c=()=>(0,t.jsxs)("svg",{fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M2.66675 4.66675V2.66675H13.3334V4.66675",stroke:"#666666",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M6 13.3333H10",stroke:"#666666",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M8 2.66675V13.3334",stroke:"#666666",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]});var u=e.i(1558786);e.s(["default",0,function(e){let{env:m}=e,{data:v}=(0,l.default)(m?.configurationId),{data:p}=(0,o.useIntegration)(v?.integrationId);if(!m.configurationId)if("plain"===m.type)return(0,t.jsx)(s.default,{center:!0,className:(0,n.clsx)(u.default.iconContainer,"plaintextIconContainer"),children:(0,t.jsx)(c,{})});else if("system"===m.type)return(0,t.jsx)(s.default,{center:!0,className:(0,n.clsx)(u.default.iconContainer,"systemIconContainer"),children:(0,t.jsx)(d.default,{color:"var(--accents-5)",width:16})});else if("encrypted"===m.type)return(0,t.jsx)(s.default,{center:!0,className:(0,n.clsx)(u.default.iconContainer,"encryptedIconContainer"),children:(0,t.jsx)(a.Code,{color:"gray-700"})});else if("sensitive"===m.type)return(0,t.jsx)(s.default,{center:!0,className:(0,n.clsx)(u.default.iconContainer,"sensitiveIconContainer"),children:(0,t.jsx)(i.LockClosed,{color:"gray-700"})});else return(0,t.jsx)(s.default,{center:!0,className:(0,n.clsx)(u.default.iconContainer,"secretIconContainer"),children:(0,t.jsx)(i.LockClosed,{color:"gray-700"})});return(0,t.jsx)(r.Avatar,{className:"integrationIcon",hash:p?.icon,placeholder:!v||!p,size:30})}],42012);var m=e.i(7185353),v=e.i(5858269),p=e.i(57106),h=e.i(9318197),x=e.i(9334091),f=e.i(3500331),y=e.i(4030453),g=e.i(3671642),j=e.i(2455417),b=e.i(6891161),E=e.i(455575),_=e.i(8042625),C=e.i(277234),S=e.i(4244280),k=e.i(5338940),w=e.i(7909933),T=e.i(1717203),N=e.i(7557283);function I(){let{config:e,id:t,noRequest:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isReady:a,team:i}=(0,k.useTeam)(),{can:r,isLoading:s}=(0,T.default)(),l=r(N.Action.Read,N.Resource.Secrets),o=a&&!s&&!n&&l;return(0,w.default)(()=>o?`${S.API_SECRETS}${(0,_.encode)({teamId:i?.id,id:t})}`:null,e=>(0,C.fetchAPI)(e,{throwOnHTTPError:!0}),e)}e.s(["useSecrets",0,I],7855500);var P=e.i(1138941),L=e.i(6060673);let A=e=>e.startsWith("-----BEGIN PRIVATE KEY-----\\n")&&e.endsWith("\\n-----END PRIVATE KEY-----\\n")?e.replace(/\\n/g,"\n"):e;e.s(["default",0,e=>{let{active:n,initialSecretName:a,onCancel:i,onAdd:r}=e,[l,o]=(0,m.useState)(""),[d,c]=(0,m.useState)(""),[u,w]=(0,m.useState)(void 0),[T,N]=(0,m.useState)(!1),{team:V}=(0,k.useTeam)(),R=(0,E.useToasts)(),{data:B}=I(),{data:F}=(0,L.useProject)((0,P.useProjectIdOrName)());(0,m.useEffect)(()=>{n&&o(e=>{if(e)return e;let t=(0,v.default)(a||F?.name||"");return B?.secrets.find(e=>e.name.toLowerCase()===t.toLowerCase())?`${t}-${Math.random().toString(36).substring(9)}`:t})},[a,n,F,B]);let O=async()=>{N(!0);let e=await (0,C.fetchAPI)(`${S.API_SECRETS}${(0,_.encode)({teamId:V?.id})}`,{method:"POST",body:JSON.stringify({name:l,value:d}),throwOnHTTPError:!1});N(!1),e.error?w(e.error):(r(e.uid),R.success("Created Secret successfully."))},D=(0,m.useCallback)(()=>{w(void 0),c(""),o("")},[]);return(0,t.jsxs)(b.Modal.Modal,{active:n,onAnimationDone:D,onClickOutside:i,width:"420px",children:[(0,t.jsxs)(b.Modal.Body,{children:[(0,t.jsxs)(s.default,{center:!0,children:[(0,t.jsx)("h4",{className:"text-copy-16",style:{fontWeight:500,margin:0},children:"Add Secret"}),(0,t.jsx)("p",{className:"text-copy-14 text-center",style:{color:"var(--accents-5)"},children:"Secrets contain sensitive information, are encrypted and also available across all projects."})]}),(0,t.jsx)("main",{children:(0,t.jsxs)("form",{className:"form",onSubmit:async e=>{e?.preventDefault(),await O()},children:[(0,t.jsx)(s.default,{children:(0,t.jsx)(g.Label,{value:"Value",children:(0,t.jsx)(x.Textarea,{"aria-label":"Value",autoFocus:!0,disabled:T,name:"add-secret-value",onChange:e=>{c(A(e.target.value))},placeholder:"i9ju23nf39nunu3asn",rows:2,value:d,width:"100%"})})}),(0,t.jsx)(h.Spacer,{y:1}),(0,t.jsx)(s.default,{children:(0,t.jsx)(g.Label,{id:"add-secret-name",value:"Name",withInput:!0,children:(0,t.jsx)(f.Input,{disabled:T,id:"add-secret-name",name:"add-secret-name",onChange:e=>{o(e.target.value)},placeholder:"secret-name",prefix:"@",style:{height:40},value:l,width:"100%"})})}),(0,t.jsx)(h.Spacer,{}),(0,t.jsxs)("span",{children:[(0,t.jsxs)("span",{style:{color:"var(--accents-5)"},children:["You will be able to reuse this Secret in multiple Projects using this name."," "]}),(0,t.jsx)(p.Link,{external:!0,href:"/docs/environment-variables#secrets",type:"highlight",children:"Learn More"})]}),u?(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsx)(h.Spacer,{y:.5})," ",(0,t.jsx)(y.Error,{error:u})," "]}):null]})})]}),(0,t.jsxs)(b.Modal.Actions,{children:[(0,t.jsx)(b.Modal.Action,{onClick:i,type:"secondary",children:"Cancel"}),(0,t.jsxs)(b.Modal.Action,{disabled:T,onClick:O,children:[T?(0,t.jsx)(j.LoadingDots,{}):null,!T&&"Create Secret"]})]})]})},"formatEnvValueWithNewline",0,A],3225137)},1839393,e=>{e.v({envVarValueSensitive:"env-variables-edit-form-module__FkdT-q__envVarValueSensitive",envVarValueSensitiveText:"env-variables-edit-form-module__FkdT-q__envVarValueSensitiveText",mono:"env-variables-edit-form-module__FkdT-q__mono",overlay:"env-variables-edit-form-module__FkdT-q__overlay",textarea:"env-variables-edit-form-module__FkdT-q__textarea"})},8764444,e=>{"use strict";var t=e.i(847684),n=e.i(7185353),a=e.i(8248823),i=e.i(2504781),r=e.i(3869281),s=e.i(6881349),l=e.i(4030453),o=e.i(3500331),d=e.i(3671642),c=e.i(8522580),u=e.i(1848296),m=e.i(5255926),v=e.i(9318197),p=e.i(9334091),h=e.i(4004502),x=e.i(8042625),f=e.i(277234),y=e.i(4244280),g=e.i(5927860),j=e.i(5338940),b=e.i(5140444),E=e.i(8238875),_=e.i(8432052),C=e.i(4450569),S=e.i(3225137),k=e.i(187815),w=e.i(7855500),T=e.i(6060673),N=e.i(7482607),I=e.i(1961840),P=e.i(5451849),L=e.i(1081769),A=e.i(1991452),V=e.i(57106),R=e.i(1717203),B=e.i(7557283),F=e.i(2928617),O=e.i(5601055),D=e.i(7401972);function M(e){let{selectedGitBranch:a,checkedProduction:r,checkedPreview:l,checkedDevelopment:o,setCheckedProduction:c,setCheckedPreview:u,setCheckedDevelopment:m,setSelectedGitBranch:p,onChangeSelectedCustomEnvironmentIds:h,selectedCustomEnvironmentIds:x,disableEnvironmentPicker:f,disableDevelopmentEnvironment:y,hideGitBranchSelector:b}=e,[E,_]=(0,n.useState)(""),[C,S]=(0,n.useState)(!!a),{project:k}=(0,A.useRouter)().query,{data:w}=(0,T.useProject)(k),{teamSlug:N}=(0,j.useTeam)(),{can:I}=(0,R.default)(),P=w?.id,{data:L}=(0,F.useProjectBranches)(P),[,{branches:M}]=(0,D.useProjectDeployedBranches)({project:w,query:E}),$=(0,n.useMemo)(()=>Array.from(new Set([...M||[],...(L||[]).filter(Boolean).map(e=>e.ref)])),[L,M]),G=I(B.Action.Create,B.Resource.ProjectEnvVarsProduction),H=[...x];return r&&H.push(g.EnvTarget.Production),l&&H.push(g.EnvTarget.Preview),o&&H.push(g.EnvTarget.Development),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:[(0,t.jsx)(d.Label,{value:"Environments"}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)(O.CustomEnvironmentEnvVarPicker,{canCreateProductionEnvVars:G,disabled:f,disableDevelopmentEnvironment:y,onChange:e=>{let t=[],n=[];e.forEach(e=>{(0,g.isSystemEnvTarget)(e)?t.push(e):n.push(e)}),c(t.includes(g.EnvTarget.Production)),u(t.includes(g.EnvTarget.Preview)),m(t.includes(g.EnvTarget.Development)),S(!!(1===t.length&&t.includes(g.EnvTarget.Preview))),h(n)},selectedEnvironmentIds:new Set(H)}),b?null:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-3 flex-1",children:[(0,t.jsx)(i.Button,{onClick:()=>{c(!1),u(!0),h([]),m(!1),S(e=>!e),C&&p(null)},size:"small",type:"secondary",typeName:"button",variant:"invert",children:C?"Cancel":"Select a custom Preview branch"}),C?w?.link?(0,t.jsxs)(s.Combobox,{onChange:e=>p(e||""),placeholder:"All Preview Branches",size:"small",value:a||null,children:[(0,t.jsx)(s.Combobox.Input,{onChange:e=>_(e.target.value.trim()),trimValue:!0}),(0,t.jsxs)(s.Combobox.List,{emptyMessage:"No preview branches",children:[(0,t.jsx)(t.Fragment,{children:E&&!$.find(e=>e===E)?(0,t.jsx)(s.Combobox.Option,{displayValue:!0,value:E||"",children:`Use "${E}"`}):null}),(0,t.jsx)(t.Fragment,{children:$.map(e=>{let n=String(w.link?.productionBranch)===e;return n?null:(0,t.jsx)(s.Combobox.Option,{disabled:n,value:e,children:e},e)})})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Spacer,{y:.5}),(0,t.jsx)(V.ButtonLink,{as:`/${N}/${w?.name}/settings/git`,href:"/[teamSlug]/[project]/settings/git",type:"secondary",children:"Connect Git Repository"})]}):null]})]})]})}var $=e.i(1839393);e.s(["EnvVariablesEditForm",0,function(e){let{envVariable:A,onDiscard:V,onSave:R,onSecretAdd:B,disableEnvironmentPicker:F,disableNameInput:O,disableComment:D,disableEnvironmentInput:G,customSave:H,editTextareaValueProps:z}=e,[W,U]=(0,n.useState)(A.type),[Y,Z]=(0,n.useState)({value:A.key,edited:!1}),[q,K]=(0,n.useState)({value:A.comment,edited:!1}),[X,J]=(0,n.useState)(()=>W===g.EnvType.Plain?A.value:""),[Q,ee]=(0,n.useState)(()=>W===g.EnvType.Encrypted&&A.decrypted?A.value:""),[et,en]=(0,n.useState)(!1),ea=(0,n.useId)(),ei=Array.isArray(A.target)?A.target:[A.target],er=A.type===g.EnvType.Secret&&ei.includes(g.EnvTarget.Development),[es,el]=(0,n.useState)(ei.includes(g.EnvTarget.Production)),[eo,ed]=(0,n.useState)(ei.includes(g.EnvTarget.Preview)),[ec,eu]=(0,n.useState)(ei.includes(g.EnvTarget.Development)),[em,ev]=(0,n.useState)(A.customEnvironmentIds||[]),{data:ep}=(0,w.useSecrets)(),{team:eh}=(0,j.useTeam)(),{user:ex}=(0,b.useUser)(),{project:ef,envIdOrSlug:ey}=(0,E.useParams)()||{},{data:eg}=(0,T.useProject)(ef),[ej,eb]=(0,n.useState)(void 0),eE=eh?.id;(0,n.useEffect)(()=>{A.decrypted&&ee(A.value)},[A.decrypted,A.value]);let e_=(0,n.useMemo)(()=>ep?.secrets.map(e=>({label:`@${e.name}`,value:e.uid}))??[],[ep]),[eC,eS]=(0,n.useState)(A.gitBranch),{data:ek}=(0,I.default)(ef),[ew,eT]=(0,n.useState)(!1),[eN,eI]=(0,n.useState)(""),[eP,eL]=(0,n.useState)(()=>W===g.EnvType.Secret?A.value:null),[eA,eV]=(0,n.useState)(()=>W===g.EnvType.System?A.value:null),eR=(0,n.useCallback)(e=>{"create-new-secret"===e?eT(!0):(null===e&&eI(""),eL(e))},[eT,eL,eI]),eB=(0,n.useCallback)(e=>{if((eV(e),null!==e)&&(!Y.value||!Y.edited))switch(eg?.framework){case"nextjs":Z({edited:!1,value:`NEXT_PUBLIC_${e}`});break;case"create-react-app":Z({edited:!1,value:`REACT_APP_${e}`})}},[Y,eg]),{open:eF}=(0,N.useSaveAndRedeploy)(),eO=(0,n.useCallback)(async()=>{en(!0);let e="";switch(W){case g.EnvType.Plain:e=X;break;case g.EnvType.Secret:e=eP;break;case g.EnvType.System:e=eA;break;case g.EnvType.Encrypted:case g.EnvType.Sensitive:e=Q}let t=[];es&&t.push(g.EnvTarget.Production),eo&&t.push(g.EnvTarget.Preview),ec&&t.push(g.EnvTarget.Development);try{let n=eC||null,a=W===g.EnvType.Sensitive?{value:e||void 0,target:t,gitBranch:n,comment:q.value}:{key:Y.value,value:e,target:t,type:W,gitBranch:n,comment:q.value};if(a.customEnvironmentIds=em,H)await H(a);else{let e=await (0,f.fetchAPI)(`${(0,y.API_PROJECTS_VERSION)("v7")}/${ef}/env/${A.id}${(0,x.encode)({teamId:eE})}`,{method:"PATCH",body:JSON.stringify(a),throwOnHTTPError:!0});R(e),eF("Updated Environment Variable successfully.")}}catch(e){eb((0,a.normalizeError)(e))}en(!1)},[R,H,Y,q,X,eP,eA,Q,ef,eE,ec,eo,es,A,W,eC,em,eF]);(0,n.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&13===e.keyCode&&"TEXTAREA"===e.target.tagName&&eO()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[eO]);let eD=(0,n.useMemo)(()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Label,{value:"Type"}),(0,t.jsx)(u.RadioGroup,{label:"Environment Variable Type",onChange:e=>{U(e),er||e!==g.EnvType.Secret||eu(!1)},value:W,children:(0,t.jsxs)(C.default,{direction:["column","row","row"],gap:0,style:{fontSize:"14px"},children:[(0,t.jsx)(u.RadioGroup.Item,{value:g.EnvType.Plain,children:"Plaintext"}),(0,t.jsx)(v.Spacer,{x:1,y:.5}),(0,t.jsx)(u.RadioGroup.Item,{value:g.EnvType.Secret,children:"Secret"}),(0,t.jsx)(v.Spacer,{x:1,y:.5}),(0,t.jsx)(u.RadioGroup.Item,{value:g.EnvType.System,children:"Provided by System"})]})})]}),[W,eu,er]),eM=(0,n.useMemo)(()=>(0,t.jsx)(C.default,{flex:.5,children:(0,t.jsx)(d.Label,{value:"Value",children:(0,t.jsxs)(s.Combobox,{disabled:er,onChange:eR,placeholder:"Select Secret…",value:eP,children:[(0,t.jsx)(s.Combobox.Input,{className:"edit-var-select-secret",onChange:e=>eI(e.target.value)}),(0,t.jsxs)(s.Combobox.List,{children:[(0,t.jsx)(s.Combobox.Option,{value:"create-new-secret",children:eN?`Create new Secret "${eN}" for ${eh?.name??ex?.name??ex?.username}`:`Create a new Secret for ${eh?.name??ex?.name??ex?.username}`}),(0,t.jsx)(t.Fragment,{children:e_.map(e=>(0,t.jsx)(s.Combobox.Option,{value:e.value,children:e.label},e.value))})]})]})})}),[eI,eR,e_,er,eN,eP,eh,ex]),e$=(0,n.useMemo)(()=>(0,t.jsx)(C.default,{flex:.5,children:(0,t.jsx)(d.Label,{value:"Value",children:(0,t.jsxs)(s.Combobox,{onChange:eB,placeholder:"Select System Environment Variable…",value:eA,children:[(0,t.jsx)(s.Combobox.Input,{}),(0,t.jsx)(s.Combobox.List,{children:ek?.systemEnvValues.map(e=>(0,t.jsx)(s.Combobox.Option,{value:e,children:e},e))})]})})}),[ek,eB,eA]),eG=(0,n.useMemo)(()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Spacer,{y:.5}),(0,t.jsx)(d.Label,{value:"Value",children:(0,t.jsx)(p.Textarea,{onChange:e=>J((0,S.formatEnvValueWithNewline)(e.target.value)),placeholder:"i9ju23nf39nunu3asn",rows:3,value:X,width:"100%"})})]}),[X,J]),eH=!A.decrypted;return(0,t.jsxs)(_.EntityForm,{footerNote:(()=>{if(!F)return!1;let e=ei.length>1,t=em.length>1;return e||t||ei.length>0&&em.length>0})()?(0,t.jsx)(c.Note,{type:"warning",children:"Editing this environment variable will affect multiple environments."}):null,primaryAction:(0,t.jsx)(i.Button,{"data-testid":(0,h.tid)("env-variables-edit-form","save-button"),loading:et,onClick:eO,size:"small",children:"Save"}),secondaryAction:(0,t.jsx)(i.Button,{onClick:V,size:"small",type:"secondary",children:"Cancel"}),children:[(0,t.jsxs)(C.default,{direction:"column",children:[(0,t.jsxs)(C.default,{flex:3,gap:0,children:[er?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.Note,{size:"small",children:["Secrets can no longer be used in the Development Environment. ",'Please switch this Environment Variable to the "Plaintext" type in order to edit its value.']}),(0,t.jsx)(v.Spacer,{y:.5})]}):null,![g.EnvType.Encrypted,g.EnvType.Sensitive].includes(W)&&(0,t.jsxs)(t.Fragment,{children:[eD,(0,t.jsx)(v.Spacer,{y:.5})]}),(0,t.jsx)(C.default,{children:(0,t.jsxs)(C.default,{direction:["column","row","row"],gap:.5,children:[(0,t.jsx)(C.default,{flex:[g.EnvType.Plain,g.EnvType.Encrypted,g.EnvType.Sensitive].includes(W)?1:.5,children:(0,t.jsx)(d.Label,{value:"Name",children:(0,t.jsx)(L.EnvVariableKeyInput,{disabled:W===g.EnvType.Sensitive||O,id:"edit-env-name",onChange:e=>Z({edited:!0,value:e.target.value}),onPaste:e=>{if(X||Q)return;let t=Object.entries((0,k.parseEnv)(e.clipboardData.getData("text")));if(0===t.length||t.length>1)return;e.preventDefault();let n=t[0],a=n[0],i=n[1];Z({edited:!0,value:a}),W===g.EnvType.Plain?J((0,S.formatEnvValueWithNewline)(i)):[g.EnvType.Encrypted,g.EnvType.Sensitive].includes(W)&&ee((0,S.formatEnvValueWithNewline)(i))},placeholder:"EXAMPLE_NAME",value:Y.value})})}),W===g.EnvType.Secret?eM:null,W===g.EnvType.System?e$:null]})}),W===g.EnvType.Plain?eG:null,[g.EnvType.Encrypted,g.EnvType.Sensitive].includes(W)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Spacer,{y:.5}),(0,t.jsx)(d.Label,{value:"Value",children:(0,t.jsxs)(m.Skeleton,{show:W===g.EnvType.Encrypted&&eH,style:{position:"relative"},children:[(0,t.jsx)(p.Textarea,{"aria-describedby":ea,onChange:e=>ee((0,S.formatEnvValueWithNewline)(e.target.value)),placeholder:"YOUR_SECRET_VALUE_GOES_HERE",rows:6,value:Q,width:"100%",wrapperClassName:$.default.textarea,...z}),(0,t.jsx)(P.EnvVariableValueOverlay,{className:$.default.overlay,id:ea,value:Q,width:"100%",...z})]})})]}),[g.EnvType.Encrypted,g.EnvType.Sensitive].includes(W)?null:(0,t.jsx)(()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Spacer,{y:.5}),(0,t.jsx)("span",{className:"text-copy-16",style:{textTransform:"uppercase",fontSize:"0.75rem",fontWeight:500,color:"var(--geist-secondary)"},children:"Environments"}),(0,t.jsx)(v.Spacer,{y:.5}),(0,t.jsxs)(C.default,{direction:["column","row","row"],gap:0,children:[(0,t.jsx)(r.Checkbox,{checked:es,name:"edit-form-production",onChange:()=>el(!es),children:"Production"}),(0,t.jsx)(v.Spacer,{x:1,y:.5}),(0,t.jsx)(r.Checkbox,{checked:eo,name:"edit-form-preview",onChange:()=>ed(!eo),children:"Preview"}),(0,t.jsx)(v.Spacer,{x:1,y:.5}),(0,t.jsx)(r.Checkbox,{checked:ec,disabled:W===g.EnvType.Secret&&!er||W===g.EnvType.Sensitive,name:"edit-form-development",onChange:()=>eu(!ec),children:"Development"})]})]}),{}),(0,t.jsx)(v.Spacer,{y:.5}),(0,t.jsxs)(C.default,{direction:["column","row","row"],gap:.5,children:[D?null:(0,t.jsx)(C.default,{flex:[g.EnvType.Plain,g.EnvType.Encrypted,g.EnvType.Sensitive].includes(W)?1:.5,children:(0,t.jsx)(d.Label,{value:"Comment",children:(0,t.jsx)(o.Input,{id:"edit-env-comment",maxLength:g.ENV_VAR_COMMENT_MAX_LENGTH,onChange:e=>K({edited:!0,value:e.target.value}),placeholder:"Describe how you created this environment variable and how it is used",value:q.value,width:"100%"})})}),W===g.EnvType.Secret?eM:null,W===g.EnvType.System?e$:null]})]}),[g.EnvType.Encrypted,g.EnvType.Sensitive].includes(W)&&!G?(0,t.jsx)(C.default,{flex:2,children:(0,t.jsx)(M,{checkedDevelopment:ec,checkedPreview:eo,checkedProduction:es,disableEnvironmentPicker:F,disableDevelopmentEnvironment:W===g.EnvType.Sensitive,hideGitBranchSelector:!!(F&&ey!==g.EnvTarget.Preview),onChangeSelectedCustomEnvironmentIds:ev,selectedCustomEnvironmentIds:em,selectedGitBranch:eC,setCheckedDevelopment:eu,setCheckedPreview:ed,setCheckedProduction:el,setSelectedGitBranch:eS})}):null]}),ej?(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsx)(v.Spacer,{y:1})," ",(0,t.jsx)(l.Error,{error:ej})," "]}):null,(0,t.jsx)(S.default,{active:ew,initialSecretName:eN||Y.value,onAdd:e=>{eT(!1),eI(""),eL(e),B()},onCancel:()=>{eT(!1),eI("")}})]})}],8764444)},4251055,e=>{e.v({bullets:"env-variables-table-module__L-jLVG__bullets",commentWrapper:"env-variables-table-module__L-jLVG__commentWrapper",dataStoreIconWrapperStyles:"env-variables-table-module__L-jLVG__dataStoreIconWrapperStyles",editing:"env-variables-table-module__L-jLVG__editing",empty:"env-variables-table-module__L-jLVG__empty",entity:"env-variables-table-module__L-jLVG__entity",iconsContainer:"env-variables-table-module__L-jLVG__iconsContainer",key:"env-variables-table-module__L-jLVG__key",overriddenEnvVar:"env-variables-table-module__L-jLVG__overriddenEnvVar",plaintextEnvValue:"env-variables-table-module__L-jLVG__plaintextEnvValue",resultRow:"env-variables-table-module__L-jLVG__resultRow",reveal:"env-variables-table-module__L-jLVG__reveal",section:"env-variables-table-module__L-jLVG__section",suggestionHighlight:"env-variables-table-module__L-jLVG__suggestionHighlight",time:"env-variables-table-module__L-jLVG__time",timeAgoText:"env-variables-table-module__L-jLVG__timeAgoText",varName:"env-variables-table-module__L-jLVG__varName",varNameContainer:"env-variables-table-module__L-jLVG__varNameContainer",virtuosoRowOverflowAnchor:"env-variables-table-module__L-jLVG__virtuosoRowOverflowAnchor"})},6899807,e=>{"use strict";var t=e.i(847684),n=e.i(7185353),a=e.i(6199768),i=e.i(9722978),r=e.i(8248823),s=e.i(57106),l=e.i(4585051),o=e.i(3306538),d=e.i(2504781),c=e.i(8161149),u=e.i(4030453),m=e.i(8459493),v=e.i(7448864),p=e.i(6891161),h=e.i(526657),x=e.i(5255926),f=e.i(9318197),y=e.i(5468328),g=e.i(455575),j=e.i(5433449),b=e.i(3973638),E=e.i(1933683),_=e.i(762945),C=e.i(1000031),S=e.i(4345845),k=e.i(2065543),w=e.i(4004502),T=e.i(5927860),N=e.i(7713873),I=e.i(5338940),P=e.i(3322724),L=e.i(4272098),A=e.i(7218483),V=e.i(5166685),R=e.i(5819220),B=e.i(4712634),F=e.i(979715),O=e.i(7808943),D=e.i(42012),M=e.i(8764444),$=e.i(6060673),G=e.i(7482607),H=e.i(2729296);e.i(6887680);var z=e.i(6810699),W=e.i(1138941),U=e.i(7743427),Y=e.i(3850869),Z=e.i(5601055),q=e.i(7188996),K=e.i(3756284),X=e.i(545405),J=e.i(3703009),Q=e.i(8525850),ee=e.i(2215529),et=e.i(4251055);function en(e){let{env:a,secretsMappedById:r,revealType:s,onViewEnvironmentVariable:l}=e,[o,c]=(0,n.useState)("hidden");if((0,n.useEffect)(()=>{void 0!==a.decrypted&&(a.decrypted&&"loading"===o?c("revealed"):a.decrypted||"revealed"!==o||c("hidden"))},[a.decrypted,o,a]),2===s)return(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start flex-initial",children:[(0,t.jsxs)(y.Tooltip,{text:"Additional permissions are required to reveal production environment variables values.",children:[(0,t.jsx)(f.Spacer,{x:.1}),(0,t.jsx)(E.Eye,{size:16})]}),(0,t.jsx)(f.Spacer,{x:.5}),(0,t.jsx)("p",{className:`text-copy-14 text-gray-900 ${et.default.bullets}`,children:"•".repeat(15)})]});if(1===s)return(0,t.jsx)(q.CopyInlineCode,{value:a.value});if(a.type===T.EnvType.Secret&&r){let e=r[a.value]?.name;return e?(0,t.jsx)("i",{title:`@${e}`,children:`@${e}`}):(0,t.jsx)("i",{title:a.value,children:a.value||"-"})}if(a.type===T.EnvType.Plain)return(0,t.jsx)(O.default,{className:(0,i.clsx)(et.default.plaintextEnvValue,"env-var-value","geist-ellipsis"),title:a.value,children:a.value});if(a.type===T.EnvType.Encrypted){if(a.decrypted&&!a.value)return(0,t.jsx)("i",{title:"This Environment Variable has no value",children:"Empty"});switch(o){case"revealed":return(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start flex-initial gap-2",children:[(0,t.jsx)(d.Button,{"aria-label":"Click to hide",className:et.default.reveal,onClick:()=>c("hidden"),svgOnly:!0,title:"Click to hide",variant:"unstyled",children:(0,t.jsx)(b.EyeOff,{size:16})}),(0,t.jsx)(q.CopyInlineCode,{value:a.value})]});case"hidden":case"loading":return(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start flex-initial gap-2",children:[(0,t.jsx)(d.Button,{"aria-label":"Click to reveal",className:et.default.reveal,loading:"loading"===o,onClick:()=>{a.decrypted?c("revealed"):c("loading"),l?.(a)},size:"small",svgOnly:!0,title:"Click to reveal",variant:"unstyled",children:"loading"!==o&&(0,t.jsx)(E.Eye,{size:16})}),(0,t.jsx)("p",{className:`text-copy-14 text-gray-900 ${et.default.bullets}`,children:"•".repeat(15)})]})}}return a.type===T.EnvType.Sensitive?null:(0,t.jsx)("i",{title:a.value,children:a.value})}function ea(e){let{env:n,team:a,projectName:i,resource:r}=e;switch(n.contentHint?.type){case"blob-read-write-token":return(0,t.jsx)(s.Link,{href:a&&i?`/${a.slug}/${i}/stores/blob/${n.contentHint.storeId}`:a?`/${a.slug}/~/stores/blob/${n.contentHint.storeId}`:`/dashboard/stores/blob/${n.contentHint.storeId}`,style:{color:"var(--geist-secondary)"},children:(0,t.jsx)("div",{className:et.default.dataStoreIconWrapperStyles,children:(0,t.jsx)(J.DataStore,{size:"small",type:"blob"})})});case"integration-store-secret":return r&&a?(0,t.jsx)(y.Tooltip,{text:"Open linked integration",children:(0,t.jsx)(s.Link,{href:(0,Q.getResourceDetailsPath)(r,a.slug,i),style:{color:"var(--geist-secondary)"},children:(0,t.jsx)(ei,{...n.contentHint})})}):null;case"flags-connection-string":return(0,t.jsx)(y.Tooltip,{text:"Open flags",children:(0,t.jsx)(s.Link,{href:`/${a.slug}/${i}/flags`,style:{color:"var(--geist-secondary)"},children:(0,t.jsx)("div",{className:et.default.dataStoreIconWrapperStyles,children:(0,t.jsx)(y.Tooltip,{text:"This environment variable connects this project with flags",children:(0,t.jsx)(k.ToggleOnAlt,{size:16})})})})})}return n.edgeConfigId?(0,t.jsx)(y.Tooltip,{desktopOnly:!0,text:"This environment variable connects this project to an Edge Config",children:(0,t.jsx)(s.Link,{href:a&&i?`/${a.slug}/${i}/stores/edge-config/${n.edgeConfigId}`:a?`/${a.slug}/~/stores/edge-config/${n.edgeConfigId}`:`/dashboard/stores/edge-config/${n.edgeConfigId}`,style:{color:"var(--geist-secondary)"},children:(0,t.jsx)("div",{className:et.default.dataStoreIconWrapperStyles,children:(0,t.jsx)(J.DataStore,{size:"small",type:"edge-config"})})})}):null}function ei(e){let{integrationId:n,integrationProductId:a}=e,{product:i}=(0,U.useIntegrationAndProduct)({integrationIdOrSlug:n,productIdOrSlug:a});return i?(0,t.jsx)(l.Avatar,{hash:i.iconUrl,size:20,title:i.name}):(0,t.jsx)(C.Linked,{size:12})}function er(e){let{env:a,className:r,hasConnectedStore:s,onRemove:d,onSave:c,onDetach:u,onSecretAdd:p,secretsMappedById:x,isEditing:f,setIsEditing:b,search:E,canReadProductionValues:_,canUnlinkSharedEnvVariable:C,disableDeleteEnvVariable:S,disableEditEnvVariable:k,onViewEnvironmentVariable:I,team:L,projectId:V,projectName:O,getOverriddenTargetsForSharedEnvVar:$=e=>[],virtuosoIndexData:G,disableMoreMenuProps:z,environment:W,disableNameInput:U,disableComment:Y,disableEnvironmentInput:Z,customSave:q,editTextareaValueProps:J,resource:ei}=e,er=(0,P.useIsMobile)(),el=(0,n.useRef)(null),eo=(0,H.isSharedEnv)(a),ed=(0,g.useToasts)(),ec=(0,n.useRef)(!1),eu=(0,A.useAgo)(a.updatedAt||a.createdAt,{justNowLabel:"just now"}),em=(0,n.useMemo)(()=>eo?$(a):[],[a,$,eo]);(0,n.useEffect)(()=>{f&&el.current?.scrollIntoView({behavior:"smooth",block:"nearest"})},[f]),(0,n.useEffect)(()=>{if(ec.current&&a.decrypted){let e=a.type===T.EnvType.Secret&&x?`@${x[a.value]?.name||a.value}`:a.value;(0,X.copyToClipboard)(`${a.key}=${e}`),ed.success("Copied to clipboard."),ec.current=!1}},[a.decrypted,a.key,a.value,a.type,x,ed]);let ev=(0,n.useMemo)(()=>{var e;return a?(0,t.jsxs)("span",{className:et.default.varNameContainer,children:[(0,t.jsx)(K.CopyText,{value:a.key,children:(0,t.jsx)("span",{className:(0,i.clsx)(em.length?et.default.overriddenEnvVar:void 0,et.default.varName),style:{fontFamily:"var(--font-mono)",fontWeight:500},title:a.key,children:E?(e=a.key,e.split(RegExp("("+E+")","gi")).map((e,n)=>e.toLowerCase()===E.toLowerCase()?(0,t.jsx)("span",{className:et.default.suggestionHighlight,children:e},n):e)):a.key},a.id)}),(0,t.jsxs)("div",{className:(0,i.clsx)("flex flex-row items-stretch justify-start gap-2 flex-initial",et.default.iconsContainer),children:[(0,t.jsx)(ea,{env:a,projectName:O,resource:ei,team:L}),void 0!==a.comment&&""!==a.comment&&(0,t.jsx)(y.Tooltip,{text:a.comment,children:(0,t.jsx)("div",{className:et.default.commentWrapper,children:(0,t.jsx)(j.FileText,{size:14})})})]}),"sensitive"===a.type?(0,t.jsx)(o.Badge,{size:"sm",style:{marginLeft:"8px",backgroundColor:"var(--geist-secondary-lighter)",color:"var(--geist-secondary-dark)"},children:"Sensitive"}):null]}):null},[a,em.length,V,O,ei,E,L]),ep=a.target===T.EnvTarget.Production||Array.isArray(a.target)&&1===a.target.length&&a.target[0]===T.EnvTarget.Production,eh=(0,n.useMemo)(()=>{if(!a.contentHint)return null;switch(a.contentHint.type){case"blob-read-write-token":return(0,t.jsx)(m.MenuItem,{href:L&&O?`/${L.slug}/${O}/stores/blob/${a.contentHint.storeId}/projects`:L?`/${L.slug}/~/stores/blob/${a.contentHint.storeId}/projects`:`/dashboard/stores/blob/${a.contentHint.storeId}/projects`,isLink:!0,children:"Manage Blob Connection"});case"integration-store-secret":return ei&&L?(0,t.jsx)(m.MenuItem,{href:(0,Q.getResourceDetailsPath)(ei,L.slug,O),isLink:!0,children:"Manage Connection"}):null;default:return null}},[a.contentHint,O,ei,L]),ex=(0,n.useMemo)(()=>eo?O?"Unlink from this Project":"Delete":"Remove",[eo,O]),ef=a.type===T.EnvType.Sensitive,ey=ef||ep&&!_?(0,t.jsx)(y.Tooltip,{desktopOnly:!0,style:{width:"100%"},text:ef?"Sensitive environment variables cannot be copied.":"You do not have permission to copy this value.",children:(0,t.jsx)(v.MenuItemLocked,{children:"Copy to Clipboard"})}):(0,t.jsx)(m.MenuItem,{onClick:()=>{let{type:e,key:t,value:n,decrypted:i}=a;if(e===T.EnvType.Encrypted&&!i){ec.current=!0,I?.(a);return}let r=e===T.EnvType.Secret&&x?`@${x[n]?.name||n}`:n;(0,X.copyToClipboard)(`${t}=${r}`),ed.success("Copied to clipboard.")},children:"Copy to Clipboard"});return(0,n.createElement)(R.Entity,{...G,className:(0,i.clsx)(r,et.default.resultRow,{[et.default.editing]:f},f&&"pb-0"),disabledDotMenuTooltip:void 0!==z?(0,t.jsx)(t.Fragment,{children:z.tooltip}):(0,t.jsx)(t.Fragment,{children:"Additional permissions are required to manage production environment variables."}),editing:f,footer:f?L&&eo?(0,t.jsx)("div",{className:"-mx-4 -mt-4",children:(0,t.jsx)(ee.TeamEnvVariablesEditForm,{containerClassName:"pt-0",disableEnvironmentPicker:!!W,envVar:a,isEditing:f,onCancel:()=>b(!1),onRemove:()=>{d?.(a)},onSave:e=>{b(!1),c?.(e)},teamId:L.id})}):(0,t.jsx)("div",{className:"pb-4",children:(0,t.jsx)(M.EnvVariablesEditForm,{customSave:q,disableComment:Y,disableEnvironmentInput:Z,disableEnvironmentPicker:!!W,disableNameInput:U,editTextareaValueProps:J,envVariable:a,onDiscard:()=>b(!1),onSave:e=>{b(!1),c?.(e)},onSecretAdd:()=>{p?.()}},a.id)}):null,footerClassName:f?"border-t-0":void 0,indent:!1,isDotMenuDisabled:!_&&ep||z?.disabled,key:a.id,menuItems:eh?(0,t.jsxs)(t.Fragment,{children:[eh,ey,!1===s&&(!eo||C)?(0,t.jsx)(m.MenuItem,{onClick:()=>{d?.(a)},style:{color:"var(--geist-error)"},children:ex}):(0,t.jsx)(y.Tooltip,{desktopOnly:!0,disableTriggers:!s,text:"You can remove this environment variable by disconnecting the project from the connected store.",children:(0,t.jsx)(v.MenuItemLocked,{children:ex})})]}):(0,t.jsxs)(t.Fragment,{children:[!(eo&&V)&&(k?(0,t.jsx)(v.MenuItemLocked,{children:"Edit"}):(0,t.jsx)(m.MenuItem,{"data-testid":(0,w.tid)("env-vars-table","menu-item","edit",a.key),onClick:()=>b(!0),children:"Edit"})),ey,W&&a.type===T.EnvType.Encrypted&&(()=>{if(eo||!W)return!1;let e=0;return a.customEnvironmentIds&&(e+=a.customEnvironmentIds.length),Array.isArray(a.target)?e+=a.target.length:e+=1,e>1})()?(0,t.jsx)(y.Tooltip,{desktopOnly:!0,style:{width:"100%"},text:`Detach this environment variable and create a new copy just for the ${W?(0,N.envName)(W):""} environment.`,children:(0,t.jsx)(m.MenuItem,{onClick:()=>{u?.(a)},children:"Detach"})}):null,(eo?C:!S)?(0,t.jsx)(m.MenuItem,{onClick:()=>{d?.(a)},style:{color:"var(--geist-error)"},children:ex}):(0,t.jsx)(v.MenuItemLocked,{children:ex})]}),ref:el,thumbnail:(0,t.jsx)(B.EntityThumbnail,{size:24,children:(0,t.jsx)(D.default,{env:a})}),children:[(0,t.jsx)(F.EntityField,{className:et.default.key,description:(0,t.jsx)(es,{env:a,overriddenTargets:em}),title:ev}),a.type===T.EnvType.Sensitive&&er?null:(0,t.jsx)(F.EntityField,{children:(0,t.jsx)(en,{env:a,onViewEnvironmentVariable:I,revealType:!ep||_?0:2,secretsMappedById:x})}),(0,t.jsx)(F.EntityField,{avatar:a.updatedBy||a.createdBy?(0,t.jsx)(y.Tooltip,{text:a.lastEditedByDisplayName,children:(0,t.jsx)(l.Avatar,{size:24,uid:a.updatedBy||a.createdBy})}):null,className:et.default.time,description:a.updatedAt?(0,t.jsxs)(h.RelativeTimeCard,{date:a.updatedAt,side:"left",children:[(0,t.jsxs)("span",{className:et.default.timeAgoText,children:[a.updatedBy?"Updated":"Added"," "]}),eu]}):null,right:!0})]})}function es(e){let{overriddenTargets:n,env:a}=e;return(0,t.jsx)(el,{env:a,overriddenTargets:n})}function el(e){let{overriddenTargets:n,env:a}=e,i=[...Array.isArray(a.target)?a.target:[a.target],...a.customEnvironmentIds||[]].filter(e=>!!e);a.applyToAllCustomEnvironments&&i.push(Z.INCLUDE_ALL_CUSTOM_ENVIRONMENTS_ID);let{label:r,isLoading:s,environmentNamesList:l}=(0,Z.useCustomEnvironmentsPrettyLabel)({selectedEnvironmentIds:new Set(i)});return(0,t.jsx)(x.Skeleton,{className:"truncate",show:s,children:(0,t.jsx)(y.Tooltip,{center:!1,delay:!0,desktopOnly:!0,disableTriggers:l.length<1,maxWidth:"300px",padding:"var(--geist-gap-quarter)",position:"top",style:{minWidth:"0",display:"block"},text:l.join(",\n"),children:n.length?(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start flex-initial gap-1",children:[(0,t.jsx)(_.Warning,{align:"bottom",size:16}),(0,t.jsx)("span",{children:"Overridden by Project"})]}):a.gitBranch?(0,t.jsxs)("span",{className:"flex flex-wrap gap-1",children:[r,(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(S.GitBranch,{}),(0,t.jsx)("span",{className:"font-mono",children:a.gitBranch})]})]}):(0,t.jsx)("span",{className:"block w-full truncate",children:r})})})}function eo(e){let n=e.context,a=e.item,{open:i}=(0,G.useSaveAndRedeploy)();if(!a||!n)return null;let{canReadProductionValues:r,canUnlinkSharedEnvVariable:s,getOverriddenTargetsForSharedEnvVar:l,isStoreDeleted:o,currentEditingEnv:d,onRemove:c,onSave:u,onDetach:m,onSecretAdd:v,onViewEnvironmentVariable:p,project:h,search:x,secretsMappedById:f,setCurrentEditingEnv:y,team:g,shouldDisableEnvRow:j,environment:b,resources:E}=n,_={"data-index":e["data-index"],"data-item-index":e["data-item-index"],"data-known-size":e["data-known-size"]},C=a.contentHint,S=C?.type==="integration-store-secret"?E?.find(e=>e.id===C.storeId):void 0;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(er,{canReadProductionValues:r,canUnlinkSharedEnvVariable:s,className:et.default.virtuosoRowOverflowAnchor,disableMoreMenuProps:j?.(a),env:a,environment:b,getOverriddenTargetsForSharedEnvVar:l,hasConnectedStore:!!a.contentHint&&"storeId"in a.contentHint&&!o(a.contentHint.storeId),isEditing:a.id===d,onDetach:m,onRemove:c,onSave:e=>{i("Updated Environment Variable successfully."),u?.(e)},onSecretAdd:v,onViewEnvironmentVariable:p,projectId:h?.id,projectName:h?.name,resource:S?.type==="integration"?S:void 0,search:x,secretsMappedById:f,setIsEditing:e=>{p?.(a),y(e?a.id:null)},team:g,virtuosoIndexData:_},a.id)})}e.s(["default",0,function(e){let{envVariables:i,onRemove:r,onSave:s,onDetach:o,secretsData:d,onSecretAdd:u,search:v,isLoading:p,withSecrets:h,withEnvs:x,projectId:f,canReadProductionValues:y,canUnlinkSharedEnvVariable:g,disabled:j,onViewEnvironmentVariable:b,textConfig:E,getOverriddenTargetsForSharedEnvVar:_=e=>[],shouldDisableEnvRow:C,environment:S,currentEditingEnv:k,setCurrentEditingEnv:T}=e,{isStoreDeleted:N,data:P}=(0,z.useResourceList)({resourceIds:i?.map(e=>e.contentHint&&"storeId"in e.contentHint?e.contentHint.storeId:void 0).filter(e=>!!e)??[]}),L=(0,W.useProjectIdOrName)()||f,{data:A}=(0,$.useProject)(f),{isReady:V,team:O}=(0,I.useTeam)(),D=(0,n.useMemo)(()=>d?.secrets.reduce((e,t)=>(e[t.uid]=t,e),{})??{},[d?.secrets]),M=!V||p||x&&!Array.isArray(i)||h&&!d,G=(0,n.useMemo)(()=>({canReadProductionValues:y,canUnlinkSharedEnvVariable:g,getOverriddenTargetsForSharedEnvVar:_,isStoreDeleted:N,currentEditingEnv:k,onRemove:r,onSave:s,onDetach:o,onSecretAdd:u,onViewEnvironmentVariable:b,project:A,search:v,secretsMappedById:D,setCurrentEditingEnv:T,team:O,shouldDisableEnvRow:C,environment:S,resources:P?.stores}),[y,g,_,N,k,r,s,o,u,b,A,v,D,T,O,C,S,P?.stores]);return M?(0,t.jsx)("div",{children:["p1","p2"].map(e=>(0,t.jsxs)(R.Entity,{className:et.default.resultRow,menuItems:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.MenuItem,{children:"Edit"}),(0,t.jsx)(m.MenuItem,{children:"Remove"})]}),placeholder:!0,thumbnail:(0,t.jsx)(B.EntityThumbnail,{size:30}),children:[(0,t.jsx)(F.EntityField,{description:"",descriptionSkeletonWidth:"50%",title:"",titleSkeletonWidth:"40%",width:"40%"}),(0,t.jsx)(F.EntityField,{description:"",descriptionSkeletonWidth:"80%",title:"",titleSkeletonWidth:"20%",width:"27%"}),(0,t.jsx)(F.EntityField,{avatar:(0,t.jsx)(l.Avatar,{size:24}),description:"",descriptionSkeletonWidth:"60%",right:!0})]},e))}):j?(0,t.jsx)(Y.AdditionalPermissionsRequired,{resource:L?"Environment Variables of this project":"Environment Variables",team:L?null:O}):v&&i?.length===0?(0,t.jsx)(c.EmptyState.Root,{"data-testid":(0,w.tid)("env-vars-table","container","empty"),description:`Your search for "${v}" did not return any results.`,title:"No Results Found"}):i?.length===0?(0,t.jsx)(c.EmptyState.Root,{description:E?.emptyState.description??"Add Environment Variables to Production, Preview, and Development environments, including branches in Preview.",title:E?.emptyState.title??"No Environment Variables Added"}):(0,t.jsx)("div",{"data-testid":(0,w.tid)("env-vars-table","container"),children:(0,t.jsx)(a.Virtuoso,{components:{Item:eo},context:G,data:i,initialItemCount:Math.min(i?.length??0,10),overscan:1e3,style:{minHeight:i?78*i.length:"auto"},useWindowScroll:!0})})},"useRemoveEnvModal",0,function(e,a){let[i,s]=(0,n.useState)(!1),[l,o]=(0,n.useState)(null),[d,c]=(0,n.useState)(!1),[m,v]=(0,n.useState)(null),{data:h}=(0,$.useProject)(e),x=(0,g.useToasts)(),{team:y}=(0,I.useTeam)(),j=(0,n.useCallback)(e=>{v(e),s(!0)},[]),b=(0,n.useCallback)(()=>{s(!1)},[]),E=(0,n.useCallback)(()=>{c(!1),o(null),v(null)},[]),_=(0,n.useCallback)(async()=>{if(m){c(!0);try{await (0,H.deleteEnvVar)({envVars:[m],projectId:e,teamId:y?.id}),b(),x.success("Removed Environment Variable successfully."),await a?.()}catch(e){o((0,r.normalizeError)(e))}finally{c(!1)}}},[m,x,y,e,b,a]),C=[];m?.customEnvironmentIds&&C.push(...m.customEnvironmentIds),m?.target&&((0,L.default)(m.target)?C.push(...m.target):C.push(m.target)),m?.applyToAllCustomEnvironments&&C.push(Z.INCLUDE_ALL_CUSTOM_ENVIRONMENTS_ID);let{environmentNamesList:S}=(0,Z.useCustomEnvironmentsPrettyLabel)({selectedEnvironmentIds:new Set(C.filter(e=>!!e))});return{modal:(0,n.useMemo)(()=>(0,t.jsxs)(p.Modal.Modal,{active:i,onAnimationDone:E,onClickOutside:b,children:[(0,t.jsxs)(p.Modal.Body,{children:[(0,t.jsx)(p.Modal.Header,{children:(0,t.jsx)(p.Modal.Title,{children:"Remove Environment Variable"})}),(0,t.jsxs)("p",{className:"text-copy-14",children:["You are about to remove an environment variable from your project"," ",(0,t.jsx)("span",{className:"font-medium",children:h?.name}),". This action cannot be undone."]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial gap-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial gap-2",children:[(0,t.jsx)("p",{className:"text-copy-14",children:"Environment Variable:"}),(0,t.jsx)("p",{className:"px-4 py-3 m-0 truncate rounded bg-background-200 text-gray-1000 shadow-border",title:m?.key,children:m?m.key:""})]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial gap-2",children:[(0,t.jsx)("p",{className:"text-copy-14",children:"Affected Environments:"}),(0,t.jsx)("p",{className:"px-4 py-3 m-0 rounded bg-background-200 text-gray-1000 shadow-border",children:(0,V.toListSentence)(S)})]})]}),l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Spacer,{y:1}),(0,t.jsx)(u.Error,{error:l})]}):null]}),(0,t.jsxs)(p.Modal.Actions,{children:[(0,t.jsx)(p.Modal.Action,{onClick:b,type:"secondary",children:"Cancel"}),(0,t.jsx)(p.Modal.Action,{loading:d,onClick:_,type:"error",children:"Remove"})]})]}),[i,E,b,h?.name,m,l,d,S,_]),open:j,close:b}}])},996802,6506227,e=>{"use strict";var t=e.i(847684),n=e.i(7185353),a=e.i(5757634),i=e.i(8248823),r=e.i(455575),s=e.i(7713873),l=e.i(1717203),o=e.i(7557283),d=e.i(6899807),c=e.i(1411137),u=e.i(5927860);function m(e,t){return Array.isArray(e)?e.includes(t):e===t}function v(e){let{envsInput:t,search:a,envOrBranchFilter:i,sortTarget:r}=e,l=(0,n.useMemo)(()=>{if(!t)return[];let e=a?t.filter(e=>e.key.toLowerCase().includes(a.toLowerCase())):t;if((0,s.isEnvFilter)(i)){if(i===s.allEnvironmentsFilter)return e;if(i===s.allCustomEnvironmentsFilter)return e.filter(e=>!!e.applyToAllCustomEnvironments);if(i===(0,s.mapToEnvFilter)(u.EnvTarget.Production))return e.filter(e=>m(e.target,u.EnvTarget.Production));if(i===(0,s.mapToEnvFilter)(u.EnvTarget.Development))return e.filter(e=>m(e.target,u.EnvTarget.Development));if(i===(0,s.mapToEnvFilter)(u.EnvTarget.Preview))return e.filter(e=>m(e.target,u.EnvTarget.Preview));if((0,s.isCustomEnvId)(i))return e.filter(e=>e.applyToAllCustomEnvironments||e.customEnvironmentIds?.includes(i))}return e.filter(e=>e.gitBranch===i)},[t,a,i]);return(0,n.useMemo)(()=>r&&"contentHint"!==r?"createdAt"===r?l.sort((e,t)=>(t.updatedAt??t.createdAt)-(e.updatedAt??e.createdAt)):l.sort((e,t)=>(e[r]?.toString()??"").localeCompare(t[r]?.toString()??"")):l,[l,r])}e.s(["useFilteredEnvs",0,v],6506227);var p=e.i(4171299),h=e.i(5119716);e.s(["TEVTable",0,function(e){let{teamId:u,project:m,withFilters:x=!0,sharedEnvs:f,projectEnvs:y,mutateSharedEnvVarData:g,isLoading:j,SWRCacheKey:b,envOrBranchFilter:E,sortTarget:_,setEnvOrBranchFilter:C,setSortTarget:S,search:k,setSearch:w,currentEditingEnv:T,setCurrentEditingEnv:N}=e,I=(0,r.useToasts)(),{cache:P}=(0,a.useSWRConfig)(),[L,A]=(0,n.useState)(""),[V,R]=(0,n.useState)(E??s.allEnvironmentsFilter),[B,F]=(0,n.useState)("createdAt");!x&&(k&&w&&(L=k,A=w),E&&C&&(V=E,R=C),_&&S&&(B=_,F=S));let O=m?.id,{can:D,isLoading:M}=(0,l.default)(O?{projectIdOrName:O}:void 0),$=D(o.Action.Read,O?o.Resource.ProjectEnvVars:o.Resource.SharedEnvVars),G=D(o.Action.Read,O?o.Resource.ProjectEnvVarsProduction:o.Resource.SharedEnvVarsProduction),H=D(o.Action.Delete,o.Resource.SharedEnvVarConnection),z=(0,d.useRemoveEnvModal)(void 0,g),{decryptEnvVar:W}=(0,h.useDecryptEnvVar)(b,g,{teamId:u,projectId:O}),U=$||G,Y=v({envsInput:f,search:L,envOrBranchFilter:V,sortTarget:B}),Z=(0,n.useCallback)(async(e,t)=>{try{await (0,p.removeProjectFromSharedEnvVar)({envVar:e,projectId:t,teamId:u}),g(),I.success("Successfully unlinked Shared Environment Variable")}catch(e){I.error((0,i.normalizeError)(e).message)}},[g,u,I]),q=(0,n.useCallback)(e=>y?y.filter(t=>t.key===e.key).reduce((t,n)=>((Array.isArray(n.target)?n.target:[n.target]).forEach(n=>{e.target.includes(n)&&t.push(n)}),t),[]):[],[y]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[x?(0,t.jsx)(c.EnvVariablesFilter,{disabled:!1,envOrBranchFilter:V,envs:f,project:O,search:L,setEnvOrBranchFilter:R,setSearch:A,setSortTarget:F,sortTarget:B}):null,(0,t.jsx)(d.default,{canReadProductionValues:G,canUnlinkSharedEnvVariable:H,currentEditingEnv:T,disabled:j||M||!U,envVariables:Y,getOverriddenTargetsForSharedEnvVar:q,isLoading:j||M,onRemove:e=>{void 0!==O?Z(e,O):z.open(e)},onSave:e=>{let t=P.get(b)?.data;if(t.envs.length>0){let n=[...t.envs],a=n.findIndex(t=>t.id===e.id),i={...n[a],...e,decrypted:!1};n[a]=i,g({envs:n},!1),W(i)}},onViewEnvironmentVariable:W,projectId:O,search:L,setCurrentEditingEnv:N,teamId:u,textConfig:{emptyState:{title:O?"No Shared Environment Variables are linked to this app":"No Shared Environment Variables are set",description:O?`Shared Environment Variables are set at the ${u?"Team":"Account"} level
              and are inherited by this Project.`:"Shared Environment Variables are set at the Team level."}},withEnvs:!0,withSecrets:!1})]}),z.modal]})}],996802)}]);

//# debugId=f3e6b92c-02ad-afbd-e834-d2ceb14448ea
//# sourceMappingURL=06973cb92d4482dc.js.map