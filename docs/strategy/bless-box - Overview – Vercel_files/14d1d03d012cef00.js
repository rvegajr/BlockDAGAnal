;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="a067f022-cbc2-bbfb-f10e-5f9e20a8de10")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2107254,e=>{"use strict";var t=e.i(7185353),i=e.i(7909933),l=e.i(3924999),a=e.i(6555778),s=e.i(8042625),r=e.i(277234),n=e.i(4244280),d=e.i(9668517),o=e.i(5140444);function u(e){let{version:t,until:i,limit:l,latestDeployments:a,search:r,slug:d,excludeRepos:o,edgeConfigId:u,edgeConfigTokenId:c,connectConfigurationId:m,from:h,sortByElasticConcurrency:g,buildMachineTypes:f,includePermissions:_}=e;return`${(0,n.API_PROJECTS_VERSION)(t)}${(0,s.encode)({until:i,limit:l,latestDeployments:a,search:r,slug:d,excludeRepos:o,edgeConfigId:u,edgeConfigTokenId:c,connectConfigurationId:m,from:h,sortByElasticConcurrency:g,buildMachineTypes:f,includePermissions:_})}`}let c=null;function m(e,t){let i,l,{sortByElasticConcurrency:a}=t;return a&&"string"==typeof e?i=e:"number"==typeof e&&(l=e),{from:i,until:l}}e.s(["default",0,function(){let{fetchEnabled:e=!0,limit:l,from:u,linked:c,search:m,hasProductionDomains:h,domain:g,latestDeployments:f=3,deploymentInfo:_,includePermissions:v=!1,edgeConfigId:p,edgeConfigTokenId:R,connectConfigurationId:x,excludeConnectConfigurationId:S,staticIpsEnabled:b,teamId:E}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},w=arguments.length>2?arguments[2]:void 0,P=arguments.length>3?arguments[3]:void 0,M=(0,d.useTeamSlug)(),A=(0,a.useRouter)(),{user:I,isNorthstar:y}=(0,o.useUser)(),[O,j]=(0,t.useState)(m);return(0,t.useEffect)(()=>{j(e=>e===m?e:m)},[m]),{...(0,i.default)(()=>e&&(!A||A.isReady)&&I&&(!y||I.defaultTeamId||E)?`${(0,n.API_PROJECTS_VERSION)("v8")}${(0,s.encode)({from:u||null,limit:l,linked:!!c||null,search:O,hasProductionDomains:h?"1":null,domain:g,latestDeployments:void 0===f?null:f,deploymentInfo:_||null,slug:w||M,includePermissions:v,edgeConfigId:p,edgeConfigTokenId:R,connectConfigurationId:x,excludeConnectConfigurationId:S,staticIpsEnabled:void 0===b?null:Number(b).toString(),teamId:E||null})}`:null,e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0,throwOnScopeAuthError:P?.throwOnScopeAuthError}),T),updateSearch:j,search:O}},"preloadProjectListInfinite",0,function(e,t){let{limit:i=8,latestDeployments:l=3,excludeReposRef:a}=e,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"v9",o=`${(0,n.API_PROJECTS_VERSION)(d)}${(0,s.encode)({limit:i,latestDeployments:l,slug:t,excludeRepos:a?.current[0]??null})}`;c=[o,(0,r.fetchAPI)(o)]},"useProjectListInfinite",0,function(){let{fetchEnabled:e=!0,limit:s=8,latestDeployments:n=3,search:o,excludeReposRef:h,revalidateFirstPage:g=!0,edgeConfigId:f,edgeConfigTokenId:_,connectConfigurationId:v,version:p="v9",slug:R,sortByElasticConcurrency:x,buildMachineTypes:S,includePermissions:b}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},T=arguments.length>2&&void 0!==arguments[2]&&arguments[2],w=arguments.length>3&&void 0!==arguments[3]&&arguments[3],P=(0,a.useRouter)(),M=(0,d.useTeamSlug)(),A=R||M,I=(0,l.default)((t,i)=>{if(!e||P&&!P.isReady)return null;if(!t)return u({version:p,limit:s,latestDeployments:n,search:o,slug:A,excludeRepos:h?.current[0]??null,edgeConfigId:f,edgeConfigTokenId:_,connectConfigurationId:v,sortByElasticConcurrency:x,buildMachineTypes:S,includePermissions:b});let{until:l,from:a}=m(i?.pagination.next,{sortByElasticConcurrency:x});return l||a?u({version:p,until:l,limit:s,latestDeployments:n,search:o,slug:A,excludeRepos:h?.current[t]??null,edgeConfigId:f,edgeConfigTokenId:_,connectConfigurationId:v,from:a,sortByElasticConcurrency:x,buildMachineTypes:S,includePermissions:b}):null},async e=>{if(c&&c[0]===e){let e=await c[1];return c=null,e}return(0,r.fetchAPI)(e,{throwOnHTTPError:!0})},{...E,keepPreviousData:w,revalidateFirstPage:g,persistSize:!0}),y=!!I.data,O=!!((I.data?.[I.data.length-1]?.projects.length??0)<s||I.data?.[I.data.length-1]?.pagination.next===null),j=(0,t.useMemo)(()=>I.data?I.data.flatMap(e=>e.projects):[],[I.data]),$=y&&0===j.length,k=!!(I.data&&I.size>I.data.length);return(0,i.default)(()=>{if(T||!I.data||O)return null;let e=I.data[I.data.length-1],{from:t,until:i}=m(e?.pagination.next,{sortByElasticConcurrency:x});return u({version:p,until:i,limit:s,latestDeployments:n,search:o,slug:A,excludeRepos:h?.current[0]??null,edgeConfigId:f,edgeConfigTokenId:_,connectConfigurationId:v,from:t,sortByElasticConcurrency:x,buildMachineTypes:S,includePermissions:b})},e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0})),[I,{projects:j,initialDataLoaded:y,isEmpty:$,loadMore:()=>I.setSize(e=>e+1),isLoadingMore:k,isReachingEnd:O,isValidating:I.isValidating}]}],2107254)},2112997,e=>{e.v({checked:"switch-control-module__WvDOda__checked",container:"switch-control-module__WvDOda__container",control:"switch-control-module__WvDOda__control",disabled:"switch-control-module__WvDOda__disabled",icon:"switch-control-module__WvDOda__icon",large:"switch-control-module__WvDOda__large",small:"switch-control-module__WvDOda__small",text:"switch-control-module__WvDOda__text"})},1328457,e=>{e.v({hideBorder:"switch-module__idkRsq__hideBorder",large:"switch-module__idkRsq__large",small:"switch-module__idkRsq__small",switch:"switch-module__idkRsq__switch"})},8923565,e=>{"use strict";var t=e.i(847684),i=e.i(7185353),l=e.i(9722978),a=e.i(9508212),s=e.i(9349701),r=e.i(1344973),n=e.i(2112997),d=e.i(1328457);let o=Object.assign((0,i.forwardRef)(function(e,s){let{className:r,size:n,name:o,children:u,hideBorder:c,checkedColor:m,...h}=e;return(0,t.jsx)(a.Stack,{className:(0,l.clsx)(r,d.default.switch,{[String(d.default.large)]:"large"===n,[String(d.default.small)]:"small"===n,[String(d.default.hideBorder)]:c}),direction:"row",...h,ref:s,children:i.Children.map(u,e=>(0,i.cloneElement)(e,{name:o,size:n,checkedColor:m}))})}),{Control:function(e){let{className:a,icon:d,label:o,size:u,checked:c,disabled:m,checkedColor:h="var(--ds-gray-100)",innerDivClassName:g,...f}=e,_=void 0!==d,v=(0,l.clsx)(n.default.control,{[String(n.default.disabled)]:m,[String(n.default.checked)]:c,[String(n.default.large)]:"large"===u,[String(n.default.small)]:"small"===u,[String(n.default.text)]:!_,[String(n.default.icon)]:_}),p=d?(0,t.jsxs)(t.Fragment,{children:[(0,i.cloneElement)(d,{size:"large"===u?20:16}),(0,t.jsx)("span",{className:"geist-sr-only",children:o})]}):o;return"href"in f&&void 0!==f.href?m?(0,t.jsx)(r.Text,{as:"span",className:v,style:{"--switch-checked-color":h},children:p}):(0,t.jsx)(s.default,{className:v,href:f.href,onClick:f.onClick,prefetch:f.prefetch,scroll:!1,style:{"--switch-checked-color":h},children:p}):(0,t.jsxs)("label",{className:(0,l.clsx)(n.default.container,a),"data-disabled":m?"true":"false",children:[(0,t.jsx)("input",{...f,checked:c,className:"geist-sr-only",disabled:m,type:"radio"}),(0,t.jsx)("div",{className:(0,l.clsx)(v,g),style:{"--switch-checked-color":h},children:p})]})}});e.s(["Switch",0,o],8923565)},8587921,7873387,e=>{"use strict";var t=e.i(7185353),i=e.i(7909933),l=e.i(3924999),a=e.i(8042625),s=e.i(277234),r=e.i(4244280),n=e.i(9668517),d=e.i(5338940),o=e.i(1717203),u=e.i(7557283);let c=e=>(i,l,a)=>{let s=(0,t.useRef)(void 0),r=e(i,l,a);(0,t.useEffect)(()=>{void 0!==r.data&&(s.current=r.data)},[r.data]);let n=(0,t.useCallback)(()=>{s.current=void 0},[]);return{...r,data:void 0===r.data?s.current:r.data,isLagging:void 0===r.data&&void 0!==s.current,resetLaggy:n}};e.s(["default",0,c],7873387),e.s(["MEMBERS_LIMIT",0,20,"default",0,function(){let{sort:e="date_desc",limit:t=20,filterByUserIds:l,until:n,role:c,includeEntitlements:m,includePermissionRequests:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:f,team:_}=(0,d.useTeam)(),{isLoading:v,can:p}=(0,o.default)(),R=!v&&p(u.Action.List,u.Resource.TeamFellowMembership);return(0,i.default)(()=>f&&_&&R?`${r.API_TEAMS_MEMBERS_V3}/${_.id}/members${(0,a.encode)({sort:e,until:n,limit:t,role:c,filterByUserIds:l,includeEntitlements:m,includePermissionRequests:h})}`:null,e=>(0,s.fetchAPI)(e,{throwOnHTTPError:!0}),g)},"useMembersForTeam",0,function(e){let{limit:t=20,until:l,role:n,sort:d="date_desc"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.default)(()=>e?`${r.API_TEAMS_MEMBERS_V3}/${e.id}/members${(0,a.encode)({until:l,limit:t,role:n,sort:d})}`:null,e=>(0,s.fetchAPI)(e,{throwOnHTTPError:!0}),o)},"useMembersInfinite",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{search:m,limit:h,role:g,eligibleMembersForProjectId:f,sort:_="date_desc",filterByUserIds:v,includeEntitlements:p,mfaStateFilter:R,includePermissionRequests:x}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=arguments.length>2&&void 0!==arguments[2]&&arguments[2],b=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{isReady:E,team:T}=(0,d.useTeam)(),{isLoading:w,can:P}=(0,o.default)(),M=!w&&P(u.Action.List,u.Resource.TeamFellowMembership),A=(0,n.useTeamSlug)(),I=h||20,y=(0,l.default)((e,t)=>{if(!E||!T||!M)return null;if(0===e)return`${r.API_TEAMS_MEMBERS_V3}/${T.id}/members${(0,a.encode)({sort:_,limit:I,search:m,role:g,eligibleMembersForProjectId:f,filterByUserIds:v,includeEntitlements:!!p||void 0,filterByMfaState:"all"!==R?R:void 0,includePermissionRequests:x})}`;let i=t?.pagination.nextPageCursor;return i?`${r.API_TEAMS_MEMBERS_V3}/${T.id}/members${(0,a.encode)({sort:_,limit:I,nextPageCursor:i,search:m,role:g,eligibleMembersForProjectId:f,includeEntitlements:!!p||void 0,filterByMfaState:"all"!==R?R:void 0,includePermissionRequests:x})}`:null},e=>(0,s.fetchAPI)(e,{throwOnHTTPError:!0}),{...e,use:S?[c]:[]});(0,t.useEffect)(()=>{S&&y.resetLaggy()},[A,S]);let O=(0,t.useMemo)(()=>y.data?.flatMap(e=>e.members.slice(0,I))||[],[y.data,I]),j=(0,t.useMemo)(()=>y.data?.flatMap(e=>e.permissionRequests||[])||[],[y.data]),$=!!y.data,k=$&&0===O.length,L=!!($&&y.data&&y.size>y.data.length),N=!!($&&y.data&&!y.data[y.data.length-1]?.pagination?.nextPageCursor);return(0,i.default)(()=>{if(!b||!y.data||N||!E||!T)return null;let e=y.data[y.data.length-1].pagination.nextPageCursor;return`${r.API_TEAMS_MEMBERS_V3}/${T.id}/members${(0,a.encode)({sort:_,limit:I,nextPageCursor:e,search:m,role:g,eligibleMembersForProjectId:f,includeEntitlements:p,filterByMfaState:"all"!==R?R:void 0,includePermissionRequests:x})}`},e=>(0,s.fetchAPI)(e,{throwOnHTTPError:!0})),[y,{members:O,permissionRequests:j.filter(e=>null!=e),initialDataLoaded:$,isEmpty:k,loadMore:()=>y.setSize(y.size+1),isLoadingMore:L,isReachingEnd:N,isLagging:y.isLagging}]},"useSuggestedMembersInfinite",0,function(){let{limit:e=25,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{can:r,isLoading:c}=(0,o.default)(),m=!c&&r(u.Action.Create,u.Resource.TeamFellowMembership),{isReady:h,team:g}=(0,d.useTeam)(),f=(0,n.useTeamSlug)(),_=(0,l.default)((t,i)=>{if(!h||!g||!m)return null;if(!t)return`/api/teams/${f}/members/suggested${(0,a.encode)({limit:e})}`;let l=i?.members,s=l?.length===e?l[l.length-1].email:null;return s?`/api/teams/${f}/members/suggested${(0,a.encode)({limit:e,from:s})}`:null},e=>(0,s.fetchAPI)(e,{throwOnHTTPError:!0}),i),v=(0,t.useMemo)(()=>_.data?.flatMap(t=>t.members.slice(0,e))||[],[_.data,e]),p=!!_.data,R=p&&0===v.length,x=!!(p&&_.data&&_.size>_.data.length),S=!!(p&&_.data&&_.data[_.data.length-1]?.members.length<e);return[_,{members:v,initialDataLoaded:p,isEmpty:R,loadMore:()=>_.setSize(_.size+1),isLoadingMore:x,isReachingEnd:S}]}],8587921)},4723202,e=>{"use strict";var t=e.i(847684),i=e.i(7185353),l=e.i(2504781),a=e.i(5255926),s=e.i(455575),r=e.i(5468328),n=e.i(277234),d=e.i(5338940),o=e.i(8587921),u=e.i(5140444),c=e.i(8248823),m=e.i(57106);async function h(e,t){await (0,n.fetchAPI)(`/api/teams/${e}/role-requests?teamId=${e}`,{method:"POST",body:JSON.stringify({teamRoles:[t]}),throwOnHTTPError:!0})}e.s(["RequestRoleButton",0,function(e){let{teamRole:n,variant:g="card"}=e,{team:f,isLoading:_}=(0,d.useTeam)(),{hasRequestedRole:v,mutate:p,isLoading:R}=function(e){let{user:t,isLoading:i}=(0,u.useUser)(),{data:l,mutate:a,isLoading:s}=(0,o.default)({includePermissionRequests:!0}),r=l?.permissionRequests;return{hasRequestedRole:r?.some(i=>i.uid===t?.uid&&i.requestedTeamRole.includes(e))??!1,mutate:a,isLoading:i||s}}(n),[x,S]=(0,i.useState)(!1),[b,E]=(0,i.useState)(!1);if(f?.membership?.role!=="VIEWER_FOR_PLUS")return null;let T=v||b;return(0,t.jsx)(a.Skeleton,{show:R||_,children:(0,t.jsx)(r.Tooltip,{disableTriggers:!T,text:(0,t.jsxs)(t.Fragment,{children:["An Owner of the team can accept your request. Requests are managed in the"," ",(0,t.jsx)(m.Link,{href:`/${f?.slug}/~/settings/members`,type:"highlight",children:"team members page"}),"."]}),children:(0,t.jsx)(l.Button,{disabled:T,loading:x,className:"card"===g?"text-label-14 font-medium":void 0,onClick:async()=>{if(f?.id){S(!0);try{await h(f.id,n),p(),E(!0),s.toasts.success("Request for the Member role has been sent")}catch(e){s.toasts.error((0,c.errorToString)(e,"Failed to send request"))}finally{S(!1)}}},size:"card"===g?"small":void 0,type:"card"===g?"tertiary":void 0,children:T?"Access Requested":"Request Access"})})})}])},8556491,e=>{"use strict";var t=e.i(847684),i=e.i(4723202),l=e.i(57106),a=e.i(1235157),s=e.i(6352514),r=e.i(4759942);e.s(["AdditionalPermissionsRequiredModal",0,function(e){let{role:n,team:d,actionLabel:o,dataTestId:u}=e;return(0,t.jsx)("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-[rgba(255,255,255,0.5)] dark:bg-[rgba(0,0,0,0.5)]",children:(0,t.jsx)("div",{className:"absolute top-0 md:top-[80px] left-1/2 -translate-x-1/2 z-[101] w-full max-w-[560px] animate-[fadeIn_300ms_ease-in-out_forwards] pointer-events-auto","data-testid":u,children:(0,t.jsxs)("div",{className:"shadow-lg md:rounded-lg max-w-full bg-white overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,t.jsx)("span",{className:"text-heading-24",children:"Additional Permissions Required"}),(0,t.jsxs)("div",{children:["As a ",(0,t.jsx)("strong",{children:n?(0,a.getRoleName)(n):"Viewer"})," user on the ",(0,t.jsx)("strong",{children:d?.name})," team, you do not have permission to ",o,"."]}),(0,t.jsxs)("div",{className:"text-center break-words pt-2 text-gray-900",children:["Learn more about"," ",(0,t.jsx)(l.Link,{external:!0,href:"/docs/rbac/access-roles",onClick:()=>{r.analytics.track(s.AnalyticsEvent.PERMISSIONS_CLICKED_LEARN_MORE)},type:"highlight",children:"Roles and Permissions"})]})]}),"VIEWER_FOR_PLUS"===n?(0,t.jsx)("div",{className:"flex justify-end items-center bg-background-200 p-4 border-t mt-2",children:(0,t.jsx)(i.RequestRoleButton,{teamRole:"MEMBER",variant:"modal"})}):null]})})})}])},1068837,e=>{"use strict";var t=e.i(847684),i=e.i(1717203),l=e.i(8556491);e.s(["AdditionalPermissionsRequiredModalClient",0,function(e){let{actionLabel:a,permissionChecks:s}=e,{can:r,isLoading:n,accessInfo:d}=(0,i.default)(),o=s.every(e=>{let[t,i]=e;return r(t,i)});return n||o?null:(0,t.jsx)(l.AdditionalPermissionsRequiredModal,{role:d?.role,team:d?.team??void 0,actionLabel:a})}])}]);

//# debugId=a067f022-cbc2-bbfb-f10e-5f9e20a8de10
//# sourceMappingURL=335708c5a08fabf7.js.map