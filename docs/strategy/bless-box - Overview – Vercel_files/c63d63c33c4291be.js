;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f7fbd2c0-a331-efd3-6628-0f6f18e7023a")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1935298,e=>{e.v({fakeSideBorders:"group-log-filters-module__iUXrVG__fakeSideBorders",filterContent:"group-log-filters-module__iUXrVG__filterContent",first:"group-log-filters-module__iUXrVG__first",last:"group-log-filters-module__iUXrVG__last",modalActiveButtonContainer:"group-log-filters-module__iUXrVG__modalActiveButtonContainer",modalActiveButtonDot:"group-log-filters-module__iUXrVG__modalActiveButtonDot",modalBody:"group-log-filters-module__iUXrVG__modalBody",modalMain:"group-log-filters-module__iUXrVG__modalMain",title:"group-log-filters-module__iUXrVG__title",titleContainer:"group-log-filters-module__iUXrVG__titleContainer"})},8300708,e=>{e.v({buttonLink:"group-details-panel-module__u1jj4W__buttonLink",buttonRule:"group-details-panel-module__u1jj4W__buttonRule",codeBlock:"group-details-panel-module__u1jj4W__codeBlock",copy:"group-details-panel-module__u1jj4W__copy",cta:"group-details-panel-module__u1jj4W__cta",detailsContainer:"group-details-panel-module__u1jj4W__detailsContainer",detailsHeader:"group-details-panel-module__u1jj4W__detailsHeader",detailsMain:"group-details-panel-module__u1jj4W__detailsMain",divider:"group-details-panel-module__u1jj4W__divider",drawer:"group-details-panel-module__u1jj4W__drawer",error:"group-details-panel-module__u1jj4W__error",fetchMetricRowContainer:"group-details-panel-module__u1jj4W__fetchMetricRowContainer",fetchMetricsContainer:"group-details-panel-module__u1jj4W__fetchMetricsContainer",ghostButton:"group-details-panel-module__u1jj4W__ghostButton",groupMessage:"group-details-panel-module__u1jj4W__groupMessage",info:"group-details-panel-module__u1jj4W__info",learnMore:"group-details-panel-module__u1jj4W__learnMore",logDetailRowSkeleton:"group-details-panel-module__u1jj4W__logDetailRowSkeleton",message:"group-details-panel-module__u1jj4W__message",modalBody:"group-details-panel-module__u1jj4W__modalBody",noLogsSelected:"group-details-panel-module__u1jj4W__noLogsSelected",root:"group-details-panel-module__u1jj4W__root",rowContainer:"group-details-panel-module__u1jj4W__rowContainer",setupLogDrain:"group-details-panel-module__u1jj4W__setupLogDrain",title:"group-details-panel-module__u1jj4W__title",tooltip:"group-details-panel-module__u1jj4W__tooltip",truncate:"group-details-panel-module__u1jj4W__truncate",warning:"group-details-panel-module__u1jj4W__warning"})},4410321,e=>{e.v({breakSpaces:"group-log-rows-module__JxqD1W__breakSpaces",colspan:"group-log-rows-module__JxqD1W__colspan",darkTheme:"group-log-rows-module__JxqD1W__darkTheme",darktheme:"group-log-rows-module__JxqD1W__darktheme",error:"group-log-rows-module__JxqD1W__error",fadeIn:"group-log-rows-module__JxqD1W__fadeIn",faded:"group-log-rows-module__JxqD1W__faded",fatal:"group-log-rows-module__JxqD1W__fatal",flash:"group-log-rows-module__JxqD1W__flash",header:"group-log-rows-module__JxqD1W__header",headerContainer:"group-log-rows-module__JxqD1W__headerContainer",info:"group-log-rows-module__JxqD1W__info",isNew:"group-log-rows-module__JxqD1W__isNew",isSelected:"group-log-rows-module__JxqD1W__isSelected",liveModeRow:"group-log-rows-module__JxqD1W__liveModeRow",loadingError:"group-log-rows-module__JxqD1W__loadingError",loadingNew:"group-log-rows-module__JxqD1W__loadingNew","move-in-indicator":"group-log-rows-module__JxqD1W__move-in-indicator","move-logs-down":"group-log-rows-module__JxqD1W__move-logs-down","move-logs-down-with-opacity":"group-log-rows-module__JxqD1W__move-logs-down-with-opacity","move-logs-up":"group-log-rows-module__JxqD1W__move-logs-up",moveUp:"group-log-rows-module__JxqD1W__moveUp",paused:"group-log-rows-module__JxqD1W__paused",previouslyFaded:"group-log-rows-module__JxqD1W__previouslyFaded",reverseBackground:"group-log-rows-module__JxqD1W__reverseBackground",rowContainer:"group-log-rows-module__JxqD1W__rowContainer",rowItem:"group-log-rows-module__JxqD1W__rowItem",screenReaderSelect:"group-log-rows-module__JxqD1W__screenReaderSelect",separated:"group-log-rows-module__JxqD1W__separated",tooltip:"group-log-rows-module__JxqD1W__tooltip",tooltipContainer:"group-log-rows-module__JxqD1W__tooltipContainer",truncate:"group-log-rows-module__JxqD1W__truncate",uppercase:"group-log-rows-module__JxqD1W__uppercase",warning:"group-log-rows-module__JxqD1W__warning"})},3327755,(e,t,r)=>{!function(e){"use strict";function t(e){var t={},r=e?e.split(/\.|-|_/):["0","0","0"];return t.info=r.join("."),t.major=r[0]||"0",t.minor=r[1]||"0",t.patch=r[2]||"0",t}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var r=["crios","fxios","daumapps"],n=e.userAgent=function(e,n){var i,s,l,o,a=e?e.toLowerCase():"undefined"!=typeof window&&window.navigator&&"string"==typeof window.navigator.userAgent?window.navigator.userAgent.toLowerCase():"";return{ua:a,browser:(i={},"webkit"===(s=/(dolfin)[ \/]([\w.]+)/.exec(a)||/(edge)[ \/]([\w.]+)/.exec(a)||/(chrome)[ \/]([\w.]+)/.exec(a)||/(tizen)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(webkit)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||["","unknown"])[1]?s=/(iphone|ipad|ipod)[\S\s]*os ([\w._\-]+) like/.exec(a)||/(android)[ \/]([\w._\-]+);/.exec(a)||[s[0],"safari",s[2]]:"mozilla"===s[1]?/trident/.test(a)?s[1]="msie":s[1]="firefox":/polaris|natebrowser|([010|011|016|017|018|019]{3}\d{3,4}\d{4}$)/.test(a)&&(s[1]="polaris"),i[s[1]]=!0,i.name=s[1],i.version=t(s[2]),i),platform:function(e){var t,r;if(!(!(t=e).match(/linux|windows (nt|98)|macintosh|cros/)||t.match(/android|mobile|polaris|lgtelecom|uzard|natebrowser|ktf;|skt;/)))return"pc";if((r=e).match(/ipad/)||r.match(/android/)&&!r.match(/mobi|mini|fennec/))return"tablet";return e.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)?"mobile":""}(a),os:(l={},"iphone"===(o=/(iphone|ipad|ipod)[\S\s]*os ([\w._\-]+) like/.exec(a)||!!/polaris|natebrowser|([010|011|016|017|018|019]{3}\d{3,4}\d{4}$)/.test(a)&&["","polaris","0.0.0"]||/(windows)(?: nt | phone(?: os){0,1} | )([\w._\-]+)/.exec(a)||/(android)[ \/]([\w._\-]+);/.exec(a)||!!/android/.test(a)&&["","android","0.0.0"]||!!/(windows)/.test(a)&&["","windows","0.0.0"]||/(mac) os x ([\w._\-]+)/.exec(a)||/(tizen)[ \/]([\w._\-]+);/.exec(a)||!!/(linux)/.test(a)&&["","linux","0.0.0"]||!!/webos/.test(a)&&["","webos","0.0.0"]||/(cros)(?:\s[\w]+\s)([\d._\-]+)/.exec(a)||/(bada)[ \/]([\w._\-]+)/.exec(a)||!!/bada/.test(a)&&["","bada","0.0.0"]||!!/(rim|blackberry|bb10)/.test(a)&&["","blackberry","0.0.0"]||["","unknown","0.0.0"])[1]||"ipad"===o[1]||"ipod"===o[1]?o[1]="ios":"windows"===o[1]&&"98"===o[2]&&(o[2]="0.98.0"),"cros"===o[1]&&(o[1]="chrome"),l[o[1]]=!0,l.name=o[1],l.version=t(o[2]),l),app:function(e,n){var i={},s=null,l=r;Array.isArray(n)?l=r.concat(n):"string"==typeof n&&(l=r.concat([n]));for(var o=0,a=l.length;o<a&&!(s=RegExp("("+l[o]+")[ \\/]([\\w._\\-]+)").exec(e));o+=1);return s||(s=["",""]),s[1]?(i.isApp=!0,i.name=s[1],i.version=t(s[2])):i.isApp=!1,i}(a,n)}};"object"==typeof window&&window.navigator.userAgent&&(window.ua_result=n(window.navigator.userAgent)||null)}((r.daumtools=r,r.util=r,r))},2458511,e=>{e.v({combobox:"search-filter-module__SHqGLq__combobox",comboboxList:"search-filter-module__SHqGLq__comboboxList",comboboxWrapper:"search-filter-module__SHqGLq__comboboxWrapper",confirm:"search-filter-module__SHqGLq__confirm",empty:"search-filter-module__SHqGLq__empty",filter:"search-filter-module__SHqGLq__filter",firstOption:"search-filter-module__SHqGLq__firstOption",firstOptionInnerButton:"search-filter-module__SHqGLq__firstOptionInnerButton",hide:"search-filter-module__SHqGLq__hide",highlight:"search-filter-module__SHqGLq__highlight",input:"search-filter-module__SHqGLq__input",option:"search-filter-module__SHqGLq__option",suffix:"search-filter-module__SHqGLq__suffix",suggestions:"search-filter-module__SHqGLq__suggestions",textOverlay:"search-filter-module__SHqGLq__textOverlay"})},5431818,e=>{e.v({logRowsContainer:"logs-common-module__Gs96xq__logRowsContainer",logRowsWrapper:"logs-common-module__Gs96xq__logRowsWrapper"})},615673,e=>{e.v({container:"paginated-group-logs-module__kgOb4G__container",hasLogs:"paginated-group-logs-module__kgOb4G__hasLogs"})},7230346,e=>{e.v({logGradient:"group-logs-module__OaUHyW__logGradient",logHeader:"group-logs-module__OaUHyW__logHeader",show:"group-logs-module__OaUHyW__show"})},6687520,e=>{"use strict";let t,r;var n=e.i(847684),i=e.i(7185353),s=e.i(8674454),l=e.i(6694387),o=e.i(4991687),a=e.i(5326905),d=e.i(8459493),u=e.i(2504781),c=e.i(455575),f=e.i(6143247),h=e.i(9722978),g=e.i(4004502),p=e.i(8139291),m=e.i(992159),x=e.i(8238875),y=e.i(7917902),v=e.i(3322724),_=e.i(1360174),C=e.i(1717203),b=e.i(7557283),j=e.i(6352514),w=e.i(4759942),S=e.i(9202779),N=e.i(6891161),k=e.i(3869476),E=e.i(7580732),T=e.i(7909933),L=e.i(8042625),M=e.i(4244280),D=e.i(1138941),A=e.i(6060673),O=e.i(7033605),F=e.i(8306707);let I={rows:[]};function P(e){let{attributeName:t,attributeNameSearchQuery:r,forceEmpty:n=!1,deploymentDomains:i,deploymentIds:s,domains:l,levels:o,sources:a,requestTags:d,routes:u,requestPaths:c,requestIds:f,requestMethods:h,statusCodes:g,caches:p,environments:m,branches:x,sessionIds:v,traceIds:_,invocationIds:C,selectedValues:b,keepPreviousData:j=!0}=e,{data:w}=(0,A.useProject)((0,D.useProjectIdOrName)()),{user:S,team:N,isLoading:k}=(0,y.useAccount)(),{startDate:E,endDate:P,searchQuery:B,myLogs:q,hasTraces:z,useClickHouseLogs:W}=(0,O.useLogsApiParams)(),$=P??new Date,K=(0,T.default)(()=>{if(k||!t||n||f&&f.length>0||!w)return;let e=null!==N?N.id:null,y=null!==S?S?.uid:null,j=e||y;if(null===j)return;let T=(0,L.encode)({attributeName:t,attributeNameSearchQuery:r||void 0,startDate:E.getTime(),endDate:$.getTime(),searchQuery:(0,F.stringifyArrayContent)((0,F.tokenizeSearchQuery)(B)),projectId:w.id,deploymentDomain:(0,F.stringifyArrayContent)(i),deploymentId:(0,F.stringifyArrayContent)(s),domain:(0,F.stringifyArrayContent)(l),level:(0,F.stringifyArrayContent)(o),ownerId:j,source:(0,F.stringifyArrayContent)(a),requestTags:(0,F.stringifyArrayContent)(d),route:(0,F.stringifyArrayContent)(u),requestPath:(0,F.stringifyArrayContent)(c),requestMethod:(0,F.stringifyArrayContent)(h),statusCode:(0,F.stringifyArrayContent)(g),cache:(0,F.stringifyArrayContent)(p),environment:(0,F.stringifyArrayContent)(m),branch:(0,F.stringifyArrayContent)(x),myLogs:q?"true":void 0,sessionId:(0,F.stringifyArrayContent)(v),hasTraces:z?"true":void 0,traceId:(0,F.stringifyArrayContent)(_),invocationId:(0,F.stringifyArrayContent)(C),useClickHouseLogs:W,selectedValues:function(e){if(e&&0!==e.length)return e.map(e=>e.includes(",")?`"${e}"`:e).join(",")}(b)});return`${M.API_LOGS}/request-logs/filter-values${T}`},R,{keepPreviousData:j,revalidateOnFocus:!1});return n?{...K,data:I}:K}async function R(e,t){let r=await fetch(e,t);if(!r.ok)throw Error((await r.json()).message);return r.json()}var B=e.i(1935298),q=e.i(8631221),z=e.i(3196486);let W=["responseStatusCodes","vercelCaches","requestMethods","timeline","levels","sources","environments"],$={hobby:"pastHour",pro:"pastDay",enterprise:"past3Days"},K=()=>{let{project:e}=(0,x.useParams)()??{},t=(0,A.useProject)(e),r=t.data?.id,{user:n,team:s}=(0,y.useAccount)(),l=s?.billing?.plan??"hobby",o=(0,i.useCallback)(()=>{r&&n?.uid&&(0,z.sendToSnowflake)(q.Topic.VercelAppV0LogPageVisited,{project_id:r,team_id:s?.id,user_id:n.uid},"vercel-app")},[r,n?.uid,s?.id]);return{trackLogPageVisit:o,trackFilterUse:(0,i.useCallback)(e=>{r&&n&&("timeline"===e.filter&&"maximum"===e.value[0]&&(e.value[0]=$[l]),(0,z.sendToSnowflake)(q.Topic.VercelAppV0LogFilterQuery,{project_id:r,team_id:s?.id,user_id:n.uid,event_trigger:e.eventTrigger,filter_terms:e.value.map(t=>({field:e.filter,operator:"=",value:t||void 0}))},"vercel-app"))},[r,n,s,l]),trackLogPresetRun:(0,i.useCallback)(e=>{let{presetId:t}=e;r&&n&&(0,z.sendToSnowflake)(q.Topic.VercelAppV0LogPresetRun,{project_id:r,team_id:s?.id,user_id:n.uid,preset_id:t,preset_type:t.endsWith("_t")?"team":"personal"},"vercel-app")},[r,n,s])}};var U=e.i(7209054),V=e.i(6209667);function H(){let{state:{levels:e,routes:t,deploymentDomains:r,deploymentIds:s,domains:l,sources:o,requestTags:a,requestMethods:d,requestPaths:u,caches:c,statusCodes:f,environments:h,branches:p,sessionIds:m,traceIds:x,invocationIds:y},setState:v}=(0,O.useLogsQueryState)(),{data:_,isLoading:C}=P({attributeName:"level",domains:l,deploymentDomains:r,deploymentIds:s,sources:o,requestTags:a,routes:t,requestPaths:u,requestMethods:d,caches:c,statusCodes:f,environments:h,branches:p,sessionIds:m,traceIds:x,invocationIds:y}),b=(0,i.useMemo)(()=>{let e;return e=_?.rows,U.GROUP_LEVEL_OPTIONS.map(t=>{let r=e?.find(e=>e.attributeValue===t.value)?.total;return r||C||(r=0),{label:t.label,value:t.value,count:r}}).sort((e,t)=>Number(t.count)-Number(e.count))},[_,C]),j=b.length,{trackFilterUse:w}=K();return(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:B.default.filterContent,count:e.length,"data-testid":(0,g.tid)("group-logs","level-filter"),defaultExpanded:!0,onClearFilter:()=>v({levels:void 0,preset:null}),title:"Contains Console Level",children:(0,n.jsx)(V.LogFilter,{hideSearch:!0,isCountLoading:C,onChange:e=>{v({levels:e.sort(),preset:null}),w({eventTrigger:"filter click",filter:"levels",value:e.sort()})},options:b,selectedOptions:e,totalAvailableOptions:j})})}function G(){let{state:{levels:e,deploymentDomains:t,deploymentIds:r,domains:s,routes:l,sources:o,requestTags:a,requestMethods:d,requestPaths:u,caches:c,statusCodes:f,environments:p,branches:m,sessionIds:x,traceIds:y,invocationIds:v},setState:_}=(0,O.useLogsQueryState)(),[C,b]=(0,i.useState)(!1),{data:j,isLoading:w}=P({attributeName:"source",levels:e,domains:s,deploymentDomains:t,deploymentIds:r,routes:l,requestMethods:d,requestPaths:u,caches:c,statusCodes:f,environments:p,branches:m,forceEmpty:!C,requestTags:a,sessionIds:x,traceIds:y,invocationIds:v}),{trackFilterUse:S}=K(),N=(0,i.useMemo)(()=>(e=>{let t=[];for(let r of U.SOURCE_OPTIONS){let n=e?.find(e=>e.attributeValue===r.value)?.total;(!r.optional||n)&&t.push({label:r.label,value:r.value,icon:r.icon,count:n??0})}return t})(j?.rows??[]),[j]),k=N.length,T=(0,i.useMemo)(()=>{if(o.length!==U.DEFAULT_SOURCES.length)return!0;let e=[...o].sort(),t=[...U.DEFAULT_SOURCES].sort();return!e.every((e,r)=>e===t[r])},[o]);return(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:(0,h.clsx)(B.default.filterContent),count:T?o.length:void 0,"data-testid":(0,g.tid)("logs","source-filter"),onClearFilter:()=>_({sources:void 0,preset:null}),onExpand:()=>b(!0),title:"Resource",children:(0,n.jsx)(V.LogFilter,{hideSearch:!0,isCountLoading:w,onChange:e=>{_({sources:e.sort(),preset:null}),S({eventTrigger:"filter click",filter:"sources",value:e.sort()})},options:N,selectedOptions:o,totalAvailableOptions:k})})}function Z(){let{state:{levels:e,deploymentDomains:t,deploymentIds:r,domains:s,routes:l,sources:o,requestTags:a,requestMethods:d,requestPaths:u,caches:c,statusCodes:f,environments:p,branches:m,sessionIds:x,traceIds:y,invocationIds:v},setState:_}=(0,O.useLogsQueryState)(),[C,b]=(0,i.useState)(!1),{data:j,isLoading:w}=P({attributeName:"requestTags",levels:e,domains:s,deploymentDomains:t,deploymentIds:r,routes:l,requestMethods:d,requestPaths:u,caches:c,statusCodes:f,environments:p,branches:m,sources:o,sessionIds:x,traceIds:y,forceEmpty:!C,invocationIds:v}),{trackFilterUse:S}=K(),N=(0,i.useMemo)(()=>{let e;return e=j?.rows??[],U.REQUEST_TAGS_OPTIONS.map(t=>{let r=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,icon:t.icon,count:r??0}})},[j]),k=N.length;return(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:(0,h.clsx)(B.default.filterContent),count:a.length,"data-testid":(0,g.tid)("logs","request-tags-filter"),onClearFilter:()=>_({requestTags:void 0,preset:null}),onExpand:()=>b(!0),title:"Request Type",children:(0,n.jsx)(V.LogFilter,{hideSearch:!0,isCountLoading:w,onChange:e=>{_({requestTags:e.sort(),preset:null}),S({eventTrigger:"filter click",filter:"requestTags",value:e.sort()})},options:N,selectedOptions:a,totalAvailableOptions:k})})}function J(){let{state:{levels:e,deploymentDomains:t,deploymentIds:r,sources:s,requestTags:l,domains:o,routes:a,requestPaths:d,requestMethods:u,statusCodes:c,caches:f,environments:h,branches:p,sessionIds:m,traceIds:x,invocationIds:y},setState:v}=(0,O.useLogsQueryState)(),[_,C]=(0,i.useState)(""),{trackFilterUse:b}=K(),[j,w]=(0,i.useState)(!1),{data:S,isLoading:N}=P({attributeName:"domain",attributeNameSearchQuery:_,levels:e,deploymentDomains:t,deploymentIds:r,sources:s,requestTags:l,routes:a,requestPaths:d,requestMethods:u,statusCodes:c,caches:f,environments:h,branches:p,sessionIds:m,traceIds:x,forceEmpty:!j,invocationIds:y,selectedValues:o}),k=!S,T=(0,i.useMemo)(()=>{let e=S?.rows??[];return o.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(V.generateFilterOption)},[S,o]),L=S?.availableOptions??0;return(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:B.default.filterContent,count:o.length,"data-testid":(0,g.tid)("group-logs","domain-filter"),onClearFilter:()=>v({domains:void 0,preset:null}),onExpand:()=>w(!0),title:"Host",children:(0,n.jsx)(V.LogFilter,{isFirstLoading:k,isLoading:N,onChange:e=>{v({domains:e.sort(),preset:null}),b({eventTrigger:"filter click",filter:"domains",value:Array(e.length).fill("")})},onSearch:C,options:T,searchId:"search-hosts",searchLabel:"Search hosts",searchPlaceholder:"Search hosts…",selectedOptions:o,showSelectedOptionsAtTop:!0,totalAvailableOptions:L})})}var Q=e.i(3306538),X=e.i(6094744),Y=e.i(3981247);e.i(3182268);var ee=e.i(7849855),et=e.i(4396019);function er(){let{state:{levels:e,deploymentIds:t,sources:r,requestTags:s,domains:l,routes:o,requestPaths:a,statusCodes:d,requestMethods:u,caches:c,environments:f,branches:h,sessionIds:p,traceIds:m,invocationIds:x},setState:y}=(0,O.useLogsQueryState)(),{isDeploymentEditable:v}=(0,X.usePageConfig)(),{trackFilterUse:_}=K(),[C,b]=(0,i.useState)(""),[j,w]=(0,i.useState)(!1),{data:S,isLoading:N}=P({attributeName:"deploymentId",attributeNameSearchQuery:C,deploymentIds:t,levels:e,sources:r,requestTags:s,domains:l,routes:o,requestPaths:a,statusCodes:d,requestMethods:u,caches:c,environments:f,branches:h,sessionIds:p,traceIds:m,forceEmpty:!v||!j,invocationIds:x,selectedValues:t}),{teamSlug:k,projectSlug:T}=(0,ee.useProjectAndTeamSlug)(),{data:L}=(0,Y.useRollingRelease)({teamIdOrSlug:k,projectSlug:T}),{deployment:M}=(0,et.useProjectProductionDeployment)(T??void 0),D=L?.rollingRelease,A=D?.canaryDeployment?.id,F=!t,I=(0,i.useMemo)(()=>{let e=[];return S?.rows?.forEach(t=>{let r=t.attributeValue,i=M?.id===r,s=A&&r===A;i?e.push({label:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,n.jsx)(Q.Badge,{size:"sm",variant:"green-subtle",children:"Current"}),(0,n.jsx)("span",{children:r})]}),value:`${r}`,count:t.total}):s?e.push({label:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,n.jsx)(Q.Badge,{size:"sm",variant:"blue-subtle",children:"Canary"}),(0,n.jsx)("span",{children:r})]}),value:`${r}`,count:t.total}):e.push({label:r,value:`${r}`,count:t.total})}),e.sort((e,t)=>{let r=M?.id===e.value,n=A&&e.value===A,i=M?.id===t.value,s=A&&t.value===A;return r&&!i?-1:!r&&i?1:n&&!s?-1:!n&&s?1:0})},[A,S?.rows,M?.id]),R=S?.availableOptions??0;return v?(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:B.default.filterContent,count:t.length||void 0,"data-testid":(0,g.tid)("logs","deployment-filter"),onClearFilter:()=>y({deploymentIds:void 0,preset:null}),onExpand:()=>w(!0),title:"Deployment ID",children:(0,n.jsx)(V.LogFilter,{isFirstLoading:F,isLoading:N,onChange:e=>{y({deploymentIds:e.sort(),preset:null}),_({eventTrigger:"filter click",filter:"deploymentIds",value:Array(e.length).fill("")})},onSearch:b,options:I,searchId:"search-deployment-ids",searchLabel:"Search deployment IDs",searchPlaceholder:"Search deployment IDs…",selectedOptions:t,showSelectedOptionsAtTop:!0,totalAvailableOptions:R})}):null}function en(){let{state:{routes:e,levels:t,deploymentDomains:r,deploymentIds:s,domains:l,requestPaths:o,sources:a,requestTags:d,environments:u,branches:c,requestMethods:f,caches:h,statusCodes:p,sessionIds:m,traceIds:x,invocationIds:y},setState:v}=(0,O.useLogsQueryState)(),[_,C]=(0,i.useState)(""),{trackFilterUse:b}=K(),{functionFilterDefaultExpanded:j}=(0,X.usePageConfig)(),[w,S]=(0,i.useState)(j),N=(0,i.useMemo)(()=>e.map(e=>e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e),[e]),{data:k,isLoading:T}=P({attributeName:"route",attributeNameSearchQuery:_,domains:l,forceEmpty:!w,levels:t,requestPaths:o,environments:u,branches:c,deploymentDomains:r,deploymentIds:s,statusCodes:p,requestMethods:f,caches:h,sources:a,requestTags:d,sessionIds:m,traceIds:x,invocationIds:y,selectedValues:N}),L=!k,M=(0,i.useMemo)(()=>{let e=k?.rows??[];return N.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(V.generateFilterOption)},[k,N]),D=k?.availableOptions??0;return(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:B.default.filterContent,count:N.length,"data-testid":(0,g.tid)("logs","route-filter"),defaultExpanded:j,onClearFilter:()=>v({routes:void 0,preset:null}),onExpand:()=>S(!0),title:"Route",children:(0,n.jsx)(V.LogFilter,{isFirstLoading:L,isLoading:T,onChange:e=>{v({routes:e.map(e=>e.includes(",")?`"${e}"`:e).sort(),preset:null}),b({eventTrigger:"filter click",filter:"routes",value:Array(e.length).fill("")})},onSearch:C,options:M,searchId:"search-routes",searchLabel:"Search Routes",searchPlaceholder:"Search Routes…",selectedOptions:N,showSelectedOptionsAtTop:!0,totalAvailableOptions:D})})}var ei=e.i(5627633),es=e.i(3793583),el=e.i(1794286),eo=e.i(5255926),ea=e.i(5338940),ed=e.i(8063555);e.i(6483798);var eu=e.i(8287059);e.i(6728635);var ec=e.i(2630141),ef=e.i(294613);function eh(){let e=(0,eu.useOpenUpgradeModal)(),t=(0,ec.useOpenEnableModal)(),{team:r}=(0,ea.useTeam)(),{maxTimeRange:i,maxRetention:s,isLoading:l,teamId:o,hasExtendedTimeline:a}=(0,ed.useUserRetention)(),{state:{startDate:d,endDate:u},setState:c}=(0,O.useLogsQueryState)(),{startDate:h,endDate:p,timeline:m}=(0,O.useLogsApiParams)(),{trackFilterUse:x}=K(),y=Date.now(),v=(0,es.sub)(y,i).getTime(),_=d&&u?void 0:m,{presets:C,presetValue:b}=(()=>{let n,s=(n=new Date,[{key:"past30Minutes",text:"Last 30 minutes",start:(0,es.sub)(n,{minutes:30}),end:n},{key:"pastHour",text:"Last hour",start:(0,es.sub)(n,{hours:1}),end:n},{key:"past12Hours",text:"Last 12 hours",start:(0,es.sub)(n,{hours:12}),end:n},{key:"pastDay",text:"Last day",start:(0,es.sub)(n,{days:1}),end:n},{key:"past3Days",text:"Last 3 days",start:(0,es.sub)(n,{days:3}),end:n},{key:"pastWeek",text:"Last week",start:(0,es.sub)(n,{weeks:1}),end:n},{key:"past2Weeks",text:"Last 2 weeks",start:(0,es.sub)(n,{weeks:2}),end:n}]),l=r?.billing?.plan??"hobby",d=s.map(e=>{let t=e.start.getTime(),r=!1,n=null;if(!a&&t<v)if(r=!0,"hobby"===l){let e=(0,ef.getMaxRetention)(!1,"pro");n=t>=(0,es.sub)(y,e).getTime()?"pro":"observability-plus"}else n="observability-plus";return{...e,key:e.start.getTime()===v?"maximum":e.key,needsUpgrade:r,upgradeType:n}});d.some(e=>e.start.getTime()===v)||d.push({key:"maximum",text:`Last ${(0,ei.formatDuration)(i)}`,start:new Date(v),end:new Date,needsUpgrade:!1,upgradeType:null});let u=_?d.find(e=>e.key===_):void 0,f=[{presets:d.filter(e=>!e.needsUpgrade)}];if("hobby"===l){let t=d.filter(e=>e.needsUpgrade&&"pro"===e.upgradeType).map(t=>({...t,onClick:()=>{e({teamHint:o,source:"logs-timeline-filter",onConversionSuccess:()=>{c({preset:null,timeline:t.key})}})}}));t.length>0&&f.push({title:"Upgrade to Pro",divider:!0,presets:t})}let h=d.filter(e=>e.needsUpgrade&&"observability-plus"===e.upgradeType).map(e=>({...e,onClick:()=>{t({via:"logs-date-range-select",upgradeUseCase:"retention"})}}));return h.length>0&&f.push({title:"Observability Plus",divider:!0,presets:h}),{presets:f,presetValue:u}})();return(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:(0,f.cn)(B.default.filterContent,"[&>*>:first-child]:max-w-[calc(100%_-_40px)]"),"data-testid":(0,g.tid)("logs","timeline-filter"),defaultExpanded:!0,title:"Timeline",children:"maximum"===m&&l?(0,n.jsx)(eo.Skeleton,{height:40,width:"100%"}):(0,n.jsx)(el.Calendar,{allowClear:!1,compact:!0,maxValue:y,minValue:(0,es.sub)(y,s).getTime(),maxDuration:i,value:b||{start:d??h,end:u??p},width:"100%",dataTestId:(0,g.tid)("group-logs","calendar"),onChange:(e,t)=>{x({eventTrigger:"filter click",filter:"timeline",value:[t||"custom"]}),t?c({preset:null,timeline:t}):c({preset:null,startDate:new Date(e.start),endDate:new Date(e.end)})},presets:C,presetKey:_})})}var eg=e.i(9338892),ep=e.i(5869491);function em(){let{state:{levels:e,deploymentDomains:t,deploymentIds:r,domains:s,routes:l,requestPaths:o,statusCodes:a,requestMethods:d,caches:u,environments:c,branches:f,sources:h,requestTags:p,sessionIds:m,traceIds:x,invocationIds:y},setState:v}=(0,O.useLogsQueryState)(),[_,C]=(0,i.useState)(""),{trackFilterUse:b}=K(),[j,w]=(0,i.useState)(!1),{data:S,isLoading:N}=P({attributeName:"statusCode",levels:e,domains:s,deploymentDomains:t,deploymentIds:r,routes:l,requestPaths:o,requestMethods:d,caches:u,environments:c,branches:f,forceEmpty:!j,sources:h,requestTags:p,sessionIds:m,traceIds:x,invocationIds:y,selectedValues:a}),k=!S,T=(0,i.useMemo)(()=>(S?.rows??[]).reduce((e,t)=>{if("-1"!==t.attributeValue){let r=(e=>{let{attributeValue:t,total:r}=e,n="None"!==t?ep.statusCodes[t]:void 0,i=n?.message??"";return{label:`${t} ${i}`,value:`${t}`,count:r}})(t);e.push(r)}return e},[]),[S?.rows]),L=T.length;a.filter(e=>!T.find(t=>String(t.value)===e)).forEach(e=>{T.push({label:e,value:e,count:0})});let M=(0,i.useMemo)(()=>_?(0,eg.matchSorter)(T,_,{keys:["label"],sorter:e=>e.sort((e,t)=>t.item.count-e.item.count)}):T,[T,_]);return(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:B.default.filterContent,count:a.length,"data-testid":(0,g.tid)("logs","status-filter"),onClearFilter:()=>v({statusCodes:void 0,preset:null}),onExpand:()=>w(!0),title:"Status Code",children:(0,n.jsx)(V.LogFilter,{isFirstLoading:k,isLoading:N,onChange:e=>{v({statusCodes:e.sort(),preset:null}),b({eventTrigger:"filter click",filter:"responseStatusCodes",value:e.sort()})},onSearch:C,options:M,searchId:"search-status",searchLabel:"Search status",searchPlaceholder:"Search status…",selectedOptions:a,showSelectedOptionsAtTop:!0,totalAvailableOptions:L})})}function ex(){let{state:{routes:e,levels:t,deploymentDomains:r,deploymentIds:s,environments:l,branches:o,domains:a,sources:d,requestTags:u,requestMethods:c,caches:f,statusCodes:h,requestPaths:p,sessionIds:m,traceIds:x,invocationIds:y},setState:v}=(0,O.useLogsQueryState)(),[_,C]=(0,i.useState)(""),{trackFilterUse:b}=K(),[j,w]=(0,i.useState)(!1),S=(0,i.useMemo)(()=>p.map(e=>e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e),[p]),{data:N,isLoading:k}=P({attributeName:"requestPath",attributeNameSearchQuery:_,domains:a,levels:t,deploymentDomains:r,deploymentIds:s,environments:l,branches:o,statusCodes:h,sources:d,requestTags:u,requestMethods:c,caches:f,routes:e,sessionIds:m,traceIds:x,forceEmpty:!j,invocationIds:y,selectedValues:S}),T=!N,L=(0,i.useMemo)(()=>{let e=N?.rows??[];return S.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(V.generateFilterOption)},[N,S]),M=N?.availableOptions??0;return(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:B.default.filterContent,count:S.length,"data-testid":(0,g.tid)("logs","request-path-filter"),onClearFilter:()=>v({requestPaths:void 0,preset:null}),onExpand:()=>w(!0),title:"Request Path",children:(0,n.jsx)(V.LogFilter,{isFirstLoading:T,isLoading:k,onChange:e=>{v({requestPaths:e.map(e=>e.includes(",")?`"${e}"`:e).sort(),preset:null}),b({eventTrigger:"filter click",filter:"requestPaths",value:Array(e.length).fill("")})},onSearch:C,options:L,searchId:"search-request-paths",searchLabel:"Search request paths",searchPlaceholder:"Search request paths…",selectedOptions:S,showSelectedOptionsAtTop:!0,totalAvailableOptions:M})})}function ey(e){let{isLoadingEnvs:t,allEnvironments:r}=e,{state:{routes:s,deploymentDomains:l,deploymentIds:o,domains:a,sources:d,requestTags:u,requestPaths:c,levels:f,requestMethods:h,statusCodes:g,caches:p,environments:m,branches:x,sessionIds:y,traceIds:v,invocationIds:_},setState:C}=(0,O.useLogsQueryState)();r=r.filter(e=>"production"===e.id||"preview"===e.id);let{trackFilterUse:b}=K(),[j,w]=(0,i.useState)(!1),{data:S,isLoading:N}=P({attributeName:"environment",domains:a,deploymentDomains:l,deploymentIds:o,sources:d,requestTags:u,routes:s,requestMethods:h,levels:f,statusCodes:g,requestPaths:c,caches:p,branches:x,sessionIds:y,traceIds:v,forceEmpty:!j,invocationIds:_}),k=(0,i.useMemo)(()=>{let e;return e=S?.rows,r.map(t=>{let r=t.name??t.slug,n=e?.find(e=>e.attributeValue===t.id)?.total??0;return{label:r,value:t.id,count:n}}).sort((e,t)=>t.count-e.count)},[S,r]),T=(0,i.useMemo)(()=>N&&!!t,[N,t]),L=k.length;return(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:B.default.filterContent,count:m.length,onClearFilter:()=>C({environments:void 0}),onExpand:()=>w(!0),title:"Environment",children:(0,n.jsx)(V.LogFilter,{hideSearch:!0,isCountLoading:T,onChange:e=>{C({environments:e.sort(),preset:null}),b({eventTrigger:"filter click",filter:"environments",value:e.sort()})},options:k,searchId:"search-environment",searchLabel:"Search environment",searchPlaceholder:"Search environment…",selectedOptions:m,totalAvailableOptions:L})})}function ev(){let{state:{levels:e,deploymentDomains:t,deploymentIds:r,sources:s,requestTags:l,domains:o,routes:a,statusCodes:d,requestMethods:u,requestPaths:c,caches:f,environments:h,branches:g,sessionIds:p,traceIds:m,invocationIds:x},setState:y}=(0,O.useLogsQueryState)(),{trackFilterUse:v}=K(),[_,C]=(0,i.useState)(!1),[b,j]=(0,i.useState)(""),{data:w,isLoading:S}=P({attributeName:"branch",attributeNameSearchQuery:b,deploymentIds:r,deploymentDomains:t,levels:e,sources:s,requestTags:l,domains:o,routes:a,statusCodes:d,requestMethods:u,caches:f,environments:h,requestPaths:c,sessionIds:p,traceIds:m,forceEmpty:!_,invocationIds:x,selectedValues:g}),N=!w,k=(0,i.useMemo)(()=>{let e=w?.rows??[];return g.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(V.generateFilterOption)},[w,g]),T=w?.availableOptions??0;return(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:B.default.filterContent,count:g.length,onClearFilter:()=>y({branches:void 0}),onExpand:()=>C(!0),title:"Branch",children:(0,n.jsx)(V.LogFilter,{isFirstLoading:N,isLoading:S,onChange:e=>{y({branches:e.sort(),preset:null}),v({eventTrigger:"filter click",filter:"branches",value:Array(e.length).fill("")})},onSearch:j,options:k,searchId:"search-branches",searchLabel:"Search branches",searchPlaceholder:"Search branches…",selectedOptions:g,showSelectedOptionsAtTop:!0,totalAvailableOptions:T})})}function e_(){let{state:{routes:e,deploymentDomains:t,deploymentIds:r,domains:s,sources:l,requestTags:o,levels:a,requestMethods:d,requestPaths:u,statusCodes:c,environments:f,branches:h,caches:g,sessionIds:p,traceIds:m,invocationIds:x},setState:y}=(0,O.useLogsQueryState)(),[v,_]=(0,i.useState)(!1),{data:C,isLoading:b}=P({attributeName:"cache",domains:s,deploymentDomains:t,deploymentIds:r,sources:l,requestTags:o,routes:e,requestMethods:d,requestPaths:u,levels:a,environments:f,branches:h,statusCodes:c,sessionIds:p,traceIds:m,forceEmpty:!v,invocationIds:x}),j=!C,w=(0,i.useMemo)(()=>{let e=C?.rows??[];return g.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(V.generateFilterOption)},[C,g]),S=C?.availableOptions??0,{trackFilterUse:N}=K();return(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:B.default.filterContent,count:g.length,onClearFilter:()=>y({caches:void 0,preset:null}),onExpand:()=>_(!0),title:"Cache",children:(0,n.jsx)(V.LogFilter,{hideSearch:!0,isLoading:b,isFirstLoading:j,onChange:e=>{y({preset:null,caches:e.sort()}),N({eventTrigger:"filter click",filter:"vercelCaches",value:e.sort()})},options:w,searchId:"search-cache",searchLabel:"Search cache",searchPlaceholder:"Search cache…",selectedOptions:g,showSelectedOptionsAtTop:!0,totalAvailableOptions:S})})}function eC(){let{state:{levels:e,deploymentDomains:t,deploymentIds:r,sources:s,requestTags:l,domains:o,routes:a,requestMethods:d,requestPaths:u,statusCodes:c,caches:f,environments:p,branches:m,sessionIds:x,traceIds:y,invocationIds:v},setState:_}=(0,O.useLogsQueryState)(),[C,b]=(0,i.useState)(""),{trackFilterUse:j}=K(),[w,S]=(0,i.useState)(!1),{data:N,isLoading:k}=P({attributeName:"requestMethod",levels:e,deploymentDomains:t,deploymentIds:r,sources:s,requestTags:l,routes:a,requestPaths:u,statusCodes:c,caches:f,domains:o,environments:p,branches:m,sessionIds:x,traceIds:y,forceEmpty:!w,invocationIds:v}),T=(0,i.useMemo)(()=>{let e,t=(e=N?.rows,U.REQUEST_METHOD_OPTIONS.map(t=>{let r=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,count:r??0}}).sort((e,t)=>t.count-e.count));return C?(0,eg.matchSorter)(t,C,{keys:["value"],sorter:e=>e.sort((e,t)=>t.item.count-e.item.count)}):t},[C,N]),L=N?.availableOptions??0;return(0,n.jsx)(E.Disclosure,{buttonClassName:B.default.fakeSideBorders,contentClassName:(0,h.clsx)(B.default.filterContent),count:d.length,"data-testid":(0,g.tid)("logs","request-method-filter"),onClearFilter:()=>_({requestMethods:void 0,preset:null}),onExpand:()=>S(!0),title:"Request Method",children:(0,n.jsx)(V.LogFilter,{isCountLoading:k,onChange:e=>{j({eventTrigger:"filter click",filter:"requestMethods",value:e.sort()}),_({requestMethods:e.sort(),preset:null})},onSearch:b,options:T,searchId:"search-request-method",searchLabel:"Search request methods",searchPlaceholder:"Search request methods…",selectedOptions:d,showSelectedOptionsAtTop:!0,totalAvailableOptions:L})})}function eb(e){let{isLoadingEnvs:t,allEnvironments:r}=e,{hasActiveFilters:i}=(0,O.useLogsQueryState)();return(0,n.jsxs)(k.SidebarPortal,{children:[(0,n.jsxs)("div",{className:(0,f.cn)(B.default.titleContainer,"flex flex-row justify-between items-center"),children:[(0,n.jsx)("div",{children:(0,n.jsx)(eN,{})}),(0,n.jsx)("div",{className:"flex flex-row gap-2",children:(0,n.jsx)(eE,{disabled:!i(),size:"small"})})]}),(0,n.jsx)(ek,{allEnvironments:r,isLoadingEnvs:t})]})}function ej(e){let{isLoadingEnvs:t,allEnvironments:r,active:s,...l}=e,o=(0,v.useIsMobile)(),[a,d]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{if(!s){let e=setTimeout(()=>{d(!0)},500);return()=>clearTimeout(e)}let e=requestAnimationFrame(()=>{d(!1)});return()=>cancelAnimationFrame(e)},[s]),(s||!a)&&o)?(0,n.jsx)(ew,{active:s,allEnvironments:r,isLoadingEnvs:t,...l}):null}function ew(e){let{isLoadingEnvs:t,allEnvironments:r,active:i,onDismiss:s}=e,{hasActiveFilters:l}=(0,O.useLogsQueryState)();return(0,n.jsxs)(N.Modal.Modal,{active:i,"data-testid":(0,g.tid)("group-logs","filters-modal"),drawerHeight:"max",drawerVerticalScroll:!0,onClickOutside:s,children:[(0,n.jsx)(N.Modal.Body,{className:B.default.modalBody,children:(0,n.jsxs)("div",{className:B.default.modalMain,children:[(0,n.jsx)("div",{className:(0,h.clsx)("geist-show-on-mobile flex flex-col gap-2",B.default.filterContent,B.default.first),children:(0,n.jsx)(eE,{disabled:!l()})}),(0,n.jsx)(ek,{allEnvironments:r,isLoadingEnvs:t})]})}),(0,n.jsx)(N.Modal.Actions,{children:(0,n.jsx)(N.Modal.Action,{"data-testid":(0,g.tid)("group-logs","filters-modal-apply"),fullWidth:!0,onClick:s,children:"Apply"})})]})}function eS(e){let{onClick:t}=e,{hasActiveFilters:r}=(0,O.useLogsQueryState)();return(0,n.jsxs)("div",{className:(0,h.clsx)("lg:hidden","relative"),children:[(0,n.jsx)(u.Button,{"aria-label":"Log Filters",className:B.default.modalActiveButton,"data-testid":(0,g.tid)("group-logs","filters-modal-button"),passthroughOnClick:t,shape:"square",svgOnly:!0,type:"secondary",children:(0,n.jsx)(S.SettingsSliders,{})}),r()&&(0,n.jsx)("div",{className:B.default.modalActiveButtonDot})]})}function eN(){return(0,n.jsx)("div",{className:(0,f.cn)(B.default.title,"text-heading-14"),children:"Filters"})}function ek(e){let{isLoadingEnvs:t,allEnvironments:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh,{}),(0,n.jsx)(H,{}),(0,n.jsx)(G,{}),(0,n.jsx)(ey,{allEnvironments:r,isLoadingEnvs:t}),(0,n.jsx)(en,{}),(0,n.jsx)(ex,{}),(0,n.jsx)(em,{}),(0,n.jsx)(Z,{}),(0,n.jsx)(J,{}),(0,n.jsx)(eC,{}),(0,n.jsx)(e_,{}),(0,n.jsx)(ev,{}),(0,n.jsx)(er,{})]})}function eE(e){let{onClick:t,...r}=e,{setState:i}=(0,O.useLogsQueryState)(),s=(0,v.useIsMobile)(),{isDeploymentEditable:l}=(0,X.usePageConfig)();return(0,n.jsx)(u.Button,{onClick:e=>{let r;r={startDate:void 0,endDate:void 0,page:1,timeline:void 0,preset:null,levels:void 0,sources:void 0,domains:void 0,routes:void 0,requestPaths:void 0,requestIds:void 0,searchQuery:s?void 0:"",requestMethods:void 0,statusCodes:void 0,caches:void 0,branches:void 0,environments:void 0,myLogs:void 0,hasTraces:void 0,traceIds:void 0,sessionIds:void 0,invocationIds:void 0},l&&(r.deploymentDomains=void 0,r.deploymentIds=void 0),i(r),t?.(e)},touchEventWorkaround:!0,type:"secondary",...r,children:"Reset"})}var eT=e.i(8436238),eL=e.i(1114103),eM=e.i(7511168),eD=e.i(1201436),eA=e.i(1933683),eO=e.i(4141852),eF=e.i(4333930),eI=e.i(787358),eP=e.i(4796642),eR=e.i(9318476),eB=e.i(8004707),eq=e.i(8713146),ez=e.i(109803),eW=e.i(9138164),e$=e.i(1000031),eK=e.i(1802690),eU=e.i(2560270),eV=e.i(1438473),eH=e.i(7399351),eG=e.i(6942035),eZ=e.i(1230902),eJ=e.i(8923565),eQ=e.i(5257834),eX=e.i(9334638);let eY=(0,eX.withNewIcon)(`<path d="M14.13 5.26096C14.0999 5.22807 14.0679 5.19523 14.0358 5.16429C14.0038 5.13332 13.9737 5.09853 13.9416 5.06759C13.9096 5.03666 13.8794 5.00187 13.8474 4.9709C13.8154 4.93996 13.7852 4.90517 13.7532 4.87423C13.7212 4.8433 13.691 4.80847 13.659 4.77753C13.627 4.7466 13.5968 4.71181 13.5648 4.68087C13.5328 4.64994 13.5026 4.61511 13.4706 4.58417C14.4052 5.52678 14.9406 6.80909 14.961 8.15372C14.961 11.3578 11.7918 13.9644 7.89529 13.9644C5.71341 13.9644 3.76137 13.1464 2.46318 11.8644L3.12265 12.5412C4.41895 13.8773 6.41432 14.7378 8.64895 14.7378C12.5454 14.7378 15.7147 12.1312 15.7147 8.93683C15.7147 7.57169 15.1419 6.27808 14.13 5.26096Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path d="M14.49 8.15373C14.49 11.0948 11.5375 13.479 7.89534 13.479C4.25319 13.479 1.30068 11.0948 1.30068 8.15373C1.30068 6.33028 2.43119 4.71954 4.16841 3.76433C5.90564 2.80909 6.98716 1.83066 7.89534 1.83066C8.80351 1.83066 9.57979 2.62926 11.6222 3.76433C13.3595 4.71954 14.49 6.33028 14.49 8.15373Z" fill="#FBF0DF" style="fill:#FBF0DF;fill:color(display-p3 0.9843 0.9412 0.8745);fill-opacity:1;"/>
<path d="M14.49 8.15373C14.489 7.77591 14.4385 7.39996 14.3394 7.03608C13.825 13.4751 6.17145 13.7845 3.1624 11.8586C4.51507 12.9346 6.18411 13.506 7.89534 13.479C11.5318 13.479 14.49 11.091 14.49 8.15373Z" fill="#F6DECE" style="fill:#F6DECE;fill:color(display-p3 0.9647 0.8706 0.8078);fill-opacity:1;"/>
<path d="M5.35734 3.41046C6.19956 2.89224 7.31875 1.91961 8.41915 1.91768C8.24984 1.86152 8.07322 1.83218 7.89534 1.83066C7.43936 1.83066 6.95325 2.07237 6.34087 2.4359C6.12795 2.56352 5.90751 2.70467 5.67388 2.85163C5.23485 3.13008 4.73179 3.44527 4.16653 3.76046C2.37278 4.75629 1.30068 6.39796 1.30068 8.15373C1.30068 8.23108 1.30068 8.30844 1.30068 8.38384C2.4425 4.24389 4.51699 3.92867 5.35734 3.41046Z" fill="#FFFEFC" style="fill:#FFFEFC;fill:color(display-p3 1.0000 0.9961 0.9882);fill-opacity:1;"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.35278 2.31988C7.35542 2.77646 7.26204 3.22825 7.07894 3.64439C6.89587 4.06053 6.62744 4.43122 6.29199 4.73117C6.23925 4.77951 6.2807 4.8723 6.34853 4.84523C6.98349 4.59192 7.84079 3.83392 7.47905 2.30441C7.46397 2.2174 7.35278 2.2406 7.35278 2.31988ZM7.78051 2.31988C8.01106 2.70592 8.15752 3.13856 8.20986 3.58814C8.26224 4.03773 8.21924 4.4936 8.08385 4.92454C8.06123 4.99221 8.14226 5.05022 8.1875 4.99413C8.60011 4.4527 8.95998 3.3776 7.88225 2.2174C7.82759 2.16712 7.74281 2.24447 7.78051 2.31215V2.31988ZM8.30053 2.28701C8.66158 2.54932 8.96359 2.88804 9.18623 3.28031C9.4089 3.67259 9.54698 4.10931 9.59119 4.56099C9.58928 4.57728 9.59355 4.59368 9.60311 4.60682C9.61267 4.61995 9.6268 4.62881 9.64254 4.63153C9.65832 4.63425 9.67447 4.63069 9.68771 4.62149C9.70095 4.61233 9.71026 4.59828 9.71368 4.58228C9.88703 3.90741 9.78904 2.75689 8.36272 2.15939C8.28736 2.12845 8.23837 2.23287 8.30053 2.27928V2.28701ZM4.82235 4.29803C5.25177 4.16636 5.64942 3.94331 5.98932 3.64348C6.32922 3.34364 6.60375 2.97369 6.79506 2.55772C6.82901 2.48811 6.93637 2.51518 6.91941 2.59253C6.59346 4.13947 5.50251 4.46237 4.82422 4.41985C4.75261 4.42177 4.75452 4.31929 4.82235 4.29803Z" fill="#CCBEA7" style="fill:#CCBEA7;fill:color(display-p3 0.8000 0.7451 0.6549);fill-opacity:1;"/>
<path d="M7.89529 13.9644C3.9988 13.9644 0.82959 11.3578 0.82959 8.15375C0.82959 6.2201 1.99401 4.41596 3.94413 3.33506C4.50939 3.02568 4.99362 2.71436 5.42511 2.44171C5.66254 2.29088 5.88672 2.14973 6.10344 2.01824C6.76477 1.61604 7.33003 1.34726 7.89529 1.34726C8.46055 1.34726 8.9542 1.5793 9.5722 1.95443C9.76063 2.06465 9.94903 2.18453 10.1506 2.31602C10.6198 2.61381 11.1492 2.95026 11.8464 3.33506C13.7965 4.41596 14.961 6.21812 14.961 8.15372C14.961 11.3578 11.7918 13.9644 7.89529 13.9644ZM7.89534 1.83066C7.43936 1.83066 6.95325 2.07237 6.34087 2.4359C6.12795 2.56352 5.90751 2.70467 5.67388 2.85163C5.23485 3.13008 4.73179 3.44527 4.16653 3.76046C2.37278 4.75629 1.30068 6.39796 1.30068 8.15373C1.30068 11.091 4.2588 13.481 7.89529 13.481C11.5317 13.481 14.49 11.091 14.49 8.15373C14.49 6.39796 13.4179 4.75629 11.6222 3.76433C10.91 3.37759 10.3541 3.01408 9.90382 2.72789C9.69843 2.59834 9.51004 2.47845 9.33856 2.3721C8.76764 2.02404 8.35128 1.83066 7.89534 1.83066Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path d="M9.22342 9.56532C9.13879 9.92111 8.94609 10.24 8.67324 10.4761C8.46837 10.6799 8.20317 10.8078 7.91955 10.8396C7.62743 10.8128 7.35293 10.6846 7.1414 10.4761C6.87131 10.2389 6.68137 9.92012 6.59876 9.56532C6.596 9.54428 6.59802 9.52284 6.60461 9.50268C6.61115 9.48253 6.62215 9.46421 6.63672 9.44909C6.65125 9.43398 6.66897 9.42246 6.68854 9.41547C6.70807 9.40849 6.72893 9.40617 6.74949 9.40871H9.07456C9.09498 9.40646 9.11561 9.40904 9.13492 9.41617C9.15423 9.42331 9.1717 9.43486 9.18605 9.44994C9.20036 9.46502 9.21117 9.48323 9.21765 9.50324C9.22412 9.52321 9.22611 9.54443 9.22342 9.56532Z" fill="#B71422" style="fill:#B71422;fill:color(display-p3 0.7176 0.0784 0.1333);fill-opacity:1;"/>
<path d="M7.14176 10.4916C7.35285 10.7002 7.62636 10.8297 7.91804 10.8589C8.20905 10.8292 8.48186 10.6998 8.69244 10.4916C8.75982 10.4271 8.82275 10.358 8.88087 10.2847C8.76479 10.1495 8.62299 10.0402 8.46424 9.96337C8.30546 9.88653 8.13306 9.84387 7.95761 9.83798C7.76988 9.84254 7.58608 9.89385 7.42196 9.9875C7.25784 10.0811 7.11837 10.2143 7.01553 10.3755C7.05886 10.4162 7.09656 10.4548 7.14176 10.4916Z" fill="#FF6164" style="fill:#FF6164;fill:color(display-p3 1.0000 0.3804 0.3922);fill-opacity:1;"/>
<path d="M7.17169 10.3388C7.26507 10.2149 7.38465 10.1143 7.52141 10.0446C7.65816 9.97496 7.80849 9.938 7.96117 9.93656C8.24332 9.9451 8.51215 10.0617 8.71482 10.2633C8.75815 10.215 8.7996 10.1647 8.83918 10.1144C8.59948 9.88018 8.28271 9.74696 7.95171 9.74125C7.77487 9.74284 7.60052 9.78454 7.44122 9.86344C7.28192 9.94234 7.1416 10.0565 7.03037 10.1976C7.07491 10.2473 7.1221 10.2944 7.17169 10.3388Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path d="M7.91204 10.9556C7.59808 10.9274 7.30261 10.7911 7.07357 10.5689C6.78189 10.3157 6.57661 9.97363 6.4876 9.59239C6.4812 9.55848 6.48231 9.5235 6.49077 9.49003C6.49922 9.45659 6.51489 9.42548 6.53659 9.39903C6.56242 9.36703 6.595 9.3415 6.6319 9.32444C6.66883 9.30733 6.70903 9.29913 6.74949 9.30042H9.07456C9.11499 9.29954 9.15508 9.30796 9.1919 9.32503C9.22875 9.34205 9.26138 9.36736 9.28749 9.39903C9.30897 9.42559 9.32435 9.45674 9.33251 9.49021C9.34064 9.52368 9.34138 9.55863 9.33457 9.59239C9.24556 9.97363 9.04028 10.3157 8.7486 10.5689C8.52008 10.7907 8.22535 10.927 7.91204 10.9556ZM6.74949 9.52471C6.71933 9.52471 6.71182 9.53825 6.70991 9.54211C6.78958 9.8727 6.96974 10.1687 7.2243 10.3871C7.41045 10.5753 7.65248 10.6944 7.91204 10.7255C8.17091 10.6948 8.41268 10.5772 8.59975 10.391C8.85354 10.1722 9.033 9.87627 9.11226 9.54601C9.10814 9.53979 9.10244 9.5349 9.09579 9.53185C9.08917 9.52876 9.08181 9.52766 9.07456 9.52857L6.74949 9.52471Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path d="M10.7631 9.68522C11.3718 9.68522 11.8653 9.3874 11.8653 9.02002C11.8653 8.65265 11.3718 8.35483 10.7631 8.35483C10.1543 8.35483 9.66084 8.65265 9.66084 9.02002C9.66084 9.3874 10.1543 9.68522 10.7631 9.68522Z" fill="#FEBBD0" style="fill:#FEBBD0;fill:color(display-p3 0.9961 0.7333 0.8157);fill-opacity:1;"/>
<path d="M5.05995 9.68522C5.66872 9.68522 6.16222 9.3874 6.16222 9.02002C6.16222 8.65265 5.66872 8.35483 5.05995 8.35483C4.45121 8.35483 3.95772 8.65265 3.95772 9.02002C3.95772 9.3874 4.45121 9.68522 5.05995 9.68522Z" fill="#FEBBD0" style="fill:#FEBBD0;fill:color(display-p3 0.9961 0.7333 0.8157);fill-opacity:1;"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.57759 8.75319C5.78302 8.7536 5.98392 8.69144 6.15492 8.57458C6.32588 8.45773 6.45925 8.29147 6.53811 8.09682C6.61697 7.90218 6.63782 7.68789 6.59795 7.48106C6.55812 7.27428 6.4594 7.08426 6.31426 6.93504C6.16915 6.78585 5.98418 6.68419 5.78272 6.64292C5.58127 6.60165 5.37246 6.62265 5.18263 6.70321C4.99284 6.78379 4.83056 6.92036 4.71643 7.09563C4.60226 7.27086 4.54131 7.47694 4.54131 7.68774C4.54131 7.97 4.65044 8.24071 4.84472 8.44044C5.039 8.6402 5.30258 8.75268 5.57759 8.75319ZM10.2447 8.75319C10.4504 8.75474 10.6518 8.69353 10.8236 8.57741C10.9953 8.46126 11.1295 8.29541 11.2093 8.10087C11.289 7.90633 11.3106 7.69186 11.2714 7.48467C11.2322 7.27748 11.1339 7.08691 10.9891 6.93714C10.8442 6.78736 10.6592 6.68511 10.4576 6.64336C10.256 6.60165 10.0469 6.62229 9.85673 6.70269C9.66661 6.7831 9.50399 6.91967 9.3896 7.09504C9.27518 7.27042 9.21408 7.47669 9.21408 7.68774C9.21357 7.96916 9.32178 8.23928 9.51495 8.43897C9.70813 8.63869 9.97053 8.75165 10.2447 8.75319Z" fill="black" style="fill:black;fill-opacity:1;"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25759 7.75539C5.33479 7.7558 5.41042 7.73262 5.47479 7.68889C5.53919 7.64512 5.58947 7.58277 5.61926 7.50965C5.64909 7.43657 5.65707 7.35602 5.64225 7.27822C5.62739 7.20047 5.59039 7.12896 5.53592 7.0728C5.48144 7.01663 5.41196 6.97831 5.33627 6.96271C5.26053 6.94711 5.18204 6.95491 5.11065 6.98515C5.03929 7.01538 4.97827 7.06669 4.93531 7.13257C4.89239 7.19841 4.86943 7.27587 4.86943 7.35513C4.86943 7.46095 4.91026 7.56247 4.98302 7.63747C5.05577 7.7125 5.15449 7.75488 5.25759 7.75539ZM9.9247 7.75539C10.0019 7.7558 10.0775 7.73262 10.1419 7.68889C10.2063 7.64512 10.2566 7.58277 10.2864 7.50965C10.3162 7.43657 10.3242 7.35602 10.3094 7.27822C10.2945 7.20047 10.2575 7.12896 10.2031 7.0728C10.1486 7.01663 10.0791 6.97831 10.0034 6.96271C9.92768 6.94711 9.84915 6.95491 9.77779 6.98515C9.7064 7.01538 9.64538 7.06669 9.60242 7.13257C9.55949 7.19841 9.53658 7.27587 9.53658 7.35513C9.53658 7.46029 9.57689 7.56122 9.6488 7.63614C9.72074 7.71103 9.81847 7.75388 9.92095 7.75539H9.9247Z" fill="white" style="fill:white;fill-opacity:1;"/>`),e0=(0,eX.withNewIcon)(`<path d="M6.71709 5.81132H8.67935C9.8869 5.81132 9.8869 7.01887 8.67935 7.01887H6.71709V5.81132ZM2.03784 11.3962H8.07558V9.73585H6.71709V8.5283H8.22652C9.8869 8.5283 8.98124 11.3962 10.3397 11.3962H14.1133V8.5283H13.2077V8.83019C13.2077 10.0377 11.8492 9.88679 11.6982 9.13208C11.5473 8.37736 10.9435 7.77359 10.7926 7.77359C13.0567 6.56604 11.6982 4.15094 9.8869 4.15094H2.79256V5.81132H4.30199V9.73585H2.03784V11.3962Z" fill="currentColor" stroke="currentColor" stroke-width="0.150943" stroke-linejoin="round"/>
  <path d="M8.00009 14.4906C11.5847 14.4906 14.4907 11.5846 14.4907 8C14.4907 4.41536 11.5847 1.50943 8.00009 1.50943C4.41545 1.50943 1.50952 4.41536 1.50952 8C1.50952 11.5846 4.41545 14.4906 8.00009 14.4906Z" stroke="currentColor" stroke-width="1.35849" fill="transparent" />
  <path d="M14.9436 8.45283L15.6983 8L14.9436 7.54717V8.45283Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.7218 9.79872L15.5503 9.50183L14.8984 8.91046L14.7218 9.79872Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.2418 11.0755L15.1124 10.9459L14.5884 10.2388L14.2418 11.0755Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M13.5217 12.2341L14.4008 12.2768L14.0249 11.481L13.5217 12.2341Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M12.5896 13.2299L13.4434 13.4434L13.23 12.5895L12.5896 13.2299Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M11.4811 14.0248L12.2769 14.4007L12.2341 13.5216L11.4811 14.0248Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M10.239 14.5882L10.9461 15.1121L11.0757 14.2416L10.239 14.5882Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M8.91057 14.8983L9.50194 15.5502L9.79883 14.7216L8.91057 14.8983Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M7.54722 14.9434L8.00005 15.6981L8.45288 14.9434H7.54722Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M6.20134 14.7216L6.49823 15.5502L7.0896 14.8983L6.20134 14.7216Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M4.92475 14.2416L5.0543 15.1121L5.76147 14.5882L4.92475 14.2416Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M3.76601 13.5216L3.72323 14.4007L4.51904 14.0248L3.76601 13.5216Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M2.77025 12.5895L2.55678 13.4434L3.41064 13.2299L2.77025 12.5895Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.97536 11.481L1.59941 12.2768L2.47852 12.2341L1.97536 11.481Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.41196 10.2388L0.887987 10.9459L1.75854 11.0755L1.41196 10.2388Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.10188 8.91046L0.450006 9.50183L1.27856 9.79872L1.10188 8.91046Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.05664 7.54717L0.301924 8L1.05664 8.45284V7.54717Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.27849 6.20128L0.449934 6.49817L1.10181 7.08954L1.27849 6.20128Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M1.75845 4.92452L0.887888 5.05406L1.41187 5.76124L1.75845 4.92452Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M2.4785 3.76594L1.5994 3.72316L1.97534 4.51897L2.4785 3.76594Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M3.41066 2.77008L2.5568 2.55661L2.77026 3.41048L3.41066 2.77008Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M4.51914 1.9752L3.72333 1.59925L3.76611 2.47836L4.51914 1.9752Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M5.76128 1.41185L5.0541 0.887872L4.92456 1.75843L5.76128 1.41185Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M7.08967 1.10168L6.49831 0.449804L6.20142 1.27836L7.08967 1.10168Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M8.45302 1.05661L8.00019 0.301889L7.54736 1.05661L8.45302 1.05661Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M9.7989 1.27836L9.50201 0.449804L8.91064 1.10168L9.7989 1.27836Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M11.0755 1.75843L10.9459 0.887873L10.2388 1.41185L11.0755 1.75843Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M12.2342 2.47835L12.277 1.59925L11.4812 1.9752L12.2342 2.47835Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M13.23 3.41048L13.4435 2.55661L12.5896 2.77008L13.23 3.41048Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.0249 4.51897L14.4008 3.72316L13.5217 3.76594L14.0249 4.51897Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.5883 5.76124L15.1123 5.05406L14.2417 4.92452L14.5883 5.76124Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M14.8984 7.08954L15.5502 6.49817L14.7217 6.20128L14.8984 7.08954Z" fill="currentColor" stroke="currentColor" stroke-width="0.45283" stroke-linejoin="round"/>
  <path d="M6.94336 1.66038L7.99996 2.71698L9.05657 1.66038H6.94336Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>
  <path d="M13.7026 5.03606L13.0243 6.36746L14.3557 7.04584L13.7026 5.03606Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>
  <path d="M12.5811 12.5078L11.1052 12.2741L10.8714 13.7499L12.5811 12.5078Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>
  <path d="M5.12842 13.7499L4.89466 12.274L3.4188 12.5078L5.12842 13.7499Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>
  <path d="M1.64404 7.04584L2.97544 6.36746L2.29706 5.03606L1.64404 7.04584Z" fill="currentColor" stroke="currentColor" stroke-width="0.90566" stroke-linejoin="round"/>`);var e1=e.i(57106),e2=e.i(9031150),e3=e.i(1637579),e4=e.i(4837983),e5=e.i(9307255),e6=e.i(545405),e9=e.i(1319302),e8=e.i(1542949),e7=e.i(9375869),te=e.i(349746);function tt(){return(0,n.jsxs)("svg",{fill:"none",height:"48",viewBox:"0 0 48 48",width:"48",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("rect",{fill:"#FAFAFA",height:"48",rx:"24",width:"48"}),(0,n.jsx)("path",{d:"M29 30.6667V22.3333",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,n.jsx)("path",{d:"M24 30.6667V17.3333",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,n.jsx)("path",{d:"M19 30.6667V25.6667",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})}var tr=e.i(8300708),tn=e.i(7827812);function ti(){let e=(0,x.useSearchParams)();return(0,F.tokenizeSearchQuery)(e?.get("searchQuery")??"")}var ts=e.i(3219703),tl=e.i(8735244),to=e.i(1286423),ta=e.i(516467);function td(e){return+(0,ta.toDate)(e)>Date.now()}var tu=e.i(277234),tc=e.i(854682),tf=e.i(5797774),th=e.i(2988836),tg=e.i(6982071),tp=e.i(4569307),tm=e.i(4099936),tx=e.i(8313680);function ty(e){let{type:t,className:r}=e,i={className:r};return"blob"===t?(0,n.jsx)(tm.Blob,{...i}):"edge-config"===t?(0,n.jsx)(tx.EdgeConfig,{...i}):null}function tv(e){let{requestMethod:t,icon:r}=e;return(0,n.jsxs)("span",{className:"inline-flex flex-row items-center gap-1 rounded-sm border border-gray-300 px-1 font-mono text-xs font-medium uppercase text-gray-800",children:[r,t]})}function t_(e){let{statusCode:t,reason:r}=e,i=(0,tp.getStatusCodeType)(t),s=null,l=null,o={fill:"none",height:"6",viewBox:"0 0 6 6",width:"6",xmlns:"http://www.w3.org/2000/svg"};return i===tp.StatusType["2XX"]?s=(0,n.jsx)("svg",{...o,children:(0,n.jsx)("circle",{cx:"3",cy:"3",fill:"#46A758",r:"2"})}):i===tp.StatusType["3XX"]?s=(0,n.jsx)("svg",{...o,children:(0,n.jsx)("circle",{cx:"3",cy:"3",fill:"#0070F3",r:"2"})}):i===tp.StatusType["4XX"]?s=(0,n.jsx)("svg",{...o,children:(0,n.jsx)("path",{d:"M3 0.5L5.59808 5H0.401924L3 0.5Z",fill:"#FF990A"})}):i===tp.StatusType["5XX"]?s=(0,n.jsx)("svg",{...o,children:(0,n.jsx)("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"#CA2A30"})}):-1===t&&(r?(s=(0,n.jsxs)("svg",{fill:"none",height:"8",viewBox:"0 0 8 8",width:"8",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("circle",{cx:"4",cy:"4",r:"2.5",stroke:"var(--ds-red-900)"}),(0,n.jsx)("line",{stroke:"var(--ds-red-900)",x1:"0.896447",x2:"7.26041",y1:"7.14645",y2:"0.782486"})]}),l=`Fetch failed with reason: ${r}`):(s=(0,n.jsxs)("svg",{fill:"none",height:"8",viewBox:"0 0 8 8",width:"8",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("circle",{cx:"4",cy:"4",r:"2.5",stroke:"var(--ds-gray-800)"}),(0,n.jsx)("line",{stroke:"var(--ds-gray-800)",x1:"0.896447",x2:"7.26041",y1:"7.14645",y2:"0.782486"})]}),l="Timed out while waiting for a response")),(0,n.jsx)(tf.ContextCard.Trigger,{content:l??(0,n.jsx)(ts.StatusCodeBadge,{full:!0,monochrome:!0,statusCode:t}),side:"top",className:"inline-flex items-center",children:s})}function tC(e){let{className:t}=e;return(0,n.jsxs)("div",{className:(0,f.cn)("flex items-center text-gray-300",t),children:[(0,n.jsx)("div",{className:"absolute h-[7px] w-full border-x border-current"}),(0,n.jsx)("div",{className:"absolute h-px w-full bg-current"})]})}function tb(e){let{startTime:t,endTime:r,className:i,traces:s}=e;return(0,n.jsx)("div",{className:(0,f.cn)("relative flex items-center text-gray-600",i),children:(0,n.jsxs)("div",{className:"relative mx-0.5 flex size-full items-center",children:[(0,n.jsx)(tC,{}),s.map((e,i)=>{let{traceStart:s,traceEnd:l,className:o}=e,a=(s-t)/(r-t)*100,d=(l-s)/(r-t)*100,u=`${a.toString()+d.toString()+i.toString()}`;return(0,n.jsxs)("div",{className:"relative ml-px mr-[2px] flex w-full",children:[(0,n.jsx)("div",{style:{width:`${a}%`}}),(0,n.jsx)(tf.ContextCard.Trigger,{content:`Started after ${s-t}ms`,side:"top",className:"inline-flex items-center",children:(0,n.jsx)("div",{className:(0,h.clsx)("absolute my-6 mr-1 h-[5px] min-w-[2px] rounded-[1px] bg-current",o),style:{width:`${d}%`}})})]},u)})]})})}var tj=e.i(3848869),tw=e.i(7432042);let tS=["cache-get","cache-set","fetch-set","fetch-get"],tN={"cache-get":"GET","cache-set":"SET","fetch-get":"GET","fetch-set":"SET"};function tk(e){let{fetchType:t}=e;return tS.includes(t)?(0,n.jsxs)("span",{className:"relative inline-flex items-center gap-1 rounded-sm bg-gray-100 px-1 py-px font-mono text-xs uppercase text-gray-800",children:[(0,n.jsx)("svg",{fill:"none",height:"13",viewBox:"0 0 12 13",width:"12",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{clipRule:"evenodd",d:"M2.47653 1.08941C3.40636 0.717474 4.65234 0.5 6 0.5C7.34766 0.5 8.59364 0.717474 9.52347 1.08941C9.98683 1.27475 10.3995 1.50951 10.7056 1.79898C11.0129 2.08957 11.25 2.47411 11.25 2.9375V6.5V10.0625C11.25 10.5259 11.0129 10.9104 10.7056 11.201C10.3995 11.4905 9.98683 11.7253 9.52347 11.9106C8.59364 12.2825 7.34766 12.5 6 12.5C4.65234 12.5 3.40636 12.2825 2.47653 11.9106C2.01317 11.7253 1.60045 11.4905 1.29437 11.201C0.987098 10.9104 0.75 10.5259 0.75 10.0625V6.5V2.9375C0.75 2.47411 0.987098 2.08957 1.29437 1.79898C1.60045 1.50951 2.01317 1.27475 2.47653 1.08941ZM1.875 4.49811V6.5C1.875 6.55438 1.90024 6.66309 2.06737 6.82115C2.23568 6.98033 2.50943 7.14959 2.89434 7.30356C3.66105 7.61024 4.75882 7.8125 6 7.8125C7.24118 7.8125 8.33895 7.61024 9.10566 7.30356C9.49057 7.14959 9.76432 6.98033 9.93263 6.82115C10.0998 6.66309 10.125 6.55438 10.125 6.5V4.49811C9.93882 4.60473 9.7365 4.70038 9.52347 4.78559C8.59364 5.15753 7.34766 5.375 6 5.375C4.65234 5.375 3.40636 5.15753 2.47653 4.78559C2.2635 4.70038 2.06118 4.60473 1.875 4.49811ZM10.125 2.9375C10.125 2.99188 10.0998 3.10059 9.93263 3.25865C9.76432 3.41783 9.49057 3.58709 9.10566 3.74106C8.33895 4.04774 7.24118 4.25 6 4.25C4.75882 4.25 3.66105 4.04774 2.89434 3.74106C2.50943 3.58709 2.23568 3.41783 2.06737 3.25865C1.90024 3.10059 1.875 2.99188 1.875 2.9375C1.875 2.88312 1.90024 2.77441 2.06737 2.61635C2.23568 2.45717 2.50943 2.28791 2.89434 2.13394C3.66105 1.82726 4.75882 1.625 6 1.625C7.24118 1.625 8.33895 1.82726 9.10566 2.13394C9.49057 2.28791 9.76432 2.45717 9.93263 2.61635C10.0998 2.77441 10.125 2.88312 10.125 2.9375ZM10.125 8.06061C9.93882 8.16723 9.7365 8.26288 9.52347 8.34809C8.59364 8.72003 7.34766 8.9375 6 8.9375C4.65234 8.9375 3.40636 8.72003 2.47653 8.34809C2.2635 8.26288 2.06118 8.16723 1.875 8.06061V10.0625C1.875 10.1169 1.90024 10.2256 2.06737 10.3836C2.23568 10.5428 2.50943 10.7121 2.89434 10.8661C3.66105 11.1727 4.75882 11.375 6 11.375C7.24118 11.375 8.33895 11.1727 9.10566 10.8661C9.49057 10.7121 9.76432 10.5428 9.93263 10.3836C10.0998 10.2256 10.125 10.1169 10.125 10.0625V8.06061Z",fill:"#8F8F8F",fillRule:"evenodd"})}),tN[t]]}):null}function tE(e){let{title:t,children:r}=e;return(0,n.jsxs)("div",{className:"flex flex-1 flex-col items-start gap-1",children:[(0,n.jsx)("div",{className:"text-gray-700",children:t}),(0,n.jsx)("div",{children:r})]})}function tT(e){let{cache:t}=e,r=t.hit?"HIT":"MISS";return(0,n.jsxs)("div",{className:"flex flex-col gap-1 gap-y-2 p-2 max-w-[300px]",children:["VSC_GET"===t.type?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tE,{title:"Cache Status",children:t.stale>0?"Stale":r}),t.revalidated>0?(0,n.jsx)(tE,{title:"Revalidated",children:"YES"}):null,0!==t.age?(0,n.jsx)(tE,{title:"Age",children:(0,tw.default)(1e3*t.age)}):null]}):null,t.revalidate_after>0?(0,n.jsxs)(tE,{title:"Revalidate After",children:[(0,tj.formatDistanceStrict)(0,1e3*t.revalidate_after)," ",t.revalidate_after>1e3&&t.revalidate_after<1e5?(0,n.jsxs)("span",{className:"text-gray-700",children:["(",t.revalidate_after,"s)"]}):null]}):null,t.tags.length>0?(0,n.jsx)(tE,{title:"Tags",children:(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:t.tags.map(e=>(0,n.jsx)(Q.Badge,{className:"normal-case",size:"sm",variant:"blue",children:e},e))})}):null]})}let tL="inline-block flex-1 truncate bg-transparent p-0 text-left text-[12px] font-mono";function tM(e){let t,{request:r,additionalMetrics:i,startTime:s,endTime:l,createCopyHandler:o,longestMethodLength:a,shouldConnectToNext:d,lite:u,plan:c,onUpgradePressed:f}=e,g=(0,x.useParams)(),p=(0,tp.getStatusCodeType)(r.http_status),m=`${r.request_hostname}${r.request_path}`,{isRuntimeCache:y,requestType:v,requestAction:_}=(0,tp.resolveRuntimeCacheProps)(m,r),{store:C,isStore:b,isLoading:j}=(0,tp.useGetStoreFromHostname)(r.request_hostname,r.request_path),w=m;m.endsWith("_vercel/insights/event")&&(w="Web Analytics Event"),tp.SUSPENSE_CACHE_HOSTNAME_REGEX.test(m)&&(w="revalidate"===_?"Revalidate Cache":"invalidate"===_?"Invalidate Cache":"dangerously-delete"===_?"Dangerously Delete Cache":y?r.cache_item_id||"Runtime Cache":"Data Cache"),(tp.readFromCache.includes(r.fetch_type)||y&&"cache-get"===v)&&d&&(w=`Reading Cache${404===r.http_status?" (Miss)":""}`),(tp.writeToCache.includes(r.fetch_type)||y&&"cache-set"===v)&&(w="Updating Cache"),!j&&b&&C&&g&&(w=`${C.name}`,t=`/${g.teamSlug}/~/stores/${C.type}/${C.id}`);let S=tS.includes(r.fetch_type)||y&&!_&&!!v,N=!S,k=N?o(m):void 0,E=!d&&(tp.readFromCache.includes(r.fetch_type)||y&&"cache-get"===v),T=(0,n.jsxs)(n.Fragment,{children:[E?(0,n.jsx)("span",{className:"border-indigo-500 mr-1 border-r pr-1 text-gray-900",children:"Using cache"}):null,(0,n.jsx)("span",{className:(0,h.clsx)("truncate",t&&"hover:underline",E?"text-gray-700":"text-gray-900"),children:j?(0,n.jsx)(eo.Skeleton,{as:"span",height:15,width:36}):w})]}),L=S&&r.cache?(0,n.jsx)(tf.ContextCard.Trigger,{className:"inline-flex items-center w-auto",content:(0,n.jsx)(tT,{cache:r.cache}),side:"top",children:(0,n.jsx)(th.InformationFillSmall,{className:"ml-2"})}):null;return(0,n.jsxs)("div",{className:(0,h.clsx)("grid-cols-[8fr,1fr]","group relative grid h-[24px] w-full  items-center gap-2 border-none bg-transparent transition-opacity duration-200 ease-in-out"),children:[(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-1 truncate",children:[(0,n.jsxs)("div",{className:"flex items-center",style:{...a&&{minWidth:`calc(${a}ch + 1px)`}},children:[d?(0,n.jsx)("div",{className:"absolute bottom-1 left-[9.5px] h-2 w-[1.5px] translate-y-full bg-gray-300"}):null,S?(0,n.jsx)(tk,{fetchType:y?v||"":r.fetch_type}):(0,n.jsx)(tv,{icon:C?(0,n.jsx)(ty,{className:"size-3",type:C.type}):void 0,requestMethod:r.request_method})]}),t?(0,n.jsx)(e1.Link,{className:(0,h.clsx)(tL,"no-underline cursor-pointer"),href:t,children:T}):N?(0,n.jsxs)("button",{className:(0,h.clsx)(tL,"flex cursor-pointer"),onClick:k,onKeyPress:k,type:"button",children:[T,L]}):(0,n.jsxs)("div",{className:(0,h.clsx)(tL,"flex"),children:[T,L]}),"hobby"!==c&&(0,n.jsx)("div",{className:"flex gap-1",children:u?(0,n.jsx)(n.Fragment,{children:-1===r.http_status?(0,n.jsx)(tf.ContextCard.Trigger,{className:"inline-flex items-center w-auto",content:(0,n.jsx)("span",{children:"Timed out while waiting for a response"}),side:"top",children:(0,n.jsx)("span",{className:"relative text-xs tabular-nums text-red-900",children:"Timeout"})}):(0,n.jsx)(ts.StatusCodeBadge,{statusCode:r.http_status,variant:"small"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t_,{reason:r.reason,statusCode:r.http_status}),(0,n.jsx)("span",{className:"relative text-xs tabular-nums text-gray-1000",children:(0,tp.formatMilliseconds)(r.duration)})]})})]}),u?(0,n.jsx)(tf.ContextCard.Trigger,{className:"inline-flex items-center w-auto",content:(0,n.jsx)("span",{className:"text-sm",children:"hobby"===c?"Unlock external API insights with Pro & Observability Plus":"Unlock latency insights with Observability Plus"}),side:"top",children:(0,n.jsxs)("button",{"aria-label":"Upgrade to Observability Plus to unlock latency insights",className:"group/lock relative flex h-4 w-full cursor-pointer appearance-none items-center border-none bg-transparent p-0 text-gray-500 focus:outline-none",onClick:()=>{f&&f()},type:"button",children:[(0,n.jsx)("div",{className:"absolute left-1/2 z-10 mx-auto mb-0.5 flex size-4 -translate-x-1/2 justify-center rounded-sm px-1 transition-colors duration-100 ease-in-out group-hover/lock:bg-gray-300 group-hover/lock:text-gray-800",children:(0,n.jsx)(tg.LockClosedSmall,{})}),(0,n.jsx)(tC,{className:"transition-colors duration-100 ease-in-out group-hover/lock:text-gray-500"})]})}):(0,n.jsx)(tb,{className:(0,h.clsx)("min-w-[20px] flex-1",p===tp.StatusType["2XX"]&&"text-green-800",p===tp.StatusType["3XX"]&&"text-blue-700",p===tp.StatusType["4XX"]&&"text-amber-800",p===tp.StatusType["5XX"]&&"text-red-800",-1===r.http_status&&(r.reason?"text-red-900":"text-gray-800")),endTime:l,startTime:s,traces:i?i.map(e=>{let t=(0,tp.getStatusCodeType)(e.http_status);return{className:(0,h.clsx)(t===tp.StatusType["2XX"]&&"!bg-green-800",t===tp.StatusType["3XX"]&&"!bg-blue-700",t===tp.StatusType["4XX"]&&"!bg-amber-800",t===tp.StatusType["5XX"]&&"!bg-red-800"),traceStart:e.timestamp,traceEnd:e.timestamp+e.duration}}):[{traceStart:r.timestamp,traceEnd:r.timestamp+r.duration}]})]})}function tD(e){let{requests:t,startTime:r,endTime:s,createCopyHandler:l,longestMethodLength:o}=e,[a,d]=(0,i.useState)(!1),u={startTime:r,endTime:s,createCopyHandler:l,longestMethodLength:o};return 1===t.length?(0,n.jsx)(tM,{...u,request:t[0]}):(0,n.jsx)(n.Fragment,{children:t.map((e,r)=>(0,i.createElement)(tM,{...u,key:r,request:e,shouldConnectToNext:(0,tp.checkIfShouldConnectToNext)(t,r)}))})}function tA(e){let{requests:t,startTime:r,endTime:s,className:l}=e,o=(0,c.useToasts)(),a=(0,v.useIsMobile)(),d=(0,i.useCallback)(e=>t=>{a||"key"in t&&"Enter"!==t.key||((0,e6.copyToClipboard)(e),o.message("Request path copied to clipboard"))},[o,a]),{startTime:u,endTime:f}=(0,i.useMemo)(()=>({startTime:Math.min(...t.map(e=>e.timestamp),r),endTime:Math.max(...t.map(e=>e.timestamp+e.duration),s),totalTime:s-r}),[s,t,r]),g=(0,i.useMemo)(()=>{let e=!1,r=!1,n=t.reduce((t,n)=>(tS.includes(n.fetch_type)&&(e=!0),n.request_hostname.includes(".vercel-storage.com")&&(r=!0),n.request_method.length>t)?n.request_method.length:t,0);return r?n+2:e?n+1:n},[t]),p=(0,i.useMemo)(()=>{let e={};return t.forEach((t,r)=>{let n=-1===t.fetch_idx?`${t.request_hostname}${t.request_path}-${t.fetch_idx}-${r}`:`${t.fetch_idx}`;e[n]||(e[n]=[]),e[n].push(t)}),Object.values(e).sort((e,t)=>e[0].timestamp-t[0].timestamp)},[t]);return(0,n.jsx)("div",{className:(0,h.clsx)("relative",l),children:p.map(e=>(0,n.jsx)(tD,{createCopyHandler:d,endTime:f,longestMethodLength:Math.max(g,3),requests:e,startTime:u},`${e[0].timestamp}${e[0].fetch_idx}${e[0].request_path}${e[0].request_hostname}`))})}function tO(e){let{requests:t,className:r,plan:s,onUpgradePressed:l}=e,o=(0,c.useToasts)(),a=(0,v.useIsMobile)(),d=(0,i.useCallback)(e=>t=>{a||"key"in t&&"Enter"!==t.key||((0,e6.copyToClipboard)(e),o.message("Request path copied to clipboard"))},[o,a]);return(0,n.jsx)("div",{className:(0,h.clsx)("relative",r),children:t.map(e=>(0,n.jsx)(tM,{createCopyHandler:d,endTime:0,lite:!0,longestMethodLength:4,onUpgradePressed:l,plan:s,request:e,startTime:0},`${e.fetch_idx}${e.request_path}${e.request_hostname}`))})}function tF(e){let{projectId:t,requestId:r,source:s,startTime:l,endTime:o,enableDataCacheMetrics:a,disableHeader:d,pathType:u}=e,{team:c}=(0,y.useAccount)(),f=c?.billing?.plan,{hasObservabilityPlusAccessOnCurrentProject:g}=(0,tc.useHasObservabilityPlus)(),p=(0,ec.useOpenEnableModal)(),{loading:m,data:x,isAwaitingData:v}=function(e){let{requestId:t,projectId:r,source:n,timestamp:i,pathType:s}=e,{team:l}=(0,y.useAccount)(),o=l?.billing?.plan,a=(0,to.addSeconds)(new Date(i),20),d=(0,T.default)(()=>l&&r&&t&&o?`${M.API_LOGS_FETCH_METRICS}${(0,L.encode)({ownerId:l.id,requestId:t,projectId:r,source:n,pathType:s})}`:null,e=>(0,tu.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,refreshInterval:()=>1e3*!!td(a)});return{data:d.data?.data,loading:d.isValidating,error:d.error,isAwaitingData:td(a)}}({projectId:t,requestId:r,source:"request"!==s?s:void 0,timestamp:l.getTime(),pathType:u}),_=x?.some(e=>e.fetch_type.startsWith("cache-")),{data:C}=function(e){let{requestId:t,projectId:r,timestamp:n,shouldLoad:i}=e,{team:s}=(0,y.useAccount)(),l=s?.billing?.plan,o=(0,to.addSeconds)(new Date(n),15),a=(0,T.default)(()=>s&&r&&t&&l&&"hobby"!==l&&i?`${M.API_LOGS_CACHE_METRICS}${(0,L.encode)({ownerId:s.id,requestId:t,projectId:r})}`:null,e=>(0,tu.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,refreshInterval:()=>1e3*!!td(o)});return{data:a.data?.data,loading:a.isValidating,error:a.error,isAwaitingData:td(o)}}({projectId:t,requestId:r,timestamp:l.getTime(),shouldLoad:a&&_}),b=(0,i.useMemo)(()=>{let e=[...C??[]];return C?x?.map(t=>{let r=e.find(e=>{if(t.cache_item_id===e.item_id&&t.fetch_type.startsWith("cache-")){let r=t.fetch_type.split("-")[1];return e.type.includes(r.toUpperCase())}return!1});return r?(e.splice(e.findIndex(e=>e.item_id===r.item_id),1),{...t,cache:r}):t}):x},[x,C]),j=x&&x.length>0,w=(0,i.useCallback)(()=>{p({from:"observability",via:"request-metrics",upgradeUseCase:"external-apis"})},[p]),S=(0,i.useMemo)(()=>v&&!j?(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial mr-0.5",children:[(0,n.jsx)(tl.Spinner,{size:16}),(0,n.jsx)("p",{className:"text-copy-14 text-gray-800",children:"Awaiting data"})]}):m&&!j?(0,n.jsx)(eo.Skeleton,{as:"dd",className:"ml-2",height:20,width:30}):j?g?(0,n.jsx)(tA,{className:"min-w-[50px] flex-1 rounded",endTime:o.getTime(),requests:b??[],startTime:l.getTime()}):(0,n.jsx)(tO,{className:"min-w-[50px] flex-1 rounded",endTime:o.getTime(),onUpgradePressed:w,plan:f,requests:b??[],startTime:l.getTime()}):(0,n.jsx)("p",{className:"text-copy-14 mr-0.5 text-right text-gray-800",children:"No outgoing requests"}),[v,m,j,g,o,b,l,w,f]);return(0,n.jsx)("div",{className:"tailwind-preflight",children:d?S:(0,n.jsxs)("div",{className:(0,h.default)("flex items-stretch justify-between gap-2 flex-initial w-full relative",j?"flex-col":"flex-row"),children:[(0,n.jsx)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:(0,n.jsx)("span",{className:"text-copy-14 text-gray-900",children:"External APIs"})}),S]})})}var tI=e.i(9886547),tP=e.i(8225664);function tR(e){let{title:t,params:r,hideCopyButton:s=!1}=e,l=(0,c.useToasts)(),o=`?${Object.keys(r).reduce((e,t)=>`${e}${t}${null===r[t]?"":`=${r[t]}`}&`,"").slice(0,-1)}
    `,a=(0,i.useCallback)((e,t)=>{"key"in e&&"Enter"!==e.key||((0,e6.copyToClipboard)(t),l.message("Copied value to clipboard"))},[l]),[d,u]=(0,i.useState)(!1),f=(0,i.useMemo)(()=>{let e=Object.keys(r),t=e.slice(0,10),i=e.length>t.length+1,s=i?(0,n.jsx)("li",{className:"inline-flex max-w-full overflow-hidden rounded-sm border border-gray-300 text-xs divide-x",children:(0,n.jsx)("span",{className:"inline-block whitespace-nowrap cursor-pointer font-medium bg-gray-100 p-1.5 px-2 text-left text-gray-900 text-[12px]",role:"button",onClick:()=>u(e=>!e),children:d?"Hide":"Show more"})}):null;return i&&!d?(0,n.jsxs)("ul",{className:"mx-2 flex flex-wrap gap-2",children:[t.map(e=>(0,n.jsx)(tB,{paramKey:e,paramValue:r[e],onCopy:a},e)),s]}):(0,n.jsxs)("ul",{className:"mx-2 flex flex-wrap gap-2",children:[e.map(e=>(0,n.jsx)(tB,{paramKey:e,paramValue:r[e],onCopy:a},e)),s]})},[d,r,a]);return(0,n.jsx)("div",{className:"border-b pt-2 pb-4 last:border-none",children:(0,n.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial relative",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between flex-initial mx-2",children:[(0,n.jsx)("dt",{className:"text-copy-14 text-gray-900",style:{flexShrink:0},children:t}),!s&&(0,n.jsx)(tP.CopyButton,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:o,title:"Copy full search params to the clipboard",type:"tertiary"})]}),f]})})}function tB(e){let{paramKey:t,paramValue:r,onCopy:i}=e,s=t,l=r,o=t;try{s=decodeURIComponent(t),o=(l=r?decodeURIComponent(r):null)?new URLSearchParams({[s]:l}).toString():s}catch(e){}return(0,n.jsxs)("li",{className:"flex cursor-pointer overflow-hidden rounded-sm border border-gray-300 text-xs font-mono divide-x",onClick:e=>i(e,o),onKeyDown:e=>i(e,o),children:[(0,n.jsx)("span",{className:(0,h.clsx)("truncate bg-transparent p-1.5 text-left text-[12px]",null!==l&&"shrink-0 max-w-[150px]"),title:t,children:t}),null!==l?(0,n.jsx)("span",{className:"truncate bg-background-200 p-1.5 text-left text-[12px] font-mono font-medium text-gray-900",title:l,children:l}):null]},t)}var tq=e.i(1551685),tz=e.i(4670733),tW=e.i(762945),t$=e.i(6226725),tK=e.i(2006677),tU=e.i(6401841),tV=e.i(8320377),tH=e.i(846089),tG=e.i(8654638),tZ=e.i(6280036),tJ=e.i(5468328);function tQ(e){let{text:t,className:r,tooltipContainerClassName:s,tooltipClassName:l}=e,[o,a]=(0,i.useState)(!1),d=(0,i.useRef)(null),u=(0,v.useIsMobile)();return(0,i.useLayoutEffect)(()=>{if(!d.current||u)return;let e=new ResizeObserver(e=>{for(let t of e){let e=t.target;a(e.offsetWidth<e.scrollWidth)}});return e.observe(d.current),()=>{e.disconnect()}},[d,u]),(0,n.jsx)(tJ.Tooltip,{className:s,delayTime:100,desktopOnly:!0,forceHide:!o,lowerDelay:!0,maxWidth:"100%",style:{display:"flex",alignItems:"center",minWidth:0},tabIndex:null,text:t,tooltipClassName:l,children:(0,n.jsx)("div",{className:`truncate ${r||""}`,ref:d,children:t})})}var tX=e.i(8087928),tY=e.i(8161149),t0=e.i(248550),t1=e.i(2259462),t2=e.i(4535059),t3=e.i(1568600),t4=e.i(1474855),t5=e.i(4410321);let t6=(0,i.forwardRef)(function(e,t){return(0,n.jsx)("div",{className:t5.default.headerContainer,ref:t,children:(0,n.jsxs)("div",{className:(0,h.clsx)("flex flex-row items-center justify-start flex-initial",t5.default.rowContainer,t5.default.header),children:[(0,n.jsx)("div",{className:t5.default.rowItem,style:{flexShrink:0,paddingLeft:16,width:166},children:"Time"}),(0,n.jsx)("div",{className:t5.default.rowItem,style:{flexShrink:0,width:"72px"},children:"Status"}),(0,n.jsx)("div",{className:(0,h.clsx)(t5.default.rowItem,t5.default.truncate),style:{minWidth:"12%",maxWidth:"12%"},children:"Host"}),(0,n.jsx)("div",{className:(0,h.clsx)(t5.default.rowItem,t5.default.truncate),style:{paddingLeft:"35px",minWidth:"calc(max(12%,180px) + 50px)",maxWidth:"calc(400px + 50px)"},children:"Request"}),(0,n.jsx)("div",{className:(0,h.clsx)(t5.default.rowItem,t5.default.truncate),children:"Messages"})]})})});function t9(e){let{logRows:t=[],selectedLogId:r,onRowSelect:s}=e,{state:{live:l,paused:o}}=(0,O.useLogsQueryState)(),a=(0,i.useRef)(!1),d=ti(),u=(0,i.useRef)(void 0);(0,i.useEffect)(()=>{t.length>0&&(u.current=new Date(t[0].timestamp).getTime()+1)},[t]);let[c,f]=(0,i.useState)({state:"disabled"});(0,i.useEffect)(()=>{l?f(e=>"enabled"!==e.state?{state:"enabled",ts:u.current||Date.now()}:e):o?f(e=>({state:"paused",ts:e.ts||Date.now()})):f(e=>({state:"disabled",ts:e.ts}))},[l,o]);let p="disabled"!==c.state&&c.ts?t.findIndex(e=>new Date(e.timestamp).getTime()<c.ts):t.length;"paused"===c.state&&0===p&&(p=t.length);let m=t.slice(0,p),x=t.slice(p);(0,i.useEffect)(()=>{function e(e){"Tab"===e.key&&(a.current=!0)}function t(e){"Tab"===e.key&&(a.current=!1)}return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]);let{teamSlug:y,projectSlug:v}=(0,ee.useProjectAndTeamSlug)(),{data:_}=(0,Y.useRollingRelease)({teamIdOrSlug:y,projectSlug:v}),C=_?.rollingRelease?.state==="ACTIVE"?_.rollingRelease.canaryDeployment:null;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{"data-testid":(0,g.tid)("group-logs","log-rows"),onFocus:e=>{a.current&&e.target.scrollIntoView({block:"center"})},className:"flex flex-col items-stretch justify-start flex-auto tailwind-preflight",children:[m.map(e=>{let t=e.requestId===r;return(0,i.createElement)(t7,{...e,highlightedWords:d,isCanary:e.deploymentId===C?.id,isSelected:t,key:e.requestId,moveUp:!!(c.ts&&new Date(e.timestamp).getTime()<c.ts),onSelect:s})}),x.length>0?(0,n.jsx)("div",{className:(0,h.clsx)(t5.default.liveModeRow,{[t5.default.paused]:"paused"===c.state}),children:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,n.jsx)(t3.PlayFill,{size:10})," Live Mode"]})},c.ts):null,x.map(e=>{let t=e.requestId===r;return(0,i.createElement)(t7,{...e,faded:"enabled"===c.state,highlightedWords:d,isCanary:e.deploymentId===C?.id,isSelected:t,key:e.requestId,onSelect:s,previouslyFaded:!!(c.ts&&new Date(e.timestamp).getTime()<c.ts),reverseBackground:!0})})]})})}function t8(e){let{level:t}=e;switch(t){case"fatal":return(0,n.jsx)(tU.Stop,{"aria-hidden":"true"});case"warning":return(0,n.jsx)(tW.Warning,{"aria-hidden":"true"});case"error":return(0,n.jsx)(t$.CrossCircle,{"aria-hidden":"true"});default:return(0,n.jsx)("div",{style:{width:"16px",height:"16px"}})}}let t7=(0,i.memo)(function(e){let{onSelect:t,isCanary:r,isSelected:s,highlightedWords:l,isNew:o,faded:a,previouslyFaded:d,moveUp:u,reverseBackground:c,...f}=e,g=(0,i.useRef)(null),{value:p}=(0,tz.useEnableAnsiLogs)();(0,i.useEffect)(()=>{g.current&&g.current.scrollIntoView({block:"center"})},[g]);let{resolvedTheme:m}=(0,tZ.useTheme)(),x=new Date(f.timestamp),y=new Set([...f.events.map(e=>{let t=e.source;return"static"===t&&f.events.some(e=>"PRERENDER"===e.cache)&&(t="data-cache"),"serverless"===t&&"middleware"===e.pathType&&(t="serverless-middleware"),t}),...f.logs.map(e=>e.source)]),v=()=>void(0,e2.awaitPaint)().then(()=>t(f)),_=(0,i.useMemo)(()=>f.hasFunctionCrashed?"fatal":f.statusCode>=500?"error":f.statusCode>=400?"warning":"info",[f.statusCode,f.hasFunctionCrashed]),C=(0,i.useMemo)(()=>{let e,t=f.logs.toSorted((e,t)=>{let{timestamp:r}=e,{timestamp:n}=t;return new Date(r).getTime()-new Date(n).getTime()}).reverse();return(l.length>0&&(e=t.find(e=>{let{message:t}=e,r=t.toLowerCase();return l.some(e=>r.includes(e.toLowerCase()))})),e||(e=t.find(e=>{let{level:t}=e;return"error"===t})||t.find(e=>{let{level:t}=e;return"warning"===t})||t[0]),e)?{style:"error"===e.level?"text-red-900":"warning"===e.level?"text-amber-900":"text-gray-1000",text:e.message}:{style:"text-gray-1000",text:""}},[f.logs,l]);return(0,n.jsxs)("div",{className:(0,h.clsx)("flex items-center py-[3px]",t5.default.rowContainer,t5.default[_],{[t5.default.faded]:a,[t5.default.previouslyFaded]:d,[t5.default.moveUp]:u,[t5.default.reverseBackground]:c,[t5.default.isSelected]:s,[t5.default.isNew]:o,[t5.default.darkTheme]:"dark"===m},f.className),"data-log-row-id":f.requestId,onClick:()=>v(),onKeyDown:e=>{"Enter"===e.key&&v()},ref:s?g:void 0,tabIndex:0,children:[(0,n.jsx)("div",{className:"relative flex items-center justify-center pl-2",children:(0,n.jsx)(t8,{level:_})}),(0,n.jsx)("div",{className:(0,h.clsx)(t5.default.rowItem,t5.default.uppercase,t5.default.truncate),style:{flexShrink:0},children:(0,n.jsxs)(t4.TimestampTooltip,{content:{timestamp:x.getTime()},showRelativeToNow:!0,children:[(0,n.jsx)("span",{className:"opacity-60",children:(0,eZ.format)(x,"MMM dd ")}),(0,n.jsx)("span",{className:"opacity-100",children:(0,eZ.format)(x,"HH:mm:ss")}),(0,n.jsx)("span",{className:"opacity-60",children:(0,eZ.format)(x,".SS")})]})}),(0,n.jsxs)("div",{className:t5.default.rowItem,style:{flexShrink:0,width:"72px",justifyContent:"space-between"},children:[(0,n.jsx)(ts.RequestMethodBadge,{method:f.requestMethod,variant:"small"}),(0,n.jsx)(ts.StatusCodeBadge,{statusCode:f.statusCode,variant:"small"})]}),(0,n.jsxs)("div",{className:(0,h.clsx)(t5.default.rowItem),style:{minWidth:"12%",maxWidth:"12%"},children:[r?(0,n.jsx)("div",{style:{opacity:.6,paddingRight:"3px"},children:(0,n.jsx)(Q.Badge,{size:"sm",variant:"green-subtle",children:"Canary"})}):null,(0,n.jsx)(tQ,{text:f.domain,tooltipContainerClassName:t5.default.tooltipContainer,tooltipClassName:t5.default.tooltip})]}),(0,n.jsx)("div",{className:"ml-4 px-2",children:(0,n.jsx)("div",{className:"-space-x-px flex justify-end",style:{width:"25px",height:"16px",opacity:.6},children:Array.from(y).sort((e,t)=>{let r=["edge-middleware","serverless-middleware","static","edge-cache","lambda","serverless","edge-function","data-cache"],n=r.indexOf(e),i=r.indexOf(t);return(-1===n?999:n)-(-1===i?999:i)}).map((e,t,r)=>(0,n.jsx)("div",{style:t!==r.length-1?{clipPath:"path('M13.7639 0H0V16.7324C0.294173 16.9026 0.635713 17 1 17H15C15.1543 17 15.3045 16.9825 15.4487 16.9495C14.0552 16.6906 13 15.4685 13 14V2C13 1.23165 13.2889 0.530757 13.7639 0Z')"}:{},children:(0,n.jsx)(tJ.Tooltip,{text:ro(e),children:(0,n.jsx)(rl,{type:e})})},e))})}),(0,n.jsx)("div",{className:"flex min-w-[max(12%,180px)]  max-w-[400px] items-center justify-start truncate pr-2",children:(0,n.jsx)(e4.HighlightText,{className:"truncate",search:l,text:f.requestPath})}),f.logs.length>0&&(0,n.jsxs)("div",{className:(0,h.clsx)(t5.default.rowItem,t5.default.separated,t5.default.truncate,"shrink",C.style),children:[f.logs.length>1&&(0,n.jsx)("div",{className:"mr-2 rounded-full bg-gray-300 px-1 text-[11px] text-gray-800",children:f.logs.length}),p?(0,n.jsx)(tV.Ansi,{newLines:!0,renderNewLine:()=>(0,n.jsx)("span",{className:t5.default.breakSpaces,children:" "}),renderText:e=>(0,n.jsx)(e4.HighlightText,{as:"span",className:t5.default.breakSpaces,search:l,text:e}),children:C.text}):(0,n.jsx)(e4.HighlightText,{search:l,text:C.text})]})]})});function re(){let e=tn.LOGS_PAGE_SIZE;return(0,n.jsx)("div",{className:"py-1",children:[...Array(e)].map((e,t)=>(0,n.jsx)(rt,{},`${Date.now()}-${t}`))})}function rt(){return(0,n.jsx)("div",{className:(0,h.clsx)("px-2 py-0.5"),children:(0,n.jsx)("div",{className:(0,h.clsx)("flex flex-row items-stretch justify-start flex-initial border-b-transparent!",t5.default.rowContainer),children:(0,n.jsx)(eo.Skeleton,{className:t5.default.rowItem,height:24,width:"100%"})})})}function rr(){let{team:e}=(0,ea.useTeam)(),{maxRetention:t,billingPlan:r}=(0,ed.useUserRetention)(),{setState:i}=(0,O.useLogsQueryState)(),s=`You have reached your ${(0,ei.formatDuration)(t)} of maximum retention limit.`;return(0,n.jsxs)("div",{className:(0,h.clsx)("flex flex-col items-center justify-center gap-6 flex-initial",t5.default.loadingError),children:[(0,n.jsx)(ra,{}),(0,n.jsxs)("p",{className:"text-copy-14 text-gray-900",style:{maxWidth:"380px"},children:[s," ",(0,n.jsx)(e1.Link,{external:!0,href:"/docs/runtime-logs",type:"highlight",children:"Learn more"})]}),(0,n.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:"pro"===r&&e?(0,n.jsx)(e1.ButtonLink,{href:`/${e.slug}/~/settings/billing`,size:"small",touchEventWorkaround:!0,children:"Upgrade to Enterprise"}):(0,n.jsx)(u.Button,{onClick:()=>i({timeline:"past30Minutes"}),prefix:(0,n.jsx)(tX.RefreshCounterClockwise,{color:"currentColor"}),size:"small",type:"secondary",children:"Reset timeline to past 30 mins"})})]})}function rn(e){let t,{errorName:r}=e;return t="WrongRequestIdFormat"===r?(0,n.jsxs)(n.Fragment,{children:["You may have input the wrong format for request id. At least a partial string is required, example:"," ",(0,n.jsx)("code",{className:"text-[10px] before:text-gray-500 before:content-['ID='] ",children:"abcde-1678961364403-a1b2c3d4f5e6"})]}):`We could not find logs for the selected filters, we've been notified
    of the issue, try to clear your filters. If the issue persists,
    contact our support.`,(0,n.jsx)("p",{className:`text-copy-14 text-gray-900 ${t5.default.screenReaderSelect}`,style:{maxWidth:"380px"},tabIndex:0,children:t})}function ri(e){let{error:t}=e,{setState:r}=(0,O.useLogsQueryState)(),i=(0,v.useIsMobile)(),{isDeploymentEditable:s}=(0,X.usePageConfig)();return"ExceedsBillingLimitError"===t.name?(0,n.jsx)(rr,{}):(0,n.jsxs)("div",{className:(0,h.clsx)("flex flex-col items-center justify-center gap-6 flex-initial",t5.default.loadingError),children:[(0,n.jsx)(ra,{}),(0,n.jsx)(rn,{errorName:t.name}),(0,n.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:(0,n.jsx)(u.Button,{onClick:()=>{let e={levels:void 0,sources:void 0,caches:void 0,domains:void 0,routes:void 0,requestMethods:void 0,requestPaths:void 0,statusCodes:void 0,environments:void 0,branches:void 0,requestIds:void 0,deploymentDomains:void 0,timeline:"past30Minutes"};s&&(e.deploymentDomains=void 0,e.deploymentIds=void 0),i||(e.searchQuery=""),r(e)},prefix:(0,n.jsx)(tX.RefreshCounterClockwise,{color:"currentColor"}),size:"small",type:"secondary",children:"Reset filters"})})]})}function rs(){let{state:{hasTraces:e},hasActiveFilters:t,setState:r}=(0,O.useLogsQueryState)(),{mutate:i,isValidating:s}=(0,tn.useGroupLogs)(),l=t();return l&&e?(0,n.jsxs)("div",{"data-testid":(0,g.tid)("group-logs","no-logs"),className:(0,h.clsx)("flex flex-col items-center justify-center gap-6 flex-initial",t5.default.loadingError),children:[(0,n.jsx)(ra,{icon:"traces"}),(0,n.jsx)("p",{className:`text-[16px] leading-[24px] font-medium text-gray-900 ${(0,h.clsx)(t5.default.screenReaderSelect,"max-w-[420px] text-center")}`,tabIndex:0,children:"No traces found for the selected filters"}),(0,n.jsx)("div",{className:"flex flex-col gap-3 max-w-[420px] text-left",children:(0,n.jsxs)("div",{className:"border rounded-md p-4 flex flex-col gap-2",children:[(0,n.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-gray-1000",children:"Start tracing in 3 steps:"}),(0,n.jsxs)("ol",{className:"list-decimal list-inside space-y-1 marker:text-gray-600",children:[(0,n.jsxs)("li",{children:["Open the"," ",(0,n.jsx)(e1.Link,{href:"/docs/vercel-toolbar/in-production-and-localhost/add-to-production",type:"highlight",children:"Vercel Toolbar"})," ","on your deployment"]}),(0,n.jsxs)("li",{children:["Select ",(0,n.jsx)("strong",{children:"Run Page Trace"})," and wait for the page to reload"]}),(0,n.jsx)("li",{children:"Click the notification to view the trace"})]})]})}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row items-stretch justify-start gap-4 flex-initial",children:[(0,n.jsx)(e1.ButtonLink,{href:"/docs/tracing/session-tracing",size:"small",children:"Learn More about Tracing"}),(0,n.jsx)(u.Button,{disabled:s,onClick:()=>void i(),prefix:s?(0,n.jsx)(tl.Spinner,{color:"var(--accents-5)",size:16}):void 0,size:"small",type:"secondary",children:"Refresh"})]})]}):(0,n.jsxs)("div",{"data-testid":(0,g.tid)("group-logs","no-logs"),className:(0,h.clsx)("flex flex-col items-center justify-center gap-6 flex-initial",t5.default.loadingError),children:[(0,n.jsx)(ra,{icon:l?"logs":"function"}),(0,n.jsx)("p",{className:`text-copy-14 text-gray-900 ${t5.default.screenReaderSelect}`,style:{maxWidth:"380px"},tabIndex:0,children:l?"No logs found for the selected filters":"There are no runtime logs in this time range"}),(0,n.jsx)("div",{className:"flex flex-col md:flex-row items-stretch justify-start gap-4 flex-initial",children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Button,{onClick:()=>r({},{replace:!0,override:!0}),size:"small",children:"Reset Filters"}),(0,n.jsx)(u.Button,{disabled:s,onClick:()=>void i(),prefix:s?(0,n.jsx)(tl.Spinner,{color:"var(--accents-5)",size:16}):void 0,size:"small",type:"secondary",children:"Refresh"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Button,{disabled:s,onClick:()=>void i(),prefix:s?(0,n.jsx)(tl.Spinner,{color:"var(--accents-5)",size:16}):void 0,size:"small",children:"Refresh Query"}),(0,n.jsx)(e1.ButtonLink,{href:"/docs/runtime-logs",size:"small",tab:!0,type:"secondary",children:"Learn More"})]})})]})}function rl(e){let{type:t}=e;switch(t){case"request":return(0,n.jsx)(t1.File,{size:16});case"serverless":return(0,n.jsx)(eF.FunctionSquare,{size:16});case"serverless-middleware":case"edge-middleware":return(0,n.jsx)(eI.FunctionMiddleware,{size:16});case"edge-function":return(0,n.jsx)(eP.FunctionEdge,{size:16});case"data-cache":return(0,n.jsx)(eq.DataCache,{size:16});case"external":return(0,n.jsx)(eB.ArrowGlobe,{size:16});case"redirect":return(0,n.jsx)(eV.ArrowRight,{size:16});default:return(0,n.jsx)(eR.EdgeCache,{size:16})}}function ro(e){switch(e){case"request":return"Request";case"serverless":return"Vercel Function";case"serverless-middleware":case"edge-middleware":return"Middleware";case"edge-function":return"Edge Function";case"data-cache":case"static":return"Cache";case"external":return"Rewrite";case"redirect":return"Redirect";default:return e}}function ra(e){let{icon:t="logs"}=e;return(0,n.jsx)(tY.EmptyState.Icon,{icon:"function"===t?(0,n.jsx)(eF.FunctionSquare,{}):"traces"===t?(0,n.jsx)(t2.Traces,{}):(0,n.jsx)(t0.Logs,{}),size:40})}var rd=e.i(4597921),ru=e.i(9224004);let rc=()=>{let{selectedTrace:e}=(0,ru.useLogs)();return e};var rf=e.i(5851942);function rh(e){let{level:t}=e;switch(t){case"fatal":return(0,n.jsx)(tU.Stop,{"aria-hidden":"true",className:"-ml-1"});case"warning":return(0,n.jsx)(tW.Warning,{"aria-hidden":"true"});case"error":return(0,n.jsx)(t$.CrossCircle,{"aria-hidden":"true"});default:return(0,n.jsx)("div",{style:{width:"16px",height:"16px"}})}}function rg(e){return e.includes("process exited with")&&e.includes("The logs above can help with debugging the issue.")}function rp(e){let{timestamp:t,message:r,level:i,error:s,onShowError:l,invocationId:o,concurrency:a,handleViewConcurrentRequests:d,isInvocationFiltered:u}=e,c=ti(),f=`${r.replaceAll("\r","\n")}`,{value:p}=(0,tz.useEnableAnsiLogs)(),m=(0,rd.useServerFlag)("enable-observability-error-dashboard",!1);return(0,n.jsxs)("div",{className:(0,h.clsx)("log-message","group -mt-px flex flex-col border-y py-1.5 pl-4 pr-2 font-mono text-[13px] @[480px]:flex-row @[480px]:gap-3",{info:"text-gray-1000 bg-background-200",error:"-my-px border-y border-red-300 bg-red-100 text-red-900",warning:"-my-px border-y border-amber-300 bg-amber-100 text-amber-900",fatal:"border-l-4 border-l-red-900 -my-px border-y border-red-300 text-red-900 bg-gradient-to-r from-red-400 to-red-100 to-5%"}[i]),children:[(0,n.jsxs)("div",{className:"flex items-center @[480px]:items-start",children:[(0,n.jsx)("div",{className:(0,h.clsx)("mr-2  mt-[2px] flex @[480px]:mt-[5px] @[480px]:size-4","info"===i&&"hidden @[480px]:block"),children:(0,n.jsx)(rh,{level:i})}),(0,n.jsxs)("span",{className:"select-none whitespace-nowrap pt-px font-mono",children:[(0,tq.isToday)(new Date(t))?null:(0,n.jsxs)("span",{className:"uppercase opacity-65",children:[(0,eZ.format)(new Date(t),"MMM dd")," "]}),(0,n.jsx)("span",{className:"opacity-75",children:(0,eZ.format)(new Date(t),"HH:mm:ss")}),(0,n.jsx)("span",{className:"opacity-50",children:(0,eZ.format)(new Date(t),".SSS")})]}),(0,n.jsx)("div",{className:"flex flex-1 justify-end @[480px]:hidden",children:(0,n.jsx)(tP.CopyButton,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:f,title:"Copy message to the clipboard",type:"tertiary"})})]}),(0,n.jsx)("span",{className:"flex-1 whitespace-pre-wrap break-all pt-px","data-testid":(0,g.tid)("group-logs","detail-message"),children:(0,n.jsxs)("div",{className:"flex items-center flex-wrap",children:[(0,n.jsx)("span",{children:p?(0,n.jsx)(tV.Ansi,{newLines:!0,renderText:e=>(0,n.jsx)(e4.HighlightText,{as:"span",search:c,text:e}),children:f}):(0,n.jsx)(e4.HighlightText,{search:c,text:f})}),rg(f)&&void 0!==a&&a>1&&o&&d&&!u&&(0,n.jsx)("span",{className:"block w-full mt-2 mb-2 text-xs",children:(0,n.jsxs)("div",{className:"flex items-center gap-2 text-gray-900",children:[(0,n.jsx)(tK.Question,{size:14,className:"color-gray-700 flex-shrink-0"}),(0,n.jsxs)("span",{className:"text-gray-700",children:["This error may be caused by other concurrent requests."," ",(0,n.jsx)("button",{type:"button",className:"text-gray-900 underline hover:text-black bg-transparent border-none p-0 m-0 cursor-pointer font-medium",onClick:()=>d(o),children:"View concurrent requests"})]})]})})]})}),m&&"error"===i&&s?(0,n.jsxs)("button",{className:"sticky top-11 -mx-1 -mr-2 flex h-[30px] cursor-pointer flex-row items-center gap-1 whitespace-nowrap rounded-md border border-[hsla(var(--ds-red-700-value),0.2)] bg-[hsla(var(--ds-red-800-value),0.1)] px-2 py-1 font-sans text-red-900 transition-colors duration-100 ease-in-out hover:bg-[hsla(var(--ds-red-800-value),0.3)]",onClick:()=>l?.(s),type:"button",children:[(0,n.jsx)(eA.Eye,{size:16}),(0,n.jsxs)("span",{children:["Seen ",new Intl.NumberFormat().format(s.countErrors)," times"]})]}):null,"fatal"===i?(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(Q.Badge,{variant:"red",size:"sm",children:"Fatal"})}):null,(0,n.jsx)("div",{className:(0,h.clsx)("-my-0.5 hidden opacity-0 group-hover:opacity-100 @[480px]:block focus-within:focus-visible:opacity-100"),children:(0,n.jsx)(tP.CopyButton,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:f,title:"Copy message to the clipboard",type:"tertiary"})})]})}function rm(e){let{logs:t,source:r,onShowError:i,invocationId:s,concurrency:l,handleViewConcurrentRequests:o,isInvocationFiltered:a}=e;return(0,n.jsxs)("div",{className:"relative flex flex-col",children:[(0,n.jsxs)("div",{className:"sticky -top-px z-10 -mt-px flex select-none flex-row gap-2 border-y bg-background-100 px-4 py-2",children:[(0,n.jsx)(rl,{type:r}),(0,n.jsx)("p",{className:"text-[13px] leading-[18px] font-medium text-gray-1000",children:ro(r)})]}),(0,n.jsx)("div",{className:"flex flex-col @container",children:t.map((e,t)=>(0,n.jsx)(rp,{error:e.error,level:e.level,message:e.message,onShowError:i,timestamp:e.timestamp,invocationId:s,concurrency:l,handleViewConcurrentRequests:o,isInvocationFiltered:a},`${e.timestamp}-${t}`))})]})}function rx(e){let{onToggleCollapse:t,collapsed:r}=e,[s,l]=(0,i.useState)(!1),{data:o}=(0,te.useSelectedLog)(),a=rc(),{state:d,setState:c}=(0,O.useLogsQueryState)(),f=(0,x.useParams)(),g=(0,i.useMemo)(()=>{let e=a?.spans.find(e=>e.spanId===a.rootSpanId);if(!e)return"";let[t,r]=e.duration,n=1e3*t+r/1e6;return n>1e3?`${new Intl.NumberFormat(void 0,{maximumFractionDigits:2}).format(.001*n)}s`:`${Math.round(n)}ms`},[a]),p=!!(o?.traceId&&o.sessionId),m=s&&p?"trace":"logs",[y,v]=(0,i.useState)(null),[_,C]=(0,i.useState)(null),{data:b}=(0,tH.useErrors)(),S=(0,i.useCallback)(()=>{let e=!r;t?.(e)},[r,t]),N=(0,i.useCallback)(e=>{c({invocationIds:[e]})},[c]);if((0,i.useEffect)(()=>{if(!o)return;let e=o.logs.some(e=>null===y||e.level===y);y&&!e&&v(null)},[o,y]),(0,i.useEffect)(()=>{let e=e=>{if(r)return;let t=document.activeElement,n=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());if((e.metaKey||e.ctrlKey)&&"a"===e.key&&!n){e.preventDefault();let t=document.querySelectorAll(".log-message"),r=document.createRange();if(t.length>0){r.setStartBefore(t[0]),r.setEndAfter(t[t.length-1]);let e=window.getSelection();e?.removeAllRanges(),e?.addRange(r)}}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),!o)return null;let k=o.logs.reduce((e,t)=>{e[t.source]||(e[t.source]=[]);let r=b?.rows.find(e=>ry(t.message)===ry(e.errorName)),n={...t,error:r};return e[t.source].push(n),e},{}),E=o.logs.reduce((e,t)=>(e[t.level]=(e[t.level]||0)+1,e),{info:0,warning:0,error:0,fatal:0}),T=Object.values(E).filter(e=>e>0).length,L=T>1||1===T&&E.info>0,M=Object.entries(Object.entries(k).reduce((e,t)=>{let[r,n]=t,i=y?n.filter(e=>e.level===y):n;return i.length>0&&(e[r]=i),e},{})).sort((e,t)=>{let[,r]=e,[,n]=t,i=r[0]?.timestamp??"",s=n[0]?.timestamp??"";return new Date(i).getTime()-new Date(s).getTime()}),D=M.find(e=>{let[,t]=e;return t.some(e=>rg(e.message))})?.[0],A=o.events?.find(e=>"serverless"===D&&"middleware"===e.pathType?void 0:e.source===D)?.invocationId;A||(A=o.events?.[0]?.invocationId);let F=o.events?.reduce((e,t)=>t.concurrency&&t.concurrency>e?t.concurrency:e,0),I=!!t;return(0,n.jsx)("div",{className:(0,h.clsx)("flex h-full flex-1 flex-col transition-all duration-200 ease-in-out sm:flex-initial"),children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:(0,h.clsx)("flex items-center justify-between border-b bg-background-100 py-2 pr-2",_?"pl-4":"pl-1"),onClick:e=>{e.target!==e.currentTarget||_||S()},children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:I?_?(0,n.jsxs)("header",{className:"text-heading-14",children:["Error Details",(0,n.jsx)(Q.Badge,{className:"ml-2",children:"Internal"})]}):(0,n.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,n.jsx)("div",{className:"flex flex-row items-center gap-1",children:(0,n.jsx)("button",{className:(0,h.clsx)("text-button-14 rounded px-3 py-1.5 transition-colors",p&&"cursor-pointer hover:bg-gray-200",p&&"logs"===m?"bg-gray-100":"bg-transparent"),onClick:e=>{e.stopPropagation(),l(!1),r&&S(),w.analytics.track(j.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"logs-tab",action:"View Logs"})},type:"button",children:"Logs"})}),p?(0,n.jsx)("button",{className:(0,h.clsx)("text-button-14 cursor-pointer rounded px-3 py-1.5 transition-colors hover:bg-gray-200","trace"===m?"bg-gray-100":"bg-transparent"),onClick:e=>{e.stopPropagation(),l(!0),r&&S(),w.analytics.track(j.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"trace-tab",action:"View Trace"})},type:"button",children:"Trace"}):null]}):null}),I?(0,n.jsx)("div",{className:"flex items-center gap-1",children:_?(0,n.jsx)(u.Button,{"aria-label":"Close Error Details",onClick:()=>C(null),svgOnly:!0,size:"small",type:"tertiary",shape:"square",children:(0,n.jsx)(eG.Cross,{size:16})}):(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2",children:["logs"===m?(0,n.jsxs)(n.Fragment,{children:[L?(0,n.jsxs)(Q.Badge,{className:"cursor-pointer",onClick:()=>v(null),size:"sm",variant:"gray-subtle",children:[o.logs.length," Total"]}):null,E.warning>0&&(0,n.jsxs)(Q.Badge,{className:"cursor-pointer",onClick:()=>v("warning"===y?null:"warning"),size:"sm",variant:"warning"===y?"amber":"amber-subtle",children:[E.warning," Warning"]}),E.error>0&&(0,n.jsxs)(Q.Badge,{className:"cursor-pointer",onClick:()=>v("error"===y?null:"error"),size:"sm",variant:"error"===y?"red":"red-subtle",children:[E.error," Error"]}),E.fatal>0&&(0,n.jsxs)(Q.Badge,{className:`cursor-pointer border ${"fatal"===y?"border-red-900":"border-red-700"}`,onClick:()=>v("fatal"===y?null:"fatal"),size:"sm",variant:"red",children:[E.fatal," Fatal"]}),o.logs.length>0?(0,n.jsx)(tP.CopyButton,{label:"Copy Logs",shape:"square",style:{width:"28px",height:"28px"},textToCopy:o.logs.map(e=>`${e.timestamp} [${e.level}] ${e.message}`).join("\n"),title:"Copy full logs to clipboard",type:"tertiary"}):null]}):(0,n.jsxs)(n.Fragment,{children:[a?(0,n.jsx)(Q.Badge,{size:"sm",variant:"gray-subtle",children:g}):null,f&&p?(0,n.jsx)(e1.ButtonLink,{"aria-label":"Open Trace in New tab",className:"-mr-2",href:`/${f.teamSlug}/${f.project}/logs/traces/${o.traceId}`,svgOnly:!0,target:"_blank",type:"tertiary",width:42,children:(0,n.jsx)(ez.External,{})}):null]}),(0,n.jsx)(u.Button,{"aria-label":r?"Expand Logs Panel":"Collapse Logs Panel",onClick:S,svgOnly:!0,type:"tertiary",size:"small",shape:"square",children:r?(0,n.jsx)(eH.ChevronUp,{size:16}):(0,n.jsx)(eU.ChevronDown,{size:16})})]})}):null]}),_?(0,n.jsx)(tG.ErrorCard,{row:_,showGoToErrors:!0,className:"sticky z-50 w-4/5 inset-0 rounded-none font-sans h-full text-gray-1000 shadow-none border-none"}):null,"trace"===m?(0,n.jsx)(rf.TraceViewerTimeline,{trace:a,height:"100%"}):o.logs.length>0&&!r?(0,n.jsx)("div",{className:(0,h.clsx)("relative flex flex-1 flex-col overflow-y-auto"),children:M.map(e=>{let[t,r]=e;return(0,n.jsx)(rm,{logs:r.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()),onShowError:e=>C(e),source:t,invocationId:A,concurrency:F,handleViewConcurrentRequests:N,isInvocationFiltered:d.invocationIds.length>0},t)})}):!r&&(0,n.jsx)("div",{className:"flex h-full items-center justify-center bg-background-200 p-8",children:(0,n.jsx)("p",{className:"text-copy-14 text-gray-900",children:"No logs found for this request"})})]})})}function ry(e){let t="";for(let r of[/^\s*⨯ \[(.{3,}?)\] {/,/^\s*⨯ (.{3,}?)(\r\n|\r|\n|$)/,/^\s*(.{3,}?)(\r\n|\r|\n|$)/]){let n=e.match(r);if(n?.[1]){t=n[1];break}}if(!t)return e;let r=t.replace(/\s+/g," ").trim();return(r=(r=r.replace(/(http|ftp|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])?/g,"<url>")).replace(/-?\d+\s*(milliseconds?|seconds?|minutes?|mins?|hours?|days?|ms|s|m|h|d)/gi,"<duration>")).replace(/-?\d+/g,"<number>")}function rv(){let e=rc();return(0,n.jsx)(rf.TraceViewer,{height:"100%",trace:e})}function r_(e){return!!e&&("string"==typeof e&&"-"!==e&&""!==e||"number"==typeof e&&-1!==e)}let rC=e=>"STALE"===e.cache||"PRERENDER"===e.cache;function rb(e){let{className:t}=e;return(0,n.jsx)("div",{className:(0,h.default)("absolute left-6 h-16 w-3.5 border-[1.5px] border-r-0 border-gray-400 ",t)})}function rj(e){let{direction:t,through:r,lineClassName:i,className:s,children:l}=e;return(0,n.jsxs)("div",{className:(0,h.default)("relative flex items-center overflow-hidden",l?"h-10 pl-9":"h-2",s),children:["straight"===t?(0,n.jsx)(rb,{className:(0,h.default)(i)}):(0,n.jsxs)(n.Fragment,{children:[r?(0,n.jsx)(rb,{className:(0,h.default)("h-40 rounded-none border-y-0","up"===t?"top-0":"bottom-[47.5%]","dashed"===r&&"top-[55%] border-dashed")}):null,("up"===t||"both"===t)&&(0,n.jsx)(rb,{className:(0,h.default)(i,"bottom-1/2 translate-y-[0.5px] rounded-l")}),("down"===t||"both"===t)&&(0,n.jsx)(rb,{className:(0,h.default)(i,"top-1/2 -translate-y-px rounded-l-md","dashed"===r&&"border-dashed border-t-0 rounded-tl-none translate-y-2")})]}),(0,n.jsx)("div",{className:"relative flex items-center",children:l})]})}function rw(e){let{hasFunctionCrashed:t,requestDurationMs:r}=e;return(0,n.jsx)(rj,{className:"mb-2",direction:"up",children:(0,n.jsx)(ts.RequestFinishedBadge,{hasFunctionCrashed:t,requestDurationMs:r})})}var rS=e.i(9893476);function rN(e){let{requestId:t,projectId:r,eventTime:n}=e,{team:i}=(0,y.useAccount)(),s=i?.billing?.plan,l=(0,T.default)(()=>i&&r&&t&&n&&s&&"hobby"!==s?`/api/logs/tag-state-lookup${(0,L.encode)({ownerId:i.id,requestId:t,projectId:r,eventTime:n})}`:null,e=>(0,tu.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1});return{data:l.data?.data,loading:l.isValidating,error:l.error}}function rk(e){let{requestId:t,projectId:r,eventTime:i}=e,{loading:s,data:l}=rN({requestId:t,projectId:r,eventTime:i});if(s)return null;let o=l?.filter(e=>!e.tagName.startsWith("_N_T_")&&!e.tagName.startsWith("_vc_"));if(!o||0===o.length)return null;let a={};for(let e of o)a[e.tagName]=null;return(0,n.jsx)(tR,{title:"Tags",params:a,hideCopyButton:!0})}function rE(e,t){if("string"==typeof e)try{return(0,eM.default)(BigInt(e),t)}catch{return"unknown"}return(0,eM.default)(e,t)}let rT=new Map([["nodejs",{name:"Node.js",logo:(0,n.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.useId)(),r=`${t}_mask0`,s=`${t}_mask1`,l=`${t}_mask2`,o=`${t}_paint0_linear`,a=`${t}_paint1_linear`,d=`${t}_paint2_linear`;return(0,n.jsxs)("svg",{fill:"none",height:"18",viewBox:"0 0 14 16",width:"16",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,n.jsx)("path",{clipRule:"evenodd",d:"M6.91226 6.4202C6.95713 6.39383 7.01268 6.39383 7.05755 6.4202L8.26282 7.11829C8.30789 7.14449 8.33546 7.19271 8.33546 7.24481V8.64248C8.33546 8.69458 8.30789 8.7428 8.26282 8.769L7.05755 9.46709C7.01268 9.49346 6.95713 9.49346 6.91226 9.46709L5.70773 8.769C5.66213 8.74331 5.63381 8.69498 5.63361 8.64248V7.24481C5.63361 7.19271 5.66029 7.14449 5.70625 7.11829L6.91226 6.4202Z",fill:"#689F63",fillRule:"evenodd"}),(0,n.jsx)("mask",{height:"16",id:r,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,n.jsx)("path",{d:"M6.62322 0.101176L0.377445 3.72068C0.143899 3.85581 -1.28246e-05 4.10586 8.5718e-10 4.3765V11.6206C8.5718e-10 11.891 0.143506 12.1409 0.377445 12.2764L6.62367 15.8987C6.85722 16.0338 7.14471 16.0338 7.37826 15.8987L13.6234 12.2764C13.8564 12.1408 13.9999 11.8909 14 11.6206V4.3765C14 4.10619 13.8562 3.85613 13.622 3.72068L7.37767 0.101176C7.14355 -0.0337253 6.85571 -0.0337253 6.62159 0.101176",fill:"white"})}),(0,n.jsxs)("g",{mask:`url(#${r})`,children:[(0,n.jsx)("path",{d:"M20.2158 3.09495L2.61633 -5.56644L-6.40765 12.9165L11.1914 21.5783L20.2158 3.09495Z",fill:`url(#${o})`}),(0,n.jsx)("mask",{height:"16",id:s,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,n.jsx)("path",{d:"M0.148193 12.0591C0.207938 12.137 0.282656 12.2044 0.370569 12.255L5.72833 15.3622L6.62079 15.8772C6.75422 15.9546 6.90632 15.9873 7.05576 15.9762C7.10557 15.9721 7.15538 15.9628 7.20401 15.9489L13.7914 3.83876C13.741 3.78368 13.6819 3.73754 13.6158 3.69884L9.5262 1.32771L7.36442 0.0788888C7.303 0.0439129 7.23718 0.0173793 7.16873 0L0.148193 12.0591Z",fill:"white"})}),(0,n.jsx)("g",{mask:`url(#${s})`,children:(0,n.jsx)("path",{d:"M-7.45789 5.63936L4.96918 22.5265L21.4042 10.335L8.97638 -6.55164L-7.45789 5.63936Z",fill:`url(#${a})`})}),(0,n.jsx)("mask",{height:"16",id:l,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,n.jsx)("path",{d:"M6.82612 0.00282809C6.7199 0.0136004 6.61712 0.0466642 6.52444 0.0998762L0.296448 3.70896L7.01218 15.9903C7.10558 15.9769 7.19749 15.9457 7.28051 15.8974L13.5263 12.2751C13.7171 12.1642 13.8503 11.9753 13.891 11.7577L7.04479 0.0151824C6.99451 0.00512223 6.94337 3.71091e-05 6.8921 0C6.87134 0 6.85058 0.00104193 6.82983 0.00297693",fill:"white"})}),(0,n.jsx)("g",{mask:`url(#${l})`,children:(0,n.jsx)("path",{d:"M-0.0454712 -0.00238037V16.0731H14.0383V-0.00238037H-0.0454712Z",fill:`url(#${d})`})})]}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:o,x1:"11.2743",x2:"2.24575",y1:"-1.24934",y2:"17.0954",children:[(0,n.jsx)("stop",{offset:"0.3",stopColor:"#3E863D"}),(0,n.jsx)("stop",{offset:"0.5",stopColor:"#55934F"}),(0,n.jsx)("stop",{offset:"0.8",stopColor:"#5AAD45"})]}),(0,n.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:a,x1:"-1.114",x2:"15.2951",y1:"14.1796",y2:"2.10394",children:[(0,n.jsx)("stop",{offset:"0.57",stopColor:"#3E863D"}),(0,n.jsx)("stop",{offset:"0.72",stopColor:"#619857"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#76AC64"})]}),(0,n.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:d,x1:"-0.0406827",x2:"14.041",y1:"8.03582",y2:"8.03582",children:[(0,n.jsx)("stop",{offset:"0.16",stopColor:"#6BBF47"}),(0,n.jsx)("stop",{offset:"0.38",stopColor:"#79B461"}),(0,n.jsx)("stop",{offset:"0.47",stopColor:"#75AC64"}),(0,n.jsx)("stop",{offset:"0.7",stopColor:"#659E5A"}),(0,n.jsx)("stop",{offset:"0.9",stopColor:"#3E863D"})]})]})]})},{"aria-hidden":"true"})}],["bun",{name:"Bun",logo:(0,n.jsx)(eY,{"aria-hidden":"true"})}],["go",{name:"Go",logo:(0,n.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.jsx)("svg",{height:"10px",version:"1.1",viewBox:"0 0 261 99",width:"29px",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,n.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,n.jsxs)("g",{fill:"#2DBCAF",fillRule:"nonzero",id:"Go-Logo_Aqua",children:[(0,n.jsx)("path",{d:"M19.5076142,29.4191457 C19,29.4191457 18.8730964,29.1559878 19.1269036,28.761251 L21.7918782,25.2086194 C22.0456853,24.8138825 22.680203,24.5507246 23.1878173,24.5507246 L68.4923858,24.5507246 C69,24.5507246 69.1269036,24.9454615 68.8730964,25.3401983 L66.715736,28.761251 C66.4619289,29.1559878 65.8274112,29.5507246 65.4467005,29.5507246 L19.5076142,29.4191457 Z",id:"Path"}),(0,n.jsx)("path",{d:"M0.509858443,41.5507246 C0,41.5507246 -0.127464611,41.2804544 0.127464611,40.875049 L2.80422144,37.2264003 C3.05915066,36.8209949 3.69647371,36.5507246 4.20633215,36.5507246 L62.3301946,36.5507246 C62.8400531,36.5507246 63.0949823,36.95613 62.9675177,37.3615354 L61.9478008,40.6047787 C61.8203362,41.1453192 61.3104777,41.4155895 60.8006193,41.4155895 L0.509858443,41.5507246 Z",id:"Path"}),(0,n.jsx)("path",{d:"M31.5021645,53.4191457 C31,53.4191457 30.8744589,53.0244088 31.1255411,52.629672 L32.8831169,49.3401983 C33.1341991,48.9454615 33.6363636,48.5507246 34.1385281,48.5507246 L59.2467532,48.5507246 C59.7489177,48.5507246 60,48.9454615 60,49.4717773 L59.7489177,52.629672 C59.7489177,53.1559878 59.2467532,53.5507246 58.8701299,53.5507246 L31.5021645,53.4191457 Z",id:"Path"}),(0,n.jsx)("g",{id:"CXHf1q_1_",transform:"translate(69.000000, 0.550725)",children:(0,n.jsxs)("g",{id:"Group",children:[(0,n.jsx)("path",{d:"M94.0875,27.3038462 C86.0881579,29.3346154 80.6282895,30.8576923 72.7559211,32.8884615 C70.8513158,33.3961538 70.7243421,33.5230769 69.0736842,31.6192308 C67.1690789,29.4615385 65.7723684,28.0653846 63.1059211,26.7961538 C55.1065789,22.8615385 47.3611842,24.0038462 40.1236842,28.7 C31.4894737,34.2846154 27.0453947,42.5346154 27.1723684,52.8153846 C27.2993421,62.9692308 34.2828947,71.3461538 44.3138158,72.7423077 C52.9480263,73.8846154 60.1855263,70.8384615 65.8993421,64.3653846 C67.0421053,62.9692308 68.0578947,61.4461538 69.3276316,59.6692308 C64.7565789,59.6692308 59.0427632,59.6692308 44.8217105,59.6692308 C42.1552632,59.6692308 41.5203947,58.0192308 42.4092105,55.8615385 C44.0598684,51.9269231 47.1072368,45.3269231 48.8848684,42.0269231 C49.2657895,41.2653846 50.1546053,39.9961538 52.0592105,39.9961538 C58.5348684,39.9961538 82.4059211,39.9961538 98.2776316,39.9961538 C98.0236842,43.4230769 98.0236842,46.85 97.5157895,50.2769231 C96.1190789,59.4153846 92.6907895,67.7923077 87.1039474,75.1538462 C77.9618421,87.2115385 66.0263158,94.7 50.9164474,96.7307692 C38.4730263,98.3807692 26.9184211,95.9692308 16.7605263,88.3538462 C7.36447368,81.2461538 2.03157895,71.8538462 0.634868421,60.1769231 C-1.01578947,46.3423077 3.04736842,33.9038462 11.4276316,22.9884615 C20.4427632,11.1846154 32.3782895,3.69615385 46.9802632,1.03076923 C58.9157895,-1.12692308 70.3434211,0.269230769 80.6282895,7.25 C87.3578947,11.6923077 92.1828947,17.7846154 95.3572368,25.1461538 C96.1190789,26.2884615 95.6111842,26.9230769 94.0875,27.3038462 Z",id:"Path"}),(0,n.jsx)("path",{d:"M136.115789,97.4923077 C124.561184,97.2384615 114.022368,93.9384615 105.134211,86.3230769 C97.6427632,79.85 92.9447368,71.6 91.4210526,61.8269231 C89.1355263,47.4846154 93.0717105,34.7923077 101.705921,23.4961538 C110.975,11.3115385 122.148684,4.96538462 137.258553,2.3 C150.209868,0.0153846154 162.399342,1.28461538 173.446053,8.77307692 C183.476974,15.6269231 189.698684,24.8923077 191.349342,37.0769231 C193.507895,54.2115385 188.555921,68.1730769 176.747368,80.1038462 C168.367105,88.6076923 158.082237,93.9384615 146.273684,96.35 C142.845395,96.9846154 139.417105,97.1115385 136.115789,97.4923077 Z M166.335526,46.2153846 C166.208553,44.5653846 166.208553,43.2961538 165.954605,42.0269231 C163.669079,29.4615385 152.114474,22.3538462 140.051974,25.1461538 C128.243421,27.8115385 120.625,35.3 117.831579,47.2307692 C115.546053,57.1307692 120.371053,67.1576923 129.513158,71.2192308 C136.496711,74.2653846 143.480263,73.8846154 150.209868,70.4576923 C160.240789,65.2538462 165.700658,57.1307692 166.335526,46.2153846 Z",id:"Shape"})]})})]})})})},{"aria-hidden":"true"})}],["python",{name:"Python",logo:(0,n.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.useId)(),r=`${t}_linearGradient-1`,s=`${t}_linearGradient-2`;return(0,n.jsxs)("svg",{height:"15px",version:"1.1",viewBox:"0 0 98 99",width:"15px",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,n.jsxs)("defs",{children:[(0,n.jsxs)("linearGradient",{id:r,x1:"0.959176447%",x2:"74.0505936%",y1:"9.14856261e-08%",y2:"64.1103734%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#5A9FD4"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#306998"})]}),(0,n.jsxs)("linearGradient",{id:s,x1:"49.9999998%",x2:"24.2424815%",y1:"82.2756107%",y2:"44.914431%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#FFD43B"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#FFE873"})]})]}),(0,n.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,n.jsxs)("g",{fillRule:"nonzero",id:"Group",children:[(0,n.jsx)("path",{d:"M48.3285309,0.000808961017 C44.2949163,0.0195514649 40.4429046,0.363560535 37.053531,0.963308956 C27.0688609,2.72727229 25.2560319,6.41939877 25.256031,13.228309 L25.256031,22.2208089 L48.8510309,22.2208089 L48.8510309,25.2183089 L25.256031,25.2183089 L16.4010311,25.2183089 C9.5436672,25.2183089 3.53916305,29.3399799 1.66103098,37.1808088 C-0.505370605,46.1682189 -0.601462292,51.776509 1.66103098,61.1608087 C3.33824788,68.1461184 7.34366897,73.1233087 14.2010311,73.1233087 L22.313531,73.1233087 L22.313531,62.3433087 C22.313531,54.555395 29.0518177,47.6858106 37.053531,47.6858088 L60.6210308,47.6858088 C67.1813877,47.6858088 72.4185308,42.2842245 72.4185308,35.6958089 L72.4185308,13.228309 C72.4185308,6.83393069 67.0241484,2.03050484 60.6210308,0.963308956 C56.5677623,0.288590695 52.3621455,-0.0179335429 48.3285309,0.000808961017 Z M35.568531,7.23330901 C38.0057323,7.23330901 39.996031,9.25611748 39.996031,11.743309 C39.996031,14.2216847 38.0057323,16.225809 35.568531,16.225809 C33.1225921,16.225809 31.141031,14.2216838 31.141031,11.743309 C31.141031,9.25611836 33.1225921,7.23330901 35.568531,7.23330901 Z",fill:`url(#${r})`,id:"path1948"}),(0,n.jsx)("path",{d:"M75.3610308,25.2183089 L75.3610308,35.6958089 C75.3610308,43.8188732 68.4742432,50.6558079 60.6210308,50.6558088 L37.053531,50.6558088 C30.597998,50.6558088 25.256031,56.1808738 25.256031,62.6458087 L25.256031,85.1133059 C25.256031,91.5076851 30.8163884,95.2687875 37.053531,97.1033059 C44.5223822,99.2994427 51.6846194,99.6963403 60.6210308,97.1033059 C66.5611672,95.3834427 72.4185334,91.9222091 72.4185308,85.1133059 L72.4185308,76.1208086 L48.8510309,76.1208086 L48.8510309,73.1233087 L72.4185308,73.1233087 L84.2160342,73.1233087 C91.073399,73.1233087 93.6287342,68.3401496 96.0135254,61.1608087 C98.4769358,53.7697891 98.372119,46.6621259 96.0135254,37.1808088 C94.318839,30.3542608 91.0821198,25.2183089 84.2160342,25.2183089 L75.3610308,25.2183089 Z M62.1060308,82.1158086 C64.5519715,82.1158086 66.5335308,84.1199356 66.5335308,86.5983059 C66.5335308,89.0854939 64.5519688,91.1083059 62.1060308,91.1083059 C59.6688268,91.1083059 57.6785309,89.0854939 57.6785309,86.5983059 C57.6785309,84.1199356 59.6688242,82.1158086 62.1060308,82.1158086 Z",fill:`url(#${s})`,id:"path1950"})]})})]})},{"aria-hidden":"true"})}],["ruby",{name:"Ruby",logo:(0,n.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.useId)(),r=Array(15).fill().map((e,r)=>`${t}_linearGradient-${r}`);return(0,n.jsxs)("svg",{height:"15px",version:"1.1",viewBox:"0 0 100 100",width:"15px",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,n.jsxs)("defs",{children:[(0,n.jsxs)("linearGradient",{id:r[0],x1:"84.7503645%",x2:"58.2543962%",y1:"111.399353%",y2:"64.5837087%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#FB7655"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#FB7655"}),(0,n.jsx)("stop",{offset:"41%",stopColor:"#E42B1E"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#990000"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#990000"})]}),(0,n.jsxs)("linearGradient",{id:r[1],x1:"116.651024%",x2:"1.74616041%",y1:"60.8903211%",y2:"19.2879503%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#911209"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#911209"})]}),(0,n.jsxs)("linearGradient",{id:r[2],x1:"75.7744024%",x2:"38.9781357%",y1:"219.327131%",y2:"7.82868176%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#911209"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#911209"})]}),(0,n.jsxs)("linearGradient",{id:r[3],x1:"50.012428%",x2:"66.4830414%",y1:"7.23449921%",y2:"79.1354134%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,n.jsx)("stop",{offset:"23%",stopColor:"#E57252"}),(0,n.jsx)("stop",{offset:"46%",stopColor:"#DE3B20"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#A60003"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#A60003"})]}),(0,n.jsxs)("linearGradient",{id:r[4],x1:"46.1741749%",x2:"49.9323342%",y1:"16.347907%",y2:"83.0468449%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,n.jsx)("stop",{offset:"23%",stopColor:"#E4714E"}),(0,n.jsx)("stop",{offset:"56%",stopColor:"#BE1A0D"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#A80D00"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#A80D00"})]}),(0,n.jsxs)("linearGradient",{id:r[5],x1:"36.9653573%",x2:"49.5282324%",y1:"15.5936471%",y2:"92.4776332%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,n.jsx)("stop",{offset:"18%",stopColor:"#E46342"}),(0,n.jsx)("stop",{offset:"40%",stopColor:"#C82410"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#A80D00"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#A80D00"})]}),(0,n.jsxs)("linearGradient",{id:r[6],x1:"13.6086166%",x2:"85.7636612%",y1:"58.3456855%",y2:"-46.7167814%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,n.jsx)("stop",{offset:"54%",stopColor:"#C81F11"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#BF0905"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#BF0905"})]}),(0,n.jsxs)("linearGradient",{id:r[7],x1:"27.6242038%",x2:"50.7445145%",y1:"21.1345847%",y2:"79.0557818%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,n.jsx)("stop",{offset:"31%",stopColor:"#DE4024"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#BF190B"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#BF190B"})]}),(0,n.jsxs)("linearGradient",{id:r[8],x1:"-20.6671297%",x2:"104.241521%",y1:"122.281897%",y2:"-6.34211007%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#BD0012"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#BD0012"}),(0,n.jsx)("stop",{offset:"7%",stopColor:"#FFFFFF"}),(0,n.jsx)("stop",{offset:"17%",stopColor:"#FFFFFF"}),(0,n.jsx)("stop",{offset:"27%",stopColor:"#C82F1C"}),(0,n.jsx)("stop",{offset:"33%",stopColor:"#820C01"}),(0,n.jsx)("stop",{offset:"46%",stopColor:"#A31601"}),(0,n.jsx)("stop",{offset:"72%",stopColor:"#B31301"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#E82609"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#E82609"})]}),(0,n.jsxs)("linearGradient",{id:r[9],x1:"58.7919609%",x2:"11.9636556%",y1:"65.2049657%",y2:"50.1275621%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#8C0C01"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#8C0C01"}),(0,n.jsx)("stop",{offset:"54%",stopColor:"#990C00"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#A80D0E"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#A80D0E"})]}),(0,n.jsxs)("linearGradient",{id:r[10],x1:"79.3194899%",x2:"23.088288%",y1:"62.7538068%",y2:"17.8876818%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#7E110B"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#7E110B"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#9E0C00"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#9E0C00"})]}),(0,n.jsxs)("linearGradient",{id:r[11],x1:"92.8800277%",x2:"59.8414537%",y1:"74.1223655%",y2:"39.7039965%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#79130D"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#79130D"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#9E120B"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#9E120B"})]}),(0,n.jsxs)("radialGradient",{cx:"32.0008013%",cy:"40.2100469%",fx:"32.0008013%",fy:"40.2100469%",gradientTransform:"translate(0.320008,0.402100),scale(0.522539,1.000000),translate(-0.320008,-0.402100)",id:r[12],r:"133.14407%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#A80D00"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#A80D00"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#7E0E08"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#7E0E08"})]}),(0,n.jsxs)("radialGradient",{cx:"13.5493795%",cy:"40.859922%",fx:"13.5493795%",fy:"40.859922%",gradientTransform:"translate(0.135494,0.408599),scale(0.778453,1.000000),translate(-0.135494,-0.408599)",id:r[13],r:"113.540881%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#A30C00"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#A30C00"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#800E08"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#800E08"})]}),(0,n.jsxs)("linearGradient",{id:r[14],x1:"56.5701955%",x2:"3.10480737%",y1:"101.716594%",y2:"11.9932603%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#8B2114"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#8B2114"}),(0,n.jsx)("stop",{offset:"43%",stopColor:"#9E100A"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#B3100C"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#B3100C"})]}),(0,n.jsxs)("linearGradient",{id:r[15],x1:"30.8698732%",x2:"92.4707626%",y1:"35.5989756%",y2:"100.693616%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#B31000"}),(0,n.jsx)("stop",{offset:"0%",stopColor:"#B31000"}),(0,n.jsx)("stop",{offset:"44%",stopColor:"#910F08"}),(0,n.jsx)("stop",{offset:"99%",stopColor:"#791C12"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#791C12"})]})]}),(0,n.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,n.jsxs)("g",{fillRule:"nonzero",id:"ruby",children:[(0,n.jsx)("polygon",{fill:`url(#${r[0]})`,id:"Path",points:"77.0122645 65.4278136 20.2589918 99.1275777 93.7437433 94.1410964 99.4035175 20.0432571"}),(0,n.jsx)("polygon",{fill:`url(#${r[1]})`,id:"Path",points:"93.8641535 94.0904237 87.5481442 50.4969668 70.3440559 73.2143305"}),(0,n.jsx)("polygon",{fill:`url(#${r[2]})`,id:"Path",points:"93.9494437 94.0904237 47.6773646 90.458054 20.504829 99.032755"}),(0,n.jsx)("polygon",{fill:`url(#${r[3]})`,id:"Path",points:"20.5700511 99.0422874 32.1294164 61.1733249 6.69279222 66.6123474"}),(0,n.jsx)("polygon",{fill:`url(#${r[4]})`,id:"Path",points:"70.3395405 73.3397576 59.7033189 31.6778786 29.2646604 60.2100448"}),(0,n.jsx)("polygon",{fill:`url(#${r[5]})`,id:"Path",points:"96.9902992 32.2648777 68.2173133 8.76484857 60.2050274 34.6680617"}),(0,n.jsx)("polygon",{fill:`url(#${r[6]})`,id:"Path",points:"83.5344758 0.386315593 66.6118459 9.73816318 55.9354878 0.260888453"}),(0,n.jsx)("polygon",{fill:`url(#${r[7]})`,id:"Path",points:"0 79.3151066 7.08914198 66.3860772 1.35461312 50.9836241"}),(0,n.jsx)("path",{d:"M0.973314611,50.4969668 L6.74296307,66.8627001 L31.81334,61.2380454 L60.4358134,34.6374574 L68.5133214,8.98058328 L55.7945075,0 L34.1708685,8.09255913 C27.3581679,14.4291382 14.1381473,26.9668352 13.6615241,27.2026383 C13.1899181,27.4434584 4.93179515,43.0516119 0.973314611,50.4969668 L0.973314611,50.4969668 Z",fill:"#FFFFFF",id:"Path"}),(0,n.jsx)("path",{d:"M21.2323064,21.0968451 C35.9975894,6.4569892 55.0324123,-2.19246642 62.3372889,5.17763237 C69.6376501,12.5477311 61.8957855,30.4587268 47.1305023,45.0935658 C32.3652194,59.7284045 13.5661995,68.8544832 6.26633995,61.4843842 C-1.03853672,54.1193026 6.46702339,35.7316838 21.2323064,21.0968451 L21.2323064,21.0968451 Z",fill:`url(#${r[8]})`,id:"Path"}),(0,n.jsx)("path",{d:"M20.5700511,99.0272361 L32.0391088,61.0378639 L70.1288227,73.2745355 C56.356923,86.188514 41.0397605,97.1056924 20.5700511,99.0272361 L20.5700511,99.0272361 Z",fill:`url(#${r[9]})`,id:"Path"}),(0,n.jsx)("path",{d:"M60.4859842,34.5627029 L70.2642842,73.2946038 C81.7684617,61.1984105 92.0936236,48.1941244 97.1503443,32.109348 L60.4859842,34.5627029 L60.4859842,34.5627029 Z",fill:`url(#${r[10]})`,id:"Path"}),(0,n.jsx)("path",{d:"M97.0505043,32.3050143 C100.963831,20.4947948 101.866907,3.55209662 83.4135641,0.406383936 L68.2719995,8.76986569 L97.0505043,32.3050143 L97.0505043,32.3050143 Z",fill:`url(#${r[11]})`,id:"Path"}),(0,n.jsx)("path",{d:"M0,79.1445256 C0.541845246,98.636405 14.6047363,98.9268942 20.5951365,99.0979771 L6.75801434,66.7824268 L0,79.1445256 L0,79.1445256 Z",fill:"#9E1209",id:"Path"}),(0,n.jsx)("path",{d:"M60.5406704,34.6229079 C69.3807754,40.0564118 87.1969484,50.9685728 87.5581785,51.1692563 C88.1195901,51.4853326 95.2393364,39.1633702 96.8548382,32.1996556 L60.5406704,34.6229079 L60.5406704,34.6229079 Z",fill:`url(#${r[12]})`,id:"Path"}),(0,n.jsx)("path",{d:"M32.0240575,61.0378639 L47.3562714,90.6186006 C56.422145,85.7018568 63.5213212,79.7114565 70.0234642,73.2946038 L32.0240575,61.0378639 L32.0240575,61.0378639 Z",fill:`url(#${r[13]})`,id:"Path"}),(0,n.jsx)("path",{d:"M6.69780929,66.8225633 L4.52541124,92.6906571 C8.62437017,98.2897247 14.2635744,98.7763819 20.1787184,98.3398954 C15.8991444,87.6886226 7.35003046,66.3910942 6.69780929,66.8225633 L6.69780929,66.8225633 Z",fill:`url(#${r[14]})`,id:"Path"}),(0,n.jsx)("path",{d:"M68.1821938,8.83508781 L98.6409204,13.1096448 C97.0153848,6.22118618 92.0233846,1.77604831 83.5144071,0.386315593 L68.1821938,8.83508781 L68.1821938,8.83508781 Z",fill:`url(#${r[15]})`,id:"Path"})]})})]})},{"aria-hidden":"true"})}],["v8",{name:"Edge"}],["rust",{name:"Rust",logo:(0,n.jsx)(e0,{"aria-hidden":"true"})}]]);function rL(e){let{runtime:t,runtimeLanguage:r}=e,[i,s,l]=t?.match(/(v8|[^0-9]*)([0-9].*)?/)||[],o=rT.get("executable"===s&&void 0!==r?r:s),a=t;return i&&o&&(a=o.name,l&&(a+=` ${l}`)),{text:a,reactNode:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[o?.logo,(0,n.jsx)("p",{className:"text-copy-13-mono",children:a})]})}}function rM(e){let{requestMethod:t,requestPath:r,responseStatusCode:i,onUp:s,onDown:l,onClose:o,isScrolled:a=!1}=e;return(0,n.jsxs)("div",{className:(0,h.clsx)("flex flex-row items-center justify-between gap-1 flex-initial ml-px p-4",a&&"border-b border-gray-300"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-center gap-1 overflow-hidden p-1",children:[(0,n.jsx)("p",{className:`text-copy-13 ${tr.default.title}`,children:(0,n.jsx)(ts.RequestMethodBadge,{method:t})}),(0,n.jsx)("p",{className:`text-copy-13 truncate ${tr.default.title}`,children:r})]}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-1",style:{display:s||l?void 0:"none"},children:[(0,n.jsx)(ts.StatusCodeBadge,{statusCode:i}),(0,n.jsx)(u.Button,{"aria-label":"Up",className:tr.default.ghostButton,disabled:!s,onClick:s,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,n.jsx)(eH.ChevronUp,{color:"gray-700",size:16})}),(0,n.jsx)(u.Button,{"aria-label":"Down",className:tr.default.ghostButton,disabled:!l,onClick:l,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,n.jsx)(eU.ChevronDown,{color:"gray-700",size:16})})]}),(0,n.jsx)("div",{className:"flex flex-row items-stretch justify-start flex-initial geist-hide-on-mobile",children:(0,n.jsx)("div",{className:tr.default.buttonRule})}),(0,n.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial",children:(0,n.jsx)(u.Button,{"aria-label":"Close",onClick:o,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,n.jsx)(eG.Cross,{color:"gray-700",size:16})})})]})]})}function rD(e){let{selectedLogId:t,onClose:r}=e,s=(0,v.useIsMobile)(),[l,o]=(0,i.useState)(!1),[a,d]=(0,i.useState)(!1),{logRows:u}=(0,tn.useGroupLogs)(),{onUp:c,onDown:f,selectedLog:h}=rF({logRows:u,selectedLogId:t,onClose:r}),p=(0,i.useMemo)(()=>(0,e2.withAwaitPaint)(r),[r]);if(!s)return null;let m=!!(h?.traceId&&h?.sessionId),x=h?(0,n.jsx)(rH,{logGroup:h}):null;return(0,n.jsxs)(N.Modal.Modal,{active:!!t,"data-testid":(0,g.tid)("group-logs","details-panel"),drawerClassname:"h-full [&>div]:flex [&>div]:flex-col  [&>div]:flex-1",drawerHeight:"max",onClickOutside:p,children:[h&&(0,n.jsx)(rM,{onClose:r,onDown:f,onUp:c,requestMethod:h.requestMethod,requestPath:h.requestPath,responseStatusCode:h.statusCode}),(0,n.jsx)(N.Modal.Header,{children:(0,n.jsx)(eJ.Switch,{className:"mx-4 -mb-2",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eJ.Switch.Control,{checked:!l&&(!m||!a),label:m?"Request":"Request Details",onClick:()=>{o(!1),d(!1)},size:"large",value:"details"}),(0,n.jsx)(eJ.Switch.Control,{checked:l,label:"Logs",onClick:()=>{o(!0),d(!1)},size:"large",value:"logs"}),m&&(0,n.jsx)(eJ.Switch.Control,{checked:a,label:"Trace",onClick:()=>{o(!1),d(!0)},size:"large",value:"trace"})]})})}),(0,n.jsx)(N.Modal.Body,{className:"flex flex-1 flex-col !p-0 [&>div:first-child]:flex-1",children:m&&a?(0,n.jsx)(rv,{}):l?(0,n.jsx)(rx,{collapsed:!1}):x})]})}let rA=(0,i.memo)(function(e){let{onClose:t,selectedLogId:r}=e,{logRows:i}=(0,tn.useGroupLogs)(),{data:s}=(0,te.useSelectedLog)(),{onUp:l,onDown:o,selectedLog:a}=rF({logRows:i,selectedLogId:r,onClose:t}),d=s??a;return d?(0,n.jsx)(rG,{...d,onClose:t,onDown:o,onUp:l}):(0,n.jsx)(rO,{onClose:t})});function rO(e){let{onClose:t}=e,{data:r,error:i}=(0,te.useSelectedLog)();return i?(0,n.jsx)(rQ,{error:i}):r?(0,n.jsx)(rG,{...r,onClose:t}):(0,n.jsx)(rX,{onClose:t})}function rF(e){let{logRows:t,selectedLogId:r,onClose:n}=e,{setState:s}=(0,O.useLogsQueryState)(),l=(0,i.useRef)(null),o=r?t.findIndex(e=>e.requestId===r):-1;o>-1&&(l.current=t[o]);let a=(0,i.useMemo)(()=>o>0?()=>s({selectedLogId:t[o-1].requestId}):void 0,[s,t,o]),d=(0,i.useMemo)(()=>o<t.length-1&&-1!==o?()=>s({selectedLogId:t[o+1].requestId}):void 0,[s,t,o]);return(0,i.useEffect)(()=>{function e(e){let i=e.target&&e.target.tagName.toLowerCase();if(r&&"input"!==i&&"textarea"!==i)switch(e.key){case"ArrowUp":if(a){e.preventDefault(),a();let r=document.querySelector(`[data-log-row-id="${t[o-1].requestId}"]`);r&&(r.focus(),r.scrollIntoView({block:"center"}))}break;case"ArrowDown":if(d){e.preventDefault(),d();let r=document.querySelector(`[data-log-row-id="${t[o+1].requestId}"]`);r&&(r.focus(),r.scrollIntoView({block:"center"}))}break;case"Escape":e.preventDefault(),n()}}return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o,a,d,r,t,n]),{onUp:a,onDown:d,selectedLog:l.current}}function rI(e){let{requestPath:t}=e,r=ti();return(0,n.jsx)("p",{className:"text-copy-13-mono truncate","data-testid":(0,g.tid)("logs","detail-requestPath"),children:(0,n.jsx)(e4.HighlightText,{as:"span",search:r,text:t})})}function rP(e){let{used:t,max:r,format:i,className:s}=e;return(0,n.jsxs)("p",{className:`text-copy-13-mono ${(0,f.cn)("font-mono text-[13px]",s)}`,children:[(0,n.jsxs)("span",{className:(0,f.cn)(!!r&&t>=.8*r&&"text-amber-900",!!r&&t>=r&&"text-red-900"),children:[i(t)," "]}),(0,n.jsxs)("span",{className:"text-gray-700",children:["/",r?` ${i(r)}`:(0,n.jsx)(eo.Skeleton,{className:"inline-block translate-y-0.5",height:14,width:22})]})]})}function rR(e){let{icon:t,title:r,description:i,subtitle:a,additionalInfo:d,children:u,contextActions:c,isFluidEnabled:f,event:g}=e,p=(0,n.jsxs)("div",{className:(0,h.clsx)("flex w-full items-center gap-2 overflow-hidden px-2 pt-2",u?"pb-0.5":"pb-2"),children:[(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-2 overflow-hidden",children:[t&&(0,n.jsx)("div",{className:"text-gray-800",children:t}),(0,n.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,n.jsx)("p",{className:"text-[14px] leading-[20px] font-medium truncate",children:r}),a&&(0,n.jsx)("p",{className:"text-copy-14 text-gray-800 leading-tighter -mt-0.5",children:a})]})]}),(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)("p",{className:"text-copy-13 text-gray-900 inline-flex items-center gap-2 truncate",children:i}),d&&(0,n.jsx)("p",{className:"text-label-12 text-gray-700",children:d})]})]});return(0,n.jsxs)("div",{className:"flex flex-col rounded-md border border-gray-300 bg-background-200",children:[(0,n.jsxs)("div",{className:(0,h.clsx)("flex flex-col rounded-md border-gray-300 bg-background-100 px-2",a?"py-px":"py-1",f&&"border-b border-l border-r -mx-px"),children:[r&&(c?.length?(0,n.jsxs)(o.MenuContainer,{position:"bottom-start",children:[(0,n.jsx)(l.MenuButton,{className:"-mx-1 rounded-sm !px-1 hover:bg-gray-100 [&>span]:px-0",variant:"unstyled",children:p}),(0,n.jsx)(s.Menu,{width:180,children:c.map(e=>(0,n.jsx)(rZ,{...e},e.label))})]}):p),(0,n.jsx)("div",{className:"flex flex-col",children:u})]}),f&&g?(0,n.jsx)(rY,{event:g,children:(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)(rW,{event:g}),(0,n.jsx)(rq,{isFluidEnabled:f,event:g}),(0,n.jsx)(rz,{event:g}),(0,n.jsx)(r$,{event:g})]})}):null]})}function rB(e){let{event:t}=e,{getProjectUrl:r}=(0,e5.useDashboardNavigation)(),{data:i}=(0,te.useSelectedLog)(),{deploymentId:s}=i??{},l=-1!==t.durationMs&&("serverless"===t.source||"serverless-middleware"===t.source),{getFunctionMetadata:o}=(0,tI.useFunctionMetadata)("serverless"===t.source||"serverless-middleware"===t.source?s:void 0);if(!l||!t.durationMs)return null;let a=o(t.route),d=a&&"lambda"===a.type&&a.lambda.timeout&&1e3*a.lambda.timeout||-1,u=-1!==d;return(0,n.jsx)(rJ,{contextActions:[{icon:(0,n.jsx)(eW.SettingsGear,{color:"gray-900",size:16}),label:"Configure Function Max Duration",href:r("/settings/functions#function-max-duration")}],label:`Execution Duration${u?" / Maximum":""}`,value:`${rE(t.durationMs,{secondsDecimalDigits:2})}${u?" ":""}`,valueLabel:"Execution Duration",children:(0,n.jsx)(rP,{format:e=>rE(e,{secondsDecimalDigits:2}),max:u?d:void 0,used:t.durationMs})})}function rq(e){let{event:t,isFluidEnabled:r}=e,{getProjectUrl:i}=(0,e5.useDashboardNavigation)(),s=r?"Peak Memory":"Memory Used";return r_(t.functionMaxMemoryUsed)?(0,n.jsx)(rJ,{contextActions:[{icon:(0,n.jsx)(eW.SettingsGear,{color:"gray-900",size:16}),label:"Configure Function CPU & Memory",href:i("/settings/functions#function-cpu")}],label:`${s} / Maximum`,value:`${t.functionMaxMemoryUsed} MB`,valueLabel:s,children:(0,n.jsx)(rP,{format:e=>`${e} MB`,max:t.functionMemorySize,used:t.functionMaxMemoryUsed})}):null}function rz(e){let{event:t}=e,{data:r}=(0,te.useSelectedLog)(),{deploymentId:i}=r??{},s=-1!==t.durationMs&&("serverless"===t.source||"serverless-middleware"===t.source),{getFunctionMetadata:l}=(0,tI.useFunctionMetadata)("serverless"===t.source||"serverless-middleware"===t.source?i:void 0),{getProjectUrl:o}=(0,e5.useDashboardNavigation)(),a=l(t.route),d=!a&&!t.functionRuntime&&("serverless"===t.source||"serverless-middleware"===t.source),u=null;return(t.functionRuntime?u=rL({runtime:t.functionRuntime,runtimeLanguage:a?.lambda?.runtimeLanguage}):a?.type==="lambda"&&(u=rL({runtime:a.lambda.runtime,runtimeLanguage:a.lambda.runtimeLanguage})),u&&s)?(0,n.jsx)(rJ,{contextActions:u?.text.includes("Node.js")?[{icon:(0,n.jsx)(eW.SettingsGear,{color:"gray-900",size:16}),label:"Configure Node.js Version",href:o("/settings/build-and-deployment#node.js-version")}]:void 0,isLoading:d,label:"Runtime",value:u?.text,children:u?.reactNode}):null}function rW(e){let{event:t}=e,r=(0,c.useToasts)(),{handleFilter:i}=r1(),{concurrency:s,invocationId:l}=t;return void 0===s||s<1?null:(0,n.jsx)(rJ,{label:(0,n.jsx)(n.Fragment,{children:"Peak Concurrency"}),contextActions:[{icon:(0,n.jsx)(m.Filter,{}),label:"View concurrent requests",onClick:()=>l?i("invocationIds",l):void 0},{icon:(0,n.jsx)(eD.Copy,{}),label:"Copy Invocation ID",onClick:()=>{l&&((0,e6.copyToClipboard)(l),r.success("Invocation ID copied to clipboard"),w.analytics.track(j.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"Copy Invocation ID",action:"Copy"}))}}],value:`${s} Request${1===s?"":"s"}`})}function r$(e){let t,{event:r}=e,{functionStartType:i,functionColdStartDurationMs:s}=r;if(!i||""===i||"unknown"===i)return null;if("prewarmed"===i)t="Hot (prewarmed)";else if("cold"===i&&r_(s)){let e=rE(s,{secondsDecimalDigits:2});t=`Cold (${e})`}else t="cold"===i?"Cold":"Hot";return(0,n.jsx)(rJ,{label:"Start Type",value:t})}function rK(e){let{event:t,onClick:r,groupLog:s,projectId:l,children:o,additionalInfo:a,hasExternalApiAccess:d}=e,u=(0,e8.useO11yNavigation)(),{handleFilter:c}=r1(),f=(0,x.useParams)(),{data:h}=(0,rS.useDashboardDeployment)({teamSlug:f?.teamSlug,projectName:f?.project,deploymentId:s.deploymentId},{revalidateOnFocus:!1,revalidateOnReconnect:!1}),g=(0,rd.useServerFlag)("enable-logs-show-cache-details",!1),{pathType:p,source:m,httpStatus:y,cache:v,invocationId:_}=t,C=!!(h?.config?.functionType!=="standard"&&_&&("serverless"===m||"serverless-middleware"===m)),b=null,j=m,w="",S="",N=!1;"serverless"===m?(j="Function Invocation","background_func"===p?(j="ISR Function Invocation",b=(0,n.jsx)(eF.FunctionSquare,{color:"gray-900",size:16}),w=a?.isServingRevalidation?"Dynamic Rendering":"Background Revalidation",N=!0):"middleware"===p?(b=(0,n.jsx)(eI.FunctionMiddleware,{color:"gray-900",size:16}),j="Middleware"):b=(0,n.jsx)(eF.FunctionSquare,{color:"gray-900",size:16})):"middleware"===p?(b=(0,n.jsx)(eI.FunctionMiddleware,{color:"gray-900",size:16}),j="Middleware"):"edge-function"===m?(b=(0,n.jsx)(eP.FunctionEdge,{color:"gray-900",size:16}),j="Edge Function Invocation"):"static"===m?(b=(0,n.jsx)(eR.EdgeCache,{color:"gray-900",size:16}),j="Cache","PRERENDER"===v?(j="ISR Cache",b=(0,n.jsx)(eq.DataCache,{color:"gray-900",size:16})):"HIT"===v&&(S=""),"partial_prerender"===p&&(j="Cache",w="Partial Prerender")):"external"===m?(b=(0,n.jsx)(eB.ArrowGlobe,{color:"gray-800",size:16}),j="Rewrite"):"redirect"===m?(b=(0,n.jsx)(eV.ArrowRight,{color:"gray-800",size:16}),j="Redirect"):b=(0,n.jsx)(eA.Eye,{color:"gray-900",size:16});let k=(0,n.jsx)(ts.StatusCodeBadge,{className:"shrink !flex-row-reverse",full:200!==y,statusCode:y}),E="serverless"===m||"edge-function"===m,T="static"===m&&"MISS"!==v,L=(0,i.useMemo)(()=>[{icon:(0,n.jsx)(eA.Eye,{className:"mr-2 shrink-0 text-gray-800"}),label:"Open in Observability",href:u(`/route/${encodeURIComponent(t.route)}`,{removeExistingParams:!0,additionalParams:"edge-function"===t.source?{type:"edge"}:void 0})}],[u,t.route,t.source]),M=(0,i.useMemo)(()=>{try{let e=new URLSearchParams(t.targetQuery??"");return{...r_(t.route)?{[t.route]:null}:{},...Object.fromEntries(e.entries())}}catch{return{}}},[t.route,t.targetQuery]);return(0,n.jsxs)(rR,{description:(0,n.jsxs)(n.Fragment,{children:[S,k]}),icon:b,isFluidEnabled:C,onClick:r,subtitle:w,title:j,event:t,children:[o,r_(t.route)&&E&&"middleware"!==p&&(0,n.jsx)(rJ,{contextActions:L,label:"Route",onFilter:()=>c("routes",t.route),value:t.route,children:(0,n.jsx)(e9.RouteHighlighter,{route:t.route})}),r_(v)&&T&&(0,n.jsx)(rJ,{label:"Status",onFilter:()=>c("caches",v),value:v}),"external"===m&&t.externalRewriteTargetHost&&t.externalRewriteTargetPath&&(0,n.jsx)(rJ,{label:"Target",value:`${t.externalRewriteTargetHost}${t.externalRewriteTargetPath}`}),"redirect"===m&&t.redirectLocation&&(0,n.jsx)(rJ,{label:"Redirect Location",value:t.redirectLocation}),g&&T&&Object.keys(M).length>0&&(0,n.jsx)(tR,{title:"Key",params:M,hideCopyButton:!0}),g&&T&&(0,n.jsx)(rk,{requestId:s.requestId,projectId:l??"",eventTime:t.timestamp}),g&&N&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r3,{requestId:s.requestId,projectId:l??"",eventTime:t.timestamp,isServingRevalidation:a?.isServingRevalidation})}),!C&&(0,n.jsx)(rz,{event:t}),(0,n.jsx)(rB,{event:t}),!C&&(0,n.jsx)(rq,{isFluidEnabled:C,event:t}),"static"!==m&&"HIT"!==v&&"STALE"!==v&&"external"!==m&&"redirect"!==m&&d&&(0,n.jsx)("div",{className:"p-2",children:(0,n.jsx)(tF,{enableDataCacheMetrics:!0,endTime:new Date(new Date(t.timestamp).getTime()+Number(t.durationMs??5e3)),projectId:l??"",requestId:s.requestId,source:m,startTime:new Date(t.timestamp),pathType:p})})]})}function rU(e){let{events:t,groupLog:r,projectId:s,hasExternalApiAccess:l}=e,o=(0,i.useMemo)(()=>{let e=[...t].sort((e,t)=>{let r=new Date(e.timestamp).getTime(),n=new Date(t.timestamp).getTime(),i="middleware"===e.pathType,s="middleware"===t.pathType,l="static"===e.source||"redirect"===e.source||"external"===e.source,o="static"===t.source||"redirect"===t.source||"external"===t.source;return i&&o?-1:s&&l?1:r===n?"background_func"===e.pathType?1:"background_func"===t.pathType?-1:0:r-n}),r=Math.max(...e.map(e=>"background_func"===e.pathType?e.httpStatus:-1));return e.filter(e=>"background_func"!==e.pathType||"static"!==e.source).map(e=>"background_func"===e.pathType?{...e,httpStatus:r}:e)},[t]);return 0===t.length?(0,n.jsx)(rj,{direction:"up",children:(0,n.jsx)(ts.RequestInProgressBadge,{})}):(0,n.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-0 flex-initial",children:o.map((e,t)=>{var a,d,u,c;let f,h,g,p=t===o.length-1,m=null,x=o[t-1],y=!o.some(e=>"static"===e.source&&"prerender"===e.pathType&&"REVALIDATED"!==e.cache)&&"serverless"===e.source&&"background_func"===e.pathType;if("partial_prerender"!==e.pathType||p)if(rC(e))m=p?(0,n.jsx)(rw,{hasFunctionCrashed:r.hasFunctionCrashed,requestDurationMs:r.requestDurationMs??0}):(0,n.jsx)(rj,{direction:"up",through:"dashed",children:(0,n.jsx)(ts.RequestFinishedBadge,{hasFunctionCrashed:r.hasFunctionCrashed,requestDurationMs:r.requestDurationMs??0})});else if(p){let t=x&&rC(x)&&"background_func"===e.pathType,i=x&&"MISS"===x.cache&&"serverless"===x.source&&"middleware"!==x.pathType&&"background_func"===e.pathType,s=200===(a=e.httpStatus)||404===a||301===a||308===a||307===a||302===a;m=t||i?s?(0,n.jsx)(rj,{className:"mb-2",direction:"up",lineClassName:"border-dashed",children:(0,n.jsx)(ts.DataCacheUpdatedBadge,{})}):null:y?(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)(rj,{direction:"up",through:s?"dashed":void 0,children:(0,n.jsx)(ts.RequestFinishedBadge,{hasFunctionCrashed:r.hasFunctionCrashed,requestDurationMs:r.requestDurationMs??0})}),s?(0,n.jsx)(rj,{className:"h-5",direction:"up",lineClassName:"border-dashed",children:(0,n.jsx)(ts.DataCacheUpdatedBadge,{})}):null]}):(0,n.jsx)(rw,{hasFunctionCrashed:r.hasFunctionCrashed,requestDurationMs:r.requestDurationMs??0})}else m=(0,n.jsx)(rj,{direction:"straight"});else m="STALE"===e.cache||"PRERENDER"===e.cache||"HIT"===e.cache?(0,n.jsx)(rj,{direction:"up",through:!0,children:(0,n.jsx)(ts.ResponseStreamingStartedBadge,{})}):(0,n.jsx)(rj,{direction:"up",through:"dashed"});let v=(d=e,u=x,c=r,f=u?.region,h=d.region,g=c.clientRegion,rV(d)?null:(u&&rV(u)&&(f=g),r2(d.region)&&"middleware"!==d.pathType&&f!==h&&g!==h)?h:null);return(0,n.jsxs)(i.default.Fragment,{children:[v&&(0,n.jsx)(rj,{direction:"both",className:"-mt-2",lineClassName:x&&rV(x)?"border-dashed h-[30px]":"",children:(0,n.jsx)(ts.RegionBadge,{region:v})}),(0,n.jsx)(rK,{additionalInfo:{isServingRevalidation:y},event:e,groupLog:r,hasExternalApiAccess:l,projectId:s}),m]},`${e.timestamp}-${e.source}-${t}`)})})}function rV(e){return"prerender"===e.pathType&&"static"===e.source||"streaming_func"===e.pathType&&"static"===e.source}function rH(e){let t,{logGroup:r}=e,{timestamp:s,clientUserAgent:l,requestReferer:o,events:a,domain:d,requestPath:u,deploymentId:c,requestId:f,requestSearchParams:g,environment:p,branch:m,traceId:y,sessionId:v,clientRegion:_}=r,C=(0,x.useParams)(),{data:b}=(0,A.useProject)(C?.project),{team:j}=(0,ea.useTeam)(),w=b?.id,S=(0,e8.useO11yNavigation)(),{getProjectUrl:N}=(0,e5.useDashboardNavigation)(),k=f.split("::").at(-1)??f,{data:E}=(0,rS.useDashboardDeployment)({deploymentId:c,teamSlug:C?.teamSlug,projectName:C?.project},{revalidateOnFocus:!1,revalidateOnReconnect:!1}),T=(0,e7.useDeploymentLink)(E),{isDeploymentEditable:L}=(0,X.usePageConfig)(),{handleFilter:M}=r1(),D=(0,i.useMemo)(()=>[{icon:(0,n.jsx)(ez.External,{size:16}),label:"Visit Path",onClick:()=>window.open(`https://${d}${u}`,"_blank","noopener")},{icon:(0,n.jsx)(eA.Eye,{}),label:"Open in Observability",href:S(`/requestPath/${encodeURIComponent(u)}`,{removeExistingParams:!0})}],[S,u,d]),O=(0,i.useMemo)(()=>[{icon:(0,n.jsx)(eW.SettingsGear,{size:16}),label:"Configure Rules",href:N("/firewall/configure")}],[N]),F=(0,i.useMemo)(()=>[{icon:(0,n.jsx)(e$.Linked,{size:16}),label:"Open Deployment",href:T}],[T]),{data:I}=(0,Y.useRollingRelease)({teamIdOrSlug:j?.id,projectSlug:w}),P=I?.rollingRelease!==null,R=!1;P&&"production"===p&&(I?.rollingRelease?.state==="ACTIVE"&&c===I.rollingRelease.canaryDeployment?.id?(t="Current Canary",R=!0):I?.rollingRelease?.state==="ACTIVE"&&c===I.rollingRelease.currentDeployment?.id?(t="Current Base",R=!0):(I?.rollingRelease?.state,t="Unspecified"));let B=new Date(s);return(0,n.jsxs)("div",{tabIndex:-1,className:(0,h.clsx)("flex flex-col items-stretch justify-start flex-initial min-h-full pb-4"),children:[(0,n.jsxs)("div",{className:"flex-1 px-3",children:[(0,n.jsxs)("div",{className:"ml-1 flex items-center justify-between gap-2 p-1",children:[(0,n.jsx)(ts.RequestStartedBadge,{}),(0,n.jsx)(t4.TimestampTooltip,{content:{timestamp:B.getTime()},showRelativeToNow:!0,children:(0,n.jsx)("span",{className:"text-right font-mono text-[13px] leading-tight",children:(0,n.jsxs)("span",{children:[(0,n.jsxs)("span",{className:"uppercase text-gray-900",children:[(0,eZ.format)(B,"MMM dd")," ",(0,eZ.format)(B,"HH:mm:ss"),(0,n.jsxs)("span",{className:"text-gray-900",children:[".",(0,eZ.format)(B,"SS")]})]}),(0,n.jsx)("span",{className:"inline-bock ml-1.5 rounded-sm px-1 py-px font-mono text-gray-900",children:(0,eZ.format)(B,"OO")})]})})})]}),(0,n.jsxs)(rR,{children:[(0,n.jsx)(rJ,{label:"Request ID",onFilter:()=>M("requestIds",k,{override:!0}),value:k||"No request ID"}),(0,n.jsx)(rJ,{contextActions:D,label:"Path",onFilter:()=>M("requestPaths",u),value:u,children:(0,n.jsx)(rI,{requestPath:u})}),(0,n.jsx)(rJ,{label:"Host",onFilter:()=>M("domains",d),value:d}),r_(l)&&(0,n.jsx)(rJ,{label:"User Agent",value:l}),r_(o)&&(0,n.jsx)(rJ,{label:"Referer",value:o}),Object.keys(g).length>0&&(0,n.jsx)(tR,{title:"Search Params",params:g}),r_(y)&&r_(v)&&(0,n.jsx)(rJ,{label:"Trace ID",onFilter:()=>M("traceIds",y),value:y}),r_(v)&&(0,n.jsx)(rJ,{label:"Session ID",onFilter:()=>M("sessionIds",v),value:v})]}),r2(_)?(0,n.jsx)(rj,{direction:"both",children:(0,n.jsx)(ts.RegionBadge,{isEdgeRegion:!0,region:_})}):(0,n.jsx)(rj,{direction:"straight"}),(0,n.jsx)(rR,{contextActions:O,description:(0,n.jsx)("span",{className:"px-1",children:"Allowed"}),icon:(0,n.jsx)(eO.FirewallFlame,{color:"gray-900",size:16}),title:"Firewall"}),(0,n.jsx)(rj,{direction:"straight"}),(0,n.jsx)(rU,{events:a,groupLog:r,hasExternalApiAccess:!0,projectId:w})]}),(0,n.jsxs)("div",{className:"mt-4 border-t px-4 pt-4",children:[(0,n.jsx)("p",{className:"text-[14px] leading-[20px] font-medium mb-2 pl-2",children:"Deployment Information"}),(0,n.jsx)(rJ,{contextActions:F,isLoading:!E,label:"Deployment ID",onFilter:L?()=>M("deploymentIds",c):void 0,value:c}),r_(p)&&(0,n.jsx)(rJ,{label:"Environment",onFilter:()=>M("environments",p),value:p}),t&&(0,n.jsx)(rJ,{label:"Rolling Release",onFilter:R?()=>M("deploymentIds",c):void 0,value:t}),r_(m)&&(0,n.jsx)(rJ,{label:"Branch",onFilter:()=>M("branches",m),value:m})]})]})}function rG(e){let{onClose:t,onDown:r,onUp:s,...l}=e,{requestMethod:o,requestPath:a,statusCode:d}=l,[u,c]=(0,i.useState)(!1);return(0,n.jsxs)("div",{"data-testid":(0,g.tid)("group-logs","details-panel"),className:(0,h.clsx)("flex flex-col items-stretch justify-start gap-0 flex-initial dark:bg-background-200",tr.default.root),children:[(0,n.jsx)(rM,{isScrolled:u,onClose:t,onDown:r,onUp:s,requestMethod:o,requestPath:a,responseStatusCode:d}),(0,n.jsx)("div",{onScroll:e=>{c(e.currentTarget.scrollTop>0)},className:"flex-1 overflow-y-auto",children:(0,n.jsx)(rH,{logGroup:l})})]})}function rZ(e){let{icon:t,label:r,onClick:i,href:s}=e,l=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"mr-2 flex size-4 shrink-0 items-center text-gray-900",children:t}),r]});return s?(0,n.jsx)(eQ.MenuLink,{className:"flex items-center",href:s,onMouseUp:()=>i?.(),children:l}):(0,n.jsx)(d.MenuItem,{className:"flex items-center",icon:!0,onClick:i,children:l})}function rJ(e){let{label:t,value:r,valueLabel:a,isLoading:d=!1,children:u,onFilter:f,contextActions:g=[],styleProps:p={},valueClassName:x}=e,y=(0,c.useToasts)(),v=a??t,_=(0,i.useCallback)(()=>{r&&!d&&"string"==typeof v&&((0,e6.copyToClipboard)(r),y.message(`${v} copied to clipboard`))},[v,r,y,d]),C=(0,i.useCallback)(e=>{"string"==typeof v&&w.analytics.track(j.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:v,action:e})},[v]);return(0,n.jsx)("div",{className:"border-b py-1 last:border-none",children:(0,n.jsxs)(o.MenuContainer,{position:"bottom-start",children:[(0,n.jsxs)(l.MenuButton,{className:"flex min-h-[32px] w-full cursor-pointer overflow-visible rounded-sm border-none bg-transparent py-1 pl-0.5 pr-1 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none [&>span]:flex [&>span]:w-full [&>span]:items-center [&>span]:justify-between [&>span]:gap-4",disabled:d,style:p,variant:"unstyled",children:[(0,n.jsx)("dt",{className:"text-copy-14 text-gray-900",style:{flexShrink:0},children:t}),(0,n.jsx)(eo.Skeleton,{as:"dd",className:(0,h.clsx)(tr.default.logDetailRowSkeleton,"!flex"),show:d,children:(0,n.jsx)("span",{className:(0,h.clsx)("truncate font-mono !text-[13px] text-gray-1000",x),title:r,children:u||r})})]}),(0,n.jsxs)(s.Menu,{width:Math.max(200,70+7*Math.max(...g.map(e=>e.label.length))),children:[f&&(0,n.jsx)(rZ,{icon:(0,n.jsx)(m.Filter,{}),label:"Add Filter",onClick:()=>{f(),C("Add Filter")}}),g.map(e=>(0,n.jsx)(rZ,{...e,onClick:()=>{e.onClick?.(),C(e.label)}},e.label)),"string"==typeof v&&(0,n.jsx)(rZ,{icon:(0,n.jsx)(eD.Copy,{}),label:`Copy ${v}`,onClick:()=>{_(),C("Copy")}})]})]})})}function rQ(e){let{error:t}=e,{maxRetention:r}=(0,ed.useUserRetention)();return(0,n.jsxs)("div",{className:(0,h.clsx)("flex flex-col items-center justify-start gap-5 flex-initial",tr.default.noLogsSelected),children:[(0,n.jsx)("div",{className:"flex flex-col items-stretch justify-center",style:{flex:"1 0 auto"},children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 flex-initial",children:[(0,n.jsx)(tt,{}),(0,n.jsx)("p",{className:"text-copy-14 text-inherit text-center",children:t?.name==="ExceedsBillingLimitError"?t.message:"Error loading selected log or the selected log does not exist, please try again"})]})}),(0,n.jsx)("div",{className:(0,h.clsx)("flex flex-col items-stretch justify-start flex-initial",tr.default.setupLogDrain),children:(0,n.jsxs)("p",{className:"text-label-12 text-inherit",children:["To store logs for longer than ",(0,ei.formatDuration)(r),", set up a Log Drain.",(0,n.jsxs)(e1.Link,{className:tr.default.learnMore,href:"/docs/deployments/logs",tab:!0,children:["Learn more ",(0,n.jsx)(ez.External,{align:"top",size:16})]})]})})]})}function rX(e){let{onClose:t}=e;return(0,n.jsxs)("div",{"data-testid":(0,g.tid)("group-logs","details-panel"),className:(0,h.clsx)("flex flex-col items-stretch justify-start gap-0 flex-initial",tr.default.root),children:[(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between gap-1 flex-initial ml-px p-4",children:[(0,n.jsx)("div",{className:"flex items-center justify-center gap-1 overflow-hidden p-1",children:(0,n.jsx)(eo.Skeleton,{className:"w-16",show:!0,children:(0,n.jsx)("p",{className:`text-copy-13 ${tr.default.title}`,children:"GET"})})}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,n.jsx)("div",{className:"flex flex-row items-stretch justify-start flex-initial",children:(0,n.jsx)("div",{className:tr.default.buttonRule})}),(0,n.jsx)(u.Button,{"aria-label":"Close",onClick:t,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,n.jsx)(eG.Cross,{color:"gray-700",size:20})})]})]}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,n.jsxs)("div",{tabIndex:-1,className:"flex flex-col items-stretch justify-start flex-initial min-h-full pb-4",children:[(0,n.jsxs)("div",{className:"flex-1 px-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 px-1 py-2",children:[(0,n.jsx)(ts.RequestStartedBadge,{}),(0,n.jsx)(eo.Skeleton,{className:"w-48",show:!0,children:(0,n.jsx)("span",{className:"text-right text-[13px] tabular-nums leading-tight",children:"Loading timestamp..."})})]}),(0,n.jsxs)(rR,{children:[(0,n.jsx)(rJ,{isLoading:!0,label:"Request ID",value:"Loading"}),(0,n.jsx)(rJ,{isLoading:!0,label:"Path",value:"Loading"}),(0,n.jsx)(rJ,{isLoading:!0,label:"Host",value:"Loading"}),(0,n.jsx)(rJ,{isLoading:!0,label:"User Agent",value:"Loading"})]}),(0,n.jsx)(rj,{direction:"both",children:(0,n.jsx)(ts.AnatomyBadge,{className:"font-normal text-gray-800 text-sm",icon:(0,n.jsx)(ts.GlobeSmallIcon,{className:"text-gray-800"}),children:(0,n.jsxs)("div",{className:"w-full flex gap-1",children:[(0,n.jsx)("span",{children:"Received in"})," ",(0,n.jsx)(eo.Skeleton,{show:!0,children:"Region"})]})})}),(0,n.jsx)(rR,{description:(0,n.jsx)(eo.Skeleton,{className:"w-16",show:!0,children:(0,n.jsx)("span",{children:"Allowed"})}),icon:(0,n.jsx)(eO.FirewallFlame,{color:"gray-800",size:16}),title:"Firewall"}),(0,n.jsx)(rj,{direction:"straight"}),(0,n.jsxs)(rR,{description:(0,n.jsx)(eo.Skeleton,{className:"w-24",show:!0,children:(0,n.jsx)("span",{children:"Description"})}),icon:(0,n.jsx)(eo.Skeleton,{height:16,width:16}),title:(0,n.jsx)(eo.Skeleton,{show:!0,children:"Function Invocation"}),children:[(0,n.jsx)(rJ,{isLoading:!0,label:(0,n.jsx)(eo.Skeleton,{show:!0,children:"Route"}),value:"Loading"}),(0,n.jsx)(rJ,{isLoading:!0,label:(0,n.jsx)(eo.Skeleton,{show:!0,children:"Runtime"}),value:"Loading"}),(0,n.jsx)(rJ,{isLoading:!0,label:(0,n.jsx)(eo.Skeleton,{show:!0,children:"Execution Duration"}),value:"Loading"}),(0,n.jsx)(rJ,{isLoading:!0,label:(0,n.jsx)(eo.Skeleton,{show:!0,children:"Memory Used / Maximum"}),value:"Loading"})]})]}),(0,n.jsxs)("div",{className:"mt-4 border-t px-4 pt-4",children:[(0,n.jsx)("p",{className:"text-[14px] leading-[20px] font-medium mb-2 pl-2",children:"Deployment Information"}),(0,n.jsx)(rJ,{isLoading:!0,label:"Deployment ID",value:"Loading"}),(0,n.jsx)(rJ,{isLoading:!0,label:"Environment",value:"Loading"}),(0,n.jsx)(rJ,{isLoading:!0,label:"Branch",value:"Loading"})]})]})})]})}function rY(e){let{children:t,event:r}=e,[s,l]=(0,i.useState)(!1);return(0,n.jsxs)("div",{className:"rounded-md overflow-hidden text-gray-800 px-2 cursor-pointer",children:[(0,n.jsxs)("button",{type:"button",className:"w-full flex items-center justify-between py-2 text-xs bg-inherit cursor-pointer",onClick:()=>l(!s),children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(eK.Fluid,{color:"gray-700",className:"size-3"}),(0,n.jsx)("p",{className:"text-label-12 text-gray-800",children:"Fluid"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[r?.functionMaxMemoryUsed&&r.functionMaxMemoryUsed>0&&r?.functionMemorySize&&r.functionMemorySize>0&&(0,n.jsxs)("div",{className:(0,h.clsx)("flex items-center gap-2 text-gray-500 transition-all duration-100",s&&"opacity-0 translate-y-1"),children:[(0,n.jsx)(r0,{usage:r.functionMaxMemoryUsed,max:r.functionMemorySize}),(0,n.jsxs)("span",{className:"text-gray-900 text-xs font-regular font-mono",children:[r.functionMaxMemoryUsed," MB"]})]}),(0,n.jsx)(eU.ChevronDown,{color:"gray-900",size:12,className:(0,h.clsx)("transform transition-transform",{"rotate-180":s})})]})]}),(0,n.jsx)(eL.AnimatePresence,{initial:!1,children:s&&(0,n.jsx)(eT.motion.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.3,ease:[.04,.62,.23,.98]},className:"overflow-hidden",children:(0,n.jsx)("div",{className:"border-gray-200 space-y-1",children:t})},"content")})]})}let r0=e=>{let{usage:t,max:r}=e,i=r>0?Math.max(0,Math.min(100,t/r*100)):0;return(0,n.jsx)("div",{className:"w-[2px] h-[10px] rounded-full bg-gray-300 flex items-end overflow-hidden",children:(0,n.jsx)("div",{className:(0,f.cn)("w-full bg-gray-900 rounded-full",i>80&&"bg-amber-700",i>99&&"bg-red-700"),style:{height:`${i}%`}})})},r1=()=>{let{setState:e}=(0,O.useLogsQueryState)();return{handleFilter:(0,i.useCallback)(function(t,r){let{replace:n=!1,override:i=!1,additionalParams:s={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e({[t]:["string"==typeof r&&r.includes(",")?`"${r}"`:r],...s},{replace:n,override:i})},[e])}};function r2(e){return r_(e)&&""!==e&&e in e3.regions}function r3(e){let{requestId:t,projectId:r,eventTime:i,isServingRevalidation:s}=e,{loading:l,data:o}=rN({requestId:t,projectId:r,eventTime:i}),a=s?"Invocation Reason":"Revalidation Reason";if(l)return(0,n.jsx)(rJ,{label:a,value:"Loading...",isLoading:!0});let d=o?.[0]?.triggeringTag;return d?(0,n.jsxs)(rJ,{label:a,value:d,children:["Tag"," ",(0,n.jsx)("span",{className:"inline-flex max-w-full cursor-pointer overflow-hidden rounded-sm border border-gray-300 text-xs font-mono p-1",children:d})]}):s?(0,n.jsx)(rJ,{label:a,value:"ISR Cache Miss",valueClassName:"font-sans"}):(0,n.jsx)(rJ,{label:a,value:"Time-based",valueClassName:"font-sans"})}var r4=e.i(3327755),r5=e.i(1991452),r6=e.i(3734840),r9=e.i(6357175),r8=e.i(3162826),r7=e.i(6881349),ne=e.i(7797615),nt=e.i(2458511);function nr(e,t){let[r,n]=function(e,t){let r=e=>/\s/.exec(e),n=t-1,i=t;for(;n>=0&&!r(e[n]);)n-=1;for(n=Math.max(0,n+1);i<e.length&&!r(e[i]);)i+=1;return i=Math.max(n,i),[n,i]}(e,t);return e.substr(r,n)+e.substr(n)}function nn(e,t,r,n){return void 0!==n&&n!==t?e.substr(0,t)+r+e.substr(n):e.substr(0,t)+r+e.substr(t)}let ni=["requestId","sessionId","traceId","deploymentId","invocationId"];function ns(){let e=(0,r5.useRouter)(),{state:{levels:t,domains:r,deploymentDomains:s,deploymentIds:l,sources:o,requestTags:a,routes:d,requestPaths:u,statusCodes:c,searchQuery:f,requestIds:h,requestMethods:p,caches:m,environments:x,branches:y,sessionIds:v,traceIds:_,invocationIds:C,live:b},setState:j}=(0,O.useLogsQueryState)(),{trackFilterUse:w}=K(),{isDeploymentEditable:S}=(0,X.usePageConfig)(),N=U.FILTERS_WITHOUT_DEPLOYMENT;S&&(N=U.FILTERS);let{isLoading:k}=(0,tn.useGroupLogs)(),[E,T]=(0,i.useState)(null),[L,M]=(0,i.useState)(""),[D,A]=(0,i.useState)(!0),[F,I]=(0,i.useState)(""),[R,B]=(0,i.useState)(0),q=(0,i.useRef)(null),z=(0,i.useRef)({}),$=(0,i.useRef)(null),V=(0,i.useRef)(null),H=(0,i.useRef)({query:{levels:[],sources:[],requestTags:[],deploymentDomains:[],deploymentIds:[],domains:[],routes:[],requestPaths:[],requestIds:[],requestMethods:[],statusCodes:[],caches:[],environments:[],branches:[],sessionId:[],traceIds:[]},searchQuery:""}),G=(0,r9.useDebouncedCallback)(e=>M(e),300),[Z,J]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=r4.daumtools.userAgent();J("safari"===e?.browser?.name)},[]);let Q=(0,i.useCallback)(e=>{I(e),q.current?.setValue(e)},[]),Y=(0,i.useMemo)(()=>E?.attributeName==="source"||E?.attributeName==="requestTags"||E?.attributeName==="level"||E?.attributeName==="statusCode"||E?.attributeName==="cache"||E?.attributeName==="requestMethod"||E?.attributeName==="environment",[E]),ee=(0,i.useMemo)(()=>!!E?.attributeName&&ni.includes(E.attributeName),[E]),{data:et,isLoading:er}=P({attributeName:!E||ee?null:E.attributeName,attributeNameSearchQuery:L,levels:E?.attributeName==="level"?void 0:t,caches:E?.attributeName==="cache"?void 0:m,requestMethods:E?.attributeName==="requestMethod"?void 0:p,domains:E?.attributeName==="domain"?void 0:r,deploymentDomains:E?.attributeName==="deploymentDomain"?void 0:s,sources:E?.attributeName==="source"?void 0:o,requestTags:E?.attributeName==="requestTags"?void 0:a,routes:E?.attributeName==="route"?void 0:d,requestPaths:E?.attributeName==="requestPath"?void 0:u,statusCodes:E?.attributeName==="statusCode"?void 0:c,environments:E?.attributeName==="environment"?void 0:x,branches:E?.attributeName==="branch"?void 0:y,sessionIds:E?.attributeName==="sessionId"?void 0:v,traceIds:E?.attributeName==="traceId"?void 0:_,invocationIds:E?.attributeName==="invocationId"?void 0:C}),{data:en,isLoading:ei}=P({attributeName:"environment",domains:r,deploymentDomains:s,deploymentIds:l,sources:o,requestTags:a,routes:d,requestMethods:p,levels:t,statusCodes:c,requestPaths:u,caches:m,branches:y,sessionIds:v,traceIds:_,invocationIds:C}),es=(en?.rows??[]).reduce((e,t)=>e+t.total,0),el=(0,i.useMemo)(()=>{if(E?.attributeName!=="requestId")return et?.rows?.map(e=>({label:String(e.attributeValue),value:String(e.attributeValue)}))},[E,et]),eo=(0,i.useCallback)(()=>{I(""),j({levels:void 0,sources:void 0,requestTags:void 0,deploymentDomains:void 0,deploymentIds:void 0,domains:void 0,routes:void 0,requestPaths:void 0,searchQuery:"",requestIds:void 0,requestMethods:void 0,statusCodes:void 0,caches:void 0,preset:null,environments:void 0,branches:void 0,sessionIds:void 0,traceIds:void 0,invocationIds:void 0})},[j]),ea=(0,i.useCallback)(()=>{let e={levels:[],sources:[],requestTags:[],deploymentDomains:[],deploymentIds:[],domains:[],routes:[],requestPaths:[],requestIds:[],requestMethods:[],statusCodes:[],caches:[],environments:[],branches:[],sessionIds:[],traceIds:[],invocationIds:[]},t=($.current?.value||"").split(" "),r=t.filter(e=>!N.find(t=>e.includes(`${t.name}:`))&&!/^\s*$/.test(e)).join(" ");return t.map(e=>{if(e.includes(":")){let t=e.indexOf(":"),r=e.slice(0,t),n=e.slice(t+1),i=N.find(e=>e.name===r);if(""!==n&&i)return{name:no(i.attributeName),filterValue:n.split(",")}}return null}).filter(e=>null!==e).forEach(t=>{let{name:r,filterValue:n}=t;r in e?e[r]=[...e[r],...n]:e[r]=n}),{query:e,searchQuery:r}},[N]);(0,i.useEffect)(()=>{ei&&q.current?.close()},[ei]),(0,i.useEffect)(()=>{let e=e=>{let t=document.activeElement,r=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());"/"!==e.key||!$.current||t&&r||(e.preventDefault(),$.current.focus({preventScroll:!0}))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,i.useEffect)(()=>{let e=$.current;if(e&&!Z){let t=()=>{B(e.scrollLeft)};return e.addEventListener("scroll",t),window.addEventListener("resize",t),()=>{e.removeEventListener("scroll",t),window.removeEventListener("resize",t)}}},[Z]),(0,i.useEffect)(()=>{let n={levels:t,deploymentDomains:s,deploymentIds:l,sources:o,requestTags:a,domains:r,routes:d,requestPaths:u,requestIds:h,requestMethods:p,statusCodes:c,caches:m,environments:x,branches:y,sessionIds:v,traceIds:_,invocationIds:C},i="";(0,r6.default)(z.current,e.query)||setTimeout(()=>{let t=Object.keys({...e.query,searchQuery:f}).filter(e=>e in n||"searchQuery"===e&&f);0===t.length?Q(""):(t.forEach(e=>{if("searchQuery"===e&&f){i+=`${f.replaceAll("+"," ")} `;return}let t=function(e){if("requestTags"===e)return e;let t=0;return"branches"===e?t=-2:e.endsWith("s")&&(t=-1),e.slice(0,t)}(e),r=N.find(e=>e.attributeName===t);r&&n[e].length>0&&(i+=`${r.name}:${n[e].join(",")} `)}),Q(i))}),z.current=e.query},[e.query,t,Q,s,l,f,o,a,r,d,u,h,N,p,c,m,x,y,v,_,C]);let ed=(0,i.useCallback)(()=>{let{query:e,searchQuery:t}=ea();j({...Object.fromEntries(Object.entries(e).filter(e=>{let[t,r]=e;return r.length>0})),searchQuery:t,preset:null}),t&&t!==H.current.searchQuery?w({eventTrigger:"search bar",filter:"searchQuery",value:[""]}):Object.keys(e).forEach(t=>{e[t].length>H.current.query[t].length&&w({eventTrigger:"search bar",filter:t,value:W.includes(t)?e[t]:Array(e[t].length).fill("")})}),H.current={query:e,searchQuery:t}},[j,ea,w]),eu=(0,i.useCallback)(()=>{let e=$.current?.selectionStart||0,t=nr($.current?.value||"",e);if(t.includes(":")){let[e]=t.split(":"),r=N.find(t=>t.name===e);r&&T(r)}else T(null);M("")},[N]),ec=(0,i.useCallback)((e,t)=>{let r=$.current?.selectionStart||0;if(E&&!Y)return e;let n=t=>{let r=(0,eg.matchSorter)(e,t,{keys:["value","label"]}),n=e.find(e=>"confirm search"===e.label);return n&&r.unshift(n),r};if(E){let e=nr(t,r).split(" ")[0].replaceAll(":","$").replaceAll(",","$").split("$");return n(e[e.length-1].split(" ")[0])}if(t.includes(" ")){let e=nr(t,r),i=nr(t,r-e.length-1),s=!i.includes(":")&&!f.includes(i.split(" ")[0]);return(N.find(e=>i.includes(e.name)),s)?[]:n(e.split(" ")[0])}return n(t)},[E,f,Y,N]),ef=(0,i.useMemo)(()=>{if(!el||!E||0===el.length||"requestId"===E.attributeName)return null;A(!0);let{query:e}=ea(),t=e[no(E.attributeName)];return el.filter(e=>!t.includes(e.value))},[E,ea,el]),eh=ef&&E&&!er||L&&D&&E,ep=F.includes(":");return(0,n.jsxs)("div",{className:nt.default.comboboxWrapper,style:{"--word-gap":ep?"10px":"0px"},children:[(0,n.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,n.jsxs)(r7.Combobox,{className:nt.default.combobox,filter:ec,noNegativeIndex:!0,noTextSelection:!0,onChange:e=>{let t=$.current?.selectionStart||0,r=$.current?.value||"";if(q.current?.setSelectedIndex(0),!e)return;let n=N.find(t=>t.name===e.split(":")[0]);if(""===r){Q(e),n&&T(n);return}if(n){let i=nr(r,t);if(r.includes(`${n.name}:`)){let e=r.split(" ").find(e=>e.includes(n.name))||"",{query:t}=ea(),s=t[no(n.attributeName)].length>0;Q(r.replace(e,`${e}${s?",":""}`).split(" ").filter(e=>e!==i).join(" ")),T(n);return}if(i){let n=r.slice(0,t-i.length),s=r.slice(t-i.length,r.length+i.length);Q(n+(s=s.replace(i,e)))}else{let n=0===t;Q(nn(r,t,e)),n&&setTimeout(()=>{$.current?.setSelectionRange(e.length,e.length)})}T(n);return}if(E){let n=nr(r,t).split(" ")[0].replaceAll(":","$").replaceAll(",","$").split("$"),i=n[n.length-1];if(i){let n=i.split(" ")[0],s=/^\s*$/.test(n),l=nr(r,t),o=l.split(":")[0];if(r.split(":").filter(e=>e.includes(o)).length>1){let t=r.split(" ").find(e=>e.includes(E.name))||"";Q(r.replace(t,`${t},${e}`).split(" ").filter(e=>e!==l).join(" "))}else Q(r.replace(s?" ":i,`${e} `))}else Q(nn(r,t,`${e} `));q.current?.setSelectedIndex(-1),T(null),setTimeout(()=>{ed()})}},onChangeOpen:e=>{q.current?.setSelectedValue(null),!e&&(M(""),V.current||q.current?.close())},onClear:eo,placeholder:ei||0===es||b?"Search logs…":`${(0,ne.abbreviateNumber)(es).toUpperCase()} total ${1===es?"log":"logs"} found...`,ref:q,shouldContinue:!0,children:[(0,n.jsx)(r7.Combobox.Input,{className:nt.default.input,"data-testid":(0,g.tid)("group-logs","search-input"),id:"search-logs",loading:!!(er&&E||k),onBlur:()=>{T(null)},onPaste:e=>{try{let t=e.clipboardData.getData("text/plain"),r=/[a-z0-9]{5}-\d{13}-[a-z0-9]{12}/i.exec(t),n=e.currentTarget,i=n.selectionStart||0,s=n.selectionEnd||i,l=n.value.substring(i,s);if(r&&!t.includes("requestId")&&(!n.value.includes("requestId:")||l.includes("requestId"))){e.preventDefault();let r=nn(n.value,i,`requestId:${t}`,s);Q(r)}}catch(e){}},onChange:n=>{if(I(n.target.value),""===n.target.value){T(null);let n={levels:t,deploymentDomains:s,deploymentIds:l,sources:o,requestTags:a,domains:r,routes:d,requestPaths:u,requestIds:h,requestMethods:p,statusCodes:c,caches:m,environments:x,branches:y};Object.keys({...e.query,searchQuery:f}).filter(e=>e in n||"searchQuery"===e&&f).length>0&&(eo(),Q(""));return}Q(n.target.value);let i=n.target.selectionStart||0;eu();let g=nr(n.target.value,i);if(g.includes(":")){let e=N.find(e=>e.name===g.split(":")[0]);if(e){let t=g.split(":")[1].split(",");G((t=t[t.length-1]).split(" ")[0]),T(e)}else T(null)}},onClick:eu,onKeyDown:e=>{let t=$.current?.value||"",r=V.current;if("Enter"===e.key&&r&&ed(),"ArrowLeft"===e.key||"ArrowRight"===e.key){let r=e.target.selectionStart||0;/^\s*$/.test(t.split("")[r-1])&&T(null)}},ref:$}),(0,n.jsx)(r7.Combobox.List,{className:nt.default.comboboxList,emptyMessage:(0,n.jsxs)("button",{className:nt.default.confirm,onClick:()=>{q.current?.close(),ed()},ref:V,type:"button",children:["Confirm search"," ",(0,n.jsx)("kbd",{className:nt.default.suffix,children:(0,n.jsx)(r8.CornerDownRight,{})})]}),hideOptions:!0,children:eh?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(na,{onSelect:()=>{q.current?.close(),ed()}}),ef?ef.map(e=>(0,n.jsx)(r7.Combobox.Option,{className:nt.default.option,value:e.value,children:`${e.value}`},e.value)):[]]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(na,{onSelect:()=>{q.current?.close(),ed()}},"first-option"),N.map(e=>(0,n.jsxs)(r7.Combobox.Option,{className:nt.default.option,value:`${e.name}:`,children:[(0,n.jsx)("span",{className:nt.default.filter,children:`${e.name}:`}),(0,n.jsx)("div",{className:nt.default.suggestions,children:e.suggestions.map(e=>(0,n.jsxs)("span",{children:["[",e,"]"]},e))})]},e.name))]})})]}),!Z&&(0,n.jsx)("div",{"aria-hidden":!0,className:nt.default.textOverlay,style:{transform:`translateX(-${R}px)`},children:F.split(/\s/).map((e,t)=>e.includes(":")?(0,n.jsxs)("span",{className:nt.default.highlight,children:[e," "]},e):(0,n.jsx)("span",{style:""===e&&0===t?{marginLeft:-4,marginRight:0}:{},children:e},`${e}${t}`))})]})}function nl(){return(0,n.jsxs)(r7.Combobox,{className:(0,h.clsx)(nt.default.combobox,"geist-show-on-desktop"),placeholder:"Search logs…",children:[(0,n.jsx)(r7.Combobox.Input,{className:nt.default.input,id:"search-logs"}),(0,n.jsx)(r7.Combobox.List,{className:nt.default.comboboxList})]})}function no(e){return"requestTags"===e?e:"branch"===e?`${e}es`:`${e}s`}function na(e){let{onSelect:t}=e;return(0,n.jsx)(r7.Combobox.Option,{label:"confirm search",onCustomSelect:t,value:"",children:(0,n.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial w-full",children:[(0,n.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Confirm search"})," ",(0,n.jsx)(r8.CornerDownRight,{})]})})}let nd=(0,i.createContext)(null);function nu(){let e=(0,i.useContext)(nd);return null==e&&function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);throw i.search=s.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),e}function nc(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);throw i.search=s.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function nf(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);i.search=s.toString(),console.warn(`Minified Lexical warning #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let nh="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,ng=nh&&"documentMode"in document?document.documentMode:null,np=nh&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),nm=nh&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),nx=!(!nh||!("InputEvent"in window)||ng)&&"getTargetRanges"in new window.InputEvent("input"),ny=nh&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),nv=nh&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,n_=nh&&/Android/.test(navigator.userAgent),nC=nh&&/^(?=.*Chrome).*/i.test(navigator.userAgent),nb=nh&&n_&&nC,nj=nh&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&np&&!nC;function nw(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[];for(let e of t)if(e&&"string"==typeof e)for(let[t]of e.matchAll(/\S+/g))n.push(t);return n}let nS=ny||nv||nj?" ":"​",nN=nm?" ":nS,nk="֑-߿יִ-﷽ﹰ-ﻼ",nE="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",nT=(RegExp("^[^"+nE+"]*["+nk+"]"),RegExp("^[^"+nk+"]*["+nE+"]"),{bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512}),nL={directionless:1,unmergeable:2},nM={center:2,end:6,justify:4,left:1,right:3,start:5},nD={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},nA={normal:0,segmented:2,token:1},nO={0:"normal",2:"segmented",1:"token"},nF="$config",nI=!1,nP=0;function nR(e){nP=e.timeStamp}function nB(e,t,r){let n="BR"===e.nodeName,i=t.__lexicalLineBreak;return i&&(e===i||n&&e.previousSibling===i)||n&&void 0!==oD(e,r)}function nq(e,t,r){nI=!0;let n=performance.now()-nP>100;try{l0(e,()=>{let i=lS()||e.getEditorState().read(()=>{let e=lS();return null!==e?e.clone():null}),s=new Map,l=e.getRootElement(),o=e._editorState,a=e._blockCursorElement,d=!1,u="";for(let r=0;r<t.length;r++){let c=t[r],f=c.type,h=c.target,g=function(e,t,r,n){var i;for(let s=e;s&&(i=s,!0!==i.__lexicalUnmanaged);s=o5(s)){let e=oD(s,t);if(void 0!==e){let t=oL(e,r);if(t)return l9(t)||!aa(s)?void 0:[s,t]}else if(s===n)return[n,oP(r)]}}(h,e,o,l);if(!g)continue;let[p,m]=g;if("characterData"===f)n&&le(m)&&oj(h)&&function(e,t,r){if(lu(e)){let t=e.anchor.getNode();if(t.is(r)&&e.format!==t.getFormat())return!1}return oj(t)&&r.isAttached()}(i,h,m)&&function(e,t,r){let n=ao(at(r)),i=null,s=null;null!==n&&n.anchorNode===e&&(i=n.anchorOffset,s=n.focusOffset);let l=e.nodeValue;null!==l&&oU(t,l,i,s,!1)}(h,m,e);else if("childList"===f){d=!0;let t=c.addedNodes;for(let r=0;r<t.length;r++){let n=t[r],i=oM(n),s=n.parentNode;if(null!=s&&n!==a&&null===i&&!nB(n,s,e)){if(nm){let e=(aa(n)?n.innerText:null)||n.nodeValue;e&&(u+=e)}s.removeChild(n)}}let r=c.removedNodes,n=r.length;if(n>0){let t=0;for(let i=0;i<n;i++){let n=r[i];(nB(n,h,e)||a===n)&&(h.appendChild(n),t++)}n!==t&&s.set(p,m)}}}if(s.size>0)for(let[t,r]of s)r.reconcileObservedMutation(t,e);let c=r.takeRecords();if(c.length>0){for(let t=0;t<c.length;t++){let r=c[t],n=r.addedNodes,i=r.target;for(let t=0;t<n.length;t++){let r=n[t],s=r.parentNode;null==s||"BR"!==r.nodeName||nB(r,i,e)||s.removeChild(r)}}r.takeRecords()}null!==i&&(d&&oR(i),nm&&o1(e)&&i.insertRawText(u))})}finally{nI=!1}}function nz(e){let t=e._observer;null!==t&&nq(e,t.takeRecords(),t)}function nW(e){0===nP&&at(e).addEventListener("textInput",nR,!0),e._observer=new MutationObserver((t,r)=>{nq(e,t,r)})}class n${node;knownState;unknownState;sharedNodeState;size;constructor(e,t,r,n=new Map,i){this.node=e,this.sharedNodeState=t,this.unknownState=r,this.knownState=n;const{sharedConfigMap:s}=this.sharedNodeState,l=void 0!==i?i:function(e,t,r){let n=r.size;if(t)for(let i in t){let t=e.get(i);t&&r.has(t)||n++}return n}(s,r,n);this.size=l}getValue(e){let t=this.knownState.get(e);if(void 0!==t)return t;this.sharedNodeState.sharedConfigMap.set(e.key,e);let r=e.defaultValue;if(this.unknownState&&e.key in this.unknownState){let t=this.unknownState[e.key];void 0!==t&&(r=e.parse(t)),this.updateFromKnown(e,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){let e={...this.unknownState},t={};for(let[t,r]of this.knownState)t.isEqual(r,t.defaultValue)?delete e[t.key]:e[t.key]=t.unparse(r);for(let r of this.sharedNodeState.flatKeys)r in e&&(t[r]=e[r],delete e[r]);return nU(e)&&(t.$=e),t}getWritable(e){if(this.node===e)return this;let{sharedNodeState:t,unknownState:r}=this,n=new Map(this.knownState);return new n$(e,t,function(e,t,r){let n;if(r)for(let[i,s]of Object.entries(r)){let r=e.get(i);r?t.has(r)||t.set(r,r.parse(s)):(n=n||{})[i]=s}return n}(t.sharedConfigMap,n,r),n,this.size)}updateFromKnown(e,t){let r=e.key;this.sharedNodeState.sharedConfigMap.set(r,e);let{knownState:n,unknownState:i}=this;n.has(e)||i&&r in i||(i&&(delete i[r],this.unknownState=nU(i)),this.size++),n.set(e,t)}updateFromUnknown(e,t){let r=this.sharedNodeState.sharedConfigMap.get(e);r?this.updateFromKnown(r,r.parse(t)):(this.unknownState=this.unknownState||{},e in this.unknownState||this.size++,this.unknownState[e]=t)}updateFromJSON(e){let{knownState:t}=this;for(let e of t.keys())t.set(e,e.defaultValue);if(this.size=t.size,this.unknownState=void 0,e)for(let[t,r]of Object.entries(e))this.updateFromUnknown(t,r)}}function nK(e){return e.__state?e.__state.sharedNodeState:oh(lK(),e.getType()).sharedNodeState}function nU(e){if(e)for(let t in e)return e}function nV(e,t,r){for(let[n,i]of t.knownState){if(e.has(n.key))continue;e.add(n.key);let t=r?r.getValue(n):n.defaultValue;if(t!==i&&!n.isEqual(t,i))return!0}return!1}function nH(e,t,r){let{unknownState:n}=t,i=r?r.unknownState:void 0;if(n){for(let[t,r]of Object.entries(n))if(!e.has(t)&&(e.add(t),r!==(i?i[t]:void 0)))return!0}return!1}function nG(e,t){let r=e.__state;return r&&r.node===e?r.getWritable(t):r}function nZ(e,t){let r=e.__mode,n=e.__format,i=e.__style,s=t.__mode,l=t.__format,o=t.__style,a=e.__state,d=t.__state;return(null===r||r===s)&&(null===n||n===l)&&(null===i||i===o)&&(null===e.__state||a===d||function(e,t){if(e===t)return!0;if(e&&t&&e.size!==t.size)return!1;let r=new Set;return!(e&&nV(r,e,t)||t&&nV(r,t,e)||e&&nH(r,e,t)||t&&nH(r,t,e))}(a,d))}function nJ(e,t){let r=e.mergeWithSibling(t),n=lK()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function nQ(e){let t,r,n=e;if(""!==n.__text||!n.isSimpleText()||n.isUnmergeable()){for(;null!==(t=n.getPreviousSibling())&&le(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(""!==t.__text){nZ(t,n)&&(n=nJ(t,n));break}t.remove()}for(;null!==(r=n.getNextSibling())&&le(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(""!==r.__text){nZ(n,r)&&(n=nJ(n,r));break}r.remove()}}else n.remove()}function nX(e){return nY(e.anchor),nY(e.focus),e}function nY(e){for(;"element"===e.type;){let t,r,n=e.getNode(),i=e.offset;if(i===n.getChildrenSize()?(t=n.getChildAtIndex(i-1),r=!0):(t=n.getChildAtIndex(i),r=!1),le(t)){e.set(t.__key,r?t.getTextContentSize():0,"text",!0);break}if(!l4(t))break;e.set(t.__key,r?t.getChildrenSize():0,"element",!0)}}let n0,n1,n2,n3,n4,n5,n6,n9,n8,n7,ie="",it=null,ir=null,ii="",is=!1,il=!1;function io(e,t){let r=n6.get(e);if(null!==t){let r=iC(e);r.parentNode===t&&t.removeChild(r)}if(n9.has(e)||n1._keyToDOMMap.delete(e),l4(r)){let e=iy(r,n6);ia(e,0,e.length-1,null)}void 0!==r&&oY(n7,n2,n3,r,"destroyed")}function ia(e,t,r,n){let i=t;for(;i<=r;++i){let t=e[i];void 0!==t&&io(t,n)}}function id(e,t){e.setProperty("text-align",t)}function iu(e,t){let r=n0.theme.indent;if("string"==typeof r){let n=e.classList.contains(r);t>0&&!n?e.classList.add(r):t<1&&n&&e.classList.remove(r)}let n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px";e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${n})`)}function ic(e,t){let r=e.style;0===t?id(r,""):1===t?id(r,"left"):2===t?id(r,"center"):3===t?id(r,"right"):4===t?id(r,"justify"):5===t?id(r,"start"):6===t&&id(r,"end")}function ih(e,t){let r=function(e){let t=e.__dir;if(null!==t)return t;if(l7(e))return null;let r=e.getParentOrThrow();return l7(r)&&null===r.__dir?"auto":null}(t);null!==r?e.dir=r:e.removeAttribute("dir")}function ig(e,t){var r;let n,i=n9.get(e);void 0===i&&nc(60);let s=i.createDOM(n0,n1);if(n=(r=n1)._keyToDOMMap,s[`__lexicalKey_${r._key}`]=e,n.set(e,s),le(i)?s.setAttribute("data-lexical-text","true"):l9(i)&&s.setAttribute("data-lexical-decorator","true"),l4(i)){let e=i.__indent,t=i.__size;ih(s,i),0!==e&&iu(s,e),0!==t&&ip(iy(i,n9),i,0,t-1,i.getDOMSlot(s));let r=i.__format;0!==r&&ic(s,r),i.isInline()||ix(null,i,s),o3(i)&&(ie+="\n\n",ii+="\n\n")}else{let t=i.getTextContent();if(l9(i)){let t=i.decorate(n1,n0);null!==t&&iv(e,t),s.contentEditable="false"}ie+=t,ii+=t}return null!==t&&t.insertChild(s),oY(n7,n2,n3,i,"created"),s}function ip(e,t,r,n,i){let s=ie;ie="";let l=r;for(;l<=n;++l){ig(e[l],i);let t=n9.get(e[l]);null!==t&&le(t)&&null===it&&(it=t.getFormat(),ir=t.getStyle())}o3(t)&&(ie+="\n\n"),i.element.__lexicalTextContent=ie,ie=s+ie}function im(e,t){if(e){let r=e.__last;if(r){let e=t.get(r);if(e)return sH(e)?"line-break":l9(e)&&e.isInline()?"decorator":null}return"empty"}return null}function ix(e,t,r){let n=im(e,n6),i=im(t,n9);n!==i&&t.getDOMSlot(r).setManagedLineBreak(i)}function iy(e,t){let r=[],n=e.__first;for(;null!==n;){let e=t.get(n);void 0===e&&nc(101),r.push(n),n=e.__next}return r}function iv(e,t){let r=n1._pendingDecorators,n=n1._decorators;if(null===r){if(n[e]===t)return;r=oO(n1)}r[e]=t}function i_(e){let t=e.nextSibling;return null!==t&&t===n1._blockCursorElement&&(t=t.nextSibling),t}function iC(e){let t=n8.get(e);return void 0===t&&nc(75,e),t}function ib(e){return{type:e}}let ij=ib("SELECTION_CHANGE_COMMAND"),iw=(ib("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),ib("CLICK_COMMAND")),iS=ib("BEFORE_INPUT_COMMAND"),iN=ib("INPUT_COMMAND"),ik=ib("COMPOSITION_START_COMMAND"),iE=ib("COMPOSITION_END_COMMAND"),iT=ib("DELETE_CHARACTER_COMMAND"),iL=ib("INSERT_LINE_BREAK_COMMAND"),iM=ib("INSERT_PARAGRAPH_COMMAND"),iD=ib("CONTROLLED_TEXT_INSERTION_COMMAND"),iA=ib("PASTE_COMMAND"),iO=ib("REMOVE_TEXT_COMMAND"),iF=ib("DELETE_WORD_COMMAND"),iI=ib("DELETE_LINE_COMMAND"),iP=ib("FORMAT_TEXT_COMMAND"),iR=ib("UNDO_COMMAND"),iB=ib("REDO_COMMAND"),iq=ib("KEYDOWN_COMMAND"),iz=ib("KEY_ARROW_RIGHT_COMMAND"),iW=ib("MOVE_TO_END"),i$=ib("KEY_ARROW_LEFT_COMMAND"),iK=ib("MOVE_TO_START"),iU=ib("KEY_ARROW_UP_COMMAND"),iV=ib("KEY_ARROW_DOWN_COMMAND"),iH=ib("KEY_ENTER_COMMAND"),iG=ib("KEY_SPACE_COMMAND"),iZ=ib("KEY_BACKSPACE_COMMAND"),iJ=ib("KEY_ESCAPE_COMMAND"),iQ=ib("KEY_DELETE_COMMAND"),iX=ib("KEY_TAB_COMMAND"),iY=(ib("INSERT_TAB_COMMAND"),ib("INDENT_CONTENT_COMMAND"),ib("OUTDENT_CONTENT_COMMAND"),ib("DROP_COMMAND")),i0=(ib("FORMAT_ELEMENT_COMMAND"),ib("DRAGSTART_COMMAND")),i1=ib("DRAGOVER_COMMAND"),i2=ib("DRAGEND_COMMAND"),i3=ib("COPY_COMMAND"),i4=ib("CUT_COMMAND"),i5=ib("SELECT_ALL_COMMAND"),i6=ib("CLEAR_EDITOR_COMMAND"),i9=ib("CLEAR_HISTORY_COMMAND"),i8=ib("CAN_REDO_COMMAND"),i7=ib("CAN_UNDO_COMMAND"),se=ib("FOCUS_COMMAND"),st=ib("BLUR_COMMAND"),sr=ib("KEY_MODIFIER_COMMAND"),sn=Object.freeze({}),si=[["keydown",function(e,t){ss=e.timeStamp,sl=e.key,t.isComposing()||o2(t,iq,e)}],["pointerdown",function(e,t){let r=e.target,n=e.pointerType;ad(r)&&"touch"!==n&&"pen"!==n&&0===e.button&&l0(t,()=>{l9(oA(r))||(sf=!0)})}],["compositionstart",function(e,t){o2(t,ik,e)}],["compositionend",function(e,t){nm?sg=!0:!nv&&(ny||nj)?(sp=!0,sm=e.data):o2(t,iE,e)}],["input",function(e,t){e.stopPropagation(),l0(t,()=>{t.dispatchCommand(iN,e)},{event:e}),sa=null}],["click",function(e,t){l0(t,()=>{let r=lS(),n=ao(at(t)),i=lN();if(n){if(lu(r)){let t=r.anchor,s=t.getNode();if("element"===t.type&&0===t.offset&&r.isCollapsed()&&!l7(s)&&1===oI().getChildrenSize()&&s.getTopLevelElementOrThrow().isEmpty()&&null!==i&&r.is(i))n.removeAllRanges(),r.dirty=!0;else if(3===e.detail&&!r.isCollapsed()&&s!==r.focus.getNode()){let e=av(s,e=>l4(e)&&!e.isInline());l4(e)&&e.select(0)}}else if("touch"===e.pointerType||"pen"===e.pointerType){let r=n.anchorNode;(aa(r)||oj(r))&&oR(lw(i,n,t,e))}}o2(t,iw,e)})}],["cut",sn],["copy",sn],["dragstart",sn],["dragover",sn],["dragend",sn],["paste",sn],["focus",sn],["blur",sn],["drop",sn]];nx&&si.push(["beforeinput",(e,t)=>{let r;"deleteCompositionText"===(r=e.inputType)||nm&&o1(t)||"insertCompositionText"!==r&&o2(t,iS,e)}]);let ss=0,sl=null,so=0,sa=null,sd=new WeakMap,su=new WeakMap,sc=!1,sf=!1,sh=!1,sg=!1,sp=!1,sm="",sx=null,sy=[0,"",0,"root",0];function sv(e,t,r,n,i){let s=e.anchor,l=e.focus,o=s.getNode(),a=lK(),d=ao(at(a)),u=null!==d?d.anchorNode:null,c=s.key,f=a.getElementByKey(c),h=r.length;return c!==l.key||!le(o)||(!i&&(!nx||so<n+50)||o.isDirty()&&h<2||oq(r))&&s.offset!==l.offset&&!o.isComposing()||ob(o)||o.isDirty()&&h>1||(i||!nx)&&null!==f&&!o.isComposing()&&u!==ow(f)||null!==d&&null!==t&&(!t.collapsed||t.startContainer!==d.anchorNode||t.startOffset!==d.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||function(e,t){let r;if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;let n=e.anchor.offset,i=t.getParentOrThrow(),s=oC(t);return 0===n?!t.canInsertTextBefore()||!i.canInsertTextBefore()&&!t.isComposing()||s||(le(r=t.getPreviousSibling())||l4(r)&&r.isInline())&&!r.canInsertTextAfter():n===t.getTextContentSize()&&(!t.canInsertTextAfter()||!i.canInsertTextAfter()&&!t.isComposing()||s)}(e,o)}function s_(e,t){return oj(e)&&null!==e.nodeValue&&0!==t&&t!==e.nodeValue.length}function sC(e,t,r){let{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:l}=e;sc&&(sc=!1,s_(n,i)&&s_(s,l)&&!sx)||l0(t,()=>{if(!r)return void oR(null);if(!ox(t,n,s))return;let o=lS();if(sx&&lu(o)&&o.isCollapsed()){let e=o.anchor,t=sx.anchor;(e.key===t.key&&e.offset===t.offset+1||1===e.offset&&t.getNode().is(e.getNode().getPreviousSibling()))&&oR(o=sx.clone())}if(sx=null,lu(o)){let r=o.anchor,n=r.getNode();if(o.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(o.dirty=!0);let i=at(t).event,s=i?i.timeStamp:performance.now(),[l,a,d,u,c]=sy,f=oI(),h=!1===t.isComposing()&&""===f.getTextContent();if(s<c+200&&r.offset===d&&r.key===u)sb(o,l,a);else if("text"===r.type)le(n)||nc(141),sj(o,n);else if("element"===r.type&&!h){l4(n)||nc(259);let e=r.getNode();e.isEmpty()?sb(o,e.getTextFormat(),e.getTextStyle()):sb(o,0,"")}}else{let e=r.key,t=o.focus.key,n=o.getNodes(),s=n.length,a=o.isBackward(),d=a?l:i,u=a?i:l,c=a?t:e,f=a?e:t,h=2047,g=!1;for(let e=0;e<s;e++){let t=n[e],r=t.getTextContentSize();if(le(t)&&0!==r&&(0!==e||t.__key!==c||d!==r)&&(e!==s-1||t.__key!==f||0!==u)&&(g=!0,0==(h&=t.getFormat())))break}o.format=g?h:0}}o2(t,ij,void 0)})}function sb(e,t,r){e.format===t&&e.style===r||(e.format=t,e.style=r,e.dirty=!0)}function sj(e,t){sb(e,t.getFormat(),t.getStyle())}function sw(e){if(!e.getTargetRanges)return null;let t=e.getTargetRanges();return 0===t.length?null:t[0]}function sS(e){var t;let r=e.inputType,n=sw(e),i=lK(),s=lS();if("deleteContentBackward"===r){if(null===s){let e=lN();if(!lu(e))return!0;oR(e.clone())}if(lu(s)){let r=s.anchor.key===s.focus.key;if(t=e.timeStamp,"MediaLast"===sl&&t<ss+30&&i.isComposing()&&r){if(oE(null),ss=0,setTimeout(()=>{l0(i,()=>{oE(null)})},30),lu(s)){let e=s.anchor.getNode();e.markDirty(),le(e)||nc(142),sj(s,e)}}else{oE(null),e.preventDefault();let t=s.anchor.getNode(),n=t.getTextContent(),l=t.canInsertTextAfter(),o=0===s.anchor.offset&&s.focus.offset===n.length,a=nb&&r&&!o&&l;if(a&&s.isCollapsed()&&(a=!l9(function(e,t){let r=e.offset;if("element"===e.type)return o0(e.getNode(),t,r);{let n=e.getNode();if(t&&0===r||!t&&r===n.getTextContentSize()){let e=t?n.getPreviousSibling():n.getNextSibling();return null===e?o0(n.getParentOrThrow(),t,n.getIndexWithinParent()+ +!t):e}}return null}(s.anchor,!0))),!a){o2(i,iT,!0);let e=lS();nb&&lu(e)&&e.isCollapsed()&&(sx=e,setTimeout(()=>sx=null))}}return!0}}if(!lu(s))return!0;let l=e.data;null!==sa&&oK(!1,i,sa),s.dirty&&null===sa||!s.isCollapsed()||l7(s.anchor.getNode())||null===n||s.applyDOMRange(n),sa=null;let o=s.anchor,a=s.focus,d=o.getNode(),u=a.getNode();if("insertText"===r||"insertTranspose"===r){if("\n"===l)e.preventDefault(),o2(i,iL,!1);else if("\n\n"===l)e.preventDefault(),o2(i,iM,void 0);else if(null==l&&e.dataTransfer){let t=e.dataTransfer.getData("text/plain");e.preventDefault(),s.insertRawText(t)}else null!=l&&sv(s,n,l,e.timeStamp,!0)?(e.preventDefault(),o2(i,iD,l)):sa=l;return so=e.timeStamp,!0}switch(e.preventDefault(),r){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":o2(i,iD,e);break;case"insertFromComposition":oE(null),o2(i,iD,e);break;case"insertLineBreak":oE(null),o2(i,iL,!1);break;case"insertParagraph":oE(null),sh&&!nv?(sh=!1,o2(i,iL,!1)):o2(i,iM,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":o2(i,iA,e);break;case"deleteByComposition":(d!==u||l4(d)||l4(u)||!oC(d)||!oC(u))&&o2(i,iO,e);break;case"deleteByDrag":case"deleteByCut":o2(i,iO,e);break;case"deleteContent":o2(i,iT,!1);break;case"deleteWordBackward":o2(i,iF,!0);break;case"deleteWordForward":o2(i,iF,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":o2(i,iI,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":o2(i,iI,!1);break;case"formatStrikeThrough":o2(i,iP,"strikethrough");break;case"formatBold":o2(i,iP,"bold");break;case"formatItalic":o2(i,iP,"italic");break;case"formatUnderline":o2(i,iP,"underline");break;case"historyUndo":o2(i,iR,void 0);break;case"historyRedo":o2(i,iB,void 0)}return!0}function sN(e){if(aa(e.target)&&l9(oA(e.target)))return!0;let t=lK(),r=lS(),n=e.data,i=sw(e);if(null!=n&&lu(r)&&sv(r,i,n,e.timeStamp,!1)){sg&&(sT(t,n),sg=!1);let i=r.anchor.getNode(),s=ao(at(t));if(null===s)return!0;let l=r.isBackward(),o=l?r.anchor.offset:r.focus.offset,a=l?r.focus.offset:r.anchor.offset;nx&&!r.isCollapsed()&&le(i)&&null!==s.anchorNode&&i.getTextContent().slice(0,o)+n+i.getTextContent().slice(o+a)===o$(s.anchorNode)||o2(t,iD,n);let d=n.length;nm&&d>1&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(r.anchor.offset-=d),ny||nv||nj||!t.isComposing()||(ss=0,oE(null))}else oK(!1,t,null!==n?n:void 0),sg&&(sT(t,n||void 0),sg=!1);return lz(),nz(lK()),!0}function sk(e){let t=lK(),r=lS();if(lu(r)&&!t.isComposing()){let n=r.anchor,i=r.anchor.getNode();oE(n.key),(e.timeStamp<ss+30||"element"===n.type||!r.isCollapsed()||i.getFormat()!==r.format||le(i)&&i.getStyle()!==r.style)&&o2(t,iD,nN)}return!0}function sE(e){return sT(lK(),e.data),!0}function sT(e,t){let r=e._compositionKey;if(oE(null),null!==r&&null!=t){if(""===t){let t=oL(r),n=ow(e.getElementByKey(r));return void(null!==n&&null!==n.nodeValue&&le(t)&&oU(t,n.nodeValue,null,null,!0))}if("\n"===t[t.length-1]){let t=lS();if(lu(t)){let r=t.focus;return t.anchor.set(r.key,r.offset,r.type),void o2(e,iH,null)}}}oK(!0,e,t)}function sL(e){let t=lK();if(null==e.key)return!0;if(sp&&oQ(e))return l0(t,()=>{sT(t,sm)}),sp=!1,sm="",!0;if(oG(e,"ArrowRight",{shiftKey:"any"}))o2(t,iz,e);else if(oG(e,"ArrowRight",oZ))o2(t,iW,e);else if(oG(e,"ArrowLeft",{shiftKey:"any"}))o2(t,i$,e);else if(oG(e,"ArrowLeft",oZ))o2(t,iK,e);else if(oG(e,"ArrowUp",{altKey:"any",shiftKey:"any"}))o2(t,iU,e);else if(oG(e,"ArrowDown",{altKey:"any",shiftKey:"any"}))o2(t,iV,e);else if(oG(e,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0}))sh=!0,o2(t,iH,e);else if(" "===e.key)o2(t,iG,e);else if(np&&oG(e,"o",{ctrlKey:!0}))e.preventDefault(),sh=!0,o2(t,iL,!0);else if(oG(e,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"}))sh=!1,o2(t,iH,e);else if(oG(e,"Backspace",{shiftKey:"any"})||np&&oG(e,"h",{ctrlKey:!0}))oQ(e)?o2(t,iZ,e):(e.preventDefault(),o2(t,iT,!0));else if("Escape"===e.key)o2(t,iJ,e);else if(oG(e,"Delete",{})||np&&oG(e,"d",{ctrlKey:!0}))"Delete"!==e.key?(e.preventDefault(),o2(t,iT,!1)):o2(t,iQ,e);else if(oG(e,"Backspace",oJ))e.preventDefault(),o2(t,iF,!0);else if(oG(e,"Delete",oJ))e.preventDefault(),o2(t,iF,!1);else if(np&&oG(e,"Backspace",{metaKey:!0}))e.preventDefault(),o2(t,iI,!0);else if(np&&(oG(e,"Delete",{metaKey:!0})||oG(e,"k",{ctrlKey:!0})))e.preventDefault(),o2(t,iI,!1);else if(oG(e,"b",oZ))e.preventDefault(),o2(t,iP,"bold");else if(oG(e,"u",oZ))e.preventDefault(),o2(t,iP,"underline");else if(oG(e,"i",oZ))e.preventDefault(),o2(t,iP,"italic");else if(oG(e,"Tab",{shiftKey:"any"}))o2(t,iX,e);else if(oG(e,"z",oZ))e.preventDefault(),o2(t,iR,void 0);else if(np?oG(e,"z",{metaKey:!0,shiftKey:!0}):oG(e,"y",{ctrlKey:!0})||oG(e,"z",{ctrlKey:!0,shiftKey:!0}))e.preventDefault(),o2(t,iB,void 0);else{let r=t._editorState._selection;null===r||lu(r)?oG(e,"a",oZ)&&(e.preventDefault(),o2(t,i5,e)):oG(e,"c",oZ)?(e.preventDefault(),o2(t,i3,e)):oG(e,"x",oZ)?(e.preventDefault(),o2(t,i4,e)):oG(e,"a",oZ)&&(e.preventDefault(),o2(t,i5,e))}return(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)&&t.dispatchCommand(sr,e),!0}function sM(e){let t=e.__lexicalEventHandles;return void 0===t&&(e.__lexicalEventHandles=t=[]),t}let sD=new Map;function sA(e){let t,r=(t=ae(e.target))?t.getSelection():null;if(null===r)return;let n=ov(r.anchorNode);if(null===n)return;sf&&(sf=!1,l0(n,()=>{let t=lN(),i=r.anchorNode;(aa(i)||oj(i))&&oR(lw(t,r,n,e))}));let i=oz(n),s=i[i.length-1],l=s._key,o=sD.get(l),a=o||s;a!==n&&sC(r,a,!1),sC(r,n,!0),n!==s?sD.set(l,n):o&&sD.delete(l)}function sO(e){e._lexicalHandled=!0}function sF(e){return!0===e._lexicalHandled}let sI=()=>{};function sP(e,t,r){lz();let n=e.__key,i=e.getParent();if(null===i)return;let s=function(e){let t=lS();if(!lu(t)||!l4(e))return t;let{anchor:r,focus:n}=t,i=r.getNode(),s=n.getNode();return o7(i,e)&&r.set(e.__key,0,"element"),o7(s,e)&&n.set(e.__key,0,"element"),t}(e),l=!1;if(lu(s)&&t){let t=s.anchor,r=s.focus;t.key===n&&(lT(t,e,i,e.getPreviousSibling(),e.getNextSibling()),l=!0),r.key===n&&(lT(r,e,i,e.getPreviousSibling(),e.getNextSibling()),l=!0)}else lf(s)&&t&&e.isSelected()&&e.selectPrevious();if(lu(s)&&t&&!l){let t=e.getIndexWithinParent();oN(e),lk(s,i,t,-1)}else oN(e);r||ar(i)||i.canBeEmpty()||!i.isEmpty()||sP(i,t),t&&s&&l7(i)&&i.isEmpty()&&i.selectEnd()}let sR=Symbol.for("ephemeral");function sB(e){return e[sR]||!1}class sq{__type;__key;__parent;__prev;__next;__state;static getType(){let{ownNodeType:e}=ay(this);return void 0===e&&nc(64,this.name),e}static clone(e){nc(65,this.name)}$config(){return{}}config(e,t){let r=t.extends||Object.getPrototypeOf(this.constructor);return Object.assign(t,{extends:r,type:e}),{[e]:t}}afterCloneFrom(e){this.__key===e.__key?(this.__parent=e.__parent,this.__next=e.__next,this.__prev=e.__prev,this.__state=e.__state):e.__state&&(this.__state=e.__state.getWritable(this))}static importDOM;constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),function(e,t){let r,n=(r=oc,oc=null,r);if(null!=(t=t||n&&n.__key))return e.__key=t;lz(),lW();let i=lK(),s=l$(),l=""+of++;s._nodeMap.set(l,e),l4(e)?i._dirtyElements.set(l,!0):i._dirtyLeaves.add(l),i._cloneNotNeeded.add(l),i._dirtyType=1,e.__key=l}(this,e)}getType(){return this.__type}isInline(){nc(137,this.constructor.name)}isAttached(){let e=this.__key;for(;null!==e;){if("root"===e)return!0;let t=oL(e);if(null===t)break;e=t.__parent}return!1}isSelected(e){let t=e||lS();if(null==t)return!1;let r=t.getNodes().some(e=>e.__key===this.__key);if(le(this))return r;if(lu(t)&&"element"===t.anchor.type&&"element"===t.focus.type){if(t.isCollapsed())return!1;let e=this.getParent();if(l9(this)&&this.isInline()&&e){let r=t.isBackward()?t.focus:t.anchor;if(e.is(r.getNode())&&r.offset===e.getChildrenSize()&&this.is(e.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){let e=this.getParent();if(null===e)return -1;let t=e.getFirstChild(),r=0;for(;null!==t;){if(this.is(t))return r;r++,t=t.getNextSibling()}return -1}getParent(){let e=this.getLatest().__parent;return null===e?null:oL(e)}getParentOrThrow(){let e=this.getParent();return null===e&&nc(66,this.__key),e}getTopLevelElement(){let e=this;for(;null!==e;){let t=e.getParent();if(ar(t))return l4(e)||e===this&&l9(e)||nc(194),e;e=t}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&nc(67,this.__key),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){let e=this.getLatest().__prev;return null===e?null:oL(e)}getPreviousSiblings(){let e=[],t=this.getParent();if(null===t)return e;let r=t.getFirstChild();for(;null!==r&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){let e=this.getLatest().__next;return null===e?null:oL(e)}getNextSiblings(){let e=[],t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){let t=l4(this)?this:this.getParent(),r=l4(e)?e:e.getParent(),n=t&&r?aV(t,r):null;return n?n.commonAncestor:null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){let t=aV(this,e);return null!==t&&("descendant"===t.type||("branch"===t.type?-1===aK(t):("same"!==t.type&&"ancestor"!==t.type&&nc(279),!1)))}isParentOf(e){let t=aV(this,e);return null!==t&&"ancestor"===t.type}getNodesBetween(e){let t=this.isBefore(e),r=[],n=new Set,i=this;for(;null!==i;){let s=i.__key;if(n.has(s)||(n.add(s),r.push(i)),i===e)break;let l=l4(i)?t?i.getFirstChild():i.getLastChild():null;if(null!==l){i=l;continue}let o=t?i.getNextSibling():i.getPreviousSibling();if(null!==o){i=o;continue}let a=i.getParentOrThrow();if(n.has(a.__key)||r.push(a),a===e)break;let d=null,u=a;do{if(null===u&&nc(68),d=t?u.getNextSibling():u.getPreviousSibling(),null===(u=u.getParent()))break;null!==d||n.has(u.__key)||r.push(u)}while(null===d)i=d}return t||r.reverse(),r}isDirty(){let e=lK()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){if(sB(this))return this;let e=oL(this.__key);return null===e&&nc(113),e}getWritable(){if(sB(this))return this;lz();let e=l$(),t=lK(),r=e._nodeMap,n=this.__key,i=this.getLatest(),s=t._cloneNotNeeded,l=lS();if(null!==l&&l.setCachedNodes(null),s.has(n))return ok(i),i;let o=am(i);return s.add(n),ok(o),r.set(n,o),o}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){nc(70)}updateDOM(e,t,r){nc(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){let e=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...e}}static importJSON(e){nc(18,this.name)}updateFromJSON(e){return function(e,t){let r,n,i=e.getWritable(),s=t.$,l=s;for(let e of nK(i).flatKeys)e in t&&(void 0!==l&&l!==s||(l={...s}),l[e]=t[e]);return(i.__state||l)&&(n=(r=e.getWritable()).__state?r.__state.getWritable(r):new n$(r,nK(r)),r.__state=n,n).updateFromJSON(l),i}(this,e)}static transform(){return null}remove(e){sP(this,!0,e)}replace(e,t){lz();let r=lS();null!==r&&(r=r.clone()),ai(this,e);let n=this.getLatest(),i=this.__key,s=e.__key,l=e.getWritable(),o=this.getParentOrThrow().getWritable(),a=o.__size;oN(l);let d=n.getPreviousSibling(),u=n.getNextSibling(),c=n.__prev,f=n.__next,h=n.__parent;if((sP(n,!1,!0),null===d)?o.__first=s:d.getWritable().__next=s,(l.__prev=c,null===u)?o.__last=s:u.getWritable().__prev=s,l.__next=f,l.__parent=h,o.__size=a,t&&(l4(this)&&l4(l)||nc(139),this.getChildren().forEach(e=>{l.append(e)})),lu(r)){oR(r);let e=r.anchor,t=r.focus;e.key===i&&la(e,l),t.key===i&&la(t,l)}return oT()===i&&oE(s),l}insertAfter(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];lz(),ai(this,e);let r=this.getWritable(),n=e.getWritable(),i=n.getParent(),s=lS(),l=!1,o=!1;if(null!==i){let t=e.getIndexWithinParent();if(oN(n),lu(s)){let e=i.__key,r=s.anchor,n=s.focus;l="element"===r.type&&r.key===e&&r.offset===t+1,o="element"===n.type&&n.key===e&&n.offset===t+1}}let a=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),u=n.__key,c=r.__next;if(null===a?d.__last=u:a.getWritable().__prev=u,d.__size++,r.__next=u,n.__next=c,n.__prev=r.__key,n.__parent=r.__parent,t&&lu(s)){let e=this.getIndexWithinParent();lk(s,d,e+1);let t=d.__key;l&&s.anchor.set(t,e+2,"element"),o&&s.focus.set(t,e+2,"element")}return e}insertBefore(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];lz(),ai(this,e);let r=this.getWritable(),n=e.getWritable(),i=n.__key;oN(n);let s=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),o=r.__prev,a=this.getIndexWithinParent();null===s?l.__first=i:s.getWritable().__next=i,l.__size++,r.__prev=i,n.__prev=o,n.__next=r.__key,n.__parent=r.__parent;let d=lS();return t&&lu(d)&&lk(d,this.getParentOrThrow(),a),e}isParentRequired(){return!1}createParentElementNode(){return ol()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){lz();let r=this.getPreviousSibling(),n=this.getParentOrThrow();if(null===r)return n.select(0,0);if(l4(r))return r.select();if(!le(r)){let e=r.getIndexWithinParent()+1;return n.select(e,e)}return r.select(e,t)}selectNext(e,t){lz();let r=this.getNextSibling(),n=this.getParentOrThrow();if(null===r)return n.select();if(l4(r))return r.select(0,0);if(!le(r)){let e=r.getIndexWithinParent();return n.select(e,e)}return r.select(e,t)}markDirty(){this.getWritable()}reconcileObservedMutation(e,t){this.markDirty()}}let sz="historic",sW="history-merge",s$="skip-dom-selection";class sK extends sq{static getType(){return"linebreak"}static clone(e){return new sK(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:e=>(function(e){let t=e.parentElement;if(null!==t&&ac(t)){let r=t.firstChild;if(r===e||r.nextSibling===e&&sG(r)){let r=t.lastChild;if(r===e||r.previousSibling===e&&sG(r))return!0}}return!1})(e)||function(e){let t=e.parentElement;if(null!==t&&ac(t)){let r=t.firstChild;if(r===e||r.nextSibling===e&&sG(r))return!1;let n=t.lastChild;if(n===e||n.previousSibling===e&&sG(n))return!0}return!1}(e)?null:{conversion:sU,priority:0}}}static importJSON(e){return sV().updateFromJSON(e)}}function sU(e){return{node:sV()}}function sV(){return an(new sK)}function sH(e){return e instanceof sK}function sG(e){return oj(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function sZ(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function sJ(e,t){return 1&t?"strong":2&t?"em":"span"}function sQ(e,t,r,n,i){let s=n.classList,l=oX(i,"base");void 0!==l&&s.add(...l);let o=!1,a=8&t&&4&t;for(let e in void 0!==(l=oX(i,"underlineStrikethrough"))&&(8&r&&4&r?(o=!0,a||s.add(...l)):a&&s.remove(...l)),nT){let n=nT[e];if(void 0!==(l=oX(i,e)))if(r&n){if(o&&("underline"===e||"strikethrough"===e)){t&n&&s.remove(...l);continue}(0==(t&n)||a&&"underline"===e||"strikethrough"===e)&&s.add(...l)}else t&n&&s.remove(...l)}}function sX(e,t,r){let n=t.firstChild,i=r.isComposing(),s=e+(i?nS:"");if(null==n)t.textContent=s;else{let e=n.nodeValue;if(e!==s)if(i||nm){let[t,r,i]=function(e,t){let r=e.length,n=t.length,i=0,s=0;for(;i<r&&i<n&&e[i]===t[i];)i++;for(;s+i<r&&s+i<n&&e[r-s-1]===t[n-s-1];)s++;return[i,r-i-s,t.slice(i,n-s)]}(e,s);0!==r&&n.deleteData(t,r),n.insertData(t,i)}else n.nodeValue=s}}function sY(e,t,r,n,i,s){sX(i,e,t);let l=s.theme.text;void 0!==l&&sQ(0,0,n,e,l)}function s0(e,t){let r=document.createElement(t);return r.appendChild(e),r}class s1 extends sq{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(e){return new s1(e.__text,e.__key)}afterCloneFrom(e){super.afterCloneFrom(e),this.__text=e.__text,this.__format=e.__format,this.__style=e.__style,this.__mode=e.__mode,this.__detail=e.__detail}constructor(e="",t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return nO[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===oT()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){let t=nT[e];return 0!=(this.getFormat()&t)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return oS(this.getLatest().__format,e,t)}canHaveFormat(){return!0}isInline(){return!0}createDOM(e,t){let r=this.__format,n=sZ(0,r),i=sJ(0,r),s=null===n?i:n,l=document.createElement(s),o=l;this.hasFormat("code")&&l.setAttribute("spellcheck","false"),null!==n&&(o=document.createElement(i),l.appendChild(o)),sY(o,this,0,r,this.__text,e);let a=this.__style;return""!==a&&(l.style.cssText=a),l}updateDOM(e,t,r){let n=this.__text,i=e.__format,s=this.__format,l=sZ(0,i),o=sZ(0,s),a=sJ(0,i),d=sJ(0,s);if((null===l?a:l)!==(null===o?d:o))return!0;if(l===o&&a!==d){let e=t.firstChild;null==e&&nc(48);let i=document.createElement(d);return sY(i,this,0,s,n,r),t.replaceChild(i,e),!1}let u=t;null!==o&&null!==l&&null==(u=t.firstChild)&&nc(49),sX(n,u,this);let c=r.theme.text;void 0!==c&&i!==s&&sQ(0,i,s,u,c);let f=e.__style,h=this.__style;return f!==h&&(t.style.cssText=h),!1}static importDOM(){return{"#text":()=>({conversion:s5,priority:0}),b:()=>({conversion:s3,priority:0}),code:()=>({conversion:s8,priority:0}),em:()=>({conversion:s8,priority:0}),i:()=>({conversion:s8,priority:0}),mark:()=>({conversion:s8,priority:0}),s:()=>({conversion:s8,priority:0}),span:()=>({conversion:s2,priority:0}),strong:()=>({conversion:s8,priority:0}),sub:()=>({conversion:s8,priority:0}),sup:()=>({conversion:s8,priority:0}),u:()=>({conversion:s8,priority:0})}}static importJSON(e){return s7().updateFromJSON(e)}updateFromJSON(e){return super.updateFromJSON(e).setTextContent(e.text).setFormat(e.format).setDetail(e.detail).setMode(e.mode).setStyle(e.style)}exportDOM(e){let{element:t}=super.exportDOM(e);return aa(t)||nc(132),t.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?t.style.textTransform="lowercase":this.hasFormat("uppercase")?t.style.textTransform="uppercase":this.hasFormat("capitalize")&&(t.style.textTransform="capitalize"),this.hasFormat("bold")&&(t=s0(t,"b")),this.hasFormat("italic")&&(t=s0(t,"i")),this.hasFormat("strikethrough")&&(t=s0(t,"s")),this.hasFormat("underline")&&(t=s0(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(e,t){}setFormat(e){let t=this.getWritable();return t.__format="string"==typeof e?nT[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"==typeof e?nL[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){let t=oS(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){let t=nA[e];if(this.__mode===t)return this;let r=this.getWritable();return r.__mode=t,r}setTextContent(e){if(this.__text===e)return this;let t=this.getWritable();return t.__text=e,t}select(e,t){lz();let r=e,n=t,i=lS(),s=this.getTextContent(),l=this.__key;if("string"==typeof s){let e=s.length;void 0===r&&(r=e),void 0===n&&(n=e)}else r=0,n=0;if(!lu(i))return lb(l,r,l,n,"text","text");{let e=oT();e!==i.anchor.key&&e!==i.focus.key||oE(l),i.setTextNodeRange(this,r,this,n)}return i}selectStart(){return this.select(0,0)}selectEnd(){let e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,r,n){let i=this.getWritable(),s=i.__text,l=r.length,o=e;o<0&&(o=l+o)<0&&(o=0);let a=lS();if(n&&lu(a)){let t=e+l;a.setTextNodeRange(i,t,i,t)}return i.__text=s.slice(0,o)+r+s.slice(o+t),i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(){let e;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];lz();let i=this.getLatest(),s=i.getTextContent();if(""===s)return[];let l=i.__key,o=oT(),a=s.length;r.sort((e,t)=>e-t),r.push(a);let d=[],u=r.length;for(let e=0,t=0;e<a&&t<=u;t++){let n=r[t];n>e&&(d.push(s.slice(e,n)),e=n)}let c=d.length;if(1===c)return[i];let f=d[0],h=i.getParent(),g=i.getFormat(),p=i.getStyle(),m=i.__detail,x=!1,y=null,v=null,_=lS();if(lu(_)){let[e,t]=_.isBackward()?[_.focus,_.anchor]:[_.anchor,_.focus];"text"===e.type&&e.key===l&&(y=e),"text"===t.type&&t.key===l&&(v=t)}i.isSegmented()?((e=s7(f)).__format=g,e.__style=p,e.__detail=m,e.__state=nG(i,e),x=!0):e=i.setTextContent(f);let C=[e];for(let e=1;e<c;e++){let t=s7(d[e]);t.__format=g,t.__style=p,t.__detail=m,t.__state=nG(i,t);let r=t.__key;o===l&&oE(r),C.push(t)}let b=y?y.offset:null,j=v?v.offset:null,w=0;for(let e of C){if(!y&&!v)break;let t=w+e.getTextContentSize();if(null!==y&&null!==b&&b<=t&&b>=w&&(y.set(e.getKey(),b-w,"text"),b<t&&(y=null)),null!==v&&null!==j&&j<=t&&j>=w){v.set(e.getKey(),j-w,"text");break}w=t}if(null!==h){let e,t;e=this.getPreviousSibling(),t=this.getNextSibling(),null!==e&&ok(e),null!==t&&ok(t);let r=h.getWritable(),n=this.getIndexWithinParent();x?(r.splice(n,0,C),this.remove()):r.splice(n,1,C),lu(_)&&lk(_,h,n,c-1)}return C}mergeWithSibling(e){let t=e===this.getPreviousSibling();t||e===this.getNextSibling()||nc(50);let r=this.__key,n=e.__key,i=this.__text,s=i.length;oT()===n&&oE(r);let l=lS();if(lu(l)){let i=l.anchor,o=l.focus;null!==i&&i.key===n&&lL(i,t,r,e,s),null!==o&&o.key===n&&lL(o,t,r,e,s)}let o=e.__text,a=t?o+i:i+o;this.setTextContent(a);let d=this.getWritable();return e.remove(),d}isTextEntity(){return!1}}function s2(e){return{forChild:lt(e.style),node:null}}function s3(e){let t="normal"===e.style.fontWeight;return{forChild:lt(e.style,t?void 0:"bold"),node:null}}let s4=new WeakMap;function s5(e){null===e.parentElement&&nc(129);let t=e.textContent||"";if(null!==function(e){let t,r=e.parentNode,n=[e];for(;null!==r&&void 0===(t=s4.get(r))&&!function(e){if(!aa(e))return!1;if("PRE"===e.nodeName)return!0;let t=e.style.whiteSpace;return"string"==typeof t&&t.startsWith("pre")}(r);)n.push(r),r=r.parentNode;let i=void 0===t?r:t;for(let e=0;e<n.length;e++)s4.set(n[e],i);return i}(e)){let e=t.split(/(\r?\n|\t)/),r=[],n=e.length;for(let t=0;t<n;t++){let n=e[t];"\n"===n||"\r\n"===n?r.push(sV()):"	"===n?r.push(ln()):""!==n&&r.push(s7(n))}return{node:r}}if(""===(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," ")))return{node:null};if(" "===t[0]){let r=e,n=!0;for(;null!==r&&null!==(r=s6(r,!1));){let e=r.textContent||"";if(e.length>0){/[ \t\n]$/.test(e)&&(t=t.slice(1)),n=!1;break}}n&&(t=t.slice(1))}if(" "===t[t.length-1]){let r=e,n=!0;for(;null!==r&&null!==(r=s6(r,!0));)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){n=!1;break}n&&(t=t.slice(0,t.length-1))}return""===t?{node:null}:{node:s7(t)}}function s6(e,t){let r=e;for(;;){let e;for(;null===(e=t?r.nextSibling:r.previousSibling);){let e=r.parentElement;if(null===e)return null;r=e}if(aa(r=e)){let e=r.style.display;if(""===e&&!function(e){let t=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==e.nodeName.match(t)}(r)||""!==e&&!e.startsWith("inline"))return null}let n=r;for(;null!==(n=t?r.firstChild:r.lastChild);)r=n;if(oj(r))return r;if("BR"===r.nodeName)return null}}let s9={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function s8(e){let t=s9[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:lt(e.style,t),node:null}}function s7(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return an(new s1(e))}function le(e){return e instanceof s1}function lt(e,t){let r=e.fontWeight,n=e.textDecoration.split(" "),i="700"===r||"bold"===r,s=n.includes("line-through"),l="italic"===e.fontStyle,o=n.includes("underline"),a=e.verticalAlign;return e=>(le(e)&&(i&&!e.hasFormat("bold")&&e.toggleFormat("bold"),s&&!e.hasFormat("strikethrough")&&e.toggleFormat("strikethrough"),l&&!e.hasFormat("italic")&&e.toggleFormat("italic"),o&&!e.hasFormat("underline")&&e.toggleFormat("underline"),"sub"!==a||e.hasFormat("subscript")||e.toggleFormat("subscript"),"super"!==a||e.hasFormat("superscript")||e.toggleFormat("superscript"),t&&!e.hasFormat(t)&&e.toggleFormat(t)),e)}class lr extends s1{static getType(){return"tab"}static clone(e){return new lr(e.__key)}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}createDOM(e){let t=super.createDOM(e),r=oX(e.theme,"tab");return void 0!==r&&t.classList.add(...r),t}static importJSON(e){return ln().updateFromJSON(e)}setTextContent(e){return"	"!==e&&""!==e&&nf(126),super.setTextContent("	")}spliceText(e,t,r,n){return""===r&&0===t||"	"===r&&1===t||nc(286),this}setDetail(e){return 2!==e&&nc(127),this}setMode(e){return"normal"!==e&&nc(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function ln(){return an(new lr)}function li(e){return e instanceof lr}class ls{key;offset;type;_selection;constructor(e,t,r){this._selection=null,this.key=e,this.offset=t,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){return this.key===e.key?this.offset<e.offset:0>a$(a0(aH(this,"next")),a0(aH(e,"next")))}getNode(){let e=oL(this.key);return null===e&&nc(20),e}set(e,t,r,n){let i=this._selection,s=this.key;n&&this.key===e&&this.offset===t&&this.type===r||(this.key=e,this.offset=t,this.type=r,lq()||(oT()===s&&oE(e),null!==i&&(i.setCachedNodes(null),i.dirty=!0)))}}function ll(e,t,r){return new ls(e,t,r)}function lo(e,t){let r=t.__key,n=e.offset,i="element";if(le(t)){i="text";let e=t.getTextContentSize();n>e&&(n=e)}else if(!l4(t)){let e=t.getNextSibling();if(le(e))r=e.__key,n=0,i="text";else{let e=t.getParent();e&&(r=e.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,i)}function la(e,t){if(l4(t)){let r=t.getLastDescendant();l4(r)||le(r)?lo(e,r):lo(e,t)}else lo(e,t)}class ld{_nodes;_cachedNodes;dirty;constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!lf(e))return!1;let t=this._nodes,r=e._nodes;return t.size===r.size&&Array.from(t).every(e=>r.has(e))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new ld(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){let t,r=this.getNodes(),n=r.length,i=r[n-1];if(le(i))t=i.select();else{let e=i.getIndexWithinParent()+1;t=i.getParentOrThrow().select(e,e)}t.insertNodes(e);for(let e=0;e<n;e++)r[e].remove()}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=this._nodes,r=[];for(let e of t){let t=oL(e);null!==t&&r.push(t)}return lq()||(this._cachedNodes=r),r}getTextContent(){let e=this.getNodes(),t="";for(let r=0;r<e.length;r++)t+=e[r].getTextContent();return t}deleteNodes(){let e=this.getNodes();if((lS()||lN())===this&&e[0]){var t;let r,n,i=aA(e[0],"next");t=az(i,i),aZ(n=lu(r=lS())?r:function(){return new lc(ll("root",0,"element"),ll("root",0,"element"),0,"")}(),t),oR(n)}for(let t of e)t.remove()}}function lu(e){return e instanceof lc}class lc{format;style;anchor;focus;_cachedNodes;dirty;constructor(e,t,r,n){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=r,this.style=n,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!lu(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){let e=this._cachedNodes;if(null!==e)return e;let t=function(e){let t=[],[r,n]=e.getTextSlices();r&&t.push(r.caret.origin);let i=new Set,s=new Set;for(let r of e)if(aT(r)){let{origin:e}=r;0===t.length?i.add(e):(s.add(e),t.push(e))}else{let{origin:e}=r;l4(e)&&s.has(e)||t.push(e)}if(n&&t.push(n.caret.origin),aE(e.focus)&&l4(e.focus.origin)&&null===e.focus.getNodeAtCaret())for(let r=aI(e.focus.origin,"previous");aT(r)&&i.has(r.origin)&&!r.origin.isEmpty()&&r.origin.is(t[t.length-1]);r=aP(r))i.delete(r.origin),t.pop();for(;t.length>1;){let e=t[t.length-1];if(!l4(e)||s.has(e)||e.isEmpty()||i.has(e))break;t.pop()}if(0===t.length&&e.isCollapsed()){let r=a0(e.anchor),n=a0(e.anchor.getFlipped()),i=e=>ak(e)?e.origin:e.getNodeAtCaret(),s=i(r)||i(n)||(e.anchor.getNodeAtCaret()?r.origin:n.origin);t.push(s)}return t}(a3(aJ(this),"next"));return lq()||(this._cachedNodes=t),t}setTextNodeRange(e,t,r,n){this.anchor.set(e.__key,t,"text"),this.focus.set(r.__key,n,"text")}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],r=e[e.length-1],n=this.anchor,i=this.focus,s=n.isBefore(i),[l,o]=lg(this),a="",d=!0;for(let u=0;u<e.length;u++){let c=e[u];if(l4(c)&&!c.isInline())d||(a+="\n"),d=!c.isEmpty();else if(d=!1,le(c)){let e=c.getTextContent();c===t?c===r?"element"===n.type&&"element"===i.type&&i.offset!==n.offset||(e=l<o?e.slice(l,o):e.slice(o,l)):e=s?e.slice(l):e.slice(o):c===r&&(e=s?e.slice(0,o):e.slice(0,l)),a+=e}else!l9(c)&&!sH(c)||c===r&&this.isCollapsed()||(a+=c.getTextContent())}return a}applyDOMRange(e){let t=lK(),r=t.getEditorState()._selection,n=lC(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,r);if(null===n)return;let[i,s]=n;this.anchor.set(i.key,i.offset,i.type,!0),this.focus.set(s.key,s.offset,s.type,!0),nX(this)}clone(){let e=this.anchor,t=this.focus;return new lc(ll(e.key,e.offset,e.type),ll(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=oS(this.format,e,null),this.dirty=!0}setFormat(e){this.format=e,this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){let t=nT[e];return 0!=(this.format&t)}insertRawText(e){let t=e.split(/(\r?\n|\t)/),r=[],n=t.length;for(let e=0;e<n;e++){let n=t[e];"\n"===n||"\r\n"===n?r.push(sV()):"	"===n?r.push(ln()):r.push(s7(n))}this.insertNodes(r)}insertText(e){let t=this.anchor,r=this.focus,n=this.format,i=this.style,s=t,l=r;!this.isCollapsed()&&r.isBefore(t)&&(s=r,l=t),"element"===s.type&&function(e,t,r,n){let i=e.getNode(),s=i.getChildAtIndex(e.offset),l=s7();if(l.setFormat(r),l.setStyle(n),oo(s))s.splice(0,0,[l]);else{let e=l7(i)?ol().append(l):l;null===s?i.append(e):s.insertBefore(e)}e.is(t)&&t.set(l.__key,0,"text"),e.set(l.__key,0,"text")}(s,l,n,i),"element"===l.type&&aG(l,a0(aH(l,"next")));let o=s.offset,a=l.offset,d=this.getNodes(),u=d.length,c=d[0];le(c)||nc(26);let f=c.getTextContent().length,h=c.getParentOrThrow(),g=d[u-1];if(1===u&&"element"===l.type&&(a=f,l.set(s.key,a,"text")),this.isCollapsed()&&o===f&&(ob(c)||!c.canInsertTextAfter()||!h.canInsertTextAfter()&&null===c.getNextSibling())){let t=c.getNextSibling();if(le(t)&&t.canInsertTextBefore()&&!ob(t)||((t=s7()).setFormat(n),t.setStyle(i),h.canInsertTextAfter()?c.insertAfter(t):h.insertAfter(t)),t.select(0,0),c=t,""!==e)return void this.insertText(e)}else if(this.isCollapsed()&&0===o&&(ob(c)||!c.canInsertTextBefore()||!h.canInsertTextBefore()&&null===c.getPreviousSibling())){let t=c.getPreviousSibling();if(le(t)&&!ob(t)||((t=s7()).setFormat(n),h.canInsertTextBefore()?c.insertBefore(t):h.insertBefore(t)),t.select(),c=t,""!==e)return void this.insertText(e)}else if(c.isSegmented()&&o!==f){let e=s7(c.getTextContent());e.setFormat(n),c.replace(e),c=e}else if(!this.isCollapsed()&&""!==e){let t=g.getParent();if(!h.canInsertTextBefore()||!h.canInsertTextAfter()||l4(t)&&(!t.canInsertTextBefore()||!t.canInsertTextAfter()))return this.insertText(""),l_(this.anchor,this.focus,null),void this.insertText(e)}if(1===u){if(oC(c)){let t=s7(e);return t.select(),void c.replace(t)}let t=c.getFormat(),r=c.getStyle();if(o!==a||t===n&&r===i){if(li(c)){let t=s7(e);return t.setFormat(n),t.setStyle(i),t.select(),void c.replace(t)}}else{if(""!==c.getTextContent()){let t=s7(e);if(t.setFormat(n),t.setStyle(i),t.select(),0===o)c.insertBefore(t,!1);else{let[e]=c.splitText(o);e.insertAfter(t,!1)}return void(t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length))}c.setFormat(n),c.setStyle(i)}let s=a-o;""===(c=c.spliceText(o,s,e,!0)).getTextContent()?c.remove():"text"===this.anchor.type&&(c.isComposing()?this.anchor.offset-=e.length:(this.format=t,this.style=r))}else{let t=new Set([...c.getParentKeys(),...g.getParentKeys()]),r=l4(c)?c:c.getParentOrThrow(),n=l4(g)?g:g.getParentOrThrow(),i=g;if(!r.is(n)&&n.isInline())do i=n,n=n.getParentOrThrow();while(n.isInline())if("text"===l.type&&(0!==a||""===g.getTextContent())||"element"===l.type&&g.getIndexWithinParent()<a)if(le(g)&&!oC(g)&&a!==g.getTextContentSize()){if(g.isSegmented()){let e=s7(g.getTextContent());g.replace(e),g=e}l7(l.getNode())||"text"!==l.type||(g=g.spliceText(0,a,"")),t.add(g.__key)}else{let e=g.getParentOrThrow();e.canBeEmpty()||1!==e.getChildrenSize()?g.remove():e.remove()}else t.add(g.__key);let s=n.getChildren(),h=new Set(d),p=r.is(n),m=r.isInline()&&null===c.getNextSibling()?r:c;for(let e=s.length-1;e>=0;e--){let t=s[e];if(t.is(c)||l4(t)&&t.isParentOf(c))break;t.isAttached()&&(!h.has(t)||t.is(i)?p||m.insertAfter(t,!1):t.remove())}if(!p){let e=n,r=null;for(;null!==e;){let n=e.getChildren(),i=n.length;(0===i||n[i-1].is(r))&&(t.delete(e.__key),r=e),e=e.getParent()}}if(oC(c))if(o===f)c.select();else{let t=s7(e);t.select(),c.replace(t)}else""===(c=c.spliceText(o,f-o,e,!0)).getTextContent()?c.remove():c.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length);for(let e=1;e<u;e++){let r=d[e],n=r.__key;t.has(n)||r.remove()}}}removeText(){let e=lS()===this;aZ(this,function(e){let t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"removeEmptySlices";if(e.isCollapsed())return e;let i="root",s="next",l=n,o=a3(e,s),a=aX(o.anchor,i),d=aX(o.focus.getFlipped(),i),u=new Set,c=[];for(let e of o.iterNodeCarets(i))if(aT(e))u.add(e.origin.getKey());else if(aE(e)){let{origin:t}=e;l4(t)&&!u.has(t.getKey())||c.push(t)}for(let e of c)e.remove();for(let e of o.getTextSlices()){if(!e)continue;let{origin:t}=e.caret,r=t.getTextContentSize(),n=aQ(aA(t,s)),i=t.getMode();if(Math.abs(e.distance)===r&&"removeEmptySlices"===l||"token"===i&&0!==e.distance)n.remove();else if(0!==e.distance){l="removeEmptySlices";let t=e.removeTextSlice(),r=e.caret.origin;if("segmented"===i){let e=t.origin,r=s7(e.getTextContent()).setStyle(e.getStyle()).setFormat(e.getFormat());n.replaceOrInsert(r),t=aO(r,s,t.offset)}r.is(a[0].origin)&&(a[0]=t),r.is(d[0].origin)&&(d[0]=t.getFlipped())}}for(let e of a)if(aY(e)){t=a0(e);break}for(let e of d)if(aY(e)){r=a0(e);break}let f=function(e,t,r){let n;if(!e||!t)return null;let i=e.getParentAtCaret(),s=t.getParentAtCaret();if(!i||!s)return null;let l=i.getParents().reverse();l.push(i);let o=s.getParents().reverse();o.push(s);let a=Math.min(l.length,o.length);for(n=0;n<a&&l[n]===o[n];n++);let d=(e,t)=>{let r;for(let i=n;i<e.length;i++){let n=e[i];if(ar(n))return;!r&&t(n)&&(r=n)}return r},u=d(l,af),c=u&&d(o,e=>r.has(e.getKey())&&af(e));return u&&c?[u,c]:null}(t,r,u);if(f){let[e,t]=f;aI(e,"previous").splice(0,t.getChildren()),t.remove()}let h=[t,r,...a,...d].find(aY);if(h){var g;return az(g=a2(a0(h),e.direction),g)}nc(269,JSON.stringify(a.map(e=>e.origin.__key)))}(aJ(this))),e&&lS()!==this&&oR(this)}formatText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isCollapsed())return this.toggleFormat(e),void oE(null);let r=this.getNodes(),n=[];for(let e of r)le(e)&&n.push(e);let i=t=>{r.forEach(r=>{if(l4(r)){let n=r.getFormatFlags(e,t);r.setTextFormat(n)}})},s=n.length;if(0===s)return this.toggleFormat(e),oE(null),void i(t);let l=this.anchor,o=this.focus,a=this.isBackward(),d=a?o:l,u=a?l:o,c=0,f=n[0],h="element"===d.type?0:d.offset;if("text"===d.type&&h===f.getTextContentSize()&&(c=1,f=n[1],h=0),null==f)return;let g=f.getFormatFlags(e,t);i(g);let p=s-1,m=n[p],x="text"===u.type?u.offset:m.getTextContentSize();if(f.is(m)){if(h===x)return;if(ob(f)||0===h&&x===f.getTextContentSize())f.setFormat(g);else{let e=f.splitText(h,x),t=0===h?e[0]:e[1];t.setFormat(g),"text"===d.type&&d.set(t.__key,0,"text"),"text"===u.type&&u.set(t.__key,x-h,"text")}return void(this.format=g)}0===h||ob(f)||([,f]=f.splitText(h),h=0),f.setFormat(g);let y=m.getFormatFlags(e,g);x>0&&(x===m.getTextContentSize()||ob(m)||([m]=m.splitText(x)),m.setFormat(y));for(let t=c+1;t<p;t++){let r=n[t],i=r.getFormatFlags(e,y);r.setFormat(i)}"text"===d.type&&d.set(f.__key,h,"text"),"text"===u.type&&u.set(m.__key,x,"text"),this.format=g|y}insertNodes(e){var t;if(0===e.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();let t=lS();return lu(t)||nc(134),t.insertNodes(e)}let r=(this.isBackward()?this.focus:this.anchor).getNode(),n=av(r,af),i=e[e.length-1];if(l4(n)&&"__language"in n){if("__language"in e[0])this.insertText(e[0].getTextContent());else{let t=lD(this);n.splice(t,0,e),i.selectEnd()}return}if(!e.some(e=>(l4(e)||l9(e))&&!e.isInline())){l4(n)||nc(211,r.constructor.name,r.getType());let t=lD(this);return n.splice(t,0,e),void i.selectEnd()}let s=function(e){let t=ol(),r=null;for(let n=0;n<e.length;n++){let i=e[n],s=sH(i);if(s||l9(i)&&i.isInline()||l4(i)&&i.isInline()||le(i)||i.isParentRequired()){if(null===r&&(r=i.createParentElementNode(),t.append(r),s))continue;null!==r&&r.append(i)}else t.append(i),r=null}return t}(e),l=s.getLastDescendant(),o=s.getChildren(),a=l4(n)&&n.isEmpty()?null:this.insertParagraph(),d=o[o.length-1],u=o[0];l4(t=u)&&af(t)&&!t.isEmpty()&&l4(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(l4(n)||nc(211,r.constructor.name,r.getType()),n.append(...u.getChildren()),u=o[1]),u&&(null===n&&nc(212,r.constructor.name,r.getType()),function(e,t){let r=t.getParentOrThrow().getLastChild(),n=t,i=[t];for(;n!==r;)n.getNextSibling()||nc(140),i.push(n=n.getNextSibling());let s=e;for(let e of i)s=s.insertAfter(e)}(n,u));let c=av(l,af);a&&l4(c)&&(a.canMergeWhenEmpty()||af(d))&&(c.append(...a.getChildren()),a.remove()),l4(n)&&n.isEmpty()&&n.remove(),l.selectEnd();let f=l4(n)?n.getLastChild():null;sH(f)&&c!==n&&f.remove()}insertParagraph(){if("root"===this.anchor.key){let e=ol();return oI().splice(this.anchor.offset,0,[e]),e.select(),e}let e=lD(this),t=av(this.anchor.getNode(),af);l4(t)||nc(213);let r=t.getChildAtIndex(e),n=r?[r,...r.getNextSiblings()]:[],i=t.insertNewAfter(this,!1);return i?(i.append(...n),i.selectStart(),i):null}insertLineBreak(e){let t=sV();if(this.insertNodes([t]),e){let e=t.getParentOrThrow(),r=t.getIndexWithinParent();e.select(r,r)}}extract(){let e=[...this.getNodes()],t=e.length,r=e[0],n=e[t-1],[i,s]=lg(this),l=this.isBackward(),[o,a]=l?[this.focus,this.anchor]:[this.anchor,this.focus],[d,u]=l?[s,i]:[i,s];if(0===t)return[];if(1===t){if(le(r)&&!this.isCollapsed()){let e=r.splitText(d,u),t=0===d?e[0]:e[1];return t?(o.set(t.getKey(),0,"text"),a.set(t.getKey(),t.getTextContentSize(),"text"),[t]):[]}return[r]}if(le(r)&&(d===r.getTextContentSize()?e.shift():0!==d&&([,r]=r.splitText(d),e[0]=r,o.set(r.getKey(),0,"text"))),le(n)){let t=n.getTextContent().length;0===u?e.pop():u!==t&&([n]=n.splitText(u),e[e.length-1]=n,a.set(n.getKey(),n.getTextContentSize(),"text"))}return e}modify(e,t,r){var n;if(lA(this,e,t,r))return;let i="move"===e,s=lK(),l=ao(at(s));if(!l)return;let o=s._blockCursorElement,a=s._rootElement,d=this.focus.getNode();if(null===a||null===o||!l4(d)||d.isInline()||d.canBeEmpty()||al(o,s,a),this.dirty){let e=o4(s,this.anchor.key),t=o4(s,this.focus.key);"text"===this.anchor.type&&(e=ow(e)),"text"===this.focus.type&&(t=ow(t)),e&&t&&lM(l,e,this.anchor.offset,t,this.focus.offset)}if(n=t?"backward":"forward",l.modify(e,n,r),l.rangeCount>0){let e=l.getRangeAt(0),r=this.anchor.getNode(),n=l7(r)?r:function(e){let t=e.getParentOrThrow();for(;null!==t&&!ar(t);)t=t.getParentOrThrow();return t}(r);if(this.applyDOMRange(e),this.dirty=!0,!i){let r,i,s,o,a,d=this.getNodes(),u=[],c=!1;for(let e=0;e<d.length;e++){let t=d[e];o7(t,n)?u.push(t):c=!0}if(c&&u.length>0)if(t){let e=u[0];l4(e)?e.selectStart():e.getParentOrThrow().selectStart()}else{let e=u[u.length-1];l4(e)?e.selectEnd():e.getParentOrThrow().selectEnd()}l.anchorNode===e.startContainer&&l.anchorOffset===e.startOffset||(r=this.focus,s=(i=this.anchor).key,o=i.offset,a=i.type,i.set(r.key,r.offset,r.type,!0),r.set(s,o,a,!0))}}"lineboundary"===r&&lA(this,e,t,r,"decorators")}forwardDeletion(e,t,r){if(!r&&("element"===e.type&&l4(t)&&e.offset===t.getChildrenSize()||"text"===e.type&&e.offset===t.getTextContentSize())){let e=t.getParent(),r=t.getNextSibling()||(null===e?null:e.getNextSibling());if(l4(r)&&r.isShadowRoot())return!0}return!1}deleteCharacter(e){let t=this.isCollapsed();if(this.isCollapsed()){let t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;let n=aq(aH(t,e?"previous":"next"));if(n.getTextSlices().every(e=>null===e||0===e.distance)){let e={type:"initial"};for(let t of n.iterNodeCarets("shadowRoot"))if(aT(t))if(t.origin.isInline());else{if(t.origin.isShadowRoot()){if("merge-block"===e.type)break;if(l4(n.anchor.origin)&&n.anchor.origin.isEmpty()){let e=a0(t);aZ(this,az(e,e)),n.anchor.origin.remove()}return}"merge-next-block"!==e.type&&"merge-block"!==e.type||(e={block:e.block,caret:t,type:"merge-block"})}else{if("merge-block"===e.type)break;if(aE(t)){if(l4(t.origin)){if(t.origin.isInline()){if(!t.origin.isParentOf(n.anchor.origin))break}else e={block:t.origin,type:"merge-next-block"};continue}if(l9(t.origin)){if(t.origin.isIsolated());else if("merge-next-block"===e.type&&(t.origin.isKeyboardSelectable()||!t.origin.isInline())&&l4(n.anchor.origin)&&n.anchor.origin.isEmpty()){n.anchor.origin.remove();let e=lj();e.add(t.origin.getKey()),oR(e)}else t.origin.remove();return}break}}if("merge-block"===e.type){let{caret:t,block:r}=e;return aZ(this,az(!t.origin.isEmpty()&&r.isEmpty()?aQ(aA(r,t.direction)):n.anchor,t)),this.removeText()}}let i=this.focus;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===t.offset&&lp(this,t.getNode()))return}else{let n="text"===i.type?i.getNode():null;if(r="text"===t.type?t.getNode():null,null!==n&&n.isSegmented()){let t=i.offset,s=n.getTextContentSize();if(n.is(r)||e&&t!==s||!e&&0!==t)return void lx(n,e,t)}else if(null!==r&&r.isSegmented()){let i=t.offset,s=r.getTextContentSize();if(r.is(n)||e&&0!==i||!e&&i!==s)return void lx(r,e,i)}!function(e,t){let r=e.anchor,n=e.focus,i=r.getNode();if(i===n.getNode()&&"text"===r.type&&"text"===n.type){var s;let e=r.offset,l=n.offset,o=e<l,a=o?e:l,d=o?l:e,u=d-1;a===u||oq(s=i.getTextContent().slice(a,d))||lm(s)||(t?n.set(n.key,u,n.type):r.set(r.key,u,r.type))}}(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){let e=this.anchor.getNode();e.isEmpty()&&l7(e.getParent())&&null===e.getPreviousSibling()&&lp(this,e)}}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.isCollapsed()?this.deleteCharacter(e):this.removeText()}deleteWord(e){if(this.isCollapsed()){let t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function lf(e){return e instanceof ld}function lh(e){let t=e.offset;if("text"===e.type)return t;let r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function lg(e){let t=e.getStartEndPoints();if(null===t)return[0,0];let[r,n]=t;return"element"===r.type&&"element"===n.type&&r.key===n.key&&r.offset===n.offset?[0,0]:[lh(r),lh(n)]}function lp(e,t){for(let r=t;r;r=r.getParent()){if(l4(r)){if(r.collapseAtStart(e))return!0;if(ar(r))break}if(r.getPreviousSibling())break}return!1}let lm=(()=>{try{let e=RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("❤️")&&t("#️⃣")&&t("👍"))return t}catch(e){}return()=>!1})();function lx(e,t,r){let n=e.getTextContent().split(/(?=\s)/g),i=n.length,s=0,l=0;for(let e=0;e<i;e++){let o=e===i-1;if(l=s,s+=n[e].length,t&&s===r||s>r||o){n.splice(e,1),o&&(l=void 0);break}}let o=n.join("").trim();""===o?e.remove():(e.setTextContent(o),e.select(l,l))}function ly(e,t,r,n){let i,s=t;if(aa(e)){let l=!1,o=e.childNodes,a=o.length,d=n._blockCursorElement;s===a&&(l=!0,s=a-1);let u=o[s],c=!1;if(u===d)u=o[s+1],c=!0;else if(null!==d){let r=d.parentNode;e===r&&t>Array.prototype.indexOf.call(r.children,d)&&s--}if(le(i=oB(u)))s=aF(i,l?"next":"previous");else{let o=oB(e);if(null===o)return null;if(l4(o)){let a,d=n.getElementByKey(o.getKey());null===d&&nc(214);let u=o.getDOMSlot(d);[o,s]=u.resolveChildIndex(o,d,e,t),l4(o)||nc(215),l&&s>=o.getChildrenSize()&&(s=Math.max(0,o.getChildrenSize()-1));let f=o.getChildAtIndex(s);if(l4(f)&&(a=f.getParent(),null===r||null===a||!a.canBeEmpty()||a!==r.getNode())){let e=l?f.getLastDescendant():f.getFirstDescendant();o=null===e||l4(f=e)?f:f.getParentOrThrow(),s=0}le(f)?(i=f,o=null,s=aF(f,l?"next":"previous")):f!==o&&l&&!c&&(l4(o)||nc(216),s=Math.min(o.getChildrenSize(),s+1))}else{let r=o.getIndexWithinParent();s=0===t&&l9(o)&&oB(e)===o?r:r+1,o=o.getParentOrThrow()}if(l4(o))return ll(o.__key,s,"element")}}else i=oB(e);return le(i)?ll(i.__key,aF(i,s,"clamp"),"text"):null}function lv(e,t,r){let n=e.offset,i=e.getNode();if(0===n){let n=i.getPreviousSibling(),s=i.getParent();if(t){if((r||!t)&&null===n&&l4(s)&&s.isInline()){let t=s.getPreviousSibling();le(t)&&e.set(t.__key,t.getTextContent().length,"text")}}else l4(n)&&!r&&n.isInline()?e.set(n.__key,n.getChildrenSize(),"element"):le(n)&&e.set(n.__key,n.getTextContent().length,"text")}else if(n===i.getTextContent().length){let n=i.getNextSibling(),s=i.getParent();if(t&&l4(n)&&n.isInline())e.set(n.__key,0,"element");else if((r||t)&&null===n&&l4(s)&&s.isInline()&&!s.canInsertTextAfter()){let t=s.getNextSibling();le(t)&&e.set(t.__key,0,"text")}}}function l_(e,t,r){if("text"===e.type&&"text"===t.type){let n=e.isBefore(t),i=e.is(t);lv(e,n,i),lv(t,!n,i),i&&t.set(e.key,e.offset,e.type);let s=lK();if(s.isComposing()&&s._compositionKey!==e.key&&lu(r)){let n=r.anchor,i=r.focus;e.set(n.key,n.offset,n.type,!0),t.set(i.key,i.offset,i.type,!0)}}}function lC(e,t,r,n,i,s){if(null===e||null===r||!ox(i,e,r))return null;let l=ly(e,t,lu(s)?s.anchor:null,i);if(null===l)return null;let o=ly(r,n,lu(s)?s.focus:null,i);if(null===o)return null;if("element"===l.type&&"element"===o.type){let t=oB(e),n=oB(r);if(l9(t)&&l9(n))return null}return l_(l,o,s),[l,o]}function lb(e,t,r,n,i,s){let l=l$(),o=new lc(ll(e,t,i),ll(r,n,s),0,"");return o.dirty=!0,l._selection=o,o}function lj(){return new ld(new Set)}function lw(e,t,r,n){let i,s,l,o,a=r._window;if(null===a)return null;let d=n||a.event,u=d?d.type:void 0,c="selectionchange"===u,f=!nI&&(c||"beforeinput"===u||"compositionstart"===u||"compositionend"===u||"click"===u&&d&&3===d.detail||"drop"===u||void 0===u);if(lu(e)&&!f)return e.clone();if(null===t)return null;if(i=t.anchorNode,s=t.focusNode,l=t.anchorOffset,o=t.focusOffset,(c||void 0===u)&&lu(e)&&!ox(r,i,s))return e.clone();let h=lC(i,l,s,o,r,e);if(null===h)return null;let[g,p]=h;return new lc(g,p,lu(e)?e.format:0,lu(e)?e.style:"")}function lS(){return l$()._selection}function lN(){return lK()._editorState._selection}function lk(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=e.anchor,s=e.focus,l=i.getNode(),o=s.getNode();if(!t.is(l)&&!t.is(o))return;let a=t.__key;if(e.isCollapsed()){let t=i.offset;if(r<=t&&n>0||r<t&&n<0){let r=Math.max(0,t+n);i.set(a,r,"element"),s.set(a,r,"element"),lE(e)}}else{let l=e.isBackward(),o=l?s:i,d=o.getNode(),u=l?i:s,c=u.getNode();if(t.is(d)){let e=o.offset;(r<=e&&n>0||r<e&&n<0)&&o.set(a,Math.max(0,e+n),"element")}if(t.is(c)){let e=u.offset;(r<=e&&n>0||r<e&&n<0)&&u.set(a,Math.max(0,e+n),"element")}}lE(e)}function lE(e){let t=e.anchor,r=t.offset,n=e.focus,i=n.offset,s=t.getNode(),l=n.getNode();if(e.isCollapsed()){if(!l4(s))return;let e=s.getChildrenSize(),i=r>=e,l=i?s.getChildAtIndex(e-1):s.getChildAtIndex(r);if(le(l)){let e=0;i&&(e=l.getTextContentSize()),t.set(l.__key,e,"text"),n.set(l.__key,e,"text")}return}if(l4(s)){let e=s.getChildrenSize(),n=r>=e,i=n?s.getChildAtIndex(e-1):s.getChildAtIndex(r);if(le(i)){let e=0;n&&(e=i.getTextContentSize()),t.set(i.__key,e,"text")}}if(l4(l)){let e=l.getChildrenSize(),t=i>=e,r=t?l.getChildAtIndex(e-1):l.getChildAtIndex(i);if(le(r)){let e=0;t&&(e=r.getTextContentSize()),n.set(r.__key,e,"text")}}}function lT(e,t,r,n,i){let s=null,l=0,o=null;null!==n?(s=n.__key,le(n)?(l=n.getTextContentSize(),o="text"):l4(n)&&(l=n.getChildrenSize(),o="element")):null!==i&&(s=i.__key,le(i)?o="text":l4(i)&&(o="element")),null!==s&&null!==o?e.set(s,l,o):(-1===(l=t.getIndexWithinParent())&&(l=r.getChildrenSize()),e.set(r.__key,l,"element"))}function lL(e,t,r,n,i){"text"===e.type?e.set(r,e.offset+(t?0:i),"text"):e.offset>n.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function lM(e,t,r,n,i){try{e.setBaseAndExtent(t,r,n,i)}catch(e){}}function lD(e){let t=e;e.isCollapsed()||t.removeText();let r=lS();lu(r)&&(t=r),lu(t)||nc(161);let n=t.anchor,i=n.getNode(),s=n.offset;for(;!af(i);){let e=i;if([i,s]=function(e,t){let r=e.getParent();if(!r){let e=ol();return oI().append(e),e.select(),[oI(),0]}if(le(e)){let n=e.splitText(t);if(0===n.length)return[r,e.getIndexWithinParent()];let i=+(0!==t);return[r,n[0].getIndexWithinParent()+i]}if(!l4(e)||0===t)return[r,e.getIndexWithinParent()];let n=e.getChildAtIndex(t);if(n){let r=new lc(ll(e.__key,t,"element"),ll(e.__key,t,"element"),0,""),i=e.insertNewAfter(r);i&&i.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}(i,s),e.is(i))break}return s}function lA(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"decorators-and-blocks";if("move"===t&&"character"===n&&!e.isCollapsed()){let[t,n]=r===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return n.set(t.key,t.offset,t.type),!0}let s=aH(e.focus,r?"previous":"next"),l="lineboundary"===n,o="move"===t,a=s,d="decorators-and-blocks"===i;if(!a1(a)){for(let e of a){d=!1;let{origin:t}=e;if(!l9(t)||t.isIsolated()||(a=e,!l||!t.isInline()))break}if(d)for(let e of aq(s).iterNodeCarets("extend"===t?"shadowRoot":"root")){if(aT(e))e.origin.isInline()||(a=e);else{if(l4(e.origin))continue;l9(e.origin)&&!e.origin.isInline()&&(a=e)}break}}if(a===s)return!1;if(o&&!l&&l9(a.origin)&&a.origin.isKeyboardSelectable()){let e=lj();return e.add(a.origin.getKey()),oR(e),!0}return a=a0(a),o&&aG(e.anchor,a),aG(e.focus,a),d||!l}let lO=null,lF=null,lI=!1,lP=!1,lR=0,lB={characterData:!0,childList:!0,subtree:!0};function lq(){return lI||null!==lO&&lO._readOnly}function lz(){lI&&nc(13)}function lW(){lR>99&&nc(14)}function l$(){return null===lO&&nc(195,lU()),lO}function lK(){return null===lF&&nc(196,lU()),lF}function lU(){let e=0,t=new Set,r=ou.version;if("undefined"!=typeof window)for(let n of document.querySelectorAll("[contenteditable]")){let i=o_(n);if(oy(i))e++;else if(i){let e=String(i.constructor.version||"<0.17.1");e===r&&(e+=" (separately built, likely a bundler configuration issue)"),t.add(e)}}let n=` Detected on the page: ${e} compatible editor(s) with version ${r}`;return t.size&&(n+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),n}function lV(e,t,r){let n=t.__type,i=oh(e,n),s=r.get(n);void 0===s&&(s=Array.from(i.transforms),r.set(n,s));let l=s.length;for(let e=0;e<l&&(s[e](t),t.isAttached());e++);}function lH(e,t){return void 0!==e&&e.__key!==t&&e.isAttached()}function lG(e,t){if(!t)return;let r=e._updateTags,n=t;for(let e of(Array.isArray(t)||(n=[t]),n))r.add(e)}function lZ(e,t,r){let n=lO,i=lI,s=lF;lO=t,lI=!0,lF=e;try{return r()}finally{lO=n,lI=i,lF=s}}function lJ(e,t){let r,n,i=e._pendingEditorState,s=e._rootElement,l=e._headless||null===s;if(null===i)return;let o=e._editorState,a=o._selection,d=i._selection,u=0!==e._dirtyType,c=lO,f=lI,h=lF,g=e._updating,p=e._observer,m=null;if(e._pendingEditorState=null,e._editorState=i,!l&&u&&null!==p){lF=e,lO=i,lI=!1,e._updating=!0;try{let t,r=e._dirtyType,n=e._dirtyElements,s=e._dirtyLeaves;p.disconnect(),ie="",ii="",is=2===r,n1=e,n0=e._config,n2=e._nodes,n3=n1._listeners.mutation,n4=n,n5=s,n6=o._nodeMap,n9=i._nodeMap,il=i._readOnly,n8=new Map(e._keyToDOMMap),n7=t=new Map,function e(t,r){let n=n6.get(t),i=n9.get(t);void 0!==n&&void 0!==i||nc(61);let s=is||n5.has(t)||n4.has(t),l=o4(n1,t);if(n===i&&!s){if(l4(n)){let e=l.__lexicalTextContent;void 0!==e&&(ie+=e,ii+=e)}else{let e=n.getTextContent();ii+=e,ie+=e}return l}if(n!==i&&s&&oY(n7,n2,n3,i,"updated"),i.updateDOM(n,l,n0)){let e=ig(t,null);return null===r&&nc(62),r.replaceChild(e,l),io(t,null),e}if(l4(n)&&l4(i)){let t=i.__indent;(is||t!==n.__indent)&&iu(l,t);let r=i.__format;if((is||r!==n.__format)&&ic(l,r),s&&(function(t,r,n){it=null,ir=null,function(t,r,n){let i=ie,s=t.__size,l=r.__size;ie="";let o=n.element;if(1===s&&1===l){let n=t.__first,i=r.__first;if(n===i)e(n,o);else{let e=iC(n),t=ig(i,null);try{o.replaceChild(t,e)}catch(r){if("object"==typeof r&&null!=r)throw Error(`${r.toString()} Parent: ${o.tagName}, new child: {tag: ${t.tagName} key: ${i}}, old child: {tag: ${e.tagName}, key: ${n}}.`);throw r}io(n,null)}let s=n9.get(i);le(s)&&null===it&&(it=s.getFormat(),ir=s.getStyle())}else{let i=iy(t,n6),a=iy(r,n9);if(i.length!==s&&nc(227),a.length!==l&&nc(228),0===s)0!==l&&ip(a,r,0,l-1,n);else if(0===l){if(0!==s){let e=null==n.after&&null==n.before&&null==n.element.__lexicalLineBreak;ia(i,0,s-1,e?null:o),e&&(o.textContent="")}}else!function(t,r,n,i,s,l){let o=i-1,a=s-1,d,u,c=l.getFirstChild(),f=0,h=0;for(;f<=o&&h<=a;){let t=r[f],i=n[h];if(t===i)c=i_(e(i,l.element)),f++,h++;else{void 0===d&&(d=new Set(r)),void 0===u&&(u=new Set(n));let s=u.has(t),o=d.has(i);if(s)if(o){let t=o4(n1,i);t===c?c=i_(e(i,l.element)):(l.withBefore(c).insertChild(t),e(i,l.element)),f++,h++}else ig(i,l.withBefore(c)),h++;else c=i_(iC(t)),io(t,l.element),f++}let s=n9.get(i);null!==s&&le(s)&&null===it&&(it=s.getFormat(),ir=s.getStyle())}let g=f>o,p=h>a;if(g&&!p){let e=n[a+1],r=void 0===e?null:n1.getElementByKey(e);ip(n,t,h,a,l.withBefore(r))}else p&&!g&&ia(r,f,o,l.element)}(r,i,a,s,l,n)}o3(r)&&(ie+="\n\n"),o.__lexicalTextContent=ie,ie=i+ie}(t,r,r.getDOMSlot(n)),null==it||it===r.__textFormat||il||r.setTextFormat(it),null==ir||ir===r.__textStyle||il||r.setTextStyle(ir)}(n,i,l),l7(i)||i.isInline()||ix(n,i,l)),o3(i)&&(ie+="\n\n",ii+="\n\n"),(is||i.__dir!==n.__dir)&&(ih(l,i),l7(i)&&!is))for(let e of i.getChildren())l4(e)&&ih(o4(n1,e.getKey()),e)}else{let e=i.getTextContent();if(l9(i)){let e=i.decorate(n1,n0);null!==e&&iv(t,e)}ie+=e,ii+=e}if(!il&&l7(i)&&i.__cachedText!==ii){let e=i.getWritable();e.__cachedText=ii,i=e}return l}("root",null),n1=void 0,n2=void 0,n4=void 0,n5=void 0,n6=void 0,n9=void 0,n0=void 0,n8=void 0,n7=void 0,m=t}catch(t){if(t instanceof Error&&e._onError(t),lP)throw t;return oa(e,null,s,i),nW(e),e._dirtyType=2,lP=!0,lJ(e,o),void(lP=!1)}finally{p.observe(s,lB),e._updating=g,lO=c,lI=f,lF=h}}i._readOnly||(i._readOnly=!0);let x=e._dirtyLeaves,y=e._dirtyElements,v=e._normalizedNodes,_=e._updateTags,C=e._deferred;u&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(e,t){let r,n=e._decorators,i=e._pendingDecorators||n,s=t._nodeMap;for(r in i)s.has(r)||(i===n&&(i=oO(e)),delete i[r])}(e,i);let b=l?null:ao(at(e));if(e._editable&&null!==b&&(u||null===d||d.dirty||!d.is(a))&&null!==s&&!_.has(s$)){lF=e,lO=i;try{if(null!==p&&p.disconnect(),u||null===d||d.dirty){let t=e._blockCursorElement;null!==t&&al(t,e,s),function(e,t,r,n,i,s,l){let o=n.anchorNode,a=n.focusNode,d=n.anchorOffset,u=n.focusOffset,c=document.activeElement;if(i.has("collaboration")&&c!==s||null!==c&&om(c))return;if(!lu(t))return null!==e&&ox(r,o,a)&&n.removeAllRanges();let f=t.anchor,h=t.focus,g=f.key,p=h.key,m=o4(r,g),x=o4(r,p),y=f.offset,v=h.offset,_=t.format,C=t.style,b=t.isCollapsed(),j=m,w=x,S=!1;if("text"===f.type){j=ow(m);let e=f.getNode();S=e.getFormat()!==_||e.getStyle()!==C}else lu(e)&&"text"===e.anchor.type&&(S=!0);if("text"===h.type&&(w=ow(x)),null!==j&&null!==w&&(b&&(null===e||S||lu(e)&&(e.format!==_||e.style!==C))&&(sy=[_,C,y,g,performance.now()]),d!==y||u!==v||o!==j||a!==w||"Range"===n.type&&b||(null!==c&&s.contains(c)||i.has("skip-selection-focus")||s.focus({preventScroll:!0}),"element"===f.type))){if(lM(n,j,y,w,v),!i.has("skip-scroll-into-view")&&t.isCollapsed()&&null!==s&&s===document.activeElement){let e=lu(t)&&"element"===t.anchor.type?j.childNodes[y]||null:n.rangeCount>0?n.getRangeAt(0):null;if(null!==e){let t;if(e instanceof Text){let r=document.createRange();r.selectNode(e),t=r.getBoundingClientRect()}else t=e.getBoundingClientRect();!function(e,t,r){let n=o6(r),i=ae(n);if(null===n||null===i)return;let{top:s,bottom:l}=t,o=0,a=0,d=r;for(;null!==d;){let t=d===n.body;if(t)o=0,a=at(e).innerHeight;else{let e=d.getBoundingClientRect();o=e.top,a=e.bottom}let r=0;if(s<o?r=-(o-s):l>a&&(r=l-a),0!==r)if(t)i.scrollBy(0,r);else{let e=d.scrollTop;d.scrollTop+=r;let t=d.scrollTop-e;s-=t,l-=t}if(t)break;d=o5(d)}}(r,t,s)}}sc=!0}}(a,d,e,b,_,s)}!function(e,t,r){let n=e._blockCursorElement;if(lu(r)&&r.isCollapsed()&&"element"===r.anchor.type&&t.contains(document.activeElement)){let i=r.anchor,s=i.getNode(),l=i.offset,o=!1,a=null;if(l===s.getChildrenSize())as(s.getChildAtIndex(l-1))&&(o=!0);else{let t=s.getChildAtIndex(l);if(null!==t&&as(t)){let r=t.getPreviousSibling();(null===r||as(r))&&(o=!0,a=e.getElementByKey(t.__key))}}if(o){let r,i,l,o=e.getElementByKey(s.__key);return null===n&&(r=e._config.theme,(i=document.createElement("div")).contentEditable="false",i.setAttribute("data-lexical-cursor","true"),l=r.blockCursor,void 0!==l&&("string"==typeof l&&(l=r.blockCursor=nw(l)),void 0!==l&&i.classList.add(...l)),e._blockCursorElement=n=i),t.style.caretColor="transparent",null===a?o.appendChild(n):o.insertBefore(n,a)}}null!==n&&al(n,e,t)}(e,s,d)}finally{null!==p&&p.observe(s,lB),lF=h,lO=c}}null!==m&&function(e,t,r,n,i){let s=Array.from(e._listeners.mutation),l=s.length;for(let e=0;e<l;e++){let[l,o]=s[e];for(let e of o){let s=t.get(e);void 0!==s&&l(s,{dirtyLeaves:n,prevEditorState:i,updateTags:r})}}}(e,m,_,x,o),lu(d)||null===d||null!==a&&a.is(d)||e.dispatchCommand(ij,void 0);let j=e._pendingDecorators;null!==j&&(e._decorators=j,e._pendingDecorators=null,lQ("decorator",e,!0,j)),r=oF(t||o),r!==(n=oF(i))&&lQ("textcontent",e,!0,n),lQ("update",e,!0,{dirtyElements:y,dirtyLeaves:x,editorState:i,mutatedNodes:m,normalizedNodes:v,prevEditorState:t||o,tags:_}),function(e,t){if(e._deferred=[],0!==t.length){let r=e._updating;e._updating=!0;try{for(let e=0;e<t.length;e++)t[e]()}finally{e._updating=r}}}(e,C),function(e){let t=e._updates;if(0!==t.length){let r=t.shift();if(r){let[t,n]=r;lY(e,t,n)}}}(e)}function lQ(e,t,r){for(var n=arguments.length,i=Array(n>3?n-3:0),s=3;s<n;s++)i[s-3]=arguments[s];let l=t._updating;t._updating=r;try{let r=Array.from(t._listeners[e]);for(let e=0;e<r.length;e++)r[e].apply(null,i)}finally{t._updating=l}}function lX(e,t){let r=e._updates,n=t||!1;for(;0!==r.length;){let t=r.shift();if(t){let r,[i,s]=t,l=e._pendingEditorState;void 0!==s&&(r=s.onUpdate,s.skipTransforms&&(n=!0),s.discrete&&(null===l&&nc(191),l._flushSync=!0),r&&e._deferred.push(r),lG(e,s.tag)),null==l?lY(e,i,s):i()}}return n}function lY(e,t,r){let n=e._updateTags,i,s=!1,l=!1;void 0!==r&&(i=r.onUpdate,lG(e,r.tag),s=r.skipTransforms||!1,l=r.discrete||!1),i&&e._deferred.push(i);let o=e._editorState,a=e._pendingEditorState,d=!1;(null===a||a._readOnly)&&(a=e._pendingEditorState=oe(a||o),d=!0),a._flushSync=l;let u=lO,c=lI,f=lF,h=e._updating;lO=a,lI=!1,e._updating=!0,lF=e;let g=e._headless||null===e.getRootElement();oc=null;try{var p;let n,i;d&&(g?null!==o._selection&&(a._selection=o._selection.clone()):a._selection=(p=r&&r.event||null,n=e.getEditorState()._selection,i=ao(at(e)),lu(n)||null==n?lw(n,i,e,p):n.clone()));let l=e._compositionKey;t(),s=lX(e,s),function(e,t){let r=t.getEditorState()._selection,n=e._selection;if(lu(n)){let e,t=n.anchor,i=n.focus;if("text"===t.type&&(e=t.getNode()).selectionTransform(r,n),"text"===i.type){let t=i.getNode();e!==t&&t.selectionTransform(r,n)}}}(a,e),0!==e._dirtyType&&(s?function(e,t){let r=t._dirtyLeaves,n=e._nodeMap;for(let e of r){let t=n.get(e);le(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&nQ(t)}}(a,e):function(e,t){let r=t._dirtyLeaves,n=t._dirtyElements,i=e._nodeMap,s=oT(),l=new Map,o=r,a=o.size,d=n,u=d.size;for(;a>0||u>0;){if(a>0){for(let e of(t._dirtyLeaves=new Set,o)){let n=i.get(e);le(n)&&n.isAttached()&&n.isSimpleText()&&!n.isUnmergeable()&&nQ(n),void 0!==n&&lH(n,s)&&lV(t,n,l),r.add(e)}if((a=(o=t._dirtyLeaves).size)>0){lR++;continue}}for(let e of(t._dirtyLeaves=new Set,t._dirtyElements=new Map,d.delete("root")&&d.set("root",!0),d)){let r=e[0],o=e[1];if(n.set(r,o),!o)continue;let a=i.get(r);void 0!==a&&lH(a,s)&&lV(t,a,l)}a=(o=t._dirtyLeaves).size,u=(d=t._dirtyElements).size,lR++}t._dirtyLeaves=r,t._dirtyElements=n}(a,e),lX(e),function(e,t,r,n){let i=e._nodeMap,s=t._nodeMap,l=[];for(let[e]of n){let t=s.get(e);void 0!==t&&(t.isAttached()||(l4(t)&&function e(t,r,n,i,s,l){let o=t.getFirstChild();for(;null!==o;){let t=o.__key;o.__parent===r&&(l4(o)&&e(o,t,n,i,s,l),n.has(t)||l.delete(t),s.push(t)),o=o.getNextSibling()}}(t,e,i,s,l,n),i.has(e)||n.delete(e),l.push(e)))}for(let e of l)s.delete(e);for(let e of r){let t=s.get(e);void 0===t||t.isAttached()||(i.has(e)||r.delete(e),s.delete(e))}}(o,a,e._dirtyLeaves,e._dirtyElements)),l!==e._compositionKey&&(a._flushSync=!0);let u=a._selection;if(lu(u)){let e=a._nodeMap,t=u.anchor.key,r=u.focus.key;void 0!==e.get(t)&&void 0!==e.get(r)||nc(19)}else lf(u)&&0===u._nodes.size&&(a._selection=null)}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=o,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void lJ(e)}finally{lO=u,lI=c,lF=f,e._updating=h,lR=0}0!==e._dirtyType||e._deferred.length>0||function(e,t){let r=t.getEditorState()._selection,n=e._selection;if(null!==n){if(n.dirty||!n.is(r))return!0}else if(null!==r)return!0;return!1}(a,e)?a._flushSync?(a._flushSync=!1,lJ(e)):d&&op(()=>{lJ(e)}):(a._flushSync=!1,d&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function l0(e,t,r){lF===e&&void 0===r?t():lY(e,t,r)}class l1{element;before;after;constructor(e,t,r){this.element=e,this.before=t||null,this.after=r||null}withBefore(e){return new l1(this.element,e,this.after)}withAfter(e){return new l1(this.element,this.before,e)}withElement(e){return this.element===e?this:new l1(e,this.before,this.after)}insertChild(e){let t=this.before||this.getManagedLineBreak();return null!==t&&t.parentElement!==this.element&&nc(222),this.element.insertBefore(e,t),this}removeChild(e){return e.parentElement!==this.element&&nc(223),this.element.removeChild(e),this}replaceChild(e,t){return t.parentElement!==this.element&&nc(224),this.element.replaceChild(e,t),this}getFirstChild(){let e=this.after?this.after.nextSibling:this.element.firstChild;return e===this.before||e===this.getManagedLineBreak()?null:e}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(e){null===e?this.removeManagedLineBreak():this.insertManagedLineBreak("decorator"===e&&(nj||nv||ny))}removeManagedLineBreak(){let e=this.getManagedLineBreak();if(e){let t=this.element,r="IMG"===e.nodeName?e.nextSibling:null;r&&t.removeChild(r),t.removeChild(e),t.__lexicalLineBreak=void 0}}insertManagedLineBreak(e){let t=this.getManagedLineBreak();if(t){if(e===("IMG"===t.nodeName))return;this.removeManagedLineBreak()}let r=this.element,n=this.before,i=document.createElement("br");if(r.insertBefore(i,n),e){let e=document.createElement("img");e.setAttribute("data-lexical-linebreak","true"),e.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",e.alt="",r.insertBefore(e,i),r.__lexicalLineBreak=e}else r.__lexicalLineBreak=i}getFirstChildOffset(){let e=0;for(let t=this.after;null!==t;t=t.previousSibling)e++;return e}resolveChildIndex(e,t,r,n){if(r===this.element){let t=this.getFirstChildOffset();return[e,Math.min(t+e.getChildrenSize(),Math.max(t,n))]}let i=l2(t,r);i.push(n);let s=l2(t,this.element),l=e.getIndexWithinParent();for(let e=0;e<s.length;e++){let t=i[e],r=s[e];if(void 0===t||t<r)break;if(t>r){l+=1;break}}return[e.getParentOrThrow(),l]}}function l2(e,t){let r=[],n=t;for(;n!==e&&null!==n;n=n.parentNode){let e=0;for(let t=n.previousSibling;null!==t;t=t.previousSibling)e++;r.push(e)}return n!==e&&nc(225),r.reverse()}class l3 extends sq{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(e){super.afterCloneFrom(e),this.__key===e.__key&&(this.__first=e.__first,this.__last=e.__last,this.__size=e.__size),this.__indent=e.__indent,this.__format=e.__format,this.__style=e.__style,this.__dir=e.__dir,this.__textFormat=e.__textFormat,this.__textStyle=e.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){return nD[this.getFormat()]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=lK()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){let e=[],t=this.getFirstChild();for(;null!==t;){if(le(t)&&e.push(t),l4(t)){let r=t.getAllTextNodes();e.push(...r)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;l4(e);){let t=e.getFirstChild();if(null===t)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;l4(e);){let t=e.getLastChild();if(null===t)break;e=t}return e}getDescendantByIndex(e){let t=this.getChildren(),r=t.length;if(e>=r){let e=t[r-1];return l4(e)&&e.getLastDescendant()||e||null}let n=t[e];return l4(n)&&n.getFirstDescendant()||n||null}getFirstChild(){let e=this.getLatest().__first;return null===e?null:oL(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&nc(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return null===e?null:oL(e)}getLastChildOrThrow(){let e=this.getLastChild();return null===e&&nc(96,this.__key),e}getChildAtIndex(e){let t,r,n=this.getChildrenSize();if(e<n/2){for(t=this.getFirstChild(),r=0;null!==t&&r<=e;){if(r===e)return t;t=t.getNextSibling(),r++}return null}for(t=this.getLastChild(),r=n-1;null!==t&&r>=e;){if(r===e)return t;t=t.getPreviousSibling(),r--}return null}getTextContent(){let e="",t=this.getChildren(),r=t.length;for(let n=0;n<r;n++){let i=t[n];e+=i.getTextContent(),l4(i)&&n!==r-1&&!i.isInline()&&(e+="\n\n")}return e}getTextContentSize(){let e=0,t=this.getChildren(),r=t.length;for(let n=0;n<r;n++){let i=t[n];e+=i.getTextContentSize(),l4(i)&&n!==r-1&&!i.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(e){if(""!==e){let t=nM[e];return 0!=(this.getFormat()&t)}return!1}hasTextFormat(e){let t=nT[e];return 0!=(this.getTextFormat()&t)}getFormatFlags(e,t){return oS(this.getLatest().__textFormat,e,t)}getTextStyle(){return this.getLatest().__textStyle}select(e,t){lz();let r=lS(),n=e,i=t,s=this.getChildrenSize();if(!this.canBeEmpty()){if(0===e&&0===t){let e=this.getFirstChild();if(le(e)||l4(e))return e.select(0,0)}else if((void 0===e||e===s)&&(void 0===t||t===s)){let e=this.getLastChild();if(le(e)||l4(e))return e.select()}}void 0===n&&(n=s),void 0===i&&(i=s);let l=this.__key;return lu(r)?(r.anchor.set(l,n,"element"),r.focus.set(l,i,"element"),r.dirty=!0,r):lb(l,n,l,i,"element","element")}selectStart(){let e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){let e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach(e=>e.remove()),e}append(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.splice(this.getChildrenSize(),0,t)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?nM[e]:0,this}setStyle(e){return this.getWritable().__style=e||"",this}setTextFormat(e){let t=this.getWritable();return t.__textFormat=e,t}setTextStyle(e){let t=this.getWritable();return t.__textStyle=e,t}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,r){sB(this)&&nc(324,this.__key,this.__type);let n=this.getChildrenSize(),i=this.getWritable();e+t<=n||nc(226,String(e),String(t),String(n));let s=i.__key,l=[],o=[],a=this.getChildAtIndex(e+t),d=null,u=n-t+r.length;if(0!==e)if(e===n)d=this.getLastChild();else{let t=this.getChildAtIndex(e);null!==t&&(d=t.getPreviousSibling())}if(t>0){let e=null===d?this.getFirstChild():d.getNextSibling();for(let r=0;r<t;r++){null===e&&nc(100);let t=e.getNextSibling(),r=e.__key;oN(e.getWritable()),o.push(r),e=t}}let c=d;for(let e of r){null!==c&&e.is(c)&&(d=c=c.getPreviousSibling());let t=e.getWritable();t.__parent===s&&u--,oN(t);let r=e.__key;if(null===c)i.__first=r,t.__prev=null;else{let e=c.getWritable();e.__next=r,t.__prev=e.__key}e.__key===s&&nc(76),t.__parent=s,l.push(r),c=e}if(e+t===n)null!==c&&(c.getWritable().__next=null,i.__last=c.__key);else if(null!==a){let e=a.getWritable();if(null!==c){let t=c.getWritable();e.__prev=c.__key,t.__next=a.__key}else e.__prev=null}if(i.__size=u,o.length){let e=lS();if(lu(e)){let t=new Set(o),r=new Set(l),{anchor:n,focus:i}=e;l5(n,t,r)&&lT(n,n.getNode(),this,d,a),l5(i,t,r)&&lT(i,i.getNode(),this,d,a),0!==u||this.canBeEmpty()||ar(this)||this.remove()}}return i}getDOMSlot(e){return new l1(e)}exportDOM(e){let{element:t}=super.exportDOM(e);if(aa(t)){let e=this.getIndent();e>0&&(t.style.paddingInlineStart=40*e+"px");let r=this.getDirection();r&&(t.dir=r)}return{element:t}}exportJSON(){let e={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},t=this.getTextFormat(),r=this.getTextStyle();return 0===t&&""===r||ar(this)||this.getChildren().some(le)||(0!==t&&(e.textFormat=t),""!==r&&(e.textStyle=r)),e}updateFromJSON(e){return super.updateFromJSON(e).setFormat(e.format).setIndent(e.indent).setDirection(e.direction).setTextFormat(e.textFormat||0).setTextStyle(e.textStyle||"")}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(e,t){let r=this.getDOMSlot(e),n=r.getFirstChild();for(let e=this.getFirstChild();e;e=e.getNextSibling()){let i=t.getElementByKey(e.getKey());null!==i&&(null==n?(r.insertChild(i),n=i):n!==i&&r.replaceChild(i,n),n=n.nextSibling)}}}function l4(e){return e instanceof l3}function l5(e,t,r){let n=e.getNode();for(;n;){let e=n.__key;if(t.has(e)&&!r.has(e))return!0;n=n.getParent()}return!1}class l6 extends sq{decorate(e,t){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function l9(e){return e instanceof l6}class l8 extends l3{__cachedText;static getType(){return"root"}static clone(){return new l8}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){nc(51)}getTextContent(){let e=this.__cachedText;return(lq()||0===lK()._dirtyType)&&null!==e?e:super.getTextContent()}remove(){nc(52)}replace(e){nc(53)}insertBefore(e){nc(54)}insertAfter(e){nc(55)}updateDOM(e,t){return!1}splice(e,t,r){for(let e of r)l4(e)||l9(e)||nc(282);return super.splice(e,t,r)}static importJSON(e){return oI().updateFromJSON(e)}collapseAtStart(){return!0}}function l7(e){return e instanceof l8}function oe(e){return new or(new Map(e._nodeMap))}function ot(){return new or(new Map([["root",new l8]]))}class or{_nodeMap;_selection;_flushSync;_readOnly;constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e,t){return lZ(t&&t.editor||null,this,e)}clone(e){let t=new or(this._nodeMap,void 0===e?this._selection:e);return t._readOnly=!0,t}toJSON(){return lZ(null,this,()=>({root:function e(t){let r=t.exportJSON(),n=t.constructor;if(r.type!==n.getType()&&nc(130,n.name),l4(t)){let i=r.children;Array.isArray(i)||nc(59,n.name);let s=t.getChildren();for(let t=0;t<s.length;t++){let r=e(s[t]);i.push(r)}}return r}(oI())}))}}class on extends l3{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class oi extends l3{static getType(){return"paragraph"}static clone(e){return new oi(e.__key)}createDOM(e){let t=document.createElement("p"),r=oX(e.theme,"paragraph");return void 0!==r&&t.classList.add(...r),t}updateDOM(e,t,r){return!1}static importDOM(){return{p:e=>({conversion:os,priority:0})}}exportDOM(e){let{element:t}=super.exportDOM(e);if(aa(t)){this.isEmpty()&&t.append(document.createElement("br"));let e=this.getFormatType();e&&(t.style.textAlign=e)}return{element:t}}static importJSON(e){return ol().updateFromJSON(e)}exportJSON(){let e=super.exportJSON();if(void 0===e.textFormat||void 0===e.textStyle){let t=this.getChildren().find(le);t?(e.textFormat=t.getFormat(),e.textStyle=t.getStyle()):(e.textFormat=this.getTextFormat(),e.textStyle=this.getTextStyle())}return e}insertNewAfter(e,t){let r=ol();r.setTextFormat(e.format),r.setTextStyle(e.style);let n=this.getDirection();return r.setDirection(n),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,t),r}collapseAtStart(){let e=this.getChildren();if(0===e.length||le(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function os(e){var t,r;let n,i=ol();return e.style&&(i.setFormat(e.style.textAlign),t=e,r=i,n=Math.round((parseInt(t.style.paddingInlineStart,10)||0)/40),r.setIndent(n)),{node:i}}function ol(){return an(new oi)}function oo(e){return e instanceof oi}function oa(e,t,r,n){let i=e._keyToDOMMap;i.clear(),e._editorState=ot(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;let s=e._observer;null!==s&&(s.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==r&&(r.textContent="",i.set("root",r))}function od(e){var t,r;let n,i,s,l,o=e||{},a=lF,d=o.theme||{},u=void 0===e?a:o.parentEditor||null,c=o.disableEvents||!1,f=ot(),h=o.namespace||(null!==u?u._config.namespace:oW()),g=o.editorState,p=[l8,s1,sK,lr,oi,on,...o.nodes||[]],{onError:m,html:x}=o,y=void 0===o.editable||o.editable;if(void 0===e&&null!==a)n=a._nodes;else{n=new Map;for(let e=0;e<p.length;e++){let t=p[e],r=null,i=null;if("function"!=typeof t){let e=t;t=e.replace,r=e.with,i=e.withKlass||null}ay(t);let s=t.getType(),l=function(e){let t=new Set,r=new Set,n=e;for(;n;){let{ownNodeConfig:e}=ay(n),i=n.transform;if(!r.has(i)){r.add(i);let e=n.transform();e&&t.add(e)}if(e){let r=e.$transform;r&&t.add(r),n=e.extends}else{let e=Object.getPrototypeOf(n);n=e.prototype instanceof sq&&e!==sq?e:void 0}}return t}(t);n.set(s,{exportDOM:x&&x.export?x.export.get(t):void 0,klass:t,replace:r,replaceWithKlass:i,sharedNodeState:function(e){let t=new Map,r=new Set;for(let n="function"==typeof e?e:e.replace;n.prototype&&void 0!==n.prototype.getType;n=Object.getPrototypeOf(n)){let{ownNodeConfig:e}=ay(n);if(e&&e.stateConfigs)for(let n of e.stateConfigs){let e;"stateConfig"in n?(e=n.stateConfig,n.flat&&r.add(e.key)):e=n,t.set(e.key,e)}}return{flatKeys:r,sharedConfigMap:t}}(p[e]),transforms:l})}}let v=new ou(f,u,n,{disableEvents:c,namespace:h,theme:d},m||console.error,(t=n,r=x?x.import:void 0,i=new Map,s=new Set,l=e=>{Object.keys(e).forEach(t=>{let r=i.get(t);void 0===r&&(r=[],i.set(t,r)),r.push(e[t])})},t.forEach(e=>{let t=e.klass.importDOM;if(null==t||s.has(t))return;s.add(t);let r=t.call(e.klass);null!==r&&l(r)}),r&&l(r),i),y,e);return void 0!==g&&(v._pendingEditorState=g,v._dirtyType=2),v.registerCommand(iS,sS,0),v.registerCommand(iN,sN,0),v.registerCommand(ik,sk,0),v.registerCommand(iE,sE,0),v.registerCommand(iq,sL,0),v}class ou{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(e,t,r,n,i,s,l,o){this._createEditorArgs=o,this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=n,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=oW(),this._onError=i,this._htmlConversions=s,this._editable=l,this._headless=null!==t&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,r){void 0===r&&nc(35);let n=this._commands;n.has(e)||n.set(e,[new Set,new Set,new Set,new Set,new Set]);let i=n.get(e);void 0===i&&nc(36,String(e));let s=i[r];return s.add(t),()=>{s.delete(t),i.every(e=>0===e.size)&&n.delete(e)}}registerMutationListener(e,t,r){let n=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(e)).klass,i=this._listeners.mutation,s=i.get(t);void 0===s&&(s=new Set,i.set(t,s)),s.add(n);let l=r&&r.skipInitialization;return void 0!==l&&l||this.initializeMutationListener(t,n),()=>{s.delete(n),0===s.size&&i.delete(t)}}getRegisteredNode(e){let t=this._nodes.get(e.getType());return void 0===t&&nc(37,e.name),t}resolveRegisteredNodeAfterReplacements(e){for(;e.replaceWithKlass;)e=this.getRegisteredNode(e.replaceWithKlass);return e}initializeMutationListener(e,t){let r=this._editorState,n=ap(r).get(t.getType());if(!n)return;let i=new Map;for(let e of n.keys())i.set(e,"created");i.size>0&&e(i,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(e,t){let r=this.getRegisteredNode(e);return r.transforms.add(t),r}registerNodeTransform(e,t){let r=this.registerNodeTransformToKlass(e,t),n=[r],i=r.replaceWithKlass;if(null!=i){let e=this.registerNodeTransformToKlass(i,t);n.push(e)}return function(e,t){let r=ap(e.getEditorState()),n=[];for(let e of t){let t=r.get(e);t&&n.push(t)}0!==n.length&&e.update(()=>{for(let e of n)for(let t of e.keys()){let e=oL(t);e&&e.markDirty()}},null===e._pendingEditorState?{tag:sW}:void 0)}(this,n.map(e=>e.klass.getType())),()=>{n.forEach(e=>e.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return o2(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let t=this._rootElement;if(e!==t){let r=oX(this._config.theme,"root"),n=this._pendingEditorState||this._editorState;if(this._rootElement=e,oa(this,t,e,n),null!==t&&(this._config.disableEvents||function(e){let t=sd.get(e);if(void 0===t)return sI();let r=su.get(t);if(void 0===r)return sI();let n=r-1;n>=0||nc(164),sd.delete(e),su.set(t,n),0===n&&t.removeEventListener("selectionchange",sA);let i=o_(e);oy(i)?(!function(e){if(null!==e._parentEditor){let t=oz(e),r=t[t.length-1]._key;sD.get(r)===e&&sD.delete(r)}else sD.delete(e._key)}(i),e.__lexicalEditor=null):i&&nc(198);let s=sM(e);for(let e=0;e<s.length;e++)s[e]();e.__lexicalEventHandles=[]}(t),null!=r&&t.classList.remove(...r)),null!==e){let t=ae(e),n=e.style;n.userSelect="text",n.whiteSpace="pre-wrap",n.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=t,this._dirtyType=2,nW(this),this._updateTags.add(sW),lJ(this),this._config.disableEvents||function(e,t){let r=e.ownerDocument;sd.set(e,r);let n=su.get(r)??0;n<1&&r.addEventListener("selectionchange",sA),su.set(r,n+1),e.__lexicalEditor=t;let i=sM(e);for(let r=0;r<si.length;r++){let[n,s]=si[r],l="function"==typeof s?e=>{sF(e)||(sO(e),(t.isEditable()||"click"===n)&&s(e,t))}:e=>{if(sF(e))return;sO(e);let r=t.isEditable();switch(n){case"cut":return r&&o2(t,i4,e);case"copy":return o2(t,i3,e);case"paste":return r&&o2(t,iA,e);case"dragstart":return r&&o2(t,i0,e);case"dragover":return r&&o2(t,i1,e);case"dragend":return r&&o2(t,i2,e);case"focus":return r&&o2(t,se,e);case"blur":return r&&o2(t,st,e);case"drop":return r&&o2(t,iY,e)}};e.addEventListener(n,l),i.push(()=>{e.removeEventListener(n,l)})}}(e,this),null!=r&&e.classList.add(...r)}else this._window=null,this._updateTags.add(sW),lJ(this);lQ("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&nc(38);let r=e;r._readOnly&&((r=oe(e))._selection=e._selection?e._selection.clone():null),nz(this);let n=this._pendingEditorState,i=this._updateTags,s=void 0!==t?t.tag:null;null===n||n.isEmpty()||(null!=s&&i.add(s),lJ(this)),this._pendingEditorState=r,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=s&&i.add(s),this._updating||lJ(this)}parseEditorState(e,t){return function(e,t,r){let n=ot(),i=lO,s=lI,l=lF,o=t._dirtyElements,a=t._dirtyLeaves,d=t._cloneNotNeeded,u=t._dirtyType;t._dirtyElements=new Map,t._dirtyLeaves=new Set,t._cloneNotNeeded=new Set,t._dirtyType=0,lO=n,lI=!1,lF=t,oc=null;try{let i=t._nodes;(function e(t,r){let n=t.type,i=r.get(n);void 0===i&&nc(17,n);let s=i.klass;t.type!==s.getType()&&nc(18,s.name);let l=s.importJSON(t),o=t.children;if(l4(l)&&Array.isArray(o))for(let t=0;t<o.length;t++){let n=e(o[t],r);l.append(n)}return l})(e.root,i),r&&r(),n._readOnly=!0}catch(e){e instanceof Error&&t._onError(e)}finally{t._dirtyElements=o,t._dirtyLeaves=a,t._cloneNotNeeded=d,t._dirtyType=u,lO=i,lI=s,lF=l}return n}("string"==typeof e?JSON.parse(e):e,this,t)}read(e){return lJ(this),this.getEditorState().read(e,{editor:this})}update(e,t){this._updating?this._updates.push([e,t]):lY(this,e,t)}focus(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._rootElement;null!==r&&(r.setAttribute("autocapitalize","off"),l0(this,()=>{let n=lS(),i=oI();null!==n?n.dirty||oR(n.clone()):0!==i.getChildrenSize()&&("rootStart"===t.defaultSelection?i.selectStart():i.selectEnd()),o9("focus"),o8(()=>{r.removeAttribute("autocapitalize"),e&&e()})}),null===this._pendingEditorState&&r.removeAttribute("autocapitalize"))}blur(){let e=this._rootElement;null!==e&&e.blur();let t=ao(this._window);null!==t&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,lQ("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}ou.version="0.39.0+prod.esm";let oc=null,of=1;function oh(e,t){let r=og(e,t);return void 0===r&&nc(30,t),r}function og(e,t){return e._nodes.get(t)}let op="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function om(e){let t=document.activeElement;if(!aa(t))return!1;let r=t.nodeName;return l9(oA(e))&&("INPUT"===r||"TEXTAREA"===r||"true"===t.contentEditable&&null==o_(t))}function ox(e,t,r){let n=e.getRootElement();try{return null!==n&&n.contains(t)&&n.contains(r)&&null!==t&&!om(t)&&ov(t)===e}catch(e){return!1}}function oy(e){return e instanceof ou}function ov(e){let t=e;for(;null!=t;){let e=o_(t);if(oy(e))return e;t=o5(t)}return null}function o_(e){return e?e.__lexicalEditor:null}function oC(e){return li(e)||e.isToken()}function ob(e){return oC(e)||e.isSegmented()}function oj(e){return ad(e)&&3===e.nodeType}function ow(e){let t=e;for(;null!=t;){if(oj(t))return t;t=t.firstChild}return null}function oS(e,t,r){let n=nT[t];if(null!==r&&(e&n)==(r&n))return e;let i=e^n;return"subscript"===t?i&=~nT.superscript:"superscript"===t?i&=~nT.subscript:"lowercase"===t?(i&=~nT.uppercase,i&=~nT.capitalize):"uppercase"===t?(i&=~nT.lowercase,i&=~nT.capitalize):"capitalize"===t&&(i&=~nT.lowercase,i&=~nT.uppercase),i}function oN(e){let t=e.getParent();if(null!==t){let r=e.getWritable(),n=t.getWritable(),i=e.getPreviousSibling(),s=e.getNextSibling(),l=null!==s?s.__key:null,o=null!==i?i.__key:null,a=null!==i?i.getWritable():null,d=null!==s?s.getWritable():null;null===i&&(n.__first=l),null===s&&(n.__last=o),null!==a&&(a.__next=l),null!==d&&(d.__prev=o),r.__prev=null,r.__next=null,r.__parent=null,n.__size--}}function ok(e){lW(),sB(e)&&nc(323,e.__key,e.__type);let t=e.getLatest(),r=t.__parent,n=l$(),i=lK(),s=n._nodeMap,l=i._dirtyElements;null!==r&&function(e,t,r){let n=e;for(;null!==n;){if(r.has(n))return;let e=t.get(n);if(void 0===e)break;r.set(n,!1),n=e.__parent}}(r,s,l);let o=t.__key;i._dirtyType=1,l4(e)?l.set(o,!0):i._dirtyLeaves.add(o)}function oE(e){lz();let t=lK(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,null!==r){let e=oL(r);null!==e&&e.getWritable()}if(null!==e){let t=oL(e);null!==t&&t.getWritable()}}}function oT(){return lq()?null:lK()._compositionKey}function oL(e,t){let r=(t||l$())._nodeMap.get(e);return void 0===r?null:r}function oM(e,t){let r=oD(e,lK());return void 0!==r?oL(r,t):null}function oD(e,t){return e[`__lexicalKey_${t._key}`]}function oA(e,t){let r=e;for(;null!=r;){let e=oM(r,t);if(null!==e)return e;r=o5(r)}return null}function oO(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t,t}function oF(e){return e.read(()=>oI().getTextContent())}function oI(){return oP(l$())}function oP(e){return e._nodeMap.get("root")}function oR(e){lz();let t=l$();null!==e&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function oB(e){let t=lK(),r=function(e,t){let r=e;for(;null!=r;){let e=oD(r,t);if(void 0!==e)return e;r=o5(r)}return null}(e,t);return null===r?e===t.getRootElement()?oL("root"):null:oL(r)}function oq(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function oz(e){let t=[],r=e;for(;null!==r;)t.push(r),r=r._parentEditor;return t}function oW(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function o$(e){return oj(e)?e.nodeValue:null}function oK(e,t,r){let n=ao(at(t));if(null===n)return;let i=n.anchorNode,{anchorOffset:s,focusOffset:l}=n;if(null!==i){let t=o$(i),n=oA(i);if(null!==t&&le(n)){if(t===nS&&r){let e=r.length;t=r,s=e,l=e}null!==t&&oU(n,t,s,l,e)}}}function oU(e,t,r,n,i){let s=e;if(s.isAttached()&&(i||!s.isDirty())){let l=s.isComposing(),o=t;(l||i)&&t[t.length-1]===nS&&(o=t.slice(0,-1));let a=s.getTextContent();if(i||o!==a){if(""===o){if(oE(null),ny||nv||nj)s.remove();else{let e=lK();setTimeout(()=>{e.update(()=>{s.isAttached()&&s.remove()})},20)}return}let t=s.getParent(),i=lN(),a=s.getTextContentSize(),d=oT(),u=s.getKey();if(s.isToken()||null!==d&&u===d&&!l||lu(i)&&(null!==t&&!t.canInsertTextBefore()&&0===i.anchor.offset||i.anchor.key===e.__key&&0===i.anchor.offset&&!s.canInsertTextBefore()&&!l||i.focus.key===e.__key&&i.focus.offset===a&&!s.canInsertTextAfter()&&!l))return void s.markDirty();let c=lS();if(!lu(c)||null===r||null===n)return void oV(s,o,c);if(c.setTextNodeRange(s,r,s,n),s.isSegmented()){let e=s7(s.getTextContent());s.replace(e),s=e}oV(s,o,c)}}}function oV(e,t,r){if(e.setTextContent(t),lu(r)){let t=e.getKey();for(let n of["anchor","focus"]){let i=r[n];"text"===i.type&&i.key===t&&(i.offset=aF(e,i.offset,"clamp"))}}}function oH(e,t,r){let n=t[r]||!1;return"any"===n||n===e[r]}function oG(e,t,r){return oH(e,r,"altKey")&&oH(e,r,"ctrlKey")&&oH(e,r,"shiftKey")&&oH(e,r,"metaKey")&&e.key.toLowerCase()===t.toLowerCase()}let oZ={ctrlKey:!np,metaKey:np},oJ={altKey:np,ctrlKey:!np};function oQ(e){return"Backspace"===e.key}function oX(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});let r=e.__lexicalClassNameCache,n=r[t];if(void 0!==n)return n;let i=e[t];if("string"==typeof i){let e=nw(i);return r[t]=e,e}return i}function oY(e,t,r,n,i){if(0===r.size)return;let s=n.__type,l=n.__key,o=t.get(s);void 0===o&&nc(33,s);let a=o.klass,d=e.get(a);void 0===d&&(d=new Map,e.set(a,d));let u=d.get(l),c="destroyed"===u&&"created"===i;(void 0===u||c)&&d.set(l,c?"updated":i)}function o0(e,t,r){let n=e.getParent(),i=r,s=e;return null!==n&&(t&&0===r?(i=s.getIndexWithinParent(),s=n):t||r!==s.getChildrenSize()||(i=s.getIndexWithinParent()+1,s=n)),s.getChildAtIndex(t?i-1:i)}function o1(e){let t=at(e).event,r=t&&t.inputType;return"insertFromPaste"===r||"insertFromPasteAsQuotation"===r}function o2(e,t,r){return function(e,t,r){let n=oz(e);for(let i=4;i>=0;i--)for(let s=0;s<n.length;s++){let l=n[s],o=l._commands.get(t);if(void 0!==o){let t=o[i];if(void 0!==t){let n=Array.from(t),i=n.length,s=!1;if(l0(l,()=>{for(let t=0;t<i;t++)if(n[t](r,e))return void(s=!0)}),s)return s}}}return!1}(e,t,r)}function o3(e){return!l7(e)&&!e.isLastChild()&&!e.isInline()}function o4(e,t){let r=e._keyToDOMMap.get(t);return void 0===r&&nc(75,t),r}function o5(e){let t=e.assignedSlot||e.parentElement;return au(t)?t.host:t}function o6(e){return ad(e)&&9===e.nodeType?e:aa(e)?e.ownerDocument:null}function o9(e){lz(),lK()._updateTags.add(e)}function o8(e){lz(),lK()._deferred.push(e)}function o7(e,t){let r=e.getParent();for(;null!==r;){if(r.is(t))return!0;r=r.getParent()}return!1}function ae(e){let t=o6(e);return t?t.defaultView:null}function at(e){let t=e._window;return null===t&&nc(78),t}function ar(e){return l7(e)||l4(e)&&e.isShadowRoot()}function an(e){let t=lK(),r=e.getType(),n=og(t,r);void 0===n&&nc(200,e.constructor.name,r);let{replace:i,replaceWithKlass:s}=n;if(null!==i){let t=i(e),n=t.constructor;return null!==s?t instanceof s||nc(201,s.name,s.getType(),n.name,n.getType(),e.constructor.name,r):t instanceof e.constructor&&n!==e.constructor||nc(202,n.name,n.getType(),e.constructor.name,r),t.__key===e.__key&&nc(203,e.constructor.name,r,n.name,n.getType()),t}return e}function ai(e,t){!l7(e.getParent())||l4(t)||l9(t)||nc(99)}function as(e){return(l9(e)||l4(e)&&!e.canBeEmpty())&&!e.isInline()}function al(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;let n=e.parentElement;null!==n&&n.removeChild(e)}function ao(e){return nh?(e||window).getSelection():null}function aa(e){return ad(e)&&1===e.nodeType}function ad(e){return"object"==typeof e&&null!==e&&"nodeType"in e&&"number"==typeof e.nodeType}function au(e){return ad(e)&&11===e.nodeType}function ac(e){let t=RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==e.nodeName.match(t)}function af(e){if(l9(e)&&!e.isInline())return!0;if(!l4(e)||ar(e))return!1;let t=e.getFirstChild(),r=null===t||sH(t)||le(t)||t.isInline();return!e.isInline()&&!1!==e.canBeEmpty()&&r}let ah=new WeakMap,ag=new Map;function ap(e){if(!e._readOnly&&e.isEmpty())return ag;e._readOnly||nc(192);let t=ah.get(e);return t||(t=function(e){let t=new Map;for(let[r,n]of e._nodeMap){let e=n.__type,i=t.get(e);i||(i=new Map,t.set(e,i)),i.set(r,n)}return t}(e),ah.set(e,t)),t}function am(e){let t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function ax(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==sq[t]}function ay(e){let t=nF in e.prototype?e.prototype[nF]():void 0,r=function(e){if(!(e===sq||e.prototype instanceof sq)){let t="<unknown>",r="<unknown>";try{t=e.getType()}catch(e){}try{ou.version&&(r=JSON.parse(ou.version))}catch(e){}nc(290,e.name,t,r)}return e===l6||e===l3||e===sq}(e),n=!r&&ax(e,"getType")?e.getType():void 0,i,s=n;if(t)if(n)i=t[n];else for(let[e,r]of Object.entries(t))s=e,i=r;if(!r&&s&&(ax(e,"getType")||(e.getType=()=>s),ax(e,"clone")||(e.clone=t=>(oc=t,new e)),ax(e,"importJSON")||(e.importJSON=i&&i.$importJSON||(t=>(new e).updateFromJSON(t))),!ax(e,"importDOM")&&i)){let{importDOM:t}=i;t&&(e.importDOM=()=>t)}return{ownNodeConfig:i,ownNodeType:s}}let av=(e,t)=>{let r=e;for(;null!=r&&!l7(r);){if(t(r))return r;r=r.getParent()}return null},a_={next:"previous",previous:"next"};class aC{origin;constructor(e){this.origin=e}[Symbol.iterator](){return aW({hasNext:aE,initial:this.getAdjacentCaret(),map:e=>e,step:e=>e.getAdjacentCaret()})}getAdjacentCaret(){return aA(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return aA(this.origin,this.direction)}remove(){let e=this.getNodeAtCaret();return e&&e.remove(),this}replaceOrInsert(e,t){let r=this.getNodeAtCaret();return e.is(this.origin)||e.is(r)||(null===r?this.insert(e):r.replace(e,t)),this}splice(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"next",n=r===this.direction?t:Array.from(t).reverse(),i=this,s=this.getParentAtCaret(),l=new Map;for(let t=i.getAdjacentCaret();null!==t&&l.size<e;t=t.getAdjacentCaret()){let e=t.origin.getWritable();l.set(e.getKey(),e)}for(let e of n){if(l.size>0){let t=i.getNodeAtCaret();if(t)if(l.delete(t.getKey()),l.delete(e.getKey()),t.is(e)||i.origin.is(e));else{let r=e.getParent();r&&r.is(s)&&e.remove(),t.replace(e)}else null===t&&nc(263,Array.from(l).join(" "))}else i.insert(e);i=aA(e,this.direction)}for(let e of l.values())e.remove();return this}}class ab extends aC{type="child";getLatest(){let e=this.origin.getLatest();return e===this.origin?this:aI(e,this.direction)}getParentCaret(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return aA(aw(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=a_[this.direction];return aA(this.getNodeAtCaret(),e)||aI(this.origin,e)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(e){return e instanceof ab&&this.direction===e.direction&&this.origin.is(e.origin)}isSamePointCaret(e){return this.isSameNodeCaret(e)}}let aj={root:l7,shadowRoot:ar};function aw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root";return aj[t](e)?null:e}class aS extends aC{type="sibling";getLatest(){let e=this.origin.getLatest();return e===this.origin?this:aA(e,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return l4(this.origin)?aI(this.origin,this.direction):null}getParentCaret(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return aA(aw(this.getParentAtCaret(),e),this.direction)}getFlipped(){let e=a_[this.direction];return aA(this.getNodeAtCaret(),e)||aI(this.origin.getParentOrThrow(),e)}isSamePointCaret(e){return e instanceof aS&&this.direction===e.direction&&this.origin.is(e.origin)}isSameNodeCaret(e){return(e instanceof aS||e instanceof aN)&&this.direction===e.direction&&this.origin.is(e.origin)}}class aN extends aC{type="text";offset;constructor(e,t){super(e),this.offset=t}getLatest(){let e=this.origin.getLatest();return e===this.origin?this:aO(e,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return aA(aw(this.getParentAtCaret(),e),this.direction)}getFlipped(){return aO(this.origin,a_[this.direction],this.offset)}isSamePointCaret(e){return e instanceof aN&&this.direction===e.direction&&this.origin.is(e.origin)&&this.offset===e.offset}isSameNodeCaret(e){return(e instanceof aS||e instanceof aN)&&this.direction===e.direction&&this.origin.is(e.origin)}getSiblingCaret(){return aA(this.origin,this.direction)}}function ak(e){return e instanceof aN}function aE(e){return e instanceof aS}function aT(e){return e instanceof ab}let aL={next:class extends aN{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends aN{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},aM={next:class extends aS{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends aS{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},aD={next:class extends ab{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends ab{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function aA(e,t){return e?new aM[t](e):null}function aO(e,t,r){return e?new aL[t](e,aF(e,r)):null}function aF(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error",n=e.getTextContentSize(),i="next"===t?n:"previous"===t?0:t;return(i<0||i>n)&&("clamp"!==r&&nf(284,String(t),String(n),e.getKey()),i=i<0?0:n),i}function aI(e,t){return l4(e)?new aD[t](e):null}function aP(e){var t;return e&&((t=e.getAdjacentCaret())&&t.getChildCaret()||t)}class aR{type="node-caret-range";direction;anchor;focus;constructor(e,t,r){this.anchor=e,this.focus=t,this.direction=r}getLatest(){let e=this.anchor.getLatest(),t=this.focus.getLatest();return e===this.anchor&&t===this.focus?this:new aR(e,t,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){let e=e=>{let t=this[e].getLatest();return ak(t)?function(e,t){let{direction:r,origin:n}=e;return new aB(e,aF(n,"focus"===t?a_[r]:r)-e.offset)}(t,e):null},t=e("anchor"),r=e("focus");if(t&&r){let{caret:e}=t,{caret:n}=r;if(e.isSameNodeCaret(n))return[new aB(e,n.offset-e.offset),null]}return[t,r]}iterNodeCarets(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root",t=ak(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),n=ak(r),i=t=>t.isSameNodeCaret(r)?null:aP(t)||t.getParentCaret(e);return aW({hasNext:e=>null!==e&&!(n&&r.isSameNodeCaret(e)),initial:t.isSameNodeCaret(r)?null:i(t),map:e=>e,step:i})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class aB{type="slice";caret;distance;constructor(e,t){this.caret=e,this.distance=t}getSliceIndices(){let{distance:e,caret:{offset:t}}=this,r=t+e;return r<t?[r,t]:[t,r]}getTextContent(){let[e,t]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(e,t)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){let{caret:{origin:e,direction:t}}=this,[r,n]=this.getSliceIndices(),i=e.getTextContent();return aO(e.setTextContent(i.slice(0,r)+i.slice(n)),t,r)}}function aq(e){return az(e,aA(oI(),e.direction))}function az(e,t){return e.direction!==t.direction&&nc(265),new aR(e,t,e.direction)}function aW(e){let{initial:t,hasNext:r,step:n,map:i}=e,s=t;return{[Symbol.iterator](){return this},next(){if(!r(s))return{done:!0,value:void 0};let e={done:!1,value:i(s)};return s=n(s),e}}}function a$(e,t){let r=aV(e.origin,t.origin);switch(null===r&&nc(275,e.origin.getKey(),t.origin.getKey()),r.type){case"same":{let r="text"===e.type,n="text"===t.type;return r&&n?Math.sign(e.offset-t.offset):e.type===t.type?0:r?-1:n?1:"child"===e.type?-1:1}case"ancestor":return"child"===e.type?-1:1;case"descendant":return"child"===t.type?1:-1;case"branch":return aK(r)}}function aK(e){let{a:t,b:r}=e,n=t.__key,i=r.__key,s=t,l=r;for(;s&&l;s=s.getNextSibling(),l=l.getNextSibling()){if(s.__key===i)return -1;if(l.__key===n)return 1}return null===s?1:-1}function aU(e){return l4(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function aV(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};let r=new Map;for(let[t,n]=aU(e);t;n=t,t=t.getParent())r.set(t,n);for(let[n,i]=aU(t);n;i=n,n=n.getParent()){let s=r.get(n);if(void 0!==s)return null===s?(n.is(e)||nc(276),{commonAncestor:n,type:"ancestor"}):null===i?(n.is(t)||nc(277),{commonAncestor:n,type:"descendant"}):((l4(s)||s.is(e))&&(l4(i)||i.is(t))&&n.is(s.getParent())&&n.is(i.getParent())||nc(278),{a:s,b:i,commonAncestor:n,type:"branch"})}return null}function aH(e,t){var r;let n,{type:i,key:s,offset:l}=e,o=(null===(n=oL(r=e.key))&&nc(63,r),n);return"text"===i?(le(o)||nc(266,o.getType(),s),aO(o,t,l)):(l4(o)||nc(267,o.getType(),s),function(e,t,r){let n=aI(e,"next");for(let e=0;e<t;e++){let e=n.getAdjacentCaret();if(null===e)break;n=e}return a2(n,r)}(o,e.offset,t))}function aG(e,t){let{origin:r,direction:n}=t,i="next"===n;ak(t)?e.set(r.getKey(),t.offset,"text"):aE(t)?le(r)?e.set(r.getKey(),aF(r,n),"text"):e.set(r.getParentOrThrow().getKey(),r.getIndexWithinParent()+ +!!i,"element"):(aT(t)&&l4(r)||nc(268),e.set(r.getKey(),i?0:r.getChildrenSize(),"element"))}function aZ(e,t){aG(e.anchor,t.anchor),aG(e.focus,t.focus)}function aJ(e){let{anchor:t,focus:r}=e,n=aH(t,"next"),i=aH(r,"next"),s=0>=a$(n,i)?"next":"previous";return az(a2(n,s),a2(i,s))}function aQ(e){let{direction:t,origin:r}=e,n=aA(r,a_[t]).getNodeAtCaret();return n?aA(n,t):aI(r.getParentOrThrow(),t)}function aX(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",r=[e];for(let n=aT(e)?e.getParentCaret(t):e.getSiblingCaret();null!==n;n=n.getParentCaret(t))r.push(aQ(n));return r}function aY(e){return!!e&&e.origin.isAttached()}function a0(e){let t=function(e){let t=e;for(;aT(t);){let e=aP(t);if(!aT(e))break;t=e}return t}(e.getLatest()),{direction:r}=t;if(le(t.origin))return ak(t)?t:aO(t.origin,r,r);let n=t.getAdjacentCaret();return aE(n)&&le(n.origin)?aO(n.origin,r,a_[r]):t}function a1(e){return ak(e)&&e.offset!==aF(e.origin,e.direction)}function a2(e,t){return e.direction===t?e:e.getFlipped()}function a3(e,t){return e.direction===t?e:az(a2(e.focus,t),a2(e.anchor,t))}function a4(e,t){if(!t||e===t)return e;for(let r in t)if(e[r]!==t[r])return{...e,...t};return e}let a5="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,a6=a5?i.useLayoutEffect:i.useEffect,a9={tag:sW};function a8(e){let{initialConfig:t,children:r}=e,s=(0,i.useMemo)(()=>{let{theme:e,namespace:r,nodes:n,onError:i,editorState:s,html:l}=t,o={getTheme:function(){return null!=e?e:null}},a=od({editable:t.editable,html:l,namespace:r,nodes:n,onError:e=>i(e,a),theme:e});return function(e,t){if(null!==t){if(void 0===t)e.update(()=>{let t=oI();if(t.isEmpty()){let r=ol();t.append(r);let n=a5?document.activeElement:null;(null!==lS()||null!==n&&n===e.getRootElement())&&r.select()}},a9);else if(null!==t)switch(typeof t){case"string":{let r=e.parseEditorState(t);e.setEditorState(r,a9);break}case"object":e.setEditorState(t,a9);break;case"function":e.update(()=>{oI().isEmpty()&&t(e)},a9)}}}(a,s),[a,o]},[]);return a6(()=>{let e=t.editable,[r]=s;r.setEditable(void 0===e||e)},[]),(0,n.jsx)(nd.Provider,{value:s,children:r})}let a7="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function de(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function dt(e){let t=lK().getElementByKey(e.getKey());if(null===t)return null;let r=t.ownerDocument.defaultView;return null===r?null:r.getComputedStyle(t)}function dr(e){let t=dn(e);return null!==t&&"vertical-rl"===t.writingMode}function dn(e){let t=e.anchor.getNode();return l4(t)?dt(t):dt(l7(t)?t:t.getParentOrThrow())}function di(e,t){let r=dr(e)?!t:t;ds(e)&&(r=!r);let n=aH(e.focus,r?"previous":"next");if(a1(n))return!1;for(let e of aq(n)){if(aT(e))return!e.origin.isInline();if(!l4(e.origin)){if(l9(e.origin))return!0;break}}return!1}function ds(e){let t=dn(e);return null!==t&&"rtl"===t.direction}function dl(e,t,r){let n,i=ds(e);n=dr(e)||i?!r:r,e.modify(t?"extend":"move",n,"character")}let da="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,dd=da&&"documentMode"in document?document.documentMode:null;da&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),da&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),da&&"InputEvent"in window&&!dd&&new window.InputEvent("input"),da&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),da&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,da&&/Android/.test(navigator.userAgent),da&&/^(?=.*Chrome).*/i.test(navigator.userAgent);function du(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return()=>{for(let e=t.length-1;e>=0;e--)t[e]();t.length=0}}function dc(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=[];for(let e of t)if(e&&"string"==typeof e)for(let[t]of e.matchAll(/\S+/g))n.push(t);return n}(...r);i.length>0&&e.classList.add(...i)}da&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent);function df(e,t){return null!==e&&Object.getPrototypeOf(e).constructor.name===t.name}let dh=Symbol.for("preact-signals");function dg(){if(dm>1)return void dm--;let e,t=!1;for(;void 0!==r;){let n=r;for(r=void 0,dx++;void 0!==n;){let r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&dC(n))try{n.c()}catch(r){t||(e=r,t=!0)}n=r}}if(dx=0,dm--,t)throw e}function dp(e){let r=t;t=void 0;try{return e()}finally{t=r}}let dm=0,dx=0,dy=0;function dv(e){if(void 0===t)return;let r=e.n;return void 0===r||r.t!==t?(r={i:0,S:e,p:t.s,n:void 0,t:t,e:void 0,x:void 0,r:r},void 0!==t.s&&(t.s.n=r),t.s=r,e.n=r,32&t.f&&e.S(r),r):-1===r.i?(r.i=0,void 0!==r.n&&(r.n.p=r.p,void 0!==r.p&&(r.p.n=r.n),r.p=t.s,r.n=void 0,t.s.n=r,t.s=r),r):void 0}function d_(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=null==t?void 0:t.watched,this.Z=null==t?void 0:t.unwatched,this.name=null==t?void 0:t.name}function dC(e){for(let t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function db(e){for(let t=e.s;void 0!==t;t=t.n){let r=t.S.n;if(void 0!==r&&(t.r=r),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function dj(e){let t,r=e.s;for(;void 0!==r;){let e=r.p;-1===r.i?(r.S.U(r),void 0!==e&&(e.n=r.n),void 0!==r.n&&(r.n.p=e)):t=r,r.S.n=r.r,void 0!==r.r&&(r.r=void 0),r=e}e.s=t}function dw(e,t){d_.call(this,void 0),this.x=e,this.s=void 0,this.g=dy-1,this.f=4,this.W=null==t?void 0:t.watched,this.Z=null==t?void 0:t.unwatched,this.name=null==t?void 0:t.name}function dS(e){let r=e.u;if(e.u=void 0,"function"==typeof r){dm++;let n=t;t=void 0;try{r()}catch(t){throw e.f&=-2,e.f|=8,dN(e),t}finally{t=n,dg()}}}function dN(e){for(let t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,dS(e)}function dk(e){if(t!==this)throw Error("Out-of-order effect");dj(this),t=e,this.f&=-2,8&this.f&&dN(this),dg()}function dE(e,t){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=null==t?void 0:t.name}function dT(e,t){let r=new dE(e,t);try{r.c()}catch(e){throw r.d(),e}let n=r.d.bind(r);return n[Symbol.dispose]=n,n}function dL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};for(let n in e){let i=t[n],s=new d_(void 0===i?e[n]:i,void 0);r[n]=s}return r}d_.prototype.brand=dh,d_.prototype.h=function(){return!0},d_.prototype.S=function(e){let t=this.t;t!==e&&void 0===e.e&&(e.x=t,this.t=e,void 0!==t?t.e=e:dp(()=>{var e;null==(e=this.W)||e.call(this)}))},d_.prototype.U=function(e){if(void 0!==this.t){let t=e.e,r=e.x;void 0!==t&&(t.x=r,e.e=void 0),void 0!==r&&(r.e=t,e.x=void 0),e===this.t&&(this.t=r,void 0===r&&dp(()=>{var e;null==(e=this.Z)||e.call(this)}))}},d_.prototype.subscribe=function(e){return dT(()=>{let r=this.value,n=t;t=void 0;try{e(r)}finally{t=n}},{name:"sub"})},d_.prototype.valueOf=function(){return this.value},d_.prototype.toString=function(){return this.value+""},d_.prototype.toJSON=function(){return this.value},d_.prototype.peek=function(){let e=t;t=void 0;try{return this.value}finally{t=e}},Object.defineProperty(d_.prototype,"value",{get(){let e=dv(this);return void 0!==e&&(e.i=this.i),this.v},set(e){if(e!==this.v){if(dx>100)throw Error("Cycle detected");this.v=e,this.i++,dy++,dm++;try{for(let e=this.t;void 0!==e;e=e.x)e.t.N()}finally{dg()}}}}),dw.prototype=new d_,dw.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===dy))return!0;if(this.g=dy,this.f|=1,this.i>0&&!dC(this))return this.f&=-2,!0;let e=t;try{db(this),t=this;let e=this.x();(16&this.f||this.v!==e||0===this.i)&&(this.v=e,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return t=e,dj(this),this.f&=-2,!0},dw.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(let e=this.s;void 0!==e;e=e.n)e.S.S(e)}d_.prototype.S.call(this,e)},dw.prototype.U=function(e){if(void 0!==this.t&&(d_.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(let e=this.s;void 0!==e;e=e.n)e.S.U(e)}},dw.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(dw.prototype,"value",{get(){if(1&this.f)throw Error("Cycle detected");let e=dv(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),dE.prototype.c=function(){let e=this.S();try{if(8&this.f||void 0===this.x)return;let e=this.x();"function"==typeof e&&(this.u=e)}finally{e()}},dE.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,dS(this),db(this),dm++;let e=t;return t=this,dk.bind(this,e)},dE.prototype.N=function(){2&this.f||(this.f|=2,this.o=r,r=this)},dE.prototype.d=function(){this.f|=8,1&this.f||dN(this)},dE.prototype.dispose=function(){this.d()};function dM(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);throw i.search=s.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let dD=new Set;class dA{builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(e,t){this.builder=e,this.extension=t,this.configs=new Set,this.state={id:0}}mergeConfigs(){let e=this.extension.config||{},t=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):a4;for(let r of this.configs)e=t(e,r);return e}init(e){let t,r=this.state;2===r.id||dM(306,String(r.id));let n={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},i={...n,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},s=Object.assign(r,{config:this.mergeConfigs(),id:3,registerState:n});this.state=s,this.extension.init&&(t=this.extension.init(e,s.config,n)),this.state=Object.assign(s,{id:4,initResult:t,registerState:i})}build(e){let t,r=this.state;4!==r.id&&dM(307,String(r.id),String(5)),this.extension.build&&(t=this.extension.build(e,r.config,r.registerState));let n={...r.registerState,getOutput:()=>t,getSignal:this.getSignal.bind(this)};this.state=Object.assign(r,{id:5,output:t,registerState:n})}register(e,t){this._signal=t;let r=this.state;5!==r.id&&dM(308,String(r.id),String(5));let n=this.extension.register&&this.extension.register(e,r.config,r.registerState);return this.state=Object.assign(r,{id:6}),()=>{let e=this.state;7!==e.id&&dM(309,String(r.id),String(7)),this.state=Object.assign(e,{id:5}),n&&n()}}afterRegistration(e){let t,r=this.state;return 6!==r.id&&dM(310,String(r.id),String(6)),this.extension.afterRegistration&&(t=this.extension.afterRegistration(e,r.config,r.registerState)),this.state=Object.assign(r,{id:7}),t}getSignal(){return void 0===this._signal&&dM(311),this._signal}getInitResult(){void 0===this.extension.init&&dM(312,this.extension.name);let e=this.state;return e.id>=4||dM(313,String(e.id),String(4)),e.initResult}getInitPeer(e){let t=this.builder.extensionNameMap.get(e);return t?t.getExtensionInitDependency():void 0}getExtensionInitDependency(){let e=this.state;return e.id>=3||dM(314,String(e.id),String(3)),{config:e.config}}getPeer(e){let t=this.builder.extensionNameMap.get(e);return t?t.getExtensionDependency():void 0}getInitDependency(e){let t=this.builder.getExtensionRep(e);return void 0===t&&dM(315,this.extension.name,e.name),t.getExtensionInitDependency()}getDependency(e){let t=this.builder.getExtensionRep(e);return void 0===t&&dM(315,this.extension.name,e.name),t.getExtensionDependency()}getState(){let e=this.state;return e.id>=7||dM(316,String(e.id),String(7)),e}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||dD}getPeerNameSet(){let e=this._peerNameSet;return e||(e=new Set((this.extension.peerDependencies||[]).map(e=>{let[t]=e;return t})),this._peerNameSet=e),e}getExtensionDependency(){if(!this._dependency){let e=this.state;e.id>=5||dM(317,this.extension.name),this._dependency={config:e.config,init:e.initResult,output:e.output}}return this._dependency}}let dO={tag:sW};function dF(){let e=oI();e.isEmpty()&&e.append(ol())}let dI={config:{setOptions:dO,updateOptions:dO},init:e=>{let{$initialEditorState:t=dF}=e;return{$initialEditorState:t,initialized:!1}},afterRegistration(e,t,r){let{updateOptions:n,setOptions:i}=t,s=r.getInitResult();if(!s.initialized){s.initialized=!0;let{$initialEditorState:t}=s;if(t instanceof or)e.setEditorState(t,i);else if("function"==typeof t)e.update(()=>{t(e)},n);else if(t&&("string"==typeof t||"object"==typeof t)){let r=e.parseEditorState(t);e.setEditorState(r,i)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[l8,s1,sK,lr,oi]},dP=Symbol.for("@lexical/extension/LexicalBuilder");function dR(){}function dB(e){throw e}function dq(e){return Array.isArray(e)?e:[e]}let dz="0.39.0+prod.esm";class dW{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(e){for(const t of(this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=dz,this.roots=e,e))this.addExtension(t)}static fromExtensions(e){let t=[dq(dI)];for(let r of e)t.push(dq(r));return new dW(t)}static maybeFromEditor(e){let t=e[dP];return t&&(t.PACKAGE_VERSION!==dz&&dM(292,t.PACKAGE_VERSION,dz),t instanceof dW||dM(293)),t}static fromEditor(e){let t=dW.maybeFromEditor(e);return void 0===t&&dM(294),t}constructEditor(){let{$initialEditorState:e,onError:t,...r}=this.buildCreateEditorArgs(),n=Object.assign(od({...r,...t?{onError:e=>{t(e,n)}}:{}}),{[dP]:this});for(let e of this.sortedExtensionReps())e.build(n);return n}buildEditor(){let e=dR;function t(){try{e()}finally{e=dR}}let r=Object.assign(this.constructEditor(),{dispose:t,[Symbol.dispose]:t});return e=du(this.registerEditor(r),()=>r.setRootElement(null)),r}hasExtensionByName(e){return this.extensionNameMap.has(e)}getExtensionRep(e){let t=this.extensionNameMap.get(e.name);if(t)return t.extension!==e&&dM(295,e.name),t}addEdge(e,t,r){let n=this.outgoingConfigEdges.get(e);n?n.set(t,r):this.outgoingConfigEdges.set(e,new Map([[t,r]]));let i=this.incomingEdges.get(t);i?i.add(e):this.incomingEdges.set(t,new Set([e]))}addExtension(e){void 0!==this._sortedExtensionReps&&dM(296);let[t]=dq(e);"string"!=typeof t.name&&dM(297,typeof t.name);let r=this.extensionNameMap.get(t.name);if(void 0!==r&&r.extension!==t&&dM(298,t.name),!r){r=new dA(this,t),this.extensionNameMap.set(t.name,r);let e=this.conflicts.get(t.name);for(let r of("string"==typeof e&&dM(299,t.name,e),t.conflictsWith||[]))this.extensionNameMap.has(r)&&dM(299,t.name,r),this.conflicts.set(r,t.name);for(let e of t.dependencies||[]){let r=dq(e);this.addEdge(t.name,r[0].name,r.slice(1)),this.addExtension(r)}for(let[e,r]of t.peerDependencies||[])this.addEdge(t.name,e,r?[r]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;let e=[],t=(r,n)=>{var i,s;let l=r.state;if(2===l.id)return;let o=r.extension.name;0===l.id||dM(300,o,n||"[unknown]"),0===(i=l).id||dM(304,String(i.id),String(0)),r.state=l=Object.assign(i,{id:1});let a=this.outgoingConfigEdges.get(o);if(a)for(let e of a.keys()){let r=this.extensionNameMap.get(e);r&&t(r,o)}1===(s=l).id||dM(305,String(s.id),String(1)),r.state=l=Object.assign(s,{id:2}),e.push(r)};for(let e of this.extensionNameMap.values())0===e.state.id&&t(e);for(let t of e)for(let[e,r]of this.outgoingConfigEdges.get(t.extension.name)||[])if(r.length>0){let t=this.extensionNameMap.get(e);if(t)for(let e of r)t.configs.add(e)}for(let[e,...t]of this.roots)if(t.length>0){let r=this.extensionNameMap.get(e.name);for(let n of(void 0===r&&dM(301,e.name),t))r.configs.add(n)}return this._sortedExtensionReps=e,this._sortedExtensionReps}registerEditor(e){let t=this.sortedExtensionReps(),r=new AbortController,n=[()=>r.abort()],i=r.signal;for(let r of t){let t=r.register(e,i);t&&n.push(t)}for(let r of t){let t=r.afterRegistration(e);t&&n.push(t)}return du(...n)}buildCreateEditorArgs(){let e={},t=new Set,r=new Map,n=new Map,i={},s={},l=this.sortedExtensionReps();for(let o of l){let{extension:l}=o;if(void 0!==l.onError&&(e.onError=l.onError),void 0!==l.disableEvents&&(e.disableEvents=l.disableEvents),void 0!==l.parentEditor&&(e.parentEditor=l.parentEditor),void 0!==l.editable&&(e.editable=l.editable),void 0!==l.namespace&&(e.namespace=l.namespace),void 0!==l.$initialEditorState&&(e.$initialEditorState=l.$initialEditorState),l.nodes){for(let e of("function"==typeof l.nodes?l.nodes():l.nodes)||[]){if("function"!=typeof e){let t=r.get(e.replace);t&&dM(302,l.name,e.replace.name,t.extension.name),r.set(e.replace,o)}t.add(e)}}if(l.html){if(l.html.export)for(let[e,t]of l.html.export.entries())n.set(e,t);l.html.import&&Object.assign(i,l.html.import)}l.theme&&function e(t,r){if(t&&r&&!Array.isArray(r)&&"object"==typeof t&&"object"==typeof r){for(let n in r)t[n]=e(t[n],r[n]);return t}return r}(s,l.theme)}Object.keys(s).length>0&&(e.theme=s),t.size&&(e.nodes=[...t]);let o=Object.keys(i).length>0,a=n.size>0;for(let t of((o||a)&&(e.html={},o&&(e.html.import=i),a&&(e.html.export=n)),l))t.init(e);return e.onError||(e.onError=dB),e}}ib("INSERT_HORIZONTAL_RULE_COMMAND");var d$=e.i(6566639);function dK(e){return()=>(function(e){if(!function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e)return!1;let r=oI().getTextContent();return t&&(r=r.trim()),""===r}(e,!1))return!1;let t=oI().getChildren(),r=t.length;if(r>1)return!1;for(let e=0;e<r;e++){let r=t[e];if(l9(r))return!1;if(l4(r)){if(!oo(r)||0!==r.__indent)return!1;let t=r.getChildren(),n=t.length;for(let r=0;r<n;r++)if(!le(t[e]))return!1}}return!0})(e)}function dU(e){let t=window.location.origin,r=r=>{if(r.origin!==t)return;let n=e.getRootElement();if(document.activeElement!==n)return;let i=r.data;if("string"==typeof i){let t;try{t=JSON.parse(i)}catch(e){return}if(t&&"nuanria_messaging"===t.protocol&&"request"===t.type){let n=t.payload;if(n&&"makeChanges"===n.functionId){let t=n.args;if(t){let[n,i,s,l,o]=t;e.update(()=>{let e=lS();if(lu(e)){let t=e.anchor,a=t.getNode(),d=0,u=0;if(le(a)&&n>=0&&i>=0&&(d=n,u=n+i,e.setTextNodeRange(a,d,a,u)),d===u&&""===s||(e.insertRawText(s),a=t.getNode()),le(a)){d=l,u=l+o;let t=a.getTextContentSize();d=d>t?t:d,u=u>t?t:u,e.setTextNodeRange(a,d,a,u)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function dV(e,t){let r=e.getData("text/plain")||e.getData("text/uri-list");null!=r&&t.insertRawText(r)}let dH="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,dG=dH&&"documentMode"in document?document.documentMode:null,dZ=dH&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),dJ=!(!dH||!("InputEvent"in window)||dG)&&"getTargetRanges"in new window.InputEvent("input"),dQ=dH&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),dX=dH&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,dY=dH&&/^(?=.*Chrome).*/i.test(navigator.userAgent),d0=dH&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&dZ&&!dY;function d1(t,r){r.update(()=>{if(null!==t){let n=df(t,KeyboardEvent)?null:t.clipboardData,i=lS();if(null!==i&&!i.isCollapsed()&&null!=n){t.preventDefault();let s=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lS();return null==r&&function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);throw i.search=s.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(166),lu(r)&&r.isCollapsed()||0===r.getNodes().length?"":function(t,r){if("undefined"==typeof document||"undefined"==typeof window&&void 0===e.g.window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let n=document.createElement("div"),i=oI().getChildren();for(let e=0;e<i.length;e++)!function e(t,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=null===i||r.isSelected(i),l=l4(r)&&r.excludeFromCopy("html"),o=r;null!==i&&le(r)&&(o=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"self",n=e.getStartEndPoints();if(t.isSelected(e)&&!ob(t)&&null!==n){let[s,l]=n,o=e.isBackward(),a=s.getNode(),d=l.getNode(),u=t.is(a),c=t.is(d);if(u||c){var i;let[n,s]=lg(e),l=a.is(d),u=t.is(o?d:a),c=t.is(o?a:d),f,h=0;l?(h=n>s?s:n,f=n>s?n:s):u?(h=o?s:n,f=void 0):c&&(h=0,f=o?n:s);let g=t.__text.slice(h,f);g!==t.__text&&("clone"===r&&((i=am(t))[sR]=!0,t=i),t.__text=g)}}return t}(i,r,"clone"));let a=l4(o)?o.getChildren():[],d=og(t,o.getType()),{element:u,after:c}=d&&void 0!==d.exportDOM?d.exportDOM(t,o):o.exportDOM(t);if(!u)return!1;let f=document.createDocumentFragment();for(let n=0;n<a.length;n++){let l=a[n],o=e(t,l,f,i);!s&&l4(r)&&o&&r.extractWithChild(l,i,"html")&&(s=!0)}if(s&&!l){if((aa(u)||au(u))&&u.append(f),n.append(u),c){let e=c.call(o,u);e&&(au(u)?u.replaceChildren(e):u.replaceWith(e))}}else n.append(f);return s}(t,i[e],n,r);return n.innerHTML}(t,r)}(r);null!==s&&n.setData("text/html",s),n.setData("text/plain",i.getTextContent())}}})}let d2="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function d3(e){let{editor:t,ErrorBoundary:r}=e;return function(e,t){let[r,s]=(0,i.useState)(()=>e.getDecorators());return d2(()=>e.registerDecoratorListener(e=>{(0,d$.flushSync)(()=>{s(e)})}),[e]),(0,i.useEffect)(()=>{s(e.getDecorators())},[e]),(0,i.useMemo)(()=>{let s=[],l=Object.keys(r);for(let o=0;o<l.length;o++){let a=l[o],d=(0,n.jsx)(t,{onError:t=>e._onError(t),children:(0,n.jsx)(i.Suspense,{fallback:null,children:r[a]})}),u=e.getElementByKey(a);null!==u&&s.push((0,d$.createPortal)(d,u,a))}return s},[t,r,e])}(t,r)}function d4(e){let{editor:t,ErrorBoundary:r}=e;return!function(e){let t=dW.maybeFromEditor(e);if(t&&t.hasExtensionByName("@lexical/react/ReactProvider")){for(let e of["@lexical/plain-text","@lexical/rich-text"])t.hasExtensionByName(e)&&function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);throw i.search=s.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(320,e);return!0}return!1}(t)?(0,n.jsx)(d3,{editor:t,ErrorBoundary:r}):null}function d5(e){return e.getEditorState().read(dK(e.isComposing()))}function d6(e){var t;let{contentEditable:r,placeholder:i=null,ErrorBoundary:s}=e,[l]=nu();return d2(()=>{var e;return du(du((e=t).registerCommand(iT,e=>{let t=lS();return!!lu(t)&&(t.deleteCharacter(e),!0)},0),e.registerCommand(iF,e=>{let t=lS();return!!lu(t)&&(t.deleteWord(e),!0)},0),e.registerCommand(iI,e=>{let t=lS();return!!lu(t)&&(t.deleteLine(e),!0)},0),e.registerCommand(iD,e=>{let t=lS();if(!lu(t))return!1;if("string"==typeof e)t.insertText(e);else{let r=e.dataTransfer;if(null!=r)dV(r,t);else{let r=e.data;r&&t.insertText(r)}}return!0},0),e.registerCommand(iO,()=>{let e=lS();return!!lu(e)&&(e.removeText(),!0)},0),e.registerCommand(iL,e=>{let t=lS();return!!lu(t)&&(t.insertLineBreak(e),!0)},0),e.registerCommand(iM,()=>{let e=lS();return!!lu(e)&&(e.insertLineBreak(),!0)},0),e.registerCommand(i$,e=>{let t=lS();if(!lu(t))return!1;let r=e.shiftKey;return!!di(t,!0)&&(e.preventDefault(),dl(t,r,!0),!0)},0),e.registerCommand(iz,e=>{let t=lS();if(!lu(t))return!1;let r=e.shiftKey;return!!di(t,!1)&&(e.preventDefault(),dl(t,r,!1),!0)},0),e.registerCommand(iZ,t=>!!lu(lS())&&(!dX||"ko-KR"!==navigator.language)&&(t.preventDefault(),e.dispatchCommand(iT,!0)),0),e.registerCommand(iQ,t=>!!lu(lS())&&(t.preventDefault(),e.dispatchCommand(iT,!1)),0),e.registerCommand(iH,t=>{if(!lu(lS()))return!1;if(null!==t){if((dX||dQ||d0)&&dJ)return!1;t.preventDefault()}return e.dispatchCommand(iL,!1)},0),e.registerCommand(i5,()=>((function(e){let t=oI();if(lu(void 0)){let e=(void 0).anchor,t=(void 0).focus,r=e.getNode().getTopLevelElementOrThrow().getParentOrThrow();return e.set(r.getKey(),0,"element"),t.set(r.getKey(),r.getChildrenSize(),"element"),nX(void 0)}oR(nX(t.select(0,t.getChildrenSize())))})(),!0),0),e.registerCommand(i3,t=>!!lu(lS())&&(d1(t,e),!0),0),e.registerCommand(i4,t=>!!lu(lS())&&(d1(t,e),e.update(()=>{let e=lS();lu(e)&&e.removeText()}),!0),0),e.registerCommand(iA,t=>!!lu(lS())&&(t.preventDefault(),e.update(()=>{let e=lS(),r=df(t,ClipboardEvent)?t.clipboardData:null;null!=r&&lu(e)&&dV(r,e)},{tag:"paste"}),!0),0),e.registerCommand(iY,e=>!!lu(lS())&&(e.preventDefault(),!0),0),e.registerCommand(i0,e=>!!lu(lS())&&(e.preventDefault(),!0),0)),dU(t))},[t=l]),(0,n.jsxs)(n.Fragment,{children:[r,(0,n.jsx)(d9,{content:i}),(0,n.jsx)(d4,{editor:l,ErrorBoundary:s})]})}function d9(e){let{content:t}=e,[r]=nu(),n=function(e){let[t,r]=(0,i.useState)(()=>d5(e));return d2(()=>{function t(){r(d5(e))}return t(),du(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(r),s=function(e){let[t]=nu(),r=(0,i.useMemo)(()=>e(t),[t,e]),[n,s]=(0,i.useState)(()=>r.initialValueFn()),l=(0,i.useRef)(n);return a7(()=>{let{initialValueFn:e,subscribe:t}=r,n=e();return l.current!==n&&(l.current=n,s(n)),t(e=>{l.current=e,s(e)})},[r,e]),n}(de);return n?"function"==typeof t?t(s):t:null}let d8="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect,d7=(0,i.forwardRef)(function(e,t){let{editor:r,ariaActiveDescendant:s,ariaAutoComplete:l,ariaControls:o,ariaDescribedBy:a,ariaErrorMessage:d,ariaExpanded:u,ariaInvalid:c,ariaLabel:f,ariaLabelledBy:h,ariaMultiline:g,ariaOwns:p,ariaRequired:m,autoCapitalize:x,className:y,id:v,role:_="textbox",spellCheck:C=!0,style:b,tabIndex:j,"data-testid":w,...S}=e,[N,k]=(0,i.useState)(r.isEditable()),E=(0,i.useCallback)(e=>{e&&e.ownerDocument&&e.ownerDocument.defaultView?r.setRootElement(e):r.setRootElement(null)},[r]),T=(0,i.useMemo)(()=>(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(let r of t)"function"==typeof r?r(e):null!=r&&(r.current=e)}})(t,E),[E,t]);return d8(()=>(k(r.isEditable()),r.registerEditableListener(e=>{k(e)})),[r]),(0,n.jsx)("div",{"aria-activedescendant":N?s:void 0,"aria-autocomplete":N?l:"none","aria-controls":N?o:void 0,"aria-describedby":a,...null!=d?{"aria-errormessage":d}:{},"aria-expanded":N&&"combobox"===_?!!u:void 0,...null!=c?{"aria-invalid":c}:{},"aria-label":f,"aria-labelledby":h,"aria-multiline":g,"aria-owns":N?p:void 0,"aria-readonly":!N||void 0,"aria-required":m,autoCapitalize:x,className:y,contentEditable:N,"data-testid":w,id:v,ref:T,role:_,spellCheck:C,style:b,tabIndex:j,...S})});function ue(e){return e.getEditorState().read(dK(e.isComposing()))}let ut=(0,i.forwardRef)(function(e,t){let{placeholder:r,...i}=e,[s]=nu();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d7,{editor:s,...i,ref:t}),null!=r&&(0,n.jsx)(ur,{editor:s,content:r})]})});function ur(e){let{content:t,editor:r}=e,s=function(e){let[t,r]=(0,i.useState)(()=>ue(e));return d8(()=>{function t(){r(ue(e))}return t(),du(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(r),[l,o]=(0,i.useState)(r.isEditable());if((0,i.useLayoutEffect)(()=>(o(r.isEditable()),r.registerEditableListener(e=>{o(e)})),[r]),!s)return null;let a=null;return"function"==typeof t?a=t(l):null!==t&&(a=t),null===a?null:(0,n.jsx)("div",{"aria-hidden":!0,children:a})}var un=i;let ui=(0,un.createContext)(null),us={didCatch:!1,error:null};class ul extends un.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=us}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){let{error:e}=this.state;if(null!==e){for(var t,r,n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];null==(t=(r=this.props).onReset)||t.call(r,{args:i,reason:"imperative-api"}),this.setState(us)}}componentDidCatch(e,t){var r,n;null==(r=(n=this.props).onError)||r.call(n,e,t)}componentDidUpdate(e,t){let{didCatch:r}=this.state,{resetKeys:n}=this.props;if(r&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,r)=>!Object.is(e,t[r]))}(e.resetKeys,n)){var i,s;null==(i=(s=this.props).onReset)||i.call(s,{next:n,prev:e.resetKeys,reason:"keys"}),this.setState(us)}}render(){let{children:e,fallbackRender:t,FallbackComponent:r,fallback:n}=this.props,{didCatch:i,error:s}=this.state,l=e;if(i){let e={error:s,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)l=t(e);else if(r)l=(0,un.createElement)(r,e);else if(void 0!==n)l=n;else throw s}return(0,un.createElement)(ui.Provider,{value:{didCatch:i,error:s,resetErrorBoundary:this.resetErrorBoundary}},l)}}function uo(e){let{children:t,onError:r}=e;return(0,n.jsx)(ul,{fallback:(0,n.jsx)("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:r,children:t})}function ua(e){e.undoStack=[],e.redoStack=[],e.current=null}function ud(e,t,r){let n,i,s=(n=Date.now(),i=0,(t,s,l,o,a,d)=>{let u=Date.now();if(d.has(sz))return i=0,n=u,2;let c=function(e,t,r,n,i){if(null===e||0===r.size&&0===n.size&&!i)return 0;let s=t._selection,l=e._selection;if(i)return 1;if(!(lu(s)&&lu(l)&&l.isCollapsed()&&s.isCollapsed()))return 0;let o=function(e,t,r){let n=e._nodeMap,i=[];for(let e of t){let t=n.get(e);void 0!==t&&i.push(t)}for(let[e,t]of r){if(!t)continue;let r=n.get(e);void 0===r||l7(r)||i.push(r)}return i}(t,r,n);if(0===o.length)return 0;if(o.length>1){let r=t._nodeMap,n=r.get(s.anchor.key),i=r.get(l.anchor.key);return n&&i&&!e._nodeMap.has(n.__key)&&le(n)&&1===n.__text.length&&1===s.anchor.offset?2:0}let a=o[0],d=e._nodeMap.get(a.__key);if(!le(d)||!le(a)||d.__mode!==a.__mode)return 0;let u=d.__text,c=a.__text;if(u===c)return 0;let f=s.anchor,h=l.anchor;if(f.key!==h.key||"text"!==f.type)return 0;let g=f.offset,p=h.offset,m=c.length-u.length;return 1===m&&p===g-1?2:-1===m&&p===g+1?3:4*(-1===m&&p===g)}(t,s,o,a,e.isComposing()),f=(()=>{var f;let h,g,p,m,x=null===l||l.editor===e,y=d.has("history-push");if(!y&&x&&d.has(sW))return 0;if(null===t)return 1;let v=s._selection;if(!(o.size>0||a.size>0))return 2*(null===v);let _="number"==typeof r?r:r.peek();return!1===y&&0!==c&&c===i&&u<n+_&&x?0:1!==o.size||(f=Array.from(o)[0],h=t._nodeMap.get(f),g=s._nodeMap.get(f),p=t._selection,m=s._selection,lu(p)&&lu(m)&&"element"===p.anchor.type&&"element"===p.focus.type&&"text"===m.anchor.type&&"text"===m.focus.type||!le(h)||!le(g)||h.__parent!==g.__parent||JSON.stringify(t.read(()=>h.exportJSON()))!==JSON.stringify(s.read(()=>g.exportJSON())))?1:0})();return n=u,i=c,f});return du(e.registerCommand(iR,()=>((function(e,t){let r=t.redoStack,n=t.undoStack;if(0!==n.length){let i=t.current,s=n.pop();null!==i&&(r.push(i),e.dispatchCommand(i8,!0)),0===n.length&&e.dispatchCommand(i7,!1),t.current=s||null,s&&s.editor.setEditorState(s.editorState,{tag:sz})}})(e,t),!0),0),e.registerCommand(iB,()=>((function(e,t){let r=t.redoStack,n=t.undoStack;if(0!==r.length){let i=t.current;null!==i&&(n.push(i),e.dispatchCommand(i7,!0));let s=r.pop();0===r.length&&e.dispatchCommand(i8,!1),t.current=s||null,s&&s.editor.setEditorState(s.editorState,{tag:sz})}})(e,t),!0),0),e.registerCommand(i6,()=>(ua(t),!1),0),e.registerCommand(i9,()=>(ua(t),e.dispatchCommand(i8,!1),e.dispatchCommand(i7,!1),!0),0),e.registerUpdateListener(r=>{let{editorState:n,prevEditorState:i,dirtyLeaves:l,dirtyElements:o,tags:a}=r,d=t.current,u=t.redoStack,c=t.undoStack,f=null===d?null:d.editorState;if(null!==d&&n===f)return;let h=s(i,n,d,l,o,a);if(1===h)0!==u.length&&(t.redoStack=[],e.dispatchCommand(i8,!1)),null!==d&&(c.push({...d}),e.dispatchCommand(i7,!0));else if(2===h)return;t.current={editor:e,editorState:n}}))}function uu(){return{current:null,redoStack:[],undoStack:[]}}function uc(e){let{delay:t,externalHistoryState:r}=e,[n]=nu();return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=(0,i.useMemo)(()=>t||uu(),[t]);(0,i.useEffect)(()=>ud(e,n,r),[r,e,n])}(n,r,t),null}!function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r]}({build:(e,t)=>{let{delay:r,createInitialHistoryState:n,disabled:i}=t;return dL({delay:r,disabled:i,historyState:n(e)})},config:{createInitialHistoryState:uu,delay:300,disabled:"undefined"==typeof window},name:"@lexical/history/History",register:(e,t,r)=>{let n=r.getOutput();return dT(()=>n.disabled.value?void 0:ud(e,n.historyState.value,n.delay))}},{createInitialHistoryState:()=>{throw Error("SharedHistory did not inherit parent history")},disabled:!0});var uf=e.i(2331152);let uh={tag:"py-[.1rem] px-[.3rem] border border-solid rounded-md border-gray-500 text-gray-1000 bg-white font-normal"};class ug extends s1{static getType(){return"tag"}static clone(e){return new ug(e.__text,e.__key)}createDOM(e){let t=super.createDOM(e);return dc(t,e.theme.tag),t}updateDOM(e,t,r){return super.updateDOM(e,t,r)}static importJSON(e){return up().updateFromJSON(e)}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isTextEntity(){return!0}}function up(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return an(new ug(e))}function um(e){let{text:t}=e;return(0,n.jsx)("span",{className:(0,f.cn)(uh.tag),children:t})}let ux=[["levels","level","level"],["sources","resource","source"],["environments","environment","environment"],["routes","route","route"],["requestPaths","requestPath","requestPath"],["statusCodes","status","statusCode"],["requestTags","requestType","requestTags"],["domains","host","domain"],["requestMethods","method","requestMethod"],["caches","cache","cache"],["branches","branch","branch"],["deploymentIds","deploymentId","deploymentId"],["deploymentDomains","deployment","deploymentDomain"],["requestIds","requestId","requestId"],["sessionIds","sessionId","sessionId"],["traceIds","traceId","traceId"],["invocationIds","invocationId","invocationId"]],uy=new Map(ux.map(e=>{let[t,r]=e;return[t,r]})),uv=new Map(ux.map(e=>{let[t,r]=e;return[r,t]})),u_=new Map(ux.map(e=>{let[t,r,n]=e;return[r,n]})),uC=new Map(ux.map(e=>{let[t,r,n]=e;return[n,r]})),ub="trigger-search-after-insert",uj=["level:","resource:","environment:","route:","requestPath:","status:","requestType:","host:","method:","cache:","branch:","deploymentId:","deployment:","requestId:","sessionId:","traceId:","invocationId:"],uw=[];function uS(){let[e]=nu(),[t,r]=(0,i.useState)(!1),[s,l]=(0,i.useState)(null),o=(0,i.useMemo)(()=>{if(!s||s.startsWith('"')||!s.includes(":"))return null;let[e,t]=s.split(":"),r=u_.get(e);return r?{attributeName:r,attributeNameSearchQuery:t||void 0}:null},[s]),{data:a,isLoading:d}=P({attributeName:o?.attributeName||null,attributeNameSearchQuery:(0,r9.useDebouncedValue)(o?.attributeNameSearchQuery,300),keepPreviousData:!1}),u=(0,i.useMemo)(()=>a?.rows?a.rows.map(e=>`${uC.get(e.attributeName)||e.attributeName}:${e.attributeValue}`):null,[a]),c=(0,i.useMemo)(()=>o&&u?u:null===s?uw:""===s?uj:(0,eg.matchSorter)(uj,s),[o,u,s]);(0,i.useEffect)(()=>{g(0)},[c]);let[h,g]=(0,i.useState)(0),p=(0,i.useCallback)(t=>{e.update(()=>{let e="",n="",i=lS()||oI().selectEnd();if(i?.getNodes().some(e=>"tag"===e.__type))for(let e of i.getNodes())e.remove();if(""===oI().getTextContent())n=" ";else{let t=i.getStartEndPoints();if(t){let[r]=t,i=r.getNode().getTextContent();" "!==i[r.offset-1]&&(e=" ")," "!==i[r.offset]&&(n=" ")}}t.endsWith(":")?i.insertNodes([s7(`${e}${t}`)]):(i.insertNodes([s7(`${e}${t}${n}`)]),o9(ub),o8(()=>r(!1)))})},[e]);return((0,i.useEffect)(()=>e.registerUpdateListener(()=>{l(e.read(()=>{let e=lS();if(!lu(e))return"";if(""!==e.getTextContent())return null;let t=e.anchor.getNode();return"tag"!==t.getType()?"":t.getTextContent()}))}),[e]),(0,i.useEffect)(()=>{let t=e=>{let t=0===h?s:c[h-1];return t?(e?.preventDefault(),p(t),!0):(r(!1),!1)};return du(e.registerCommand(iH,t,3),e.registerCommand(iz,(e,r)=>!!r.read(()=>(function(){let e=lS();if(!lu(e)||""!==e.getTextContent())return!1;let t=e.focus.getNode(),r=!t.getNextSibling(),n=t.getTextContentSize()===e.focus.offset;return r&&n})())&&t(e),3))},[e,h,c,p,s]),(0,i.useEffect)(()=>du(e.registerCommand(iV,e=>(e.preventDefault(),g(e=>e+1),!0),1),e.registerCommand(iU,e=>(e.preventDefault(),g(e=>e-1),!0),1)),[e]),(0,i.useEffect)(()=>du(e.registerCommand(se,()=>(r(!0),!1),1),e.registerCommand(st,()=>(r(!1),!1),1),e.registerCommand(iJ,()=>(r(!1),!1),1),e.registerCommand(iq,e=>(e.altKey||e.ctrlKey||e.metaKey||"Enter"===e.key||r(!0),!1),1),e.registerCommand(iw,()=>(r(!0),!1),1)),[e]),t&&c!==uw)?(0,n.jsx)("div",{className:"absolute top-full left-0 w-full bg-white mt-2 border border-gray-alpha-400 rounded-md z-10 max-h-[12lh] overflow-y-auto",children:d?(0,n.jsx)("div",{className:"px-4 py-2 text-gray-alpha-700",children:(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("div",{children:(0,n.jsx)(tl.Spinner,{color:"var(--accents-5)",size:12})}),(0,n.jsx)("div",{className:"",children:"Loading..."})]})}):0===c.length?(0,n.jsx)("div",{className:"px-4 py-2 text-gray-alpha-700",children:(0,n.jsx)("div",{className:"",children:"No suggestions found"})}):(0,n.jsx)("ul",{className:"",children:c.map((e,t)=>(0,n.jsx)("li",{className:(0,f.cn)("hover:bg-gray-alpha-100 px-2 py-2 cursor-pointer transition-all duration-200",{"shadow-[0_0_20px_4px_inset] shadow-gray-alpha-200":t+1===(h+c.length+1)%(c.length+1)}),onMouseDown:t=>{t.preventDefault(),p(e)},children:(0,n.jsx)(um,{text:e})},e))})}):null}function uN(){let[e]=nu(),t=(0,i.useRef)(null);return(0,i.useEffect)(()=>du(e.registerCommand(iA,e=>{let r=lS();if(!lu(r))return!1;let n=(e instanceof ClipboardEvent?e.clipboardData:null)?.getData("text/plain");if(!n)return!1;if("tag"===r.anchor.getNode().__type)return t.current=r.anchor.offset+n.length,!1;let i=n.replace(/\s+/g," ").trim();return r.insertText(`"${i}"`),!0},3),e.registerUpdateListener(()=>{let r=t.current;null!==r&&(t.current=null,e.update(()=>{let e=lS();if(!lu(e))return;let t=e.anchor.getNode();if("tag"!==t.__type)return;let n=Math.min(r,t.getTextContentSize());e.anchor.set(t.__key,n,"text"),e.focus.set(t.__key,n,"text")}))})),[e]),null}function uk(e){let t=!1,r=-1;for(let n=0;n<e.length;n++)if('"'===e[n])t?t=!1:(t=!0,r=n);else if(" "===e[n]){if(t)continue;if(r>=0)return{start:r,end:n}}else r<0&&(r=n);return r>=0?{start:r,end:e.length}:null}function uE(){let[e]=nu();return(0,i.useEffect)(()=>{var t;let r,n;return du(...(t=e=>up(e.getTextContent()),r=e=>e instanceof ug,n=e=>{let t=s7(e.getTextContent());t.setFormat(e.getFormat()),e.replace(t)},[e.registerNodeTransform(s1,e=>{if(!e.isSimpleText())return;let i,s=e.getPreviousSibling(),l=e.getTextContent(),o=e;if(le(s)){let t=s.getTextContent(),i=uk(t+l);if(r(s)){if(null===i||0!==s.getLatest().__mode)return void n(s);{let r=i.end-t.length;if(r>0){let n=t+l.slice(0,r);if(s.select(),s.setTextContent(n),r===l.length)e.remove();else{let t=l.slice(r);e.setTextContent(t)}return}}}else if(null===i||i.start<t.length)return}let a=0;for(;;){let e,d=null===(i=uk(l))?"":l.slice(i.end);if(l=d,""===d){let e=o.getNextSibling();if(le(e)){let t=uk(d=o.getTextContent()+e.getTextContent());if(null===t)return void(r(e)?n(e):e.markDirty());if(0!==t.start)return}}if(null===i)return;if(0===i.start&&le(s)&&s.isTextEntity()){a+=i.end;continue}0===i.start?[e,o]=o.splitText(i.end):[,e,o]=o.splitText(i.start+a,i.end+a),void 0===e&&function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;for(let t of(s.append("code",e),r))s.append("v",t);throw i.search=s.toString(),Error(`Minified Lexical error #${e}; visit ${i.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(165,"nodeToReplace");let u=t(e);if(u.setFormat(e.getFormat()),e.replace(u),null==o)return;a=0,s=u}}),e.registerNodeTransform(ug,e=>{let t=e.getTextContent(),i=uk(t);if(null===i||0!==i.start)return void n(e);if(t.length>i.end)return void e.splitText(i.end);let s=e.getPreviousSibling();le(s)&&s.isTextEntity()&&(n(s),n(e));let l=e.getNextSibling();le(l)&&l.isTextEntity()&&(n(l),r(e)&&n(e))})]))},[e]),null}function uT(){let[e]=nu();return(0,i.useEffect)(()=>du(e.registerCommand(iM,()=>!0,1)),[e]),(0,i.useEffect)(()=>e.registerCommand(iL,()=>!0,1),[e]),(0,i.useEffect)(()=>e.registerNodeTransform(sK,e=>{e.replace(s7(" "))}),[e]),null}function uL(){let[e]=nu(),{state:t,setState:r}=(0,O.useLogsQueryState)(),n=(0,i.useRef)(!1);(0,i.useEffect)(()=>{if(n.current){n.current=!1;return}e.update(()=>{var e;let r=function(e){let t=[];for(let[r,n]of Object.entries(e)){if("searchQuery"===r&&n&&t.push(n),"sources"===r&&Array.isArray(n)&&n.length===U.DEFAULT_SOURCES.length&&n.every(e=>U.DEFAULT_SOURCES.includes(e)))continue;let e=uy.get(r);if(!e)continue;let i=Array.isArray(n)?n.join(","):n,s=`${e}:${i}`;i&&t.push(s)}return t.join(" ")}(t);e=""===r||r.endsWith(":")||r.endsWith(" ")?r:`${r} `,oI().getFirstChild()?.remove(),oI().append(ol().append(s7(e))),o9(s$)})},[t,e]);let s=(0,i.useCallback)((e,t)=>{e.read(()=>{r(function(e){let t=function(e){let t=e,r=[];for(;;){let e=uk(t);if(!e)break;if(e.start===e.end)throw Error("findTag returned an empty tag");r.push(t.slice(e.start,e.end)),t=t.slice(e.end)}return r}(e),r=[],n={};for(let e of t)if(e.includes(":")){let[t,r]=e.split(":"),i=uv.get(t);i&&r&&(n[i]=r.split(","))}else r.push(e);for(let[e,t]of uv.entries())n[t]||(n[t]=[]);return{searchQuery:r.join(" "),...n}}(oI().getTextContent())),t||(n.current=!0)})},[r]);return(0,i.useEffect)(()=>du(e.registerCommand(iH,(e,t)=>(s(t.getEditorState()),!1),1),e.registerCommand(st,(e,t)=>(s(t.getEditorState(),!0),!1),1)),[e,s]),(0,i.useEffect)(()=>e.registerUpdateListener(e=>{let{editorState:t,tags:r}=e;r.has(ub)&&s(t)}),[e,s]),null}let uM={...uh};function uD(e){console.error(e)}function uA(){let{isLoading:e}=(0,tn.useGroupLogs)(),{state:{live:t}}=(0,O.useLogsQueryState)(),{data:r,isLoading:s}=P({attributeName:"environment"}),l=(r?.rows??[]).reduce((e,t)=>e+t.total,0),o=(0,i.useMemo)(()=>0===l||s||t?"Search logs...":1===l?`${l} log found...`:`${(0,ne.abbreviateNumber)(l).toUpperCase()} logs found...`,[l,s,t]);return(0,n.jsxs)("div",{className:"relative w-full h-lh",children:[(0,n.jsxs)(a8,{initialConfig:{namespace:"LogSearchInput",theme:uM,onError:uD,nodes:[ug]},children:[(0,n.jsx)(d6,{contentEditable:(0,n.jsx)(ut,{"aria-placeholder":o,placeholder:(0,n.jsx)("div",{className:"absolute top-0 text-gray-700 pl-11 pr-4 py-2 pointer-events-none",children:o}),className:"w-full h-full pl-11 pr-4 py-2 bg-white border border-solid border-gray-alpha-400 focus:border-gray-alpha-600 hover:border-gray-alpha-600 rounded-md focus:ring-4 ring-[#00000024] outline-none transition-all duration-200"}),ErrorBoundary:uo}),(0,n.jsx)(uS,{}),(0,n.jsx)(uE,{}),(0,n.jsx)(uN,{}),(0,n.jsx)(uL,{}),(0,n.jsx)(uT,{}),(0,n.jsx)(uc,{})]}),(0,n.jsx)("div",{className:"absolute top-0 left-0 pt-3 px-4 pointer-events-none",children:e?(0,n.jsx)(tl.Spinner,{size:16,color:"var(--ds-gray-alpha-600)"}):(0,n.jsx)(uf.MagnifyingGlass,{size:16,color:"gray-alpha-600"})})]})}var uO=e.i(8510056),uF=e.i(6870754),uI=e.i(7437286);function uP(){let{state:{page:e},setState:t}=(0,O.useLogsQueryState)(),{data:r,isLoading:s,isValidating:l,size:o,setSize:a}=(0,tn.useGroupLogs)(),d=(0,i.useRef)(null),u=(0,i.useRef)(void 0),c=(0,uI.useIntersectionObserver)(d,{rootMargin:"200px"}),f=r&&r.length>0,h=r?.[r.length-1].hasMoreRows,p=s||o>0&&r&&void 0===r[o-1],{team:m}=(0,y.useAccount)(),x=m?.billing?.plan??"hobby",{maxRetention:v}=(0,ed.useUserRetention)(),_=function(e,t){let r=(0,es.sub)(Date.now(),e).getTime(),n=t?.[t.length-1].rows;if(!n||0===n.length)return!0;let i=new Date(n[n.length-1].timestamp).getTime(),s=new Date(n[0].timestamp).getTime();return!!(i&&i>=r&&s&&s>=r)}(v,r),C=(0,i.useCallback)(()=>{!s&&!l&&f&&h&&_&&t({page:e+1},{replace:!0})},[f,h,s,l,e,t,_]);return(0,i.useEffect)(()=>{a(e)},[e]),(0,i.useEffect)(()=>{c?.isIntersecting&&!u.current&&C(),u.current=c?.isIntersecting},[c?.isIntersecting,C]),(0,n.jsx)("div",{className:"flex flex-col items-center justify-start flex-initial",children:(0,n.jsx)("div",{"data-testid":(0,g.tid)("group-logs","load-more-logs"),ref:d,style:{padding:"var(--geist-gap) 0",visibility:void 0===r?"hidden":"visible",minWidth:"12rem"},children:h&&_&&(!l||p)||void 0===r?(0,n.jsx)(uF.LoadMoreButton,{disabled:!1,loading:p||void 0===r,noGap:!0,onClick:C}):(!1===h||!_)&&(0,n.jsx)("div",{style:{padding:"var(--geist-gap)"},children:(0,n.jsx)("p",{className:`text-copy-14 ${t5.default.screenReaderSelect}`,style:{color:"var(--accents-5)"},tabIndex:0,children:_||"enterprise"===x?"No more logs to show within selected timeline":"The older logs have expired. You can upgrade your plan to store more logs"})})})})}var uR=e.i(5431818),uB=e.i(615673);let uq=(0,i.forwardRef)(function(e,t){let{showSkeleton:r=!1,onScroll:i}=e;return r?(0,n.jsx)(u$,{}):(0,n.jsx)(uz,{onScroll:i,ref:t})}),uz=(0,i.forwardRef)(function(e,t){let{onScroll:r}=e,{setState:s,state:{selectedLogId:l,panelState:o}}=(0,O.useLogsQueryState)(),{data:a,error:d,isLoading:u}=(0,tn.useGroupLogs)(),c=ti(),[f,h]=(0,i.useState)({rows:[],rowsIdSet:new Set});(0,i.useEffect)(()=>{let e=function e(t){if(0===t.length)return[];if(1===t.length)return t[0];if(t.length>2){let r=Math.floor(t.length/2);return e([e(t.slice(0,r)),e(t.slice(r))])}let[r,n]=t,i=[],s=0,l=0;for(;s<r.length&&l<n.length;){let e=r[s],t=n[l],o=new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime();o<0?(i.push(e),s++):(o>0?i.push(t):(i.push(e),s++),l++)}return i.concat(r.slice(s)).concat(n.slice(l))}((a||[]).map(e=>e.rows??[]));h(t=>{let{rowsIdSet:r}=t;return{rows:e.map(e=>({...e,isNew:!r.has(e.requestId)})),rowsIdSet:new Set(e.map(e=>e.requestId))}})},[a]);let g=(0,i.useMemo)(()=>{if(!c.length||0===f.rows.length)return f.rows;let e=c.map(e=>e.toLowerCase()),t=f.rows.filter(t=>{let r=t.logs.some(t=>e.some(e=>t.message.toLowerCase().includes(e))),n=e.some(e=>t.requestPath.toLowerCase().includes(e)),i=e.some(e=>t.domain.toLowerCase().includes(e));return r||n||i});return t.length>0?t:f.rows},[f.rows,c]),p=a?.some(e=>e.rows&&e.rows.length>0)&&0===f.rows.length,m=(0,i.useCallback)(e=>{l===e.requestId?s({panelState:"closed"===o?"opened":"closed"}):s({selectedLogId:e.requestId})},[s,l,o]);if(d)return(0,n.jsx)(uW,{children:(0,n.jsx)(ri,{error:d})});if(u||p)return(0,n.jsx)(u$,{});let x=g.length>0;return(0,n.jsx)(uW,{hasLogs:x,children:x?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:uR.default.logRowsContainer,onScroll:r,ref:t,children:(0,n.jsx)("div",{className:uR.default.logRowsWrapper,style:{paddingTop:"var(--geist-space)"},children:(0,n.jsx)(t9,{logRows:g,onRowSelect:m,selectedLogId:l})})}),(0,n.jsx)(uP,{})]}):(0,n.jsx)(rs,{})})});function uW(e){let{children:t,hasLogs:r=!1}=e;return(0,n.jsx)("div",{className:(0,h.clsx)(uB.default.container,{[uB.default.hasLogs]:r}),style:{position:"relative",zIndex:2,flex:1},children:t})}function u$(){return(0,n.jsx)("div",{style:{padding:"var(--geist-space) 0"},children:(0,n.jsx)(re,{})})}var uK=e.i(4819890),uU=e.i(1793900),uV=e.i(198667);function uH(){var e;let t,{skip:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:n}=(0,A.useProject)((0,D.useProjectIdOrName)()),{team:i,isLoading:s}=(0,y.useAccount)(),{deploymentDomains:l,deploymentIds:o,domains:a,levels:d,routes:u,sources:c,requestTags:f,startDate:h,endDate:g,searchQuery:p,requestIds:m,requestMethods:x,requestPaths:v,statusCodes:_,caches:C,environments:b,branches:j,live:w,myLogs:S,sessionIds:N,hasTraces:k,traceIds:E,invocationIds:I,useClickHouseLogs:P}=(0,O.useLogsApiParams)(),R=g??new Date,B=(e=h,(t=R.getTime()-e.getTime())<=(0,tw.default)("2m")?1:t<=(0,tw.default)("5m")?2:t<=(0,tw.default)("10m")?5:t<=(0,tw.default)("30m")?10:t<=(0,tw.default)("50m")?20:t<=(0,tw.default)("75m")?30:t<=(0,tw.default)("2.5h")?60:t<=(0,tw.default)("5h")?120:t<=(0,tw.default)("7.5h")?300:t<=(0,tw.default)("24h")?600:t<=(0,tw.default)("48h")?1200:t<=(0,tw.default)("75h")?1800:t<=(0,tw.default)("150h")?3600:t<=(0,tw.default)("300h")?7200:t<=(0,tw.default)("600h")?14400:t<=(0,tw.default)("1200h")?28800:t<=(0,tw.default)("1800h")?43200:86400);return{...(0,T.default)(()=>{if(r||s||!n)return;let e=null!==i?i.id:null;if(null===e)return;let t=(0,L.encode)({interval:B,startDate:h.getTime(),endDate:w?void 0:R.getTime(),searchQuery:(0,F.stringifyArrayContent)((0,F.tokenizeSearchQuery)(p)),projectId:n.id,deploymentDomain:uG(l),deploymentId:uG(o),domain:uG(a),level:uG(d),ownerId:e,source:uG(c),requestTags:uG(f),route:uG(u),requestPath:uG(v),requestMethod:uG(x),requestId:m.map(e=>e.split("::").pop()),statusCode:uG(_),cache:uG(C),environment:uG(b),branch:uG(j),myLogs:!!S||void 0,sessionId:uG(N),hasTraces:!!k||void 0,traceId:uG(E),invocationId:uG(I),useClickHouseLogs:P});return`${M.API_LOGS}/request-logs/timeseries${t}`},e=>(0,tu.fetchAPI)(e,{throwOnHTTPError:!0}),{refreshInterval:5e3*!!w,keepPreviousData:!0,revalidateOnFocus:w,revalidateOnReconnect:w}),interval:B}}function uG(e){if(0!==e.length)return e.join(",")}function uZ(e){let{showSkeleton:t}=e,{setState:r}=(0,O.useLogsQueryState)(),{live:s,startDate:l,endDate:o}=(0,O.useLogsApiParams)(),a=(0,i.useRef)(null),{isLoading:d,mutate:c,isValidating:f}=(0,tn.useGroupLogs)(),{mutate:h}=uH(),g=(0,i.useCallback)(()=>{d||a.current&&Date.now()-a.current<1e3||(a.current=Date.now(),r({refreshedAt:Date.now()}),c(),h())},[d,c,h,r]);return(0,n.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,n.jsx)(u.Button,{className:s?"!ring-1 ring-blue-700":"",disabled:t,onClick:()=>{!s&&window.scrollY>=80&&window.scrollTo(0,0),s&&r({startDate:l,endDate:o}),s||r({live:!0})},prefix:s?(0,n.jsx)(uU.PauseCircle,{className:"!text-blue-900"}):(0,n.jsx)(uK.PlayCircle,{}),type:"secondary",children:(0,n.jsx)("span",{className:s?"!text-blue-900":"",children:"Live"})}),(0,n.jsx)(u.Button,{"aria-label":"Refresh Logs",disabled:t||d,onClick:g,shape:"square",svgOnly:!0,type:"secondary",children:f?(0,n.jsx)(tl.Spinner,{color:"var(--accents-5)",size:16}):(0,n.jsx)(uV.RefreshClockwise,{})})]})}var uJ=e.i(8556491),uQ=e.i(7957424),uX=e.i(1903055),uY=e.i(167223);function u0(){let e=null!==(0,x.useSearchParams)(),{state:{searchQuery:t,levels:r,domains:s,deploymentDomains:l,sources:o,requestTags:a,routes:d,requestPaths:u,statusCodes:c,requestMethods:f,caches:h,branches:p,sessionIds:m,traceIds:y,invocationIds:v,live:_},setState:C}=(0,O.useLogsQueryState)(),[b,j]=(0,i.useState)(""),[w,S]=(0,i.useState)(!1),N=(0,i.useRef)(null),k=(0,r9.useDebouncedCallback)(e=>{C({searchQuery:e,preset:null})},300),{data:E,isLoading:T}=P({attributeName:"environment",domains:s,deploymentDomains:l,sources:o,requestTags:a,routes:d,requestMethods:f,levels:r,statusCodes:c,requestPaths:u,caches:h,branches:p,sessionIds:m,traceIds:y,invocationIds:v}),L=(E?.rows??[]).reduce((e,t)=>e+t.total,0);return(0,i.useEffect)(()=>{e&&!w&&j(t||"")},[e,t,w]),(0,i.useEffect)(()=>{let e=e=>{let t=document.activeElement,r=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());"/"!==e.key||!N.current||t&&r||(e.preventDefault(),N.current.focus({preventScroll:!0}))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,n.jsxs)("div",{style:{width:"100%"},children:[(0,n.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,n.jsx)(uY.default,{"data-testid":(0,g.tid)("group-logs","search-input"),id:"search-logs",onBlur:()=>S(!1),onChange:e=>{k(e.target.value),j(e.target.value)},onFocus:()=>S(!0),placeholder:T||0===L||_?"Search logs…":`${(0,ne.abbreviateNumber)(L)} total ${1===L?"log":"logs"} found...`,ref:N,scrollOnClear:!1,value:w?b:t,width:"100%"})]})}function u1(){return(0,n.jsxs)("div",{className:"geist-show-on-mobile",style:{width:"100%"},children:[(0,n.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,n.jsx)(uY.default,{"data-testid":(0,g.tid)("group-logs","search-input"),id:"search-logs",placeholder:"Search logs…",scrollOnClear:!1,width:"100%"})]})}var u2=e.i(9321858),u3=e.i(7230346),u4=e.i(512540);let u5="logsSidebarWidth";function u6(e){let{left:t,right:r,bottom:n}=e,i=u4.default.get(u5);if(i){let{left:e,right:s,bottom:l}=JSON.parse(i);u4.default.set(u5,JSON.stringify({left:t??e,right:r??s,bottom:n??l}))}else u4.default.set(u5,JSON.stringify({left:t??270,right:r??400,bottom:n??400}))}var u9=e.i(994464),u8=e.i(8919966),u7=e.i(4327554),ce=e.i(1500826),ct=e.i(8383220),cr=e.i(7164130),cn=e.i(3509259),ci=(0,ce.generateCategoricalChart)({chartName:"BarChart",GraphicalChild:ct.Bar,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:u9.XAxis},{axisType:"yAxis",AxisComp:cr.YAxis}],formatAxisMap:cn.formatAxisMap}),cs=e.i(9655063),cl=e.i(9108284);let co={error:"var(--ds-red-700)",success:"hsla(var(--ds-gray-500-value), 0.8)"},ca={top:15,right:4,bottom:-10},cd={y:!0},cu={fill:"var(--ds-gray-300)"},cc={y:5},cf={stroke:"var(--ds-gray-300)"},ch={stroke:"var(--ds-gray-300)"},cg={fontSize:"0.6rem"},cp={error:"Error",success:"Success"};function cm(e){let{value:t,color:r,label:i}=e;return(0,n.jsxs)("div",{className:"flex flex-1 items-center gap-x-2",children:[(0,n.jsx)("div",{className:"size-1.5 rounded-full",style:{backgroundColor:r}}),(0,n.jsxs)("div",{className:"flex flex-1 justify-between gap-x-2",children:[(0,n.jsx)("span",{children:i})," ",(0,n.jsx)("span",{className:"font-medium tabular-nums",children:(0,ne.formatNumberCompact)(t)})]})]})}function cx(e){let{interval:t}=uH({skip:!0});return e.payload&&0!==e.payload.length&&e.active?(0,n.jsxs)("div",{className:"items-center rounded bg-background-100 px-0.5 py-1 text-xs shadow-tooltip",children:[(0,n.jsx)("div",{className:"flex flex-col gap-1 px-2 py-0.5",children:e.payload.map(e=>(0,n.jsx)(cm,{color:co[e.dataKey],label:cp[e.dataKey],value:Number(e.value)},e.dataKey))}),(0,n.jsx)("div",{className:"px-1 pt-0.5 text-center text-gray-900",children:(0,eZ.format)(new Date(e.payload[0].payload.name),`HH:mm${t%60==0?"":":ss"} ${t>300?"iii MMM dd":""}`)})]},`ts-${e.label}`):null}function cy(){let[e,t]=(0,i.useState)(""),[r,s]=(0,i.useState)(""),[l,o]=(0,i.useState)("dataMin"),[a,d]=(0,i.useState)("dataMax"),{onSelectionChange:u}=(()=>{let{interval:e}=uH({skip:!0}),{setState:t}=(0,O.useLogsQueryState)();return{onSelectionChange:(0,i.useCallback)(r=>{if(1===r.length){let[n]=r;t({startDate:new Date(n.name),endDate:(0,to.addSeconds)(new Date(n.name),e)});return}let n=r[0],i=r[r.length-1];"name"in n&&"name"in i&&t({startDate:new Date(n.name),endDate:new Date(i.name)})},[t,e])}})(),{startDate:c,endDate:f}=(0,O.useLogsApiParams)(),{data:g,interval:p,isLoading:m}=uH(),x=(0,i.useMemo)(()=>g&&g.data?g.data:(0,cl.default)(c.getTime(),f?.getTime(),1e3*p).map(e=>({name:new Date(e).toISOString(),error:0,success:0})),[g,p,c,f]),y=(0,i.useCallback)(e=>{t(e.activeLabel||"")},[]),v=(0,i.useCallback)(t=>{e&&s(t.activeLabel||"")},[e]),_=(0,i.useCallback)(n=>{let i=r||n.activeLabel||"";if(!e||!i){t(""),s("");return}let[l,a]=[new Date(e).getTime(),new Date(i).getTime()];l>a&&([l,a]=[a,l]),o(l),d(a),t(""),s("")},[e,r]);(0,i.useEffect)(()=>{"number"==typeof l&&"number"==typeof a&&(u(x.slice(l,a+1)),o("dataMin"),d("dataMax"))},[l,a,x,u]);let C=(0,i.useMemo)(()=>(0,h.clsx)({"!cursor-crosshair":!m,"pointer-events-none":m,"opacity-50 transition-opacity duration-500":g&&m}),[m,g]),b=(0,i.useCallback)(e=>{let t=x[e]?.name;return t?p<60?(0,eZ.format)(new Date(t),"HH:mm:ss"):p<=600?(0,eZ.format)(new Date(t),"HH:mm"):(0,eZ.format)(new Date(t),"MMM dd"):""},[x,p]);return(0,n.jsx)(u7.ResponsiveContainer,{height:54,width:"100%",children:(0,n.jsxs)(ci,{className:C,data:x,margin:ca,onMouseDown:y,onMouseMove:v,onMouseUp:_,children:[!m&&(0,n.jsx)(u8.Tooltip,{allowEscapeViewBox:cd,animationDuration:0,content:cx,cursor:cu,position:cc}),(0,n.jsx)(ct.Bar,{animationDuration:0,dataKey:"error",fill:co.error,fillOpacity:1,isAnimationActive:!1,stackId:"grouped",width:2}),(0,n.jsx)(ct.Bar,{animationDuration:0,dataKey:"success",fill:co.success,fillOpacity:1,isAnimationActive:!1,stackId:"grouped",width:2}),e&&r?(0,n.jsx)(cs.ReferenceArea,{strokeOpacity:.3,x1:e,x2:r}):null,(0,n.jsx)(u9.XAxis,{axisLine:cf,interval:"preserveStartEnd",minTickGap:300,style:cg,tickFormatter:b,tickLine:ch})]})})}var cv=e.i(9166951);function c_(e){let{className:t,tooltipClassName:r}=e,{state:i,setState:s}=(0,O.useLogsQueryState)();return(0,n.jsx)(tJ.Tooltip,{className:r,desktopOnly:!0,text:"Show requests from this browser",children:(0,n.jsxs)(u.Button,{"aria-label":"Enable My Logs",className:(0,h.clsx)("*:overflow-visible",i.myLogs&&"geist-active !bg-gray-100 !ring-1 !ring-gray-1000",t),"data-active":i.myLogs,onClick:()=>{let e=!i.myLogs;s({myLogs:e,preset:null}),w.analytics.track(j.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"my-logs-toggle",action:e?"Enable My Logs":"Disable My Logs"})},shape:"square",svgOnly:!0,type:"secondary",children:[(0,n.jsx)(cv.User,{className:(0,h.clsx)(i.myLogs&&"translate-y-[-3px]","transition-transform duration-100")}),(0,n.jsx)("div",{className:(0,h.clsx)("absolute bottom-1.5 left-1/2 size-[3px] -translate-x-1/2 rounded-full bg-gray-1000","transition-all duration-100",i.myLogs?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})]})})}var cC=e.i(6097977);function cb(e){let{className:t,tooltipClassName:r}=e,{state:i,setState:s}=(0,O.useLogsQueryState)();return(0,n.jsx)(tJ.Tooltip,{className:r,desktopOnly:!0,text:"Show requests that have traces",children:(0,n.jsxs)(u.Button,{"aria-label":"Enable Has Traces",className:(0,h.clsx)("*:overflow-visible",i.hasTraces&&"geist-active !bg-gray-100 !ring-1 !ring-gray-1000",t),"data-active":i.hasTraces,onClick:()=>{let e=!i.hasTraces;s({hasTraces:e,preset:null}),w.analytics.track(j.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"has-traces-toggle",action:e?"Enable Has Traces":"Disable Has Traces"})},shape:"square",svgOnly:!0,type:"secondary",children:[(0,n.jsx)(t2.Traces,{className:(0,h.clsx)(i.hasTraces&&"translate-y-[-3px]","transition-transform duration-100")}),(0,n.jsx)("div",{className:(0,h.clsx)("absolute bottom-1.5 left-1/2 size-[3px] -translate-x-1/2 rounded-full bg-gray-1000","transition-all duration-100",i.hasTraces?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})]})})}var cj=e.i(3748432),cw=e.i(60582),cS=e.i(7837522),cN=e.i(7780974),ck=e.i(7589392);function cE(e){var t;let r,{isLoadingEnvs:S,allEnvironments:N,sidebarWidth:k}=e,{state:E,setState:T}=(0,O.useLogsQueryState)(),{selectedLogId:L,panelState:M}=E,{team:D,isLoading:A}=(0,y.useAccount)(),F=(0,v.useIsMobile)(),I=(0,v.useIsTablet)(),{topOffset:P}=(0,X.usePageConfig)(),R=cw.IS_DASH&&I?0:P,[B,q]=(0,i.useState)(!1),{getExport:z}=(0,cC.useGroupLogsExport)(),W=(0,rd.useServerFlag)("enable-new-logs-search-bar",!1),{data:$}=(0,te.useSelectedLog)(),{track:K}=(0,cS.useTrackActivity)(),U=(0,x.useParams)(),{can:V,isLoading:H}=(0,C.default)(),G=!D||V(b.Action.Read,b.Resource.Logs),Z=H||A,{success:J}=(0,c.useToasts)(),[Q,Y]=(0,i.useState)(!1),ee=D?.billing?.plan==="hobby",et=D?.billing?.plan==="pro"&&"trialing"===D.billing.status,er=V(b.Action.Create,b.Resource.Drain)&&!(ee||et),en=(0,i.useCallback)(e=>{K(cN.VercelActivityAction.DrainsModalConverted,{source:"logs-more-options",drainType:e.drainType,kind:e.kind,isLegacy:e.isLegacy}),U?.teamSlug&&U?.project&&J({text:"Drain successfully added",action:"View project drains",actionHref:`/${U.teamSlug}/${U.project}/settings/drains`})},[K,U?.teamSlug,U?.project,J]),ei="auto"===M?($?.logs.length||0)>0:"opened"===M;(0,i.useEffect)(()=>{ei&&T({panelState:"auto"===M?"opened":M})},[ei,M]);let es=(0,i.useCallback)(()=>{T({selectedLogId:void 0})},[T]),el=(0,i.useRef)(null),eo=(0,i.useRef)(null),ea=(0,i.useRef)(null),ed=(0,i.useRef)(null),eu=(0,i.useRef)(null),ec=(0,i.useRef)(null),ef=(0,i.useRef)(null),eh=(0,i.useRef)(null),[eg,ep]=(0,i.useState)(k.left),[em,ex]=(0,i.useState)(k.right),[ey,ev]=(0,i.useState)(k.bottom),[e_,eC]=(0,i.useState)(!1),ew=e=>{ep(e),u6({left:e})},eN=e=>{ex(e),u6({right:e})},ek=`${eg}px calc(100% - ${eg}px)`,eE=(t=e=>{let t=null!==ef.current;ef.current=e.currentTarget.scrollLeft,t||requestAnimationFrame(()=>{eu.current&&null!==ef.current&&(eu.current.scrollLeft=ef.current),ef.current=null})},r=(0,i.useRef)(0),e=>{let n=e.currentTarget.scrollLeft;n!==r.current&&(r.current=n,t(e))});(0,i.useEffect)(()=>{function e(){if(cw.IS_DASH){if(eo.current){let e=Math.max(R+147,eo.current.getBoundingClientRect().top);eo.current.style.top=`${e}px`,ea.current&&(ea.current.style.height=`calc(100vh - ${e}px)`)}}else{if(!ed.current)return;let e=Math.max(R,ed.current.getBoundingClientRect().top),t=e+147;ed.current.style.height=`calc(100vh - ${e}px)`,eo.current&&(eo.current.style.top=`${t}px`),ea.current&&(ea.current.style.height=`calc(100vh - ${t}px)`)}}return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[R,L]);let eT=function(e,t){let[r,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let r=(0,_.default)(()=>{if(!t.current||!e.current)return;let{top:r}=t.current.getBoundingClientRect(),{bottom:i}=e.current.getBoundingClientRect();r<=i?n(!0):n(!1)},200);return window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[e,t]),r}(eu,ec),[eL,eM]=(0,i.useState)(null),eD=`max(min(${em}px, 50vw), 350px)`;return(0,n.jsxs)(cj.ConditionalNavigationMarker,{enabled:!S,phase:"content",label:"LogsMain",children:[(0,n.jsxs)("div",{className:"tailwind-preflight",style:{display:"flex",flexFlow:"column"},children:[G||Z||!D?null:(0,n.jsx)(uJ.AdditionalPermissionsRequiredModal,{actionLabel:"view Runtime Logs",role:D.membership?.role,team:D,dataTestId:(0,g.tid)("group-logs","no-permissions-card")}),G||H?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{flexGrow:1},children:(0,n.jsxs)("div",{className:(0,f.cn)("block h-full",!cw.IS_DASH&&"md:grid"),style:{gridTemplateColumns:ek},children:[cw.IS_DASH?(0,n.jsx)(eb,{allEnvironments:N,isLoadingEnvs:S}):(0,n.jsxs)("div",{className:"geist-hide-on-mobile",ref:el,style:{borderRight:"1px solid var(--accents-2)",position:"relative",zIndex:1},children:[(0,n.jsx)(uO.DraggableBorder,{element:el,onReset:()=>{ew(270)},onWidthChange:e=>{let t=Math.min(e,window.innerWidth/3);ew(t=t<230?0:t)},position:"right"}),(0,n.jsx)("div",{ref:ed,style:{position:"sticky",top:R,height:"100%",background:"var(--geist-background)",contain:"layout"},children:(0,n.jsx)("div",{className:"flex flex-col overflow-auto h-full p-3",tabIndex:-1,children:(0,n.jsx)(eb,{allEnvironments:N,isLoadingEnvs:S})})})]}),(0,n.jsxs)("div",{style:{display:"flex",flexFlow:"column",position:"relative",height:"100%",zIndex:2},children:[(0,n.jsxs)("div",{className:(0,h.clsx)("flex flex-col items-stretch justify-start flex-initial sticky z-[3]",u3.default.logHeader,cw.IS_DASH?"bg-[var(--ds-background-200)]":"bg-[var(--ds-background-100)]"),style:{position:"sticky",top:R},children:[(0,n.jsxs)("div",{style:{padding:"var(--geist-gap-half) var(--geist-gap-half) 0 var(--geist-gap-half)"},children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-col lg:flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,n.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial grow",children:[cw.IS_DASH?null:(0,n.jsx)(u.Button,{"aria-label":"filter sidebar",className:"hidden shrink-0 lg:block",onClick:()=>0===eg?ew(270):ew(0),shape:"square",svgOnly:!0,type:"secondary",children:(0,n.jsx)(m.Filter,{})}),(0,n.jsx)(c_,{tooltipClassName:"hidden lg:block shrink-0"}),(0,n.jsx)(cb,{tooltipClassName:"hidden lg:block shrink-0"}),(0,n.jsx)(i.Suspense,{fallback:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u1,{}),(0,n.jsx)(nl,{})]}),children:F?(0,n.jsx)(u0,{}):W?(0,n.jsx)(uA,{}):(0,n.jsx)(ns,{})})]}),(0,n.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,n.jsx)(eS,{onClick:()=>q(!0)}),(0,n.jsx)(c_,{className:"shrink-0",tooltipClassName:"lg:hidden"}),(0,n.jsx)(cb,{className:"shrink-0",tooltipClassName:"lg:hidden"}),(0,n.jsx)("div",{className:"flex-1 lg:hidden"}),(0,n.jsx)(uZ,{showSkeleton:H}),(0,n.jsxs)(o.MenuContainer,{position:"bottom-end",children:[(0,n.jsx)(l.MenuButton,{"aria-label":"Query Actions",shape:"square",size:"small",style:{height:"40px",width:"40px"},svgOnly:!0,type:"secondary",children:(0,n.jsx)(p.MoreVertical,{})}),(0,n.jsxs)(s.Menu,{width:"160px",children:[Z?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.MenuItem,{disabled:!er,onClick:()=>{Y(!0),K(cN.VercelActivityAction.DrainsModalOpened,{source:"logs-more-options"})},children:"Add Drain"}),(0,n.jsx)(a.MenuDivider,{})]}),(0,n.jsx)(d.MenuItem,{onClick:()=>{w.analytics.track(j.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"global-dropdown",action:"Export Logs as CSV"}),eM("csv")},children:"Export to CSV"}),(0,n.jsx)(d.MenuItem,{onClick:()=>{w.analytics.track(j.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"global-dropdown",action:"Export Logs as JSON"}),eM("json")},children:"Export to JSON"})]})]})]})]}),(0,n.jsx)(cy,{}),(0,n.jsx)(t6,{ref:eu})]}),(0,n.jsx)("div",{className:(0,h.clsx)(u3.default.logGradient,{[u3.default.show]:eT})})]}),(0,n.jsx)(uq,{onScroll:eE,ref:ec,showSkeleton:H}),(0,n.jsxs)("div",{className:"fixed bottom-0 hidden transform-gpu border-t border-gray-300 bg-background-100 md:block",ref:eh,style:{left:cw.IS_DASH?"var(--sidebar-width)":`${eg}px`,right:eD,height:ei?400===ey?"min(400px, 35vh)":`max(min(70vh, ${ey}px), 240px)`:49,boxShadow:"var(--ds-shadow-large)",transition:e_?"none":"height 0.2s",display:L?"block":"none",zIndex:3},children:[ei?(0,n.jsx)(uO.DraggableBorder,{element:eh,onStartDrag:()=>{eC(!0)},onStopDrag:()=>{eC(!1)},onWidthChange:e=>{ev(e),u6({bottom:e})},position:"top"}):null,(0,n.jsx)(rx,{collapsed:!ei,onToggleCollapse:()=>{T({panelState:ei?"closed":"opened"})}})]})]}),L?(0,n.jsxs)("div",{className:"fixed bottom-0 right-0 hidden translate-x-0 translate-y-0 transform-gpu overflow-y-auto border-t border-t-gray-400 bg-background-100 md:block z-[2]",ref:eo,style:{width:eD,boxShadow:"var(--ds-shadow-large)",top:cw.IS_DASH?203:247},children:[(0,n.jsx)(uO.DraggableBorder,{element:eo,onReset:()=>{eN(400)},onWidthChange:e=>{eN(Math.min(Math.max(e,400),window.innerWidth/2))},position:"left"}),(0,n.jsx)("div",{className:"hidden overflow-y-auto md:flex",ref:ea,children:(0,n.jsx)(rf.TraceViewerPanel,{className:"z-0 border-none",children:(0,n.jsx)(rA,{onClose:es,selectedLogId:L})})})]}):null]})}),(0,n.jsx)(ej,{active:B,allEnvironments:N,isLoadingEnvs:S,onDismiss:()=>q(!1)}),(0,n.jsx)(rD,{onClose:es,selectedLogId:L}),U?.teamSlug&&er?(0,n.jsx)(ck.DrainModals,{isOpen:Q,closeModal:()=>Y(!1),teamSlug:U.teamSlug,projectIdOrSlug:U.project,onDrainCreated:en,drain:null,drainType:"logs"}):null]}):null]}),eL?(0,n.jsx)(u2.GroupExportModal,{format:eL,getExport:z,onClose:()=>{eM(null)}}):null]})}e.s(["GroupLogs",0,function(e){let{sidebarWidth:t,...r}=e,{project:s}=(0,x.useParams)()??{},l=(0,A.useProject)(s),{trackLogPageVisit:o}=K(),{data:{environments:a},isLoading:d}=(0,uQ.useAllEnvironments)(l.data?.id??"");return(0,i.useEffect)(()=>{o()},[o]),(0,i.useEffect)(()=>{let e=document.documentElement.style.overscrollBehaviorY,t=document.body.style.overscrollBehaviorY;return document.documentElement.style.overscrollBehaviorY="none",document.body.style.overscrollBehaviorY="none",()=>{document.documentElement.style.overscrollBehaviorY=e,document.body.style.overscrollBehaviorY=t}},[]),(0,uX.default)(l.error),(0,n.jsx)(X.PageConfigProvider,{...r,children:(0,n.jsx)(ru.GroupLogsProvider,{children:(0,n.jsx)(cE,{allEnvironments:a,isLoadingEnvs:d,sidebarWidth:t})})})}],6687520)}]);

//# debugId=f7fbd2c0-a331-efd3-6628-0f6f18e7023a
//# sourceMappingURL=50ea324e726dc3a5.js.map