;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="3564a1d8-5487-100b-a620-817ffc7d8de4")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,4351165,e=>{"use strict";var t=e.i(847684),a=e.i(7185353);let n=(0,a.createContext)(null);e.s(["PerTLDPropagationTimeProvider",0,function(e){let{children:a,perTLDPropagationTimeMap:r}=e;return(0,t.jsx)(n.Provider,{value:r,children:a})},"useTldPropagationTime",0,function(e){let t=(0,a.useContext)(n);return t?t.get(e):(console.warn("usePerTLDPropagationTime must be used within a PerTLDPropagationTimeProvider, returning null"),null)}])},5519011,e=>{e.v({content:"add-domain-in-use-modal-module__vFG4Bq__content",favicon:"add-domain-in-use-modal-module__vFG4Bq__favicon",inset:"add-domain-in-use-modal-module__vFG4Bq__inset",loadingItem:"add-domain-in-use-modal-module__vFG4Bq__loadingItem",noteCenterText:"add-domain-in-use-modal-module__vFG4Bq__noteCenterText",outset:"add-domain-in-use-modal-module__vFG4Bq__outset",subitem:"add-domain-in-use-modal-module__vFG4Bq__subitem"})},8162654,e=>{"use strict";var t=e.i(847684),a=e.i(3306538),n=e.i(2504781),r=e.i(5255926),i=e.i(5468328),s=e.i(8161149),o=e.i(3500331),l=e.i(8522580),d=e.i(8674454),c=e.i(4991687),u=e.i(6694387),m=e.i(57106),h=e.i(6239252),f=e.i(7185353),x=e.i(4345845),p=e.i(3162826),g=e.i(8284460),j=e.i(9722978),v=e.i(8238875),b=e.i(6143247),k=e.i(1717203),y=e.i(7557283),w=e.i(5927860),N=e.i(598834),S=e.i(3642542),C=e.i(1991452),z=e.i(6891161),I=e.i(9318197),P=e.i(4004502),D=e.i(8518548);function A(e){let{setRemoveModal:a,removeModal:n,domain:r,onRemoveDomain:s,removing:o,error:d}=e,c=(0,C.useRouter)(),u=(0,f.useCallback)(()=>a(!1),[a]),{can:m}=(0,k.default)(),h=m(y.Action.Update,y.Resource.Project),{data:x}=(0,D.useProjectDomains)(c.query.project,{redirect:r}),p=(x?.length??0)>0,g=(0,f.useCallback)(async()=>{await s({removeRedirects:p})},[p,s]),j=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z.Modal.Header,{children:(0,t.jsx)(z.Modal.Title,{children:"Remove Domain from Project"})}),(0,t.jsx)(I.Spacer,{}),(0,t.jsxs)("p",{className:"text-copy-14",children:["Removing ",(0,t.jsx)("strong",{children:r})," will disconnect it from your project. This project will no longer be accessible from this domain, including in production."]}),(0,t.jsx)(I.Spacer,{}),p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Note,{type:"warning",children:["This domain has ",x?.length," redirect",x?.length===1?"":"s"," pointing to it:"," ",x?.map(e=>`"${e.name}"`).join(", "),". Removing this domain will also remove the domains that redirect to it."]}),(0,t.jsx)(I.Spacer,{})]}):null,d?(0,t.jsx)(l.Note,{type:"error",children:d}):null]}),v=(x?.length??0)+1,b=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z.Modal.Action,{onClick:()=>a(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(i.Tooltip,{disableTriggers:h,text:"You don't have permission to manage domains in this project. Ask your team admin to manage domains or grant you the member role or higher.",children:(0,t.jsx)(z.Modal.Action,{"data-testid":(0,P.tid)("project","settings","domains","remove-domain-modal","confirm-button"),disabled:o||!h,loading:o,onClick:g,type:"error",children:p?`Remove ${2===v?"Both":`All ${v}`} Domains`:"Remove"})})]});return(0,t.jsxs)(z.Modal,{active:n,"data-testid":(0,P.tid)("project","settings","domains","remove-domain-modal"),onClickOutside:u,width:"520px",children:[(0,t.jsx)(z.Modal.Body,{children:j}),(0,t.jsx)(z.Modal.Actions,{children:b})]})}var E=e.i(693385),R=e.i(7957424),T=e.i(542164),_=e.i(822157),O=e.i(1516738),F=e.i(8835183);function M(e){let a=(0,f.useRef)(null);return(0,f.useEffect)(()=>{let e=e=>{if((e.metaKey||e.ctrlKey)&&"f"===e.key){let t=a.current;document.activeElement!==t&&(e.preventDefault(),t?.focus())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,t.jsx)(F.SearchInput,{ref:a,clearable:!1,value:e.value,name:"search",error:e.noResultsFound?"We couldn't find any domains matching your search.":void 0,onChange:t=>e.setSearch(t.target.value),placeholder:"Searchâ€¦",width:"100%"})}var B=e.i(3322724),$=e.i(6881349),L=e.i(9668517),W=e.i(6060673),V=e.i(2928617);function G(e){let a=(0,L.useTeamSlug)(),n=(0,v.useParams)(),{data:r}=(0,W.useProject)(n?.project);return r?.link?(0,t.jsx)(U,{project:r,...e}):(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-4 flex-initial",children:(0,t.jsx)(m.ButtonLink,{as:`/${a}/${r?.name}/settings/git`,href:`/${a}/${r?.name}/settings/git`,size:"small",type:"secondary",children:"Connect Git Repository"})})}function U(e){let{disabled:n,onChange:r,onFocus:i,project:s,value:o,environmentId:l,clearable:d=!1}=e,{data:c}=(0,V.useProjectBranches)(s.id),u=(c||[]).map(e=>e.ref),m=u.filter(e=>e!==s.link.productionBranch);return(0,t.jsxs)($.Combobox,{className:"flex w-full",clearable:d,disabled:n,onChange:e=>r?.(e??""),placeholder:"All Branches",value:o,children:[(0,t.jsx)($.Combobox.Input,{"aria-label":"Git Branch",onChange:e=>r?.(e.target.value),onFocus:i}),(0,t.jsxs)($.Combobox.List,{emptyMessage:"No Branches",children:[(0,t.jsx)(t.Fragment,{children:!!o&&!u.includes(o??"")&&(0,t.jsx)($.Combobox.Option,{displayValue:!0,value:o??"",children:`Use "${o}"`})}),(0,t.jsx)(t.Fragment,{children:"production"===l&&(0,t.jsxs)($.Combobox.Option,{value:s.link.productionBranch||"",children:[(0,t.jsx)("p",{className:"text-copy-14",children:s.link.productionBranch}),(0,t.jsx)(I.Spacer,{inline:!0,x:1/4}),(0,t.jsx)(a.Badge,{variant:"blue",children:"Production"})]})}),(0,t.jsx)(t.Fragment,{children:m.map(e=>(0,t.jsx)($.Combobox.Option,{value:e,children:e},e))})]})]})}var H=e.i(818351),q=e.i(8042625),Y=e.i(4244280),J=e.i(4937017);e.i(3512434);var K=e.i(9835407),Q=e.i(1873881),Z=e.i(1395335);let X=K.z.object({cns:K.z.array(K.z.string()),expiresAt:K.z.number()}),ee=K.z.union([K.z.object({certs:K.z.array(X)}),K.z.undefined()]),et=K.z.object({error:K.z.object({status:K.z.number().optional(),message:K.z.string(),code:K.z.enum(["public-alias","no-permissions-certs"]).optional()})});var ea=e.i(8785423);let en=K.z.object({providers:K.z.array(K.z.object({role:K.z.string(),id:K.z.string()})),nameserverProviders:K.z.array(K.z.string())}),er=K.z.object({error:K.z.object({code:K.z.enum(["not_found","invalid_name","internal_server_error"]),message:K.z.string(),name:K.z.string()})});async function ei(e,t){if(await new Promise(e=>{setTimeout(e,1)}),(0,Z.isPublicAlias)(t))return{isDomainOnCloudflare:!1,hasCloudflareInFront:!1};let a=await (0,Q.safeFetch)(e,{successSchema:en,failureSchema:er});if(a.isErr())return{isDomainOnCloudflare:!1,hasCloudflareInFront:!1};let n=a.value.nameserverProviders.includes("Cloudflare"),r=a.value.providers.find(e=>"front-proxy"===e.role);return{isDomainOnCloudflare:n,hasCloudflareInFront:r?.id==="Cloudflare"}}let es=K.z.null(),eo=K.z.object({error:K.z.object({code:K.z.enum(["invalid_name"]),message:K.z.string()})});function el(e,t){let a=(0,L.useTeamSlug)();return(0,H.useIsomorphicSWR)(e.length>0?`${Y.API_DOMAINS}/${encodeURIComponent(e)}/verify${(0,q.encode)({teamId:a})}`:null,async t=>(0,Z.isPublicAlias)(e)?(0,J.okAsync)(null):(0,Q.safeFetch)(t,{method:"POST",successSchema:es,failureSchema:eo}),{refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnReconnect:!0,revalidateOnFocus:!0,refreshInterval:15e3,dedupingInterval:15e3,...t})}let ed=K.z.discriminatedUnion("result",[K.z.object({result:K.z.literal("success")}),K.z.object({result:K.z.literal("error"),message:K.z.string(),code:K.z.string()})]),ec=K.z.object({error:K.z.object({code:K.z.enum(["incorrect_txt_record","txt_on_another_project","existing_project_domain","txt_on_wrong_domain"]),message:K.z.string(),name:K.z.string().optional()})});var eu=e.i(4030453),em=e.i(6607601),eh=e.i(9505054),ef=e.i(7909933);let ex=K.z.object({boughtAt:K.z.number().nullable(),verified:K.z.boolean().optional(),createdAt:K.z.number(),cdnEnabled:K.z.boolean(),configVerifiedAt:K.z.number().nullable().optional(),expiresAt:K.z.number().nullable(),id:K.z.string(),intendedNameservers:K.z.array(K.z.string()),movedAt:K.z.number().optional(),movedFromOwnerId:K.z.string().optional(),name:K.z.string(),nameservers:K.z.array(K.z.string()),nsVerifiedAt:K.z.number().nullable(),orderedAt:K.z.number().optional(),renew:K.z.boolean().optional(),serviceType:K.z.enum(["zeit.world","external","na"]),teamId:K.z.string().nullable(),transferredAt:K.z.number().nullable().optional(),txtVerifiedAt:K.z.number().nullable(),verificationRecord:K.z.string(),creator:K.z.object({id:K.z.string(),customerId:K.z.string().nullable().optional(),email:K.z.string(),username:K.z.string(),name:K.z.string().optional()}).optional(),zone:K.z.boolean().optional(),userId:K.z.string().nullable().optional(),registrar:K.z.enum(["new"]).optional()}),ep=K.z.object({domain:ex}),eg=K.z.object({error:K.z.object({code:K.z.string(),message:K.z.string(),name:K.z.string().optional()})});function ej(e,t){var a;let n=(0,L.useTeamSlug)();return(0,ef.default)(e&&n?(a={domainName:e,teamId:n},`${Y.API_DOMAINS}/${encodeURIComponent(a.domainName)}${(0,q.encode)({teamId:a.teamId})}`):null,async t=>e&&(0,Z.isPublicAlias)(e)?(0,J.errAsync)(new Q.ApiError({error:{error:{code:"forbidden",message:`You don't have access to "${e}"`,name:e}}})):(0,Q.safeFetch)(t,{successSchema:ep,failureSchema:eg}),{dedupingInterval:3e4,...t})}var ev=e.i(4237893),eb=e.i(2807882);function ek(e){let{children:a,tabs:n,disabled:r,selected:i,defaultSelected:s=0,onChange:o,borderless:l}=e,[d,c]=(0,f.useState)(s),u=void 0!==i?i:d;return(0,t.jsxs)("div",{className:(0,j.clsx)({[String(eb.default.disabled)]:r,[String(eb.default.borderless)]:l}),"data-geist-fieldset-tabs":"",children:[(0,t.jsx)("div",{className:eb.default.tabsRow,children:(0,t.jsx)(ev.Tabs,{selected:i?n[i]:n[d],setSelected:e=>{if(r)return;let t=n.findIndex(t=>t===e);void 0===i&&c(t),o?.(t)},style:{boxShadow:"none"},tabs:n.map(e=>({title:e,value:e}))})}),f.Children.map(a,(e,t)=>t===u?e:null)]})}var ey=e.i(8517043),ew=e.i(7137884),eN=e.i(9177891),eS=e.i(277234),eC=e.i(7917902),ez=e.i(6264149);function eI(e){let{teamDomain:a,projectDomain:n,refresh:r}=e,i=!!a?.zone,s=(0,L.useTeamSlug)(),{team:o}=(0,eC.useAccount)(),d=(0,f.useCallback)(async()=>{let e=`?teamId=${encodeURIComponent(s??"")}`;await (0,eS.fetchAPI)(`${Y.API_DOMAINS}/${encodeURIComponent(n.name)}${e}`,{method:"PATCH",body:JSON.stringify({zone:!0}),throwOnHTTPError:!0}),r()},[n.name,s,r]);(0,f.useEffect)(()=>{let e=setTimeout(()=>{i||d()},2500);return()=>clearTimeout(e)},[i,d]);let c=o?.billing?.plan==="hobby";return a?(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{children:"Update your domain's nameservers to enable Vercel DNS."}),(0,t.jsx)(eN.NSConfiguration,{nameservers:a.intendedNameservers.length>0?a.intendedNameservers:ez.VERCEL_NAMESERVERS})]}):(0,t.jsx)(l.Note,{children:c?"Please move this domain to this team in order to use Vercel nameservers.":(0,t.jsxs)(t.Fragment,{children:["Please"," ",(0,t.jsx)(m.Link,{href:"https://vercel.com/docs/domains/working-with-domains/transfer-your-domain",className:"text-blue-900 underline",children:"move this domain"})," ","to this team in order to use Vercel nameservers. If no one on your team has access to this domain, contact support to prove ownership of it"]})})}function eP(e){let{dnsRecords:a,teamDomain:n,domainConfig:r,projectDomain:i,configMethod:s,domainConnectUrl:o,setConfigMethod:l,verifyTxtError:d}=e;if((0,T.default)(i.name)&&(!r||"zeit.world"!==r.serviceType))return(0,t.jsx)(eI,{teamDomain:n,projectDomain:i,refresh:e.refresh});if(!r?.misconfigured)return(0,t.jsx)("div",{className:"flex flex-col gap-2 border-0",children:(0,t.jsx)(eN.DNSConfiguration,{records:a,domainConnectUrl:o,verifyTxtError:d})});let{conflicts:c}=r,u=c.sort((e,t)=>e.type.localeCompare(t.type)).map(e=>{var t,a;return{...e,name:(t=e.name,(a=i.apexName)===t?"@":t.slice(0,t.length-a.length-1))}}),m=u.length>0,h=1===u.length;return(0,t.jsxs)(ek,{borderless:!0,selected:+("DNS Records"!==s),onChange:e=>{l(0===e?"DNS Records":"Nameservers")},tabs:["DNS Records","Vercel DNS"],children:[(0,t.jsx)(ey.Fieldset,{borderlessTabs:!0,children:(0,t.jsx)(ew.FieldsetContent,{className:"px-1 pb-0 pt-2",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 border-0",children:[(0,t.jsx)("span",{children:"The DNS records at your provider must match the following records to verify and connect your domain to Vercel."}),m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{children:["Remove the following conflicting DNS"," ",h?"record":"records"," from your DNS provider:"]}),(0,t.jsx)(eN.DNSConfiguration,{records:u}),(0,t.jsx)("p",{children:"Afterwards, set the following record on your DNS provider to continue:"})]}):null,(0,t.jsx)(eN.DNSConfiguration,{records:a,domainConnectUrl:o,verifyTxtError:d})]})})}),(0,t.jsx)(ey.Fieldset,{borderlessTabs:!0,children:(0,t.jsx)(ew.FieldsetContent,{className:"px-1 pt-2",children:(0,t.jsx)(eI,{teamDomain:n,projectDomain:i,refresh:e.refresh})})})]})}var eD=e.i(7362991);let eA=K.z.object({providers:K.z.array(K.z.object({role:K.z.string(),id:K.z.string()})),nameserverProviders:K.z.array(K.z.string())}),eE=K.z.object({error:K.z.object({code:K.z.enum(["not_found","invalid_name","internal_server_error"]),message:K.z.string(),name:K.z.string()})});function eR(e){let t=(0,eD.parse)(e);return!("error"in t)&&("www"===t.subdomain||t.domain===e)&&"vercel.app"!==t.tld&&t.listed}function eT(e,t){return t===e?"@":e.slice(0,e.length-t.length-1)}var e_=e.i(4394127),eO=e.i(5757634),eF=e.i(3186167),eM=e.i(7432042),eB=e.i(109803),e$=e.i(4351165),eL=e.i(953632),eW=e.i(9977037),eV=e.i(8523664),eG=e.i(5836125),eU=e.i(8905788),eH=e.i(5338940);function eq(e){return null===e?null:Math.floor((Date.now()-e)/6e4)}function eY(e){var a,n,r;let i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4,o={refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnReconnect:!1,revalidateOnFocus:!1,refreshInterval:s,dedupingInterval:3e4},[l,d]=(0,f.useTransition)(),c=(0,L.useTeamSlug)(),u=(0,eH.useTeam)(),h=(0,ea.useDomainConfig)(e.name,{strict:!1,projectIdOrName:e.projectId},o),x=(a=e.name,(0,H.useIsomorphicSWR)((0,Z.isPublicAlias)(a)?null:`/api/front-domains/check-proxy-status?domain=${a}`,async e=>ei(e,a),{dedupingInterval:3e4,...o})),p=function(e,t){let{domain:a,filterDeleted:n=!0}=e,r=(0,L.useTeamSlug)();return(0,H.useIsomorphicSWR)(`${Y.API_ALIASES}/${encodeURIComponent(a)}${(0,q.encode)({filterDeleted:n,teamId:r})}`,async e=>{try{let t=await fetch(e);if(204===t.status)return(0,J.ok)(null);return(0,J.ok)(await t.json())}catch(e){return(0,J.err)(e)}},{dedupingInterval:3e4,...t})}({domain:e.name,filterDeleted:!1},o),g=el(e.name,o),j=(i=(0,L.useTeamSlug)(),(0,H.useIsomorphicSWR)(`${(0,Y.API_PROJECTS_DOMAINS_VERSION)("v9")}/${e.projectId}/domains/${e.name}/verify${(0,q.encode)({teamId:i})}`,async t=>(0,Z.isPublicAlias)(e.name)||!1!==e.verified?(0,J.ok)({result:"success"}):(0,Q.safeFetch)(t,{successSchema:ed,failureSchema:ec,method:"POST"}),{refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnReconnect:!0,revalidateOnFocus:!0,refreshInterval:15e3,dedupingInterval:15e3,...o})),v=function(e,t){let a=(0,L.useTeamSlug)(),{can:n}=(0,k.default)(),r=n(y.Action.List,y.Resource.DomainCertificate);return(0,H.useIsomorphicSWR)(`${Y.API_CERTS}${(0,q.encode)({teamId:a,cn:e})}`,async t=>(0,Z.isPublicAlias)(e)?(0,J.errAsync)(new Q.ApiError({error:{error:{message:"You are not authorized to list certificates",status:403,code:"public-alias"}}})):r?(0,Q.safeFetch)(t,{successSchema:ee,failureSchema:et}):(0,J.errAsync)(new Q.ApiError({error:{error:{message:"You are not authorized to list certificates",status:403,code:"no-permissions-certs"}}})),{shouldRetryOnError:!1,dedupingInterval:3e4,...t})}(e.name,o),b=(0,e_.useCertErrors)(e.name,"dnsName",o),w=(0,W.useProject)(e.projectId,{config:o}),N=(n=e.name,r={shouldRetryOnError:!1,...o},(0,ef.default)(n&&!(0,Z.isPublicAlias)(n)?`/api/front-domains/domain-connect/status?domain=${n}`:null,e=>(0,eS.fetchAPI)(e,{throwOnHTTPError:!0}),{keepPreviousData:!0,dedupingInterval:3e4,...r})),S=(0,eF.useHasDomainBeenConfiguredWithDomainConnect)(e.name),C=ej(e.name,o),z=(0,eL.parse)(e.name).publicSuffix??"",P=(0,e$.useTldPropagationTime)(z),A=C.data?.isOk()?C.data.value.domain:null,E=function(e){let{boughtAt:t}=e,[a,n]=(0,f.useState)(eq(t));return((0,f.useEffect)(()=>{if(null===t)return;let e=setInterval(()=>{n(eq(t))},1e4);return()=>clearInterval(e)},[t]),null===t)?null:a}({boughtAt:A?.boughtAt??null})??eq(A?.boughtAt??null),[R,T]=(0,f.useState)("DNS Records"),_=e.name.endsWith(".vercel.app"),O=A?.registrar==="new",F=u.isReady&&u.team?u.team.id:null,M=A?.teamId??null,B=u.isReady&&null!==M&&null!==F&&F===M,$=O&&B&&!_,V=(0,eV.useAtomValue)((0,eG.contactVerificationStateAtom)(new eG.ContactVerificationStateParams({domainName:$?e.apexName:null,scope:c??null}))),G=h.isLoading||x.isLoading||p.isLoading||g.isLoading||j.isLoading||v.isLoading||b.isLoading||C.isLoading||$&&"Initial"===V._tag,U=h.isValidating||x.isValidating||p.isValidating||g.isValidating||j.isValidating||v.isValidating||b.isValidating||C.isValidating,K=l||U,X=(0,f.useCallback)(()=>{d(async()=>{await Promise.all([h.mutate(),x.mutate(),p.mutate(),g.mutate(),j.mutate(),v.mutate(),b.mutate(),C.mutate(),N.mutate()])})},[b,v,h,p,x,g,j,C,N]),en=function(e,t){el(e??"");let a=function(e,t){let a=(0,ea.useDomainConfig)(e,{strict:!1,projectIdOrName:t}),n={ipv4:"76.76.21.21",cname:"cname.vercel-dns.com."};if(!a.data?.isOk())return n;let r=a.data.value.recommendedIPv4?.[0].value;r&&r.length>0&&(n.ipv4=r[0]);let i=a.data.value.recommendedCNAME?.[0].value;return i&&(n.cname=i),n}(e,t),{data:n}=(0,D.useProjectDomain)(e?{projectId:t,name:e}:null),r=function(e){let{data:t}=(0,ef.default)(e&&!(0,Z.isPublicAlias)(e)?`/api/front-domains/check-proxy-status?domain=${e}`:null,async e=>{let t=await (0,Q.safeFetch)(e,{successSchema:eA,failureSchema:eE});return t.isOk()?{isDomainOnCloudflare:t.value.nameserverProviders.includes("Cloudflare"),hasCloudflareInFront:t.value.providers.find(e=>"front-proxy"===e.role)?.id==="Cloudflare"}:{isDomainOnCloudflare:!1,hasCloudflareInFront:!1}});return t?.isDomainOnCloudflare??!1}(e),i=ej(e),s=(0,ea.useDomainConfig)(e,{strict:!1,projectIdOrName:t});if(!e||!n)return[];let o=n.verification?.at(0),l=n.apexName===e,d=i.data?.isOk()?i.data.value.domain:void 0,c=s.data?.isOk()?s.data.value:void 0,u=d?.intendedNameservers.length?d.intendedNameservers:ez.VERCEL_NAMESERVERS,m=c?.nameservers??[];d?.serviceType==="na"&&d.boughtAt,u.every(e=>m.includes(e));let h=[],f=s.data?.isOk()&&!s.data.value.misconfigured,x=s.data?.isOk()&&["required-change","optional-change"].includes(s.data.value.ipStatus??"");return(!f||x)&&h.push({type:l?"A":"CNAME",name:l?"@":eT(e,n.apexName),value:l?a.ipv4:a.cname,disableProxy:r}),o&&h.push({type:o.type,name:eT(o.domain,n.apexName),value:`${o.value}`,verifyDomain:o.domain}),h}(e.name,e.projectId),er=N.data?.providerId==="cloudflare.com"?(0,eF.getDomainConnectApplyUrl)(e,c??void 0):void 0,es=j.data?.isErr()?j.data.error:void 0,eo=(0,t.jsx)(eP,{dnsRecords:en,domainConfig:h.data?.isOk()?h.data.value:void 0,teamDomain:C.data?.isOk()?C.data.value.domain:void 0,projectDomain:e,domainConnectUrl:er,refresh:X,configMethod:R,setConfigMethod:T,verifyTxtError:es?._tag==="ApiError"&&"txt_on_another_project"===es.error.error.code?es.error.error.message:void 0});if(G)return{status:"loading"};if($&&eW.Result.isSuccess(V)&&!1===V.value.verified)return{status:"unverified-email",refresh:X,isRefreshing:K,level:V.value.verifyBy>new Date?"warning":"error",ui:(0,t.jsx)(eU.ContactVerificationNotification,{email:V.value.email,verifyBy:V.value.verifyBy,domainName:e.name})};let ex=h.data?.isOk()?h.data.value:null;if(S&&(ex?.misconfigured||!e.verified))return{status:"domain-connect-success",refresh:X,isRefreshing:K,ui:(0,t.jsx)("p",{className:"text-copy-14",children:"Automatic configuration applied correctly and we are monitoring for the DNS changes to propagate."}),level:"spinner"};if(!e.verified)return{status:"verification-needed",refresh:X,isRefreshing:K,ui:eo,level:"error"};if(ex?.misconfigured){let e=(0,eM.default)("4h")/6e4;if(null!==E&&E<e&&!ex?.configuredBy){let e=P?.averagePropagationDelayMs?Math.max(Math.round(P.averagePropagationDelayMs/6e4*1.3),5):null;return{status:"pending-nameserver-propagation",refresh:X,isRefreshing:K,ui:(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsxs)("p",{className:"text-copy-14",children:[(()=>{if(!e)return ez.DNS_PROPAGATION_WARNING;let a=E?e-E:e;return a<=0?(0,t.jsx)(t.Fragment,{children:"Your domain is taking longer than expected to propagate. This may be due to a delay in the registry."}):(0,t.jsxs)(t.Fragment,{children:["We're estimating that your domain will be online in"," ",(0,t.jsxs)(em.InlineCode,{fontSize:"14px",children:[a," minute",1===a?"":"s"]})," ","based on similar propagation times for"," ",(0,t.jsxs)(em.InlineCode,{fontSize:"14px",children:[".",z]})," domains."]})})()," Once this process is completed, your domain will automatically be assigned and serving traffic."]})}),level:"spinner"}}return{status:"invalid-configuration",refresh:X,isRefreshing:K,ui:eo,level:"error"}}let ep=h.data?.isOk()?h.data.value.ipStatus:null,eg=h.data?.isOk()&&!!(h.data.value.recommendedIPv4||h.data.value.recommendedCNAME);if("required-change"===ep&&eg&&!_)return{status:"ip-downgrade",refresh:X,isRefreshing:K,level:"error",ui:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pt-2",children:"To avoid downtime, you must change your DNS records to match the following:"}),(0,t.jsx)(I.Spacer,{y:.5}),eo]})};if(x.data?.hasCloudflareInFront)return S?{status:"disabling-proxy",refresh:X,isRefreshing:K,ui:(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsxs)("p",{children:["We've"," succesfully disabled the proxy in front of your domain and are monitoring for the changes to propagate."]})}),level:"spinner"}:{status:"proxy-detected",refresh:X,className:"px-0",isRefreshing:K,ui:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"pt-2 px-7",children:[(0,t.jsx)("div",{children:"Using a proxy in front of Vercel prevents our automated DDOS and bot-mitigation tools from working correctly. It can also degrade performance."}),(0,t.jsx)(I.Spacer,{y:.5}),(0,t.jsx)("div",{className:"flex justify-between flex-row items-center",children:(0,t.jsxs)("div",{children:["To disable the proxy, update your DNS provider."," ",(0,t.jsx)(m.Link,{variant:"highlight",href:"https://vercel.com/kb/guide/can-i-use-a-proxy-on-top-of-my-vercel-deployment",children:"Learn more."})]})})]}),er?(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("div",{className:"ml-16",children:(0,t.jsx)(m.ButtonLink,{href:er,onClick:()=>{(0,eh.track)("click_disable_proxy",{source:"project-domains-page-proxy-warning",domainName:e.name})},size:"small",children:(0,t.jsxs)("div",{className:"flex items-center flex-row gap-1",children:["1-click fix",(0,t.jsx)(eB.External,{})]})})})}):null]}),level:"warning"};let ev=w.data?.targets?.production,eb=w.data?.link?.productionBranch||"the default branch",ek=p.data?.isOk()&&!p.data.value;if(!w.isLoading&&(!ev||ek))return{status:"no-deployment",refresh:X,isRefreshing:K,ui:(0,t.jsxs)("p",{className:"text-copy-14",children:["Your domain is properly configured, but you don't have a production deployment.",(0,t.jsx)("br",{}),"To deploy to production,"," ",(0,t.jsxs)(m.Link,{href:"/docs/git",tab:!0,variant:"highlight",children:["push to ",eb]}),", or run ",(0,t.jsx)(em.InlineCode,{noWrap:!0,children:"vercel --prod"})," with our"," ",(0,t.jsx)(m.Link,{href:"/cli",tab:!0,variant:"highlight",children:"command-line interface"}),"."]}),level:"warning"};if(h.data?.isOk()&&"zeit.world"===h.data.value.serviceType&&h.data.value.dnssecEnabled)return{status:"dnssec-needs-to-be-disabled",refresh:X,isRefreshing:K,ui:(0,t.jsx)(eu.Error,{children:"Your domain's nameservers are pointing to Vercel, but you must disable DNSSEC with your domain registrar in order for your nameservers to resolve globally."}),level:"error"};let ey=v.data?.isErr()&&"ApiError"===v.data.error._tag&&("public-alias"===v.data.error.error.error.code||"no-permissions-certs"===v.data.error.error.error.code);if(v.data?.isErr()&&!ey)return{status:"certs-load-failed",refresh:X,isRefreshing:K,ui:(0,t.jsx)(eu.Error,{children:"Failed to load certs"}),level:"error"};if(ey)return"optional-change"===ep&&eg&&!_?{status:"ip-upgrade",refresh:X,isRefreshing:K,level:"warning",ui:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pt-2",children:"Vercel recommends updating your DNS records to match the following:"}),(0,t.jsx)(I.Spacer,{y:.5}),eo]})}:{status:"configured-correctly",refresh:X,isRefreshing:K,ui:null,level:null};let ew=v.data?.isOk()?v.data.value?.certs:void 0,eN=b.data?.isOk()?b.data.value?.errors:void 0;if(!ew?.length){let e=(0,e_.getMostRecentCertErrorInfo)(eN??[]);if(e){let{message:a,isRenewal:n}=e;return{status:n?"certs-renewal-errored":"certs-issue-errored",refresh:X,isRefreshing:K,level:"error",ui:(0,t.jsx)(eu.Error,{children:a})}}return{status:"certs-issuing",refresh:X,isRefreshing:K,ui:(0,t.jsx)("div",{className:"pt-2",children:"We are issuing the certificate for your domain, this should only take a few minutes."}),level:null}}let eC=ew.filter(t=>t.cns.some(t=>(function(e,t){let a=e.toLowerCase(),n=t.toLowerCase();if(a===n)return!0;if(a.startsWith("*.")){let e=a.slice(1);return RegExp(`^[^\\.]+${e.replace(/\./g,"\\.")}$`).test(n)}return!1})(t,e.name)));return 0===eC.filter(e=>e.expiresAt>Date.now()).length&&eC.length>0?{status:"certs-expired",refresh:X,isRefreshing:K,ui:(0,t.jsxs)(eu.Error,{children:["Your SSL cert has expired, please update your"," ",(0,t.jsx)(m.Link,{as:`/${c}/~/domains/${encodeURIComponent(e.name)}`,href:"/dashboard/[teamSlug]/domains/[domain]",tab:!0,variant:"highlight",children:"cert settings"}),"."]}),level:"error"}:"optional-change"===ep&&eg&&!_?{status:"ip-upgrade",refresh:X,isRefreshing:K,level:"warning",ui:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pt-2",children:"Vercel recommends updating your DNS records to match the following:"}),(0,t.jsx)(I.Spacer,{y:.5}),eo]})}:{status:"configured-correctly",refresh:X,isRefreshing:K,ui:null,level:null}}var eJ=e.i(8735244),eK=e.i(8761240),eQ=e.i(9386557);function eZ(e){let{domain:a}=e,n=eY(a);if("loading"===n.status)return(0,t.jsx)(r.Skeleton,{className:"block rounded-full",height:"16px",width:"16px"});if(null===n.level)return(0,t.jsx)(eK.CheckCircleFill,{size:16,color:"blue-700"});switch(n.level){case"warning":return(0,t.jsx)(eK.CheckCircleFill,{size:16,color:"blue-700"});case"error":return(0,t.jsx)(eQ.WarningFill,{size:16,color:"red-700"});case"spinner":return(0,t.jsx)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",style:{color:"var(--ds-gray-900)"},children:(0,t.jsx)(eJ.Spinner,{size:16})})}}function eX(e){let{domain:n}=e,i=eY(n);switch(i.status){case"proxy-detected":return(0,t.jsx)(a.Badge,{size:"sm",variant:"amber-subtle",children:(0,t.jsx)("span",{children:"Proxy Detected"})});case"no-deployment":return(0,t.jsx)(a.Badge,{size:"sm",variant:"amber-subtle",children:(0,t.jsx)("span",{children:"No Deployment"})});case"certs-issuing":return(0,t.jsx)(a.Badge,{icon:(0,t.jsx)(eJ.Spinner,{size:"12px"}),size:"sm",variant:"gray-subtle",children:(0,t.jsx)("span",{children:"Generating SSL Certificate"})});case"certs-load-failed":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Failed to Load Cert"})});case"certs-issue-errored":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Failed to Generate Cert"})});case"certs-renewal-errored":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Failed to Renew Cert"})});case"configured-correctly":return(0,t.jsx)("span",{className:"text-gray-900",children:"Valid Configuration"});case"dnssec-needs-to-be-disabled":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"DNSSEC Needs to be Disabled"})});case"certs-expired":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"SSL Cert Expired"})});case"invalid-configuration":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Invalid Configuration"})});case"verification-needed":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Verification Needed"})});case"ip-downgrade":return(0,t.jsx)(a.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"DNS Change Required"})});case"ip-upgrade":return(0,t.jsx)(a.Badge,{size:"sm",variant:"amber-subtle",children:(0,t.jsx)("span",{children:"DNS Change Recommended"})});case"pending-nameserver-propagation":return(0,t.jsx)(a.Badge,{size:"sm",variant:"gray-subtle",children:(0,t.jsx)("span",{children:"Pending Nameserver Propagation"})});case"domain-connect-success":return(0,t.jsx)(a.Badge,{size:"sm",variant:"gray-subtle",children:(0,t.jsx)("span",{children:"Waiting for DNS Propagation"})});case"disabling-proxy":return(0,t.jsx)(a.Badge,{size:"sm",variant:"gray-subtle",children:(0,t.jsx)("span",{children:"Disabling Proxy"})});case"unverified-email":return(0,t.jsx)(a.Badge,{size:"sm",variant:"warning"===i.level?"amber-subtle":"red-subtle",children:(0,t.jsx)("span",{children:"Unverified email"})});case"loading":return(0,t.jsx)(r.Skeleton,{height:"20px",width:"116px"});default:return null}}var e0=e.i(3930829),e1=e.i(6199768),e2=e.i(6357175),e4=e.i(7722264),e3=e.i(4837983),e8=e.i(3228096),e5=e.i(3869281),e6=e.i(455575),e7=e.i(2886520),e9=e.i(1848296),te=e.i(1146455);function tt(e){let{selfRedirect:a,setRedirect:n,savingRedirect:r,redirect:s,project:o,domain:l,disabled:d,className:c}=e,u=(0,v.useParams)(),m=u?.project,[h,x]=(0,e2.useDebounceState)("",100),{data:p=[]}=function(e){let{limit:t=10,gitBranch:a,production:n,target:r,redirect:i,redirects:s,verified:o,order:l,search:d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(0,L.useTeamSlug)();return(0,H.useIsomorphicSWR)(e?`${(0,Y.API_PROJECTS_DOMAINS_VERSION)("v9")}/${e}/domains${(0,q.encode)({limit:t,gitBranch:a,production:n,target:r,redirects:s,redirect:i,verified:o,order:l,search:d,teamId:c})}`:null,async e=>(await (0,eS.fetchAPI)(e,{throwOnHTTPError:!0})).domains)}(o?.id??m,{limit:100,search:h.length>0?h:void 0,redirects:"false"});return(0,t.jsx)("div",{className:(0,j.default)("flex flex-col md:flex-row lg:flex-row items-stretch justify-start flex-initial",c),children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-1",children:a?(0,t.jsx)("div",{className:"w-full",style:{flex:1},children:(0,t.jsx)(i.Tooltip,{style:{minWidth:"100%"},text:"You have redirected another domain to this domain. In turn, you cannot redirect this one.",children:(0,t.jsxs)($.Combobox,{className:"w-full",children:[(0,t.jsx)($.Combobox.Input,{"data-testid":(0,P.tid)("redirect-to-field","tooltip","domain-redirect"),defaultValue:"no-redirect-possible",disabled:d,style:{minWidth:"100%"},trimValue:!0}),(0,t.jsx)($.Combobox.List,{hideOnEmpty:!0,children:(0,t.jsx)($.Combobox.Option,{value:"no-redirect-possible",children:"No Redirect Possible"})})]})})}):(0,t.jsxs)($.Combobox,{clearable:!0,disabled:r||d,onChange:e=>{n(e||null)},placeholder:"No Redirect",showMenuButton:p.length>0,value:s??"",children:[(0,t.jsx)($.Combobox.Input,{"data-testid":(0,P.tid)("redirect-to-field","tooltip","domain-redirect"),onChange:e=>{x(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),n(e.currentTarget.value||null))},trimValue:!0}),(0,t.jsx)($.Combobox.List,{hideOnEmpty:!0,children:(0,t.jsx)(t.Fragment,{children:p.map(e=>{let{name:a}=e;return(0,t.jsx)(f.default.Fragment,{children:a===l||a.startsWith("*")?null:(0,t.jsx)($.Combobox.Option,{value:a,children:a})},a)})})})]})})})}var ta=e.i(5323212);function tn(e){let{saving:a,setRedirectStatusCode:n,redirectStatusCode:r,disabled:i}=e;return(0,t.jsxs)(ta.Select,{"data-testid":(0,P.tid)("project","domain-status-code"),disabled:a||i,onChange:e=>n(Number(e.target.value)),value:r||307,width:"100%",children:[(0,t.jsxs)("optgroup",{label:"Temporary",children:[(0,t.jsx)("option",{value:"307",children:"307 Temporary Redirect"}),(0,t.jsx)("option",{value:"302",children:"302 Found"})]}),(0,t.jsxs)("optgroup",{label:"Permanent",children:[(0,t.jsx)("option",{value:"308",children:"308 Permanent Redirect"}),(0,t.jsx)("option",{value:"301",children:"301 Moved Permanently"})]})]})}function tr(e){let{domain:a,projectDomainTarget:n,saving:r}=e,[i,s]=(0,f.useState)(n?.redirect?"redirect":"connect-to-environment"),[o,l]=(0,f.useState)(n?.gitBranch?w.EnvTarget.Preview:n?.customEnvironmentId??w.EnvTarget.Production),[d,c]=(0,f.useState)(n?.gitBranch??null),[u,m]=(0,f.useState)(n?.redirect??""),[h,x]=(0,f.useState)(n?.redirectStatusCode??307),p=(0,f.useCallback)(()=>{switch(i){case"connect-to-environment":if(o===w.EnvTarget.Preview&&!d)return(0,J.err)("You must select a git branch for preview environments");return(0,J.ok)({customEnvironmentId:o!==w.EnvTarget.Production&&o!==w.EnvTarget.Preview?o:void 0,gitBranch:o===w.EnvTarget.Preview?d:void 0});case"redirect":if(null===u||"No Redirect"===u)return(0,J.err)("You must select a redirect URL");return(0,J.ok)({redirect:u,redirectStatusCode:h})}},[o,d,i,h,u]),g=(0,t.jsx)("div",{className:"flex w-full flex-col",children:(0,t.jsxs)(e9.RadioGroup,{onChange:e=>{("connect-to-environment"===e||"redirect"===e)&&s(e)},disabled:r,value:i,children:[(0,t.jsxs)("div",{className:"flex w-full flex-col items-start justify-start gap-2 rounded-t-md border border-solid border-gray-400 p-4",children:[(0,t.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,t.jsx)(e9.RadioGroup.Item,{className:(0,b.cn)("text-sm  leading-5","connect-to-environment"===i?"text-gray-1000":"text-gray-900"),value:"connect-to-environment",children:"Connect to an environment"})}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 pl-6 md:flex-row",children:[(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsx)(te.EnvironmentsSelect,{activeEnvironmentId:o,hideDevelopment:!0,disabled:"connect-to-environment"!==i||r,onChange:e=>{l(e||null)}})}),(0,t.jsx)("div",{className:"w-full md:w-1/2",children:o===w.EnvTarget.Preview&&(0,t.jsx)(G,{disabled:"connect-to-environment"!==i||r,environmentId:o,onChange:e=>{c(e??null)},onFocus:void 0,value:d||""})})]})]}),(0,t.jsxs)("div",{className:"flex w-full flex-col items-start justify-start gap-2 rounded-b-md border border-t-0 border-solid border-gray-400 p-4",children:[(0,t.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,t.jsx)(e9.RadioGroup.Item,{className:(0,b.cn)("text-sm  leading-5","redirect"===i?"text-gray-1000":"text-gray-900"),value:"redirect",children:"Redirect to Another Domain"})}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 pl-6 md:flex-row",children:[(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsx)(tn,{disabled:"redirect"!==i,redirectStatusCode:h,saving:r,setRedirectStatusCode:e=>{let t=Number(e.toString());(301===t||302===t||307===t||308===t)&&x(t)}})}),(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsx)(tt,{className:"w-full",disabled:"redirect"!==i,domain:a||"",redirect:u,savingRedirect:r,selfRedirect:!1,setRedirect:e=>{m(e)}})})]})]})]})}),j=(0,t.jsx)("div",{className:"flex w-full flex-col",children:(0,t.jsxs)(e9.RadioGroup,{onChange:e=>{("connect-to-environment"===e||"redirect"===e)&&s(e)},disabled:r,value:i,children:[(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-start gap-2 rounded-b-md p-2",children:[(0,t.jsx)("div",{className:"flex min-w-[220px] flex-row items-center gap-2",children:(0,t.jsx)(e9.RadioGroup.Item,{className:(0,b.cn)("text-sm  leading-5","connect-to-environment"===i?"text-gray-1000":"text-gray-900"),value:"connect-to-environment",children:"Connect to an environment"})}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 md:flex-row",children:[(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsx)(te.EnvironmentsSelect,{activeEnvironmentId:o,hideDevelopment:!0,disabled:"connect-to-environment"!==i||r,onChange:e=>{l(e||null)}})}),(0,t.jsx)("div",{className:"w-full md:w-1/2",children:o===w.EnvTarget.Preview&&(0,t.jsx)(G,{disabled:"connect-to-environment"!==i||r,environmentId:o,onChange:e=>{c(e??null)},onFocus:void 0,value:d||""})})]})]}),(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-start gap-2 rounded-b-md p-2",children:[(0,t.jsx)("div",{className:"flex min-w-[220px] flex-row items-center gap-2",children:(0,t.jsx)(e9.RadioGroup.Item,{className:(0,b.cn)("text-sm  leading-5","redirect"===i?"text-gray-1000":"text-gray-900"),value:"redirect",children:"Redirect to Another Domain"})}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 md:flex-row",children:[(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsx)(tn,{disabled:"redirect"!==i,redirectStatusCode:h,saving:r,setRedirectStatusCode:e=>{let t=Number(e.toString());(301===t||302===t||307===t||308===t)&&x(t)}})}),(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsx)(tt,{className:"w-full",disabled:"redirect"!==i,domain:a||"",redirect:u,savingRedirect:r,selfRedirect:!1,setRedirect:e=>{m(e)}})})]})]})]})});return{ui:"inline"===e.style?j:g,getProjectDomainTarget:p}}function ti(e){return(0,e4.isError)(e)?e.message:"string"==typeof e?e:"An error occurred"}function ts(e){return"object"==typeof e&&null!==e}function to(e){if(!ts(e))return!1;let t="projectName"in e&&"string"==typeof e.projectName||"projectId"in e&&"string"==typeof e.projectId,a="code"in e&&"string"==typeof e.code,n=e.code,r=a&&["domain_already_in_use","duplicate-team-registration","duplicate-user-registration"].includes(n);return t&&a&&r}let tl=async e=>{let{project:t,isReady:a,team:n,projectDomain:r,redirect:i,redirectStatusCode:s,gitBranch:o,customEnvironmentId:l}=e;if(!t||!a)return;let d={redirect:i||null,redirectStatusCode:s||null,gitBranch:i?null:o};void 0!==l&&(d.customEnvironmentId=l,d.redirect=null,d.redirectStatusCode=null,"preview"!==l&&(d.gitBranch=null)),await (0,eS.fetchAPI)(`${(0,Y.API_PROJECTS_DOMAINS_VERSION)("v9")}/${t.id}/domains/${r.name}${n?`?teamId=${n.id}`:""}`,{throwOnHTTPError:!0,method:"PATCH",body:JSON.stringify(d)})},td=["ahole","anus","ash0le","ash0les","asholes","ass","Ass Monkey","Assface","assh0le","assh0lez","asshole","assholes","assholz","asswipe","azzhole","bassterds","bastard","bastards","bastardz","basterds","basterdz","Biatch","bitch","bitches","Blow Job","boffing","butthole","buttwipe","c0ck","c0cks","c0k","Carpet Muncher","cawk","cawks","Clit","cnts","cntz","cock","cockhead","cock-head","cocks","CockSucker","cock-sucker","crap","cum","cunt","cunts","cuntz","dick","dild0","dild0s","dildo","dildos","dilld0","dilld0s","dominatricks","dominatrics","dominatrix","dyke","enema","f u c k","f u c k e r","fag","fag1t","faget","fagg1t","faggit","faggot","fagg0t","fagit","fags","fagz","faig","faigs","fart","flipping the bird","fuck","fucker","fuckin","fucking","fucks","Fudge Packer","fuk","Fukah","Fuken","fuker","Fukin","Fukk","Fukkah","Fukken","Fukker","Fukkin","g00k","God-damned","h00r","h0ar","h0re","hells","hoar","hoor","hoore","jackoff","jap","japs","jerk-off","jisim","jiss","jizm","jizz","knob","knobs","knobz","kunt","kunts","kuntz","Lezzian","Lipshits","Lipshitz","masochist","masokist","massterbait","masstrbait","masstrbate","masterbaiter","masterbate","masterbates","Motha Fucker","Motha Fuker","Motha Fukkah","Motha Fukker","Mother Fucker","Mother Fukah","Mother Fuker","Mother Fukkah","Mother Fukker","mother-fucker","Mutha Fucker","Mutha Fukah","Mutha Fuker","Mutha Fukkah","Mutha Fukker","n1gr","nastt","nigger;","nigur;","niiger;","niigr;","orafis","orgasim;","orgasm","orgasum","oriface","orifice","orifiss","packi","packie","packy","paki","pakie","paky","pecker","peeenus","peeenusss","peenus","peinus","pen1s","penas","penis","penis-breath","penus","penuus","Phuc","Phuck","Phuk","Phuker","Phukker","polac","polack","polak","Poonani","pr1c","pr1ck","pr1k","pusse","pussee","pussy","puuke","puuker","recktum","rectum","retard","sadist","scank","schlong","screwing","semen","sex","sexy","Sh!t","sh1t","sh1ter","sh1ts","sh1tter","sh1tz","shit","shits","shitter","Shitty","Shity","shitz","Shyt","Shyte","Shytty","Shyty","skanck","skank","skankee","skankey","skanks","Skanky","slag","slut","sluts","Slutty","slutz","son-of-a-bitch","tit","turd","va1jina","vag1na","vagiina","vagina","vaj1na","vajina","vullva","vulva","w0p","wh00r","wh0re","whore","xrated","xxx","b!+ch","bitch","blowjob","clit","arschloch","fuck","shit","ass","asshole","b!tch","b17ch","b1tch","bastard","bi+ch","boiolas","buceta","c0ck","cawk","chink","cipa","clits","cock","cum","cunt","dildo","dirsa","ejakulate","fatass","fcuk","fuk","fux0r","hoer","hore","jism","kawk","l3itch","l3i+ch","masturbate","masterbat*","masterbat3","motherfucker","s.o.b.","mofo","nazi","nigga","nigger","nutsack","phuck","pimpis","pusse","pussy","scrotum","sh!t","shemale","shi+","sh!+","slut","smut","teets","tits","boobs","b00bs","teez","testical","testicle","titt","w00se","jackoff","wank","whoar","whore","*damn","*dyke","*fuck*","*shit*","@$$","amcik","andskota","arse*","assrammer","ayir","bi7ch","bitch*","bollock*","breasts","butt-pirate","cabron","cazzo","chraa","chuj","Cock*","cunt*","d4mn","daygo","dego","dick*","dike*","dupa","dziwka","ejackulate","Ekrem*","Ekto","enculer","faen","fag*","fanculo","fanny","feces","feg","Felcher","ficken","fitt*","Flikker","foreskin","Fotze","Fu(*","fuk*","futkretzn","gook","guiena","h0r","h4x0r","hell","helvete","hoer*","honkey","Huevon","hui","injun","jizz","kanker*","kike","klootzak","kraut","knulle","kuk","kuksuger","Kurac","kurwa","kusi*","kyrpa*","lesbo","mamhoon","masturbat*","merd*","mibun","monkleigh","mouliewop","muie","mulkku","muschi","nazis","nepesaurio","nigger*","orospu","paska*","perse","picka","pierdol*","pillu*","pimmel","piss*","pizda","poontsee","poop","porn","p0rn","pr0n","preteen","pula","pule","puta","puto","qahbeh","queef*","rautenberg","schaffer","scheiss*","schlampe","schmuck","screw","sh!t*","sharmuta","sharmute","shipal","shiz","skribz","skurwysyn","sphencter","spic","spierdalaj","splooge","suka","b00b*","testicle*","titt*","twat","vittu","wank*","wetback*","wichser","wop*","yed","zabourah"],tc=["4r5e","5h1t","5hit","a55","anal","anus","ar5e","arrse","arse","ass","ass-fucker","asses","assfucker","assfukka","asshole","assholes","asswhole","a_s_s","b!tch","b00bs","b17ch","b1tch","ballbag","balls","ballsack","bastard","beastial","beastiality","bellend","bestial","bestiality","bi+ch","biatch","bitch","bitcher","bitchers","bitches","bitchin","bitching","bloody","blow job","blowjob","blowjobs","boiolas","bollock","bollok","boner","boob","boobs","booobs","boooobs","booooobs","booooooobs","breasts","buceta","bugger","bum","bunny fucker","butt","butthole","buttmuch","buttplug","c0ck","c0cksucker","carpet muncher","cawk","chink","cipa","cl1t","clit","clitoris","clits","cnut","cock","cock-sucker","cockface","cockhead","cockmunch","cockmuncher","cocks","cocksuck","cocksucked","cocksucker","cocksucking","cocksucks","cocksuka","cocksukka","cok","cokmuncher","coksucka","coon","cox","crap","cum","cummer","cumming","cums","cumshot","cunilingus","cunillingus","cunnilingus","cunt","cuntlick","cuntlicker","cuntlicking","cunts","cyalis","cyberfuc","cyberfuck","cyberfucked","cyberfucker","cyberfuckers","cyberfucking","d1ck","damn","dick","dickhead","dildo","dildos","dink","dinks","dirsa","dlck","dog-fucker","doggin","dogging","donkeyribber","doosh","duche","dyke","ejaculate","ejaculated","ejaculates","ejaculating","ejaculatings","ejaculation","ejakulate","f u c k","f u c k e r","f4nny","fag","fagging","faggitt","faggot","faggs","fagot","fagots","fags","fanny","fannyflaps","fannyfucker","fanyy","fatass","fcuk","fcuker","fcuking","feck","fecker","felching","fellate","fellatio","fingerfuck","fingerfucked","fingerfucker","fingerfuckers","fingerfucking","fingerfucks","fistfuck","fistfucked","fistfucker","fistfuckers","fistfucking","fistfuckings","fistfucks","flange","fook","fooker","fuck","fucka","fucked","fucker","fuckers","fuckhead","fuckheads","fuckin","fucking","fuckings","fuckingshitmotherfucker","fuckme","fucks","fuckwhit","fuckwit","fudge packer","fudgepacker","fuk","fuker","fukker","fukkin","fuks","fukwhit","fukwit","fux","fux0r","f_u_c_k","gangbang","gangbanged","gangbangs","gaylord","gaysex","goatse","God","god-dam","god-damned","goddamn","goddamned","hardcoresex","hell","heshe","hoar","hoare","hoer","homo","hore","horniest","horny","hotsex","jack-off","jackoff","jap","jerk-off","jism","jiz","jizm","jizz","kawk","knob","knobead","knobed","knobend","knobhead","knobjocky","knobjokey","kock","kondum","kondums","kum","kummer","kumming","kums","kunilingus","l3i+ch","l3itch","labia","lust","lusting","m0f0","m0fo","m45terbate","ma5terb8","ma5terbate","masochist","master-bate","masterb8","masterbat*","masterbat3","masterbate","masterbation","masterbations","masturbate","mo-fo","mof0","mofo","mothafuck","mothafucka","mothafuckas","mothafuckaz","mothafucked","mothafucker","mothafuckers","mothafuckin","mothafucking","mothafuckings","mothafucks","mother fucker","motherfuck","motherfucked","motherfucker","motherfuckers","motherfuckin","motherfucking","motherfuckings","motherfuckka","motherfucks","muff","mutha","muthafecker","muthafuckker","muther","mutherfucker","n1gga","n1gger","nazi","nigg3r","nigg4h","nigga","niggah","niggas","niggaz","nigger","niggers","nob","nob jokey","nobhead","nobjocky","nobjokey","numbnuts","nutsack","orgasim","orgasims","orgasm","orgasms","p0rn","pawn","pecker","penis","penisfucker","phonesex","phuck","phuk","phuked","phuking","phukked","phukking","phuks","phuq","pigfucker","pimpis","piss","pissed","pisser","pissers","pisses","pissflaps","pissin","pissing","pissoff","poop","porn","porno","pornography","pornos","prick","pricks","pron","pube","pusse","pussi","pussies","pussy","pussys","rectum","retard","rimjaw","rimming","s hit","s.o.b.","sadist","schlong","screwing","scroat","scrote","scrotum","semen","sex","sh!+","sh!t","sh1t","shag","shagger","shaggin","shagging","shemale","shi+","shit","shitdick","shite","shited","shitey","shitfuck","shitfull","shithead","shiting","shitings","shits","shitted","shitter","shitters","shitting","shittings","shitty","skank","slut","sluts","smegma","smut","snatch","son-of-a-bitch","spac","spunk","s_h_i_t","t1tt1e5","t1tties","teets","teez","testical","testicle","tit","titfuck","tits","titt","tittie5","tittiefucker","titties","tittyfuck","tittywank","titwank","tosser","turd","tw4t","twat","twathead","twatty","twunt","twunter","v14gra","v1gra","vagina","viagra","vulva","w00se","wang","wank","wanker","wanky","whoar","whore","willies","willy","xrated","xxx"];class tu{list=[];exclude=[];placeHolder="*";regex=/[^a-zA-Z0-9|$|@]|\^/g;replaceRegex=/\w/g;splitRegex=/\b|_/g;constructor(e={}){Object.assign(this,{list:e.emptyList&&[]||Array.prototype.concat.apply(td,[tc,e.list||[]]),exclude:e.exclude||[],splitRegex:e.splitRegex||/\b|_/g,placeHolder:e.placeHolder||"*",regex:e.regex||/[^a-zA-Z0-9|$|@]|\^/g,replaceRegex:e.replaceRegex||/\w/g})}isProfane(e){return this.list.filter(t=>{let a=RegExp(`\\b${t.replace(/(\W)/g,"\\$1")}\\b`,"gi");return!this.exclude.includes(t.toLowerCase())&&a.test(e)}).length>0}replaceWord(e){return e.replace(this.regex,"").replace(this.replaceRegex,this.placeHolder)}clean(e){let t=this.splitRegex.exec(e);return e&&t?e.split(this.splitRegex).map(e=>this.isProfane(e)?this.replaceWord(e):e).join(t[0]):e}addWords(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];this.list.push(...t),t.map(e=>e.toLowerCase()).forEach(e=>{this.exclude.includes(e)&&this.exclude.splice(this.exclude.indexOf(e),1)})}removeWords(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];this.exclude.push(...t.map(e=>e.toLowerCase()))}}var tm=e.i(6352514),th=e.i(4759942);function tf(e){let{domain:a,setDomain:n,redirectApexToWWW:r,setRedirectApexToWWW:s}=e,[o,l]=(0,e2.useDebounceState)(r,250),d=a.endsWith(".ve")?o:eR(a);return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{children:(0,t.jsx)(e7.AutocompleteDomainInput,{autoFocus:!0,onChange:e=>{n(e?e.toLowerCase():""),l(!!e&&eR(e))},onSubmit:()=>{e.onSubmit()},value:a,disabled:e.disabled})}),(0,t.jsx)("div",{className:"flex w-full flex-col gap-2",children:(0,t.jsx)("div",{className:(0,b.cn)("flex flex-col gap-2",d?"visible":"invisible h-[21px]"),children:(0,t.jsx)("div",{className:"flex select-none flex-row gap-2 ",children:(0,t.jsx)(e5.Checkbox,{checked:r,onChange:e=>{s(e.target.checked)},height:8,width:8,children:(0,t.jsxs)("span",{className:"select-none break-all text-sm text-gray-900",children:["Redirect ",(0,eD.get)(a)," to www.",(0,eD.get)(a)," ",(0,t.jsx)(i.Tooltip,{text:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:["Using a www subdomain allows for faster DNS resolution, improved website performance and more flexible routing.",(0,t.jsxs)(m.Link,{className:"ml-2 flex flex-row items-center text-xs text-blue-900",target:"_blank",rel:"noopener noreferrer",href:"https://vercel.com/docs/domains/working-with-domains#apex-domain",children:[(0,t.jsx)("span",{className:"text-blue-900",children:"Learn more"}),(0,t.jsx)(eB.External,{size:12,className:"ml-1"})]})]}),children:"(Recommended)"})]})})})})})]})}function tx(e){let{onClose:a,project:n,teamSlug:r,onSave:s,initialAddDomainInput:o}=e,[d,c]=(0,f.useState)(o??""),[u,m]=(0,f.useState)(!0),h=!!eR(d)&&u,[x,p]=(0,f.useState)(null),[g,j]=(0,f.useTransition)(),{getProjectDomainTarget:v,ui:b}=tr({saving:g,domain:d}),k=(0,e6.useToasts)(),{data:y}=(0,W.useProject)(n),w=v(),N=null;0===d.length?N="Please enter a domain":w.isErr()&&(N=w.error);let S=async()=>{if((0,eO.preload)(`/api/front-domains/domain-connect/status?domain=${d}`,e=>(0,eS.fetchAPI)(e,{throwOnHTTPError:!0})).catch(()=>null),w.isErr())return p(w.error),!1;if(d.endsWith(".vercel.app")){let e=new tu;for(let t of d.split(".").flatMap(e=>e.split("-")))if(e.isProfane(t))return th.analytics.track(tm.AnalyticsEvent.DOMAIN_ADD_PROFANITY_REJECTED,{domain:d,profanity:t}),p("The domain you entered contains inappropriate language. Please choose a different domain."),!1}if((0,T.default)(d)&&(0,Z.isPublicAlias)(d))return p("Wildcard subdomains are not supported for .vercel.app domains."),!1;try{let e;if((0,T.default)(d))e=d;else{let t=(0,eD.parse)(d);e="error"in t?null:t.domain}if(!e)return p("The domain you are trying to add is invalid, please enter a valid domain name and try again"),!1;let t=null;if(h){let a=`www.${e}`;try{t=(await (0,E.addProjectDomain)({domain:a,project:{id:n},team:{id:r},customEnvironmentId:w.value.customEnvironmentId,gitBranch:w.value.gitBranch,redirect:w.value.redirect,redirectStatusCode:w.value.redirectStatusCode})).name}catch(e){if(to(e)&&(e.projectId===y?.id||e.projectName===y?.name))t=a;else throw e}try{await (0,E.addProjectDomain)({domain:e,project:{id:n},team:{id:r},redirect:w.value.redirect??t})}catch(a){if(to(a)&&(a.projectId===y?.id||a.projectName===y?.name)){let i=a.domain;if(!i||!t)return p(`The domain "${e}" already exists on this project but could not be updated with redirect configuration. Please update it manually from the domains list.`),!1;try{return await tl({project:{id:n},isReady:!0,team:{id:r},projectDomain:i,redirect:t,redirectStatusCode:308}),k.success("Domain configuration updated"),!0}catch(e){return p(ti(e)),!1}}throw a}}else await (0,E.addProjectDomain)({domain:d,project:{id:n},team:{id:r},customEnvironmentId:w.value.customEnvironmentId,gitBranch:w.value.gitBranch,redirect:w.value.redirect,redirectStatusCode:w.value.redirectStatusCode});if(k.success("Domain added to project"),(0,T.default)(d)){let e=`?teamId=${encodeURIComponent(r)}`;try{await (0,eS.fetchAPI)(`${Y.API_DOMAINS}/${encodeURIComponent(d)}${e}`,{method:"PATCH",body:JSON.stringify({zone:!0}),throwOnHTTPError:!0})}catch(t){let e=(0,e4.isError)(t)?t.message:"Failed to update zone";return p(e),!1}}return!0}catch(t){if(to(t)){if(t.projectId===y?.id||t.projectName===y?.name){let e=t.domain?.name||d;return p(`You are already using the domain "${e}" on this project.`),!1}return e.onDomainTransferRequest({domain:d,projectIdOrNameInUse:t.projectId||t.projectName||""}),!1}if(function(e){if(!ts(e))return!1;let t=e.code;return"code"in e&&"string"==typeof e.code&&"owned-on-other-team"===t}(t))return p("Another team is already using this domain."),!1;return p(ti(t)),!1}};return(0,t.jsxs)(z.Modal,{active:!0,onClickOutside:a,children:[(0,t.jsxs)(z.Modal.Body,{children:[(0,t.jsx)(z.Modal.Title,{children:"Add Domain"}),(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsx)("div",{className:"pt-6",children:"Add a domain to connect it to a project. After being connected, the domain will be aliased to the most recent deployment in that environment."}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 pb-2",children:[(0,t.jsx)(tf,{disabled:g,domain:d,setDomain:c,onSubmit:()=>{j(async()=>{await S()&&(await s?.(),a())})},redirectApexToWWW:h,setRedirectApexToWWW:m}),b]}),x?(0,t.jsx)(l.Note,{type:"error",fill:!0,children:x}):null]})]}),(0,t.jsxs)(z.Modal.Actions,{children:[(0,t.jsx)(z.Modal.Action,{onClick:a,type:"secondary",children:"Cancel"}),(0,t.jsx)(i.Tooltip,{text:N,disableTriggers:!N,children:(0,t.jsx)(z.Modal.Action,{loading:g,disabled:!!N,onClick:()=>{j(async()=>{await S()&&(await s?.(),a())})},children:"Save"})})]})]})}var tp=e.i(7047540),tg=e.i(4585051),tj=e.i(2455417),tv=e.i(6870754),tb=e.i(950120),tk=e.i(1138941),ty=e.i(7898658);async function tw(e){let{project:t,isReady:a,team:n,name:r,newProjectId:i}=e;a&&await (0,eS.fetchAPI)(`${(0,Y.API_PROJECTS_DOMAINS_VERSION)("v9")}/${t.id}/domains/${r}/move${n?`?teamId=${n.id}`:""}`,{throwOnHTTPError:!0,method:"POST",body:JSON.stringify({projectId:i})})}var tN=e.i(5519011);function tS(e){let{project:a,hideSkeleton:n=!1,size:i=32,style:s}=e,o=(0,tk.getProductionDeployment)(a),{data:l}=(0,ty.default)({project:a}),d=(0,tk.useFramework)(a);return(d||o&&l)&&n?(0,t.jsx)(tg.Avatar,{className:(0,j.clsx)({[tN.default.favicon]:!l?.isSquare,"bg-white/75 rounded-full shadow-border shadow-background-100 dark:bg-foreground dark:shadow-foreground":!!(!l&&d)}),size:i,src:l?.src||d?.logo,style:s,title:a?a.name:void 0}):(0,t.jsx)(r.Skeleton,{height:i,rounded:!0,style:{flexShrink:0},width:i})}function tC(e){let{active:a,domain:n,projectIdOrNameInUse:i,onCancel:s,onComplete:o}=e,[d,c]=(0,f.useState)(!1),u=(0,tk.useProjectIdOrName)(),{data:h}=(0,W.useProject)(u),{team:x,isReady:p}=(0,eH.useTeam)(),{data:g}=(0,W.useProject)(n&&i?i:null),{data:j}=(0,D.useProjectDomain)(g?{projectId:g.id,name:n}:null),v=j?j.redirect??j.name:null,b=a&&!!v&&!!h&&!!g,[k,{domains:y,isLoadingMore:w,loadMore:N,isReachingEnd:S,initialDataLoaded:P}]=(0,D.useProjectDomainsInfinite)(j&&g?g.id:null,v?{redirect:v,limit:20}:{}),A=(0,C.useRouter)(),E=`/${A.query.teamSlug}/${g?.name}/settings/domains`,R=`/${A.query.teamSlug}/${h?.name}/settings/domains`,T=(0,f.useCallback)(()=>{s(),c(!1)},[s]),_=async()=>{h&&n&&i&&j&&g&&v&&(c(!0),await tw({project:g,isReady:p,name:v,team:x,newProjectId:h.id}),o(),c(!1))};return(0,t.jsxs)(z.Modal.Modal,{active:b,onClickOutside:T,children:[(0,t.jsx)(z.Modal.Body,{children:(0,t.jsxs)("div",{className:"jsx-aedf4df6a7382869 flex flex-col items-stretch justify-start gap-8 flex-initial",children:[(0,t.jsxs)("header",{className:"jsx-aedf4df6a7382869",children:[(0,t.jsx)(z.Modal.Title,{children:"Move Domain"}),(0,t.jsxs)("p",{className:"jsx-aedf4df6a7382869 text-copy-14",children:["This domain is already associated with another project."," ",v&&v===n?(0,t.jsx)(t.Fragment,{children:"Please confirm you'd like to move the following domain and its redirects:"}):(0,t.jsx)(t.Fragment,{children:"Please confirm you'd like to transfer the following domain and the domain it redirects to:"})]})]}),(0,t.jsxs)("div",{className:"jsx-aedf4df6a7382869 flex flex-col items-stretch justify-start gap-8 flex-initial",children:[v?(0,t.jsx)(l.Note,{className:tN.default.noteCenterText,fill:!0,label:!1,size:"small",type:"lite",variant:"contrast",children:(0,t.jsx)("p",{className:"jsx-aedf4df6a7382869 text-copy-14 text-center",children:(0,t.jsx)(m.Link,{external:!0,href:`https://${v}`,tab:!0,type:"highlight",children:v})})}):(0,t.jsx)(r.Skeleton,{height:32,width:"100%"}),(0,t.jsxs)("div",{className:"jsx-aedf4df6a7382869 flex flex-row items-stretch justify-evenly flex-initial",children:[(0,t.jsxs)("div",{style:{flex:"0 0 36%"},className:"jsx-aedf4df6a7382869 flex flex-col items-center justify-start gap-2",children:[(0,t.jsx)(m.Link,{href:E,target:"_blank",children:(0,t.jsx)(tS,{hideSkeleton:!!(h&&g),project:g})}),(0,t.jsx)("p",{style:{maxWidth:"100px"},className:"jsx-aedf4df6a7382869 text-[14px] leading-[20px] font-medium text-center line-clamp-3 geist-hide-on-mobile",children:g&&h?(0,t.jsx)(m.Link,{href:E,target:"_blank",title:g.name,variant:"primary",children:g.name}):(0,t.jsx)(r.Skeleton,{height:20,width:100})})]}),(0,t.jsxs)("div",{style:{flex:"0 0 36%"},className:"jsx-aedf4df6a7382869 flex flex-col items-center justify-start gap-2",children:[(0,t.jsx)(m.Link,{href:R,target:"_blank",children:(0,t.jsx)(tS,{hideSkeleton:!!(h&&g),project:h})}),(0,t.jsx)("p",{style:{maxWidth:"100px"},className:"jsx-aedf4df6a7382869 text-[14px] leading-[20px] font-medium text-center line-clamp-3 geist-hide-on-mobile",children:g&&h?(0,t.jsx)(m.Link,{href:R,target:"_blank",title:h.name,variant:"primary",children:h.name}):(0,t.jsx)(r.Skeleton,{height:20,width:100})})]})]})]}),(0,t.jsxs)(z.Modal.Outset,{children:[(0,t.jsx)(tz,{count:y.length+1,loading:!P,title:(0,t.jsxs)("span",{className:"jsx-aedf4df6a7382869",children:[y.length+1," ",0===y.length?"domain":"domains"," will be moved."]}),children:(0,t.jsxs)("div",{className:"jsx-aedf4df6a7382869",children:[(0,t.jsx)(tI,{children:(0,t.jsx)(m.Link,{external:!0,href:`https://${v}`,style:{flexGrow:"1"},tab:!0,children:v})},v),y.map(e=>(0,t.jsx)(tI,{children:(0,t.jsx)(m.Link,{external:!0,href:`https://${e.name}`,style:{flexGrow:"1"},tab:!0,children:e.name})},e.name)),!S&&(0,t.jsxs)("div",{className:"jsx-aedf4df6a7382869 "+(tN.default.inset||""),children:[(0,t.jsx)(tv.LoadMoreButton,{loading:w,onClick:N}),(0,t.jsx)(I.Spacer,{})]})]})}),(0,t.jsx)(I.Spacer,{y:-1})]})]})}),(0,t.jsxs)(z.Modal.Actions,{children:[(0,t.jsx)(z.Modal.Action,{onClick:T,type:"secondary",children:"Cancel"}),(0,t.jsx)(z.Modal.Action,{loading:d,onClick:_,children:d?(0,t.jsx)(tj.LoadingDots,{children:"Moving"}):`Move ${y.length+1}${S?"":"+"} ${y.length+1>1?"domains":"domain"}`})]}),(0,t.jsx)(tp.default,{id:"aedf4df6a7382869",children:"header.jsx-aedf4df6a7382869{max-width:440px;margin:0 auto}header.jsx-aedf4df6a7382869>h2{text-align:center;margin:0}header.jsx-aedf4df6a7382869>p{color:var(--accents-5);margin:10px auto 0}.added.jsx-aedf4df6a7382869{color:#999;flex:none}"})]})}function tz(e){let{title:a,children:n,loading:r,count:i,open:s}=e;return r?(0,t.jsx)("div",{className:tN.default.loadingItem,children:(0,t.jsx)(eJ.Spinner,{size:14})}):0===i?(0,t.jsx)(tb.Details,{title:a}):(0,t.jsx)(tb.Details,{open:s,title:a,children:(0,t.jsx)("div",{className:tN.default.content,children:n})})}function tI(e){let{children:a}=e;return(0,t.jsx)(tb.Item,{className:tN.default.subitem,children:a})}var tP=e.i(2848845),tD=e.i(4138437);function tA(e){let{newDomain:a,oldDomain:n,onCancel:r,onSave:i,teamSlug:s,project:o}=e,[d,c]=(0,f.useTransition)(),[u,m]=(0,f.useState)("redirect-old-to-new"),[h,x]=(0,f.useState)(null),p=(0,f.useCallback)(()=>{r()},[r]),g=(0,f.useCallback)(async()=>{try{await (0,E.addProjectDomain)({domain:a.domainName,project:{id:o},team:{id:s},customEnvironmentId:a.customEnvironmentId,gitBranch:a.gitBranch,redirect:a.redirect,redirectStatusCode:a.redirectStatusCode})}catch(e){x((0,e4.isError)(e)?e.message:"An unknown error occurred");return}try{switch(u){case"redirect-old-to-new":await tl({isReady:!0,project:{id:o},team:{id:s},projectDomain:n,redirect:a.domainName,redirectStatusCode:307});break;case"delete-old":await (0,E.removeProjectDomain)(o,s,n.name,!1)}}catch(e){await (0,E.removeProjectDomain)(o,s,a.domainName,!1).catch(()=>null),x((0,e4.isError)(e)?e.message:"An unknown error occurred");return}i(a)},[u,a,o,s,n,i]);return(0,t.jsxs)(z.Modal,{active:!0,onClickOutside:p,children:[(0,t.jsxs)(z.Modal.Body,{children:[(0,t.jsx)(z.Modal.Title,{children:"Edit domain"}),(0,t.jsx)(I.Spacer,{}),(0,t.jsx)("div",{className:"flex flex-col gap-2 pb-2",children:(0,t.jsxs)("span",{children:["You've edited the domain name from ",(0,t.jsx)("b",{children:n.name})," to"," ",(0,t.jsx)("b",{children:a.domainName}),"."]})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(e9.RadioGroup,{onChange:e=>m(e),value:u,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(tD.Card,{className:(0,b.cn)("border border-solid border-gray-400 p-0 pl-4","redirect-old-to-new"===u&&"border-blue-700"),gap:2,padding:4,secondary:"redirect-old-to-new"===u,children:(0,t.jsx)(e9.RadioGroup.Item,{fullWidth:!0,value:"redirect-old-to-new",children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-between flex-initial p-4 pl-2",children:[(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Redirect old domain to new"}),(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Automatically send visitors from ",n.name," to"," ",a.domainName]})]})})}),(0,t.jsx)(tD.Card,{className:(0,b.cn)("border border-solid p-0 pl-4","delete-old"===u?"border-blue-700":"border-gray-400"),gap:2,padding:4,secondary:"delete-old"===u,children:(0,t.jsx)(e9.RadioGroup.Item,{className:"items-center",fullWidth:!0,value:"delete-old",children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-between flex-initial p-4 pl-2",children:[(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:"Remove old domain"}),(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Permanently delete ",n.name," and replace it with"," ",a.domainName]})]})})})]})}),h?(0,t.jsx)(l.Note,{type:"error",fill:!0,children:h}):null]})]}),(0,t.jsxs)(z.Modal.Actions,{children:[(0,t.jsx)(z.Modal.Action,{onClick:p,type:"secondary",disabled:d,children:"Cancel"}),(0,t.jsx)(z.Modal.Action,{onClick:()=>{c(g)},loading:d,children:"Save"})]})]})}var tE=e.i(2560270),tR=e.i(4005781);function tT(e){var a,n,r;let i=(0,v.useRouter)(),{domainConnectDomain:s,error:o,errorDescription:l}=(0,eF.useDomainConnectSearchParams)(),{team:d}=(0,eH.useTeam)(),{trigger:c,isMutating:u}=(a=e.projectId,n=d?.id??"",r=s??"",(0,tR.default)(`/remove-project-domain-${a}-${n}-${r}`,async()=>{await (0,E.removeProjectDomain)(a,n,r)}));if(!s||!d)return null;let m=o||!!l,h=async()=>{await c().catch(()=>{}),e.onCancel(),i.replace(window.location.pathname)},f=l?"user_cancel"===l?"Your domain was not configured because the process was canceled.":"An identical record already exists"===l?"One or more records were not created because an identical record already existed":l.endsWith("perhaps your object identifier is invalid?")?"Your DNS provider had an error while creating the record.":null:null;return(0,t.jsxs)(z.Modal.Modal,{active:m,"data-testid":(0,P.tid)("project","settings","domain-connect-error-modal"),onClickOutside:()=>{i.replace(window.location.pathname)},children:[(0,t.jsxs)(z.Modal.Body,{children:[(0,t.jsx)(z.Modal.Header,{children:(0,t.jsx)(z.Modal.Title,{children:"Configuration Failed"})}),"We failed to automatically configure"," ",(0,t.jsx)("strong",{children:s}),". Please follow the steps to manually configure your domain with your provider.",f?(0,t.jsxs)("div",{className:"pt-4 text-sm text-red-800",children:["Error: ",f]}):null]}),(0,t.jsxs)(z.Modal.Actions,{className:"justify-between",children:[(0,t.jsx)(z.Modal.Action,{loading:u,onClick:h,type:"secondary",children:"Cancel"}),(0,t.jsx)(z.Modal.Action,{onClick:()=>{i.replace(window.location.pathname)},children:"Continue with Manual Configuration"})]})]})}var t_=e.i(992159);function tO(){let[e,t]=(0,N.useQueryState)("show-add-domain-modal",{...S.parseAsBoolean,shallow:!0});return{showAddDomainModal:e??!1,setShowAddDomainModal:t}}function tF(e){let{setShowAddDomainModal:a}=tO(),{can:r,isLoading:s}=(0,k.default)({projectIdOrName:e.projectId}),o=r(y.Action.Update,y.Resource.Project),l=!s&&!o;return(0,t.jsx)(i.Tooltip,{disableTriggers:!l,text:"You don't have permission to add domains to this project. Ask your team admin to add a domain or grant you the member role or higher.",children:(0,t.jsx)(n.Button,{disabled:l,onClick:()=>void a(!0),children:"Add Domain"})})}function tM(){let[e,t]=(0,N.useQueryState)("search",{...S.parseAsString,shallow:!0}),{domainConnectDomain:a,error:n}=(0,eF.useDomainConnectSearchParams)();return{search:e??(n?void 0:a)??void 0,setSearch:e=>t(e??null)}}function tB(){let[e,t]=(0,N.useQueryState)("redirect",{...S.parseAsString,shallow:!0});return{redirectFilter:e,setRedirectFilter:e=>t(e)}}function t$(){let[e,t]=(0,N.useQueryState)("gitBranch",{...S.parseAsString,shallow:!0});return{gitBranchFilter:e,setGitBranchFilter:e=>t(e)}}function tL(){let[e,t]=(0,N.useQueryState)("environment",{...S.parseAsString,shallow:!0});return{environmentFilter:e,setEnvironmentFilter:e=>t(e)}}function tW(e){let a=(0,v.useParams)(),n=a?.project,{data:r}=(0,R.useCustomEnvironments)(n),i=(r?.customEnvironments||[]).filter(e=>"preview"!==e.slug),s=[{id:w.EnvTarget.Production,name:"Production"},...i.map(e=>({id:e.id,name:e.slug}))];return(0,t.jsxs)($.Combobox,{clearable:!0,disabled:e.disabled,noRawSelectedValue:!0,onChange:t=>e.onChange(t??null),placeholder:"All Environments",value:e.value??"",children:[(0,t.jsx)($.Combobox.Input,{"aria-label":"Environment",onChange:t=>e.onChange(t.target.value||null)}),(0,t.jsx)($.Combobox.List,{emptyMessage:"No Environments",children:s.map(e=>(0,t.jsx)($.Combobox.Option,{value:e.id,children:e.name},e.id))})]})}function tV(e){let{search:t}=tM(),{redirectFilter:a}=tB(),{gitBranchFilter:n}=t$(),{environmentFilter:r}=tL(),[{mutate:i},{domains:s,loadMore:o,isLoadingMore:l,isReachingEnd:d,isLoading:c}]=function(e){let{limit:t=20,gitBranch:a,production:n,redirect:r,redirects:i,search:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,l=(0,L.useTeamSlug)(),d=(0,e0.useIsomorphicSWRInfinite)((o,d)=>{let c=`${(0,Y.API_PROJECTS_DOMAINS_VERSION)("v9")}/${e}/domains`,u={limit:t+1,gitBranch:a,production:n,redirect:r,redirects:i,teamId:l,search:s};if(!o)return`${c}${(0,q.encode)(u)}`;let m=(d?.domains.length||0)>t?d?.domains[t-1].createdAt:null;return m?`${c}${(0,q.encode)({...u,until:m})}`:""},async e=>""===e?{domains:[],pagination:{count:0,next:null,prev:null}}:(0,eS.fetchAPI)(e,{throwOnHTTPError:!0}),o),c=d.data?.flatMap(e=>e.domains.slice(0,t))??[],u=d.size>(d.data?.length??0),m=d.data?.[d.data.length-1];return[d,{domains:c,loadMore:()=>d.setSize(e=>e+1),isLoadingMore:u,isReachingEnd:m?m.domains.length<=t:void 0,isLoading:d.isLoading}]}(e,{limit:tK,search:t,redirect:a??void 0,gitBranch:n??void 0,production:r===w.EnvTarget.Production||r!==w.EnvTarget.Preview&&void 0});return{domains:r&&r!==w.EnvTarget.Production&&r!==w.EnvTarget.Preview?s.filter(e=>e.customEnvironmentId===r):s,revalidateDomains:i,loadMore:o,isLoadingMore:l,isReachingEnd:d,isLoading:c}}function tG(e){let{domain:n,project:r}=e,{data:i}=(0,R.useCustomEnvironments)(r,{revalidateIfStale:!1});if(n.redirect)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.CornerDownRight,{size:16}),(0,t.jsx)(a.Badge,{size:"sm",variant:"gray-subtle",children:n.redirectStatusCode??307}),(0,t.jsx)("span",{className:"truncate",children:n.redirect})]});if(n.customEnvironmentId){let e=i?.customEnvironments.find(e=>e.id===n.customEnvironmentId);return(0,t.jsxs)("div",{className:"flex flex-[1_0_0] items-center gap-2 overflow-hidden font-mono text-sm font-normal leading-5 text-gray-900",children:[(0,t.jsx)(O.EnvironmentIcon,{id:n.customEnvironmentId}),e?.slug]})}return n.gitBranch?(0,t.jsxs)("div",{className:"flex flex-[1_0_0] items-center gap-2 overflow-hidden font-mono text-sm font-normal leading-5 text-gray-900",children:[(0,t.jsx)(x.GitBranch,{}),(0,t.jsx)("span",{className:"truncate",children:n.gitBranch})]}):(0,t.jsxs)("div",{className:"flex flex-[1_0_0] items-center gap-2 overflow-hidden font-mono text-sm font-normal leading-5 text-gray-900",children:[(0,t.jsx)(O.EnvironmentIcon,{id:w.EnvTarget.Production}),"Production"]})}function tU(e){let{domain:a,project:r,editingDomain:s,setEditingDomain:o,onOpenAccordion:l}=e,{can:d}=(0,k.default)({projectIdOrName:r}),c=eY(a);if(s)return null;let u=!d(y.Action.Update,y.Resource.Project);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Button,{loading:"loading"===c.status||c.isRefreshing,type:"secondary",size:"small",className:"hidden lg:flex",onClick:()=>{"loading"!==c.status&&c.refresh()},children:"Refresh"}),(0,t.jsx)(i.Tooltip,{disableTriggers:!u,text:"You don't have permission to edit domains from this project. Ask your team admin to edit a domain or grant you the member role or higher.",children:(0,t.jsx)(n.Button,{disabled:u,onClick:()=>{o(!0),l(a.name)},size:"small",type:"secondary",children:"Edit"})})]})}function tH(e){let{domain:a,search:n,textOnly:r}=e,{status:i}=eY(a),[s,o]=(0,f.useState)(!1),l=e=>{if(!n)return(0,t.jsx)("span",{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline max-w-full",children:e});let a=function(e,t){let a=e.toLowerCase(),n=t.toLowerCase();if(!a)return null;let r=n.indexOf(a);if(-1!==r)return[r,r+a.length];let i=null,s=0,o=0;for(let e=0;e<n.length;e++)for(let t=Math.min(a.length,n.length-e);t>=2;t--){let r=n.substring(e,e+t);if(a.includes(r)||r.includes(a)){let n=1/(e+1)*t*(t/a.length);n>o&&(i=[e,e+t],s=t,o=n)}}if(i&&s>=2)return i;let l=-1,d=0,c=null,u=0;for(let e=0;e<n.length;e++){let t=n[e];a.includes(t)?(-1===l&&(l=e),d++):(d>u&&(c=[l,l+d],u=d),l=-1,d=0)}return(d>u&&(c=[l,l+d]),c&&c[1]-c[0]>=2)?c:null}(n,e);if(!a)return(0,t.jsx)("span",{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline",children:e});let[r,i]=a,s=e.substring(r,i);return(0,t.jsx)("span",{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline",children:(0,t.jsx)(e3.HighlightText,{as:"span",search:s,text:e})})};return"loading"===i||r?l(a.name):(0,T.default)(a.name)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Link,{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline max-w-full",onClick:()=>o(!0),children:l(a.name)}),s?(0,t.jsx)(_.default,{active:s,onCancel:()=>o(!1),url:a.name.replace("*.","")}):null]}):(0,t.jsx)(m.Link,{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline max-w-full",href:`https://${a.name}`,rel:"noreferrer noopener",target:"_blank",children:l(a.name)})}function tq(e){let{domain:a,ui:r,onSave:i,onRemove:s,onCancel:d,projectDomainTarget:c,teamSlug:u,project:m}=e,[h,x]=(0,f.useState)(a.name),[p,g]=(0,f.useState)(null),j=null;0===h.length?j="Domain name is required":c.isErr()&&(j=c.error);let[v,b]=(0,f.useState)(null),k=(0,f.useCallback)(async e=>{e.domainName=e.domainName.toLowerCase();try{e.domainName!==a.name?b({newDomain:e,oldDomain:a}):(await tl({project:{id:m},team:{id:u},projectDomain:a,isReady:!0,customEnvironmentId:e.customEnvironmentId,gitBranch:e.gitBranch,redirect:e.redirect,redirectStatusCode:e.redirectStatusCode}),i(e))}catch(e){g((0,e4.isError)(e)?e.message:"We encountered an error while saving this domain. If the problem persists, please contact support.")}},[a,i,m,u]);return(0,t.jsxs)("div",{className:"pb-6 pt-2",children:[v?(0,t.jsx)(tA,{newDomain:v.newDomain,oldDomain:v.oldDomain,onCancel:d,onSave:e=>{i(e)},teamSlug:u,project:m}):null,(0,t.jsx)(o.Input,{"aria-labelledby":"domain-label",value:h,label:"Domain",onChange:e=>{x(e.target.value)}}),(0,t.jsx)("div",{className:"pt-4",children:r}),p?(0,t.jsx)(l.Note,{type:"error",children:p}):null,(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-2 pt-4",children:[(0,t.jsx)(n.Button,{onClick:s,type:"error",children:"Remove"}),(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(n.Button,{type:"secondary",onClick:d,children:"Cancel"}),(0,t.jsx)(n.Button,{disabled:null!==j,onClick:()=>{c.isErr()||k({domainName:h,redirect:c.value.redirect??null,redirectStatusCode:c.value.redirectStatusCode??null,gitBranch:c.value.gitBranch??null,customEnvironmentId:c.value.customEnvironmentId||void 0})},children:"Save"})]})]})]})}function tY(e){let{status:a,editingDomain:n,domain:r,project:i,revalidateDomains:s,setEditingDomain:o,getProjectDomainTarget:l,ui:d,teamSlug:c,setRemoveModal:u,onCloseAccordion:h}=e;if(n)return(0,t.jsxs)("div",{className:"p-2 md:px-7",children:[(0,t.jsx)(tq,{domain:r,project:i,onSave:async()=>{await s(),o(!1),h(r.name)},projectDomainTarget:l(),onCancel:()=>{h(r.name),o(!1)},ui:d,teamSlug:c,onRemove:()=>{u(!0)}}),e.teamDomain?.zone&&"loading"!==a.status&&(null===a.level||"warning"===a.level)?(0,t.jsx)("div",{className:"pb-2",children:(0,t.jsx)("p",{className:"text-copy-14",children:(0,t.jsxs)(m.Link,{href:e.teamDomain?.teamId?`/${c}/~/domains/${r.apexName}`:`/dashboard/domains/${r.apexName}`,variant:"highlight",className:"text-xs",children:["View DNS Records & More for ",r.apexName," â†’"]})})}):null]});if("loading"===a.status)return null;if(null===a.level){let e=new Date(Date.now()-864e5),a=new Date(r.createdAt),n=(0,Z.isPublicAlias)(r.name);return a>e&&!n?(0,t.jsx)("div",{className:"p-2 px-7",children:(0,t.jsx)(tP.DnsPropagationNote,{children:"It might take some time for the DNS records to propagate globally."})}):null}return(0,t.jsxs)("div",{className:(0,b.cn)("px-7 pb-4 pt-0",a.className),children:[" ",a.ui," "]})}function tJ(e){let{domain:a,project:n,teamSlug:r,search:i,onOpenAccordion:s,onCloseAccordion:o,revalidateDomains:l}=e,[d,c]=(0,f.useState)(!1),[u,m]=(0,f.useState)(!1),[h,x]=(0,f.useState)(void 0),[p,v]=(0,f.useTransition)(),k=(0,B.useIsMobile)(),y=ej(a.name);y.data?.isOk()&&y.data.value.domain.teamId;let{getProjectDomainTarget:w,ui:N}=tr({domain:a.name,projectDomainTarget:a,saving:!1,style:k?"cards":"inline"}),S=(0,f.useCallback)(async e=>{let{removeRedirects:t=!1}=e;try{await (0,E.removeProjectDomain)(n,r,a.name,t),await l(),c(!1),m(!1)}catch(e){x((0,e4.isError)(e)?e.message:"We encountered an error while removing this domain. If the problem persists, please contact support.")}},[n,r,a.name,l]),C=eY(a),z="loading"===C.status||null===C.level||u;return(0,t.jsxs)("div",{className:(0,b.cn)("border-b-400 border-b border-solid",e.className),children:[(0,t.jsxs)(g.Item,{value:a.name,children:[(0,t.jsx)("div",{className:"flex w-full flex-col px-4 ",children:(0,t.jsxs)("div",{className:"flex h-[70px] w-full flex-row items-center justify-between",children:[(0,t.jsxs)(g.Trigger,{className:(0,j.clsx)("flex select-text items-center gap-3 self-stretch overflow-hidden bg-transparent p-0 [font-family:Geist]",{"cursor-pointer":!z,"cursor-default":z}),disabled:z,children:[(0,t.jsx)(eZ,{domain:a}),(0,t.jsx)("div",{className:"flex w-[220px] min-w-0 items-center gap-2 md:w-[359px]",children:(0,t.jsxs)("div",{className:"flex flex-col items-start justify-end gap-2 max-w-full",children:[(0,t.jsx)(tH,{domain:a,search:i,textOnly:!z}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eX,{domain:a}),u||z?null:(0,t.jsxs)("div",{className:"flex items-center gap-0 text-xs text-gray-alpha-1000",children:["Learn more",(0,t.jsx)(tE.ChevronDown,{className:(0,j.clsx)("ease-[ease] transition-transform duration-200","[[data-state=open]_&]:rotate-180"),size:12,color:"gray-900"})]})]})]})}),(0,t.jsx)("div",{className:"hidden shrink items-center gap-2 overflow-hidden truncate font-mono text-sm font-normal leading-5 text-gray-900 md:flex",children:(0,t.jsx)(tG,{domain:a,project:n})})]}),(0,t.jsx)("div",{className:"flex shrink-0 items-center gap-3",children:(0,t.jsx)(tU,{domain:a,project:n,editingDomain:u,setEditingDomain:m,onOpenAccordion:s})})]})}),(0,t.jsx)(g.Content,{className:"overflow-hidden will-change-[height] md:px-4 [[data-state=open]_&]:animate-content-open",children:(0,t.jsx)(tY,{status:C,editingDomain:u,domain:a,teamDomain:y.data?.isOk()?y.data.value.domain:null,project:n,revalidateDomains:l,setEditingDomain:m,getProjectDomainTarget:w,ui:N,teamSlug:r,setRemoveModal:c,onCloseAccordion:o},a.name)})]}),d?(0,t.jsx)(A,{domain:a.name,onRemoveDomain:e=>{v(async()=>{await S(e)})},removeModal:d,removing:p,setRemoveModal:c,error:h}):null]})}let tK=90;function tQ(e){let{isLoadingMore:a,isReachingEnd:r,loadMore:i}=tV(e.project);return(0,t.jsx)("div",{className:"flex w-full items-center justify-center",children:void 0!==r&&!r&&(0,t.jsx)(n.Button,{type:"tertiary",className:"w-full",loading:a,onClick:()=>void i(),children:"Load more"})})}function tZ(e){let{domains:a,loadMore:r,isLoadingMore:i,isReachingEnd:o,isLoading:l,revalidateDomains:d}=tV(e.project),{search:c}=tM(),[u,m]=(0,f.useState)([]),h=(0,f.useCallback)(e=>{m(e)},[]),x=(0,f.useCallback)(e=>{m(t=>t.includes(e)?t:[...t,e])},[]),p=(0,f.useCallback)(e=>{m(t=>t.filter(t=>t!==e))},[]);return l?(0,t.jsx)(t0,{}):a.length?(0,t.jsx)(g.Root,{type:"multiple",value:u,onValueChange:h,children:(0,t.jsx)("div",{className:"flex flex-col  items-start justify-center self-stretch rounded-md border border-solid border-gray-400 bg-background-100",children:(0,t.jsx)(e1.Virtuoso,{style:{width:"100%"},data:a,endReached:()=>{i||o||r()},useWindowScroll:!0,components:{Footer:()=>i?(0,t.jsx)(tQ,{project:e.project}):null},itemContent:(n,r)=>(0,t.jsx)(tJ,{domain:r,className:n===a.length-1?"border-b-0":"",project:e.project,teamSlug:e.teamSlug,search:c,onOpenAccordion:x,onCloseAccordion:p,revalidateDomains:d},r.name)})})}):(0,t.jsx)(s.EmptyState.Root,{paddingY:96,descriptionClassName:"max-w-none",titleClassName:"max-w-none",title:"No Results Found",description:"Your search did not return any results.",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 sm:flex-row",children:[(0,t.jsx)(n.Button,{type:"secondary",onClick:e.onClearFilters,children:"Clear Filters"}),(0,t.jsx)(tF,{projectId:e.project})]})})}let tX=[1,2,3];function t0(){return(0,t.jsx)("div",{className:"flex flex-col items-start justify-center self-stretch rounded-md border border-solid border-gray-400 bg-background-100",children:tX.map(e=>(0,t.jsx)("div",{className:(0,b.cn)("border-b-400 border-b border-solid w-full"),children:(0,t.jsx)("div",{className:"flex w-full flex-col px-4 ",children:(0,t.jsxs)("div",{className:"flex h-[70px] w-full flex-row items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 self-stretch overflow-hidden bg-transparent p-0 [font-family:Geist]",children:[(0,t.jsx)(r.Skeleton,{className:"block rounded-full",height:"16px",width:"16px"}),(0,t.jsx)("div",{className:"flex w-[220px] min-w-0 items-center gap-2 md:w-[359px]",children:(0,t.jsxs)("div",{className:"flex flex-col items-start justify-end gap-2",children:[(0,t.jsx)(r.Skeleton,{className:"h-[20px]",width:"142px"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(r.Skeleton,{className:"h-[20px]",width:"116px"})})]})}),(0,t.jsx)("div",{className:"hidden shrink items-center gap-2 overflow-hidden truncate font-mono text-sm font-normal leading-5 text-gray-900 md:flex",children:(0,t.jsx)(r.Skeleton,{className:"h-[20px]",width:"108px"})})]}),(0,t.jsx)("div",{className:"flex shrink-0 items-center gap-3",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Button,{loading:!0,type:"secondary",size:"small",className:"hidden lg:flex",children:"Refresh"}),(0,t.jsx)(n.Button,{disabled:!0,size:"small",type:"secondary",children:"Edit"})]})})]})})},e))})}e.s(["NewProjectDomainsPage",0,function(){let e=(0,v.useParams)(),a=e?.teamSlug,n=e?.project,{search:r,setSearch:i}=tM(),{redirectFilter:o,setRedirectFilter:l}=tB(),{gitBranchFilter:x,setGitBranchFilter:p}=t$(),{environmentFilter:g,setEnvironmentFilter:j}=tL(),{domains:b,isLoading:k,revalidateDomains:y}=tV(n),C=(0,e2.useDebouncedCallback)(e=>{i(e)},200),{domain:z,setDomain:I}=function(){let[e,t]=(0,N.useQueryState)("domain",{...S.parseAsString,shallow:!0});return{domain:e,setDomain:t}}(),{showAddDomainModal:P,setShowAddDomainModal:D}=tO(),[A,E]=(0,f.useState)(null),R=!r&&!o&&!x&&!g&&!k&&0===b.length,T=r??z??null,[_,O]=(0,f.useState)(r??"");return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-heading-24",children:(0,t.jsx)(h.SearchContextHighlighter,{children:"Domains"})}),(0,t.jsx)("span",{className:"hidden md:block",children:(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Domains can be assigned to git branches, custom environments, and production."})})]}),R?null:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.ButtonLink,{className:"hidden md:flex",href:`/domains?q=${r?.length?r:""}&teamSlug=${a}`,type:"secondary",children:"Buy Domain"}),(0,t.jsx)(tF,{projectId:n})]})]}),(0,t.jsx)("span",{className:"block md:hidden",children:"These are your domains assigned to branches & production deployments."}),R?(0,t.jsx)(s.EmptyState.Root,{paddingY:28,icon:(0,t.jsx)(s.EmptyState.Icon,{icon:(0,t.jsx)(e8.Globe,{size:32})}),descriptionClassName:"max-w-none",titleClassName:"max-w-none",title:"No domains have been added yet",description:"Add or purchase a domain to get started",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 sm:flex-row",children:[(0,t.jsx)(m.ButtonLink,{href:`/domains?q=${r?.length?r:""}&teamSlug=${a}`,type:"secondary",children:"Buy Domain"}),(0,t.jsx)(tF,{projectId:n})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(M,{value:_,setSearch:e=>{C(e),O(e??"")}})}),(0,t.jsxs)(c.MenuContainer,{position:"bottom-end",closeOnSelect:!1,children:[(0,t.jsx)(u.MenuButton,{type:"secondary","aria-label":"Filter domains",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(t_.Filter,{size:16}),(0,t.jsx)("span",{className:"hidden md:inline",children:"Filter"})]})}),(0,t.jsx)(d.Menu,{width:300,children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 p-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-label-12 text-gray-900",children:"Environment"}),(0,t.jsx)(tW,{value:g,onChange:e=>{j(e)},disabled:!1})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-label-12 text-gray-900",children:"Git Branch"}),(0,t.jsx)(G,{disabled:!1,environmentId:w.EnvTarget.Preview,clearable:!0,onChange:e=>{p(e??null)},onFocus:void 0,value:x||""})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-label-12 text-gray-900",children:"Redirect To"}),(0,t.jsx)(tt,{selfRedirect:!1,setRedirect:e=>{l("function"==typeof e?e(o):e)},savingRedirect:!1,redirect:o,domain:"",disabled:!1,className:"w-full"})]})]})})]})]}),(0,t.jsx)(tZ,{project:n,teamSlug:a,onClearFilters:()=>{i(void 0),l(null),p(null),j(null),O("")}})]}),P?(0,t.jsx)(tx,{onClose:()=>{D(null),I(null)},onSave:async()=>{await Promise.all([i(void 0),I(null)]),O(""),await y(),await D(null)},initialAddDomainInput:T,project:n,onDomainTransferRequest:e=>{D(null),E(e)},teamSlug:a}):null,A?(0,t.jsx)(tC,{domain:A.domain,onCancel:()=>E(null),active:!0,onComplete:()=>{E(null),y()},projectIdOrNameInUse:A.projectIdOrNameInUse}):null,(0,t.jsx)(tT,{projectId:n,onCancel:()=>{y()}})]})}],8162654)}]);

//# debugId=3564a1d8-5487-100b-a620-817ffc7d8de4
//# sourceMappingURL=03281ef416002944.js.map