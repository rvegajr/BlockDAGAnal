;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d47a76ca-f52b-8939-810d-73e9a876f82e")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6307619,e=>{e.v({afterName:"deploy-step-module__kdfw_G__afterName",age:"deploy-step-module__kdfw_G__age",content:"deploy-step-module__kdfw_G__content",contentClose:"deploy-step-module__kdfw_G__contentClose",contentFadeIn:"deploy-step-module__kdfw_G__contentFadeIn",contentFadeOut:"deploy-step-module__kdfw_G__contentFadeOut",contentOpen:"deploy-step-module__kdfw_G__contentOpen",contentWrapperPaddingBoth:"deploy-step-module__kdfw_G__contentWrapperPaddingBoth",contentWrapperPaddingVertical:"deploy-step-module__kdfw_G__contentWrapperPaddingVertical",contentWrapperPaddingVerticalBottom:"deploy-step-module__kdfw_G__contentWrapperPaddingVerticalBottom",header:"deploy-step-module__kdfw_G__header",icon:"deploy-step-module__kdfw_G__icon",item:"deploy-step-module__kdfw_G__item",name:"deploy-step-module__kdfw_G__name",trigger:"deploy-step-module__kdfw_G__trigger",triggerContent:"deploy-step-module__kdfw_G__triggerContent",triggerIcon:"deploy-step-module__kdfw_G__triggerIcon"})},9286433,e=>{e.v({creationFlow:"index-module__958Mra__creationFlow",logPreviewText:"index-module__958Mra__logPreviewText",mask:"index-module__958Mra__mask"})},7921739,e=>{e.v({accordion:"deploy-steps-module__0qoykW__accordion",afterNameContainer:"deploy-steps-module__0qoykW__afterNameContainer",cacheBadgeName:"deploy-steps-module__0qoykW__cacheBadgeName",cacheBadgeTooltipContainer:"deploy-steps-module__0qoykW__cacheBadgeTooltipContainer",checksFilter:"deploy-steps-module__0qoykW__checksFilter",checksStatus:"deploy-steps-module__0qoykW__checksStatus",connectionCircle:"deploy-steps-module__0qoykW__connectionCircle",connectionIcon:"deploy-steps-module__0qoykW__connectionIcon",filterMessage:"deploy-steps-module__0qoykW__filterMessage",linkText:"deploy-steps-module__0qoykW__linkText",noData:"deploy-steps-module__0qoykW__noData"})},4080109,e=>{e.v({action:"domain-row-module__MaxPfa__action",domain:"domain-row-module__MaxPfa__domain",domainContainer:"domain-row-module__MaxPfa__domainContainer",header:"domain-row-module__MaxPfa__header",heading:"domain-row-module__MaxPfa__heading",separator:"domain-row-module__MaxPfa__separator",wrapper:"domain-row-module__MaxPfa__wrapper"})},7784834,e=>{e.v({loadMore:"domain-step-module__nlP40W__loadMore",stepMessage:"domain-step-module__nlP40W__stepMessage"})},4303122,e=>{e.v({closedAll:"switcher-module__0BRQ2W__closedAll",collapsedBadgeName:"switcher-module__0BRQ2W__collapsedBadgeName",collapsedBadgesWrapper:"switcher-module__0BRQ2W__collapsedBadgesWrapper",iconLabel:"switcher-module__0BRQ2W__iconLabel",tooltip:"switcher-module__0BRQ2W__tooltip"})},9907554,e=>{e.v({badge:"log-row-module__w74U9q__badge",badgesWrapper:"log-row-module__w74U9q__badgesWrapper",content:"log-row-module__w74U9q__content",contentClose:"log-row-module__w74U9q__contentClose",contentOpen:"log-row-module__w74U9q__contentOpen",downloadButton:"log-row-module__w74U9q__downloadButton",frameworkWrapper:"log-row-module__w74U9q__frameworkWrapper",header:"log-row-module__w74U9q__header",iconWrapper:"log-row-module__w74U9q__iconWrapper",isrIconWrapper:"log-row-module__w74U9q__isrIconWrapper",link:"log-row-module__w74U9q__link",middlewareList:"log-row-module__w74U9q__middlewareList",radixTrigger:"log-row-module__w74U9q__radixTrigger",scroller:"log-row-module__w74U9q__scroller",title:"log-row-module__w74U9q__title",trigger:"log-row-module__w74U9q__trigger",wrapper:"log-row-module__w74U9q__wrapper"})},1160917,e=>{e.v({active:"badge-module__2RpGha__active",badge:"badge-module__2RpGha__badge",badgeContent:"badge-module__2RpGha__badgeContent"})},2608999,e=>{e.v({allPathsMiddlewareRow:"artefacts-list-module__PbE2WW__allPathsMiddlewareRow",arrowColumn:"artefacts-list-module__PbE2WW__arrowColumn",button:"artefacts-list-module__PbE2WW__button",copyFlagIcon:"artefacts-list-module__PbE2WW__copyFlagIcon",copyFlagIconWrapper:"artefacts-list-module__PbE2WW__copyFlagIconWrapper",copyIcon:"artefacts-list-module__PbE2WW__copyIcon",copyIconContainer:"artefacts-list-module__PbE2WW__copyIconContainer",copyIconWrapper:"artefacts-list-module__PbE2WW__copyIconWrapper",cronJobItem:"artefacts-list-module__PbE2WW__cronJobItem",cronJobItemAsterisk:"artefacts-list-module__PbE2WW__cronJobItemAsterisk",destinationColumn:"artefacts-list-module__PbE2WW__destinationColumn",hasTrigger:"artefacts-list-module__PbE2WW__hasTrigger",headerContent:"artefacts-list-module__PbE2WW__headerContent",isrFunctionRow:"artefacts-list-module__PbE2WW__isrFunctionRow",item:"artefacts-list-module__PbE2WW__item",list:"artefacts-list-module__PbE2WW__list",middlewareInfoIcon:"artefacts-list-module__PbE2WW__middlewareInfoIcon",pathWrapper:"artefacts-list-module__PbE2WW__pathWrapper",regionBadge:"artefacts-list-module__PbE2WW__regionBadge",regionBadgeContainer:"artefacts-list-module__PbE2WW__regionBadgeContainer",singleDigit:"artefacts-list-module__PbE2WW__singleDigit",size:"artefacts-list-module__PbE2WW__size",sourceColumn:"artefacts-list-module__PbE2WW__sourceColumn",staticAssetGrid:"artefacts-list-module__PbE2WW__staticAssetGrid",staticRoute:"artefacts-list-module__PbE2WW__staticRoute",staticRouteButton:"artefacts-list-module__PbE2WW__staticRouteButton",staticRoutesContainer:"artefacts-list-module__PbE2WW__staticRoutesContainer",trigger:"artefacts-list-module__PbE2WW__trigger",truncate:"artefacts-list-module__PbE2WW__truncate",typeBadge:"artefacts-list-module__PbE2WW__typeBadge",typeBadgeContainer:"artefacts-list-module__PbE2WW__typeBadgeContainer",typeIcon:"artefacts-list-module__PbE2WW__typeIcon",variantItemGrid:"artefacts-list-module__PbE2WW__variantItemGrid",variantItemUpstream:"artefacts-list-module__PbE2WW__variantItemUpstream",virtualListAtBottom:"artefacts-list-module__PbE2WW__virtualListAtBottom",virtualListAtTop:"artefacts-list-module__PbE2WW__virtualListAtTop"})},6618181,e=>{e.v({header:"header-module__W7AuxW__header",headerStatContainer:"header-module__W7AuxW__headerStatContainer",headerStatMetric:"header-module__W7AuxW__headerStatMetric",headerStatTitle:"header-module__W7AuxW__headerStatTitle",headerStats:"header-module__W7AuxW__headerStats",headerTitle:"header-module__W7AuxW__headerTitle",headerTitleContainer:"header-module__W7AuxW__headerTitleContainer"})},7935689,e=>{e.v({sidebar:"sidebar-module__m58S2q__sidebar",sidebarDivider:"sidebar-module__m58S2q__sidebarDivider",sidebarFooter:"sidebar-module__m58S2q__sidebarFooter",sidebarTaskContainer:"sidebar-module__m58S2q__sidebarTaskContainer",sidebarTitle:"sidebar-module__m58S2q__sidebarTitle"})},5224197,458149,1367170,7442785,855127,e=>{"use strict";var t,s,n,a=e.i(847684),r=e.i(8284460),i=e.i(7185353),l=e.i(9722978),o=e.i(4756166),c=e.i(598834),d=e.i(4597921),u=e.i(57106),m=e.i(7450862),p=e.i(12218),h=e.i(1717203),x=e.i(7557283),f=e.i(2504781),g=e.i(8674454),y=e.i(6694387),j=e.i(4991687),v=e.i(8459493),b=e.i(8923565),C=e.i(5468328),_=e.i(5761705),k=e.i(7749365),w=e.i(6226725),N=e.i(109803),S=e.i(992159),I=e.i(7957251),A=e.i(8646538),R=e.i(6401841),T=e.i(762945),P=e.i(7674801),E=e.i(8238875),L=e.i(6159310),W=e.i(1282571),M=e.i(8525850),B=e.i(100247),D=e.i(4844919),V=e.i(3758860);e.i(6887680);var F=e.i(6810699),O=e.i(7743427),H=e.i(4443312),U=e.i(847180),$=e.i(4641028);let z="Running Checks",q="Marketplace Checks",G="Deployment Checks",Y="Assigning Domains",Z="Deployment Summary",J=["Build Logs",Z,Y];var K=e.i(9334638);let Q=(0,K.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM5.53033 4.46967L5 3.93934L3.93934 5L4.46967 5.53033L10.4697 11.5303L11 12.0607L12.0607 11L11.5303 10.4697L5.53033 4.46967Z" fill="currentColor"/>');var X=e.i(8761240),ee=e.i(9386557),et=e.i(9584456),es=e.i(9429910),en=e.i(5756088),ea=e.i(5255926),er=e.i(8735244),ei=e.i(2560270),el=e.i(361349),eo=e.i(85019),ec=e.i(6307619),ed=((t={}).Building="BUILDING",t.FetchingSourceCode="FETCHING_SOURCE_CODE",t.PopulatingBuildCache="POPULATING_BUILD_CACHE",t.PreparingBuildEnv="PREPARING_BUILD_ENV",t.RestoringBuildCache="RESTORING_BUILD_CACHE",t.UploadingBuildOutputs="UPLOADING_BUILD_OUTPUTS",t),eu=((s={}).Delimiter="delimiter",s.Stdout="stdout",s.Stderr="stderr",s),em=((n={}).Canceled="cancelled",n.Complete="complete",n.Error="error",n.Warning="warning",n.InProgress="in-progress",n.Pending="pending",n.Skipped="skipped",n.NoData="no-data",n.Partial="partial",n.MissingPermissions="missing-permissions",n);let ep={both:ec.default.contentWrapperPaddingBoth,vertical:ec.default.contentWrapperPaddingVertical,"vertical-bottom":ec.default.contentWrapperPaddingVerticalBottom,none:void 0};function eh(e){let{id:t,name:s}=e,n="string"==typeof s?`${s.length}ch`:"200px";return(0,a.jsx)(r.Item,{className:ec.default.item,disabled:!0,value:t,children:(0,a.jsx)(r.Header,{asChild:!0,className:ec.default.header,children:(0,a.jsx)("h2",{children:(0,a.jsx)(r.Trigger,{asChild:!0,className:ec.default.triggerContent,children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(ea.Skeleton,{height:16,style:{width:n,fontSize:"14px"}}),(0,a.jsx)(ea.Skeleton,{className:ec.default.icon,height:20,rounded:!0,width:20})]})})})})})}function ex(e){let{action:t,children:s,disabled:n,finishedAt:o,id:c,customDuration:d,name:u,paddingType:m="vertical",skeleton:p,startedAt:h,status:x,afterName:f,showDurationWhenSkipped:g}=e,[y,j]=i.useState(null),v=i.useMemo(()=>{switch(x){case"cancelled":case"pending":return(0,a.jsx)(k.Clock,{color:"gray-500",size:20});case"skipped":case"partial":return(0,a.jsx)(Q,{color:"gray-500",size:20});case"complete":return(0,a.jsx)(X.CheckCircleFill,{color:"blue-700",size:20});case"warning":return(0,a.jsx)(ee.WarningFill,{color:"amber-700",size:20});case"error":return(0,a.jsx)(et.StopFill,{color:"red-700",size:20});case"no-data":return(0,a.jsx)(es.InformationFill,{color:"gray-700",size:20});case"missing-permissions":return(0,a.jsx)(en.LockClosed,{color:"gray-700",size:20});default:return(0,a.jsx)(er.Spinner,{size:20})}},[x]);(0,el.useInterval)(()=>{h&&j(Date.now()-h)},o?null:1e3,!0),i.useEffect(()=>{null===y&&h&&o&&j(o-h)},[y,o,h]);let b="skipped"===x;return(0,a.jsxs)(r.Item,{className:ec.default.item,"data-status":x,disabled:n,value:c,children:[(0,a.jsx)(r.Header,{asChild:!0,className:ec.default.header,children:(0,a.jsx)("h2",{children:(0,a.jsx)(r.Trigger,{asChild:!0,className:(0,l.clsx)(ec.default.triggerContent,{"flex-nowrap":c===ed.Building}),children:(0,a.jsxs)("div",{children:[(0,a.jsx)(ei.ChevronDown,{className:ec.default.triggerIcon,color:n?"gray-800":"gray-900"}),(0,a.jsx)("span",{className:`text-[14px] leading-[20px] font-medium ${ec.default.name}`,children:u}),f?(0,a.jsx)("span",{className:`text-copy-14 ${ec.default.afterName}`,children:f}):null,t,p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:ec.default.age}),(0,a.jsx)(ea.Skeleton,{className:ec.default.icon,height:20,rounded:!0,width:20})]}):(0,a.jsxs)(a.Fragment,{children:[(!b||g)&&(d||y)&&c!==Z?(0,a.jsx)("span",{className:"text-label-14 flex-none text-gray-900 tabular-nums",children:(0,eo.age)(d||y||void 0,{includeSeconds:!0})}):null,b?(0,a.jsx)("span",{className:"text-label-14 flex-none text-gray-900",children:"Skipped"}):null,(0,a.jsx)("div",{className:ec.default.icon,children:v})]})]})})})}),(0,a.jsx)(r.Content,{className:ec.default.content,children:(0,a.jsx)("div",{className:`${ep[m]??""} tailwind`,children:s})})]})}var ef=e.i(472117),eg=e.i(5838262),ey=e.i(277234),ej=e.i(8042625);function ev(e){let{checkId:t,deploymentId:s,teamSlug:n,onSuccess:r,disabled:l=!1,checksConclusion:o}=e,[c,d]=(0,i.useTransition)(),[u,m]=(0,i.useState)(0);(0,i.useEffect)(()=>()=>{u&&clearTimeout(u)},[u]);let p=async()=>{await (0,ey.fetchAPI)(`/v1/deployments/${s}/checks/${t}/rerequest${(0,ej.encode)({teamId:n,autoUpdate:!0})}`,{method:"POST"}),await r?.(),u&&clearTimeout(u);let e=window.setTimeout(()=>{m(0)},5e3);m(e)};return(0,a.jsx)(f.Button,{onClick:()=>d(p),size:"small",type:"secondary",disabled:l||c||"skipped"===o||!!u,loading:c,children:"Rerun"})}function eb(){let e=(0,E.useSearchParams)(),t=(0,E.usePathname)(),s=(0,E.useRouter)(),n=new Set(["all","failed","succeeded","running","queued"]),a=e?.get("promotion-requirements");return{activeFilter:n.has(a)?a??"all":"all",handleFilterChange:n=>{let a=new URLSearchParams(e?.toString());"all"===n?a.delete("promotion-requirements"):a.set("promotion-requirements",n),s.replace(`${t}?${a.toString()}`,{scroll:!1})},hasFilter:!!a}}function eC(e){let{deployment:t,teamSlug:s,expandedSteps:n,onExpandedStepsChange:r}=e,l=(0,ef.useCiChecksAndPoliciesFlagV2)(),{data:o}=(0,H.useProjectCheckRuns)({deploymentId:t.id,enableCiChecksAndPolicies:l}),{areChecksRunning:c}=(0,B.getDeploymentStatus)(t),{checks:d,mutate:u}=(0,$.default)({deploymentId:t.id,teamId:s},{refreshInterval:c?H.CHECK_RUNS_REFRESH_INTERVAL:0}),{ciChecks:m,checksV1ById:p}=(0,i.useMemo)(()=>({ciChecks:[...o?.runs??[],...d.map(e=>{let s;return s="registered"===e.status?"queued":e.status,{id:e.id,name:e.name,checkId:e.id,status:s,conclusion:e.conclusion,source:{kind:"integration",integrationId:e.integrationId,integrationConfigurationId:e.integrationId,externalResourceId:e.externalId},externalUrl:e.externalUrl,externalId:e.externalId,createdAt:e.createdAt,startedAt:e.startedAt,completedAt:e.completedAt,updatedAt:e.updatedAt,ownerId:t.team?.id||t.ownerId||"",projectId:t.projectId,deploymentId:t.id,output:e.output}})],checksV1ById:new Map(d.map(e=>[e.id,e]))}),[o,d,t]),h=(0,i.useRef)(!1),{hasFilter:x}=eb();(0,i.useEffect)(()=>{h.current||!x||n.includes(G)||r([...n,G]),m.length&&(h.current=!0)},[x,n,r,m]);let f=em.Pending;0===m.length?em.Pending:m.some(e=>"failed"===e.conclusion)?f=em.Error:m.some(e=>"running"===e.status)?f=em.InProgress:m.every(e=>"succeeded"===e.conclusion)&&(f=em.Complete);let g=n.includes(G),y="production"===t.target;return(0,a.jsx)(e_,{isProduction:y,isExpanded:g,combinedStatus:f,ciChecks:m,teamSlug:s,deployment:t,expandedSteps:n,checksV1ById:p,mutateChecksV1:u})}function e_(e){let{isProduction:t,combinedStatus:s,ciChecks:n,teamSlug:r,deployment:l,expandedSteps:o,checksV1ById:c,mutateChecksV1:d}=e,{activeFilter:u}=eb(),{can:m}=(0,h.default)(),p=(0,i.useMemo)(()=>m(x.Action.All,x.Resource.DeploymentCheck),[m]),f=(0,i.useMemo)(()=>"all"===u?n:n.filter(e=>{switch(u){case"failed":return"failed"===e.conclusion||"timeout"===e.conclusion||"skipped"===e.conclusion;case"running":return"running"===e.status;case"queued":return"queued"===e.status;case"succeeded":return"succeeded"===e.conclusion;default:return!0}}),[n,u]),g=(0,F.useResourceList)({resourceIds:f.flatMap(e=>"integration"===e.source.kind&&e.source.resourceId?[e.source.resourceId]:[])}),y=(0,i.useMemo)(()=>{let e=new Map;return g.data?.stores?.forEach(t=>{"integration"===t.type&&e.set(t.id,t)}),e},[g.data?.stores]);return 0===n.length?(0,a.jsx)(ex,{id:G,name:G,status:em.Pending,children:(0,a.jsx)(eg.EmptyChecksCard,{})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ex,{action:(0,a.jsx)(ew,{isProduction:t,ciChecks:n,expandedSteps:o}),id:G,name:G,paddingType:"none",status:s,children:0===f.length?(0,a.jsx)(eR,{size:"sm",children:(0,a.jsx)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial ml-5",children:(0,a.jsx)("p",{className:"text-label-14 font-medium text-gray-900",children:"No requirements match this filter."})})}):f.sort((e,t)=>{let s=e=>"failed"===e.conclusion?0:"canceled"===e.conclusion?9:"running"===e.status?1:"queued"===e.status?2:"succeeded"===e.conclusion?8:"skipped"===e.conclusion?9:10,n=s(e),a=s(t);return n!==a?n-a:e.name.localeCompare(t.name,void 0,{sensitivity:"base"})}).map(e=>{let t="resourceId"in e.source&&e.source.resourceId?y.get(e.source.resourceId):void 0;return(0,a.jsx)(eI,{check:e,resource:t,teamSlug:r,deployment:l,canUpdateDeploymentRequirements:p,checkV1:c.get(e.id),mutateChecksV1:d},e.name)})})})}function ek(e){let{ciChecks:t,expandedSteps:s}=e,n=(0,i.useMemo)(()=>({all:t.length,failed:t.filter(e=>"failed"===e.conclusion).length,running:t.filter(e=>"running"===e.status).length,registered:t.filter(e=>"queued"===e.status).length,succeeded:t.filter(e=>"succeeded"===e.conclusion).length,skipped:t.filter(e=>"skipped"===e.conclusion||"canceled"===e.conclusion).length}),[t]),{activeFilter:r,handleFilterChange:o}=eb(),c=[{value:"all",icon:(0,a.jsx)("span",{children:"All"}),count:n.all},{value:"failed",icon:(0,a.jsx)(eA,{check:{status:"completed",conclusion:"failed"}}),count:n.failed},{value:"succeeded",icon:(0,a.jsx)(eA,{check:{status:"completed",conclusion:"succeeded"}}),count:n.succeeded},{value:"running",icon:(0,a.jsx)(eA,{check:{status:"running",conclusion:"neutral"}}),count:n.running},{value:"queued",icon:(0,a.jsx)(eA,{check:{status:"queued",conclusion:"neutral"}}),count:n.registered}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:(0,l.clsx)("transition-opacity duration-200",s.includes(G)?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"),children:(0,a.jsx)(b.Switch,{size:"small",onClick:e=>e.stopPropagation(),className:"hidden [@media(min-width:750px)]:flex",children:c.map(e=>{let{value:t,icon:s,count:n}=e;return(0,a.jsx)(b.Switch.Control,{checked:t===r,label:(0,a.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:4},children:[s," ",(0,a.jsx)("span",{className:"all"===t?"ml-[2px]":"",children:n})]}),onChange:()=>{o(t)},value:t},t)})})}),(0,a.jsxs)(j.MenuContainer,{children:[(0,a.jsx)(y.MenuButton,{size:"small",shape:"square",svgOnly:!0,"aria-label":"Filter Deployment Checks",type:"secondary",className:"block w-[23px] !p-0 text-sm font-normal [@media(min-width:750px)]:hidden",children:(0,a.jsx)(S.Filter,{size:16,color:"gray-900"})}),(0,a.jsx)(g.Menu,{className:"font-normal [@media(min-width:750px)]:hidden",children:c.map(e=>{let{value:t,icon:s,count:n}=e;return(0,a.jsx)(v.MenuItem,{onClick:e=>{e.stopPropagation(),o(t)},children:(0,a.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:4},children:["all"!==t?s:void 0," ",(0,a.jsxs)("span",{children:[(0,D.default)(t)," (",n,")"]})]})},t)})})]})]})}function ew(e){let{isProduction:t,ciChecks:s,expandedSteps:n}=e,r=(0,ef.useChecksSettingsFlag)(),i=(0,ef.useCiChecksAndPoliciesFlagV2)();return t&&i?(0,a.jsxs)(a.Fragment,{children:[s.length>0&&(0,a.jsx)(ek,{ciChecks:s,expandedSteps:n}),r&&(0,a.jsx)(L.DashboardButtonLink,{route:"/[teamSlug]/[project]/settings/build-and-deployment",hash:"#deployment-checks",size:"small",type:"secondary",prefix:(0,a.jsx)(N.External,{color:"gray-900"}),target:"_blank",children:"Manage"})]}):null}function eN(e){let{check:t,integration:s,checkV1:n}=e,r=(0,i.useMemo)(()=>n?n.externalUrl||n.detailsUrl:t.externalUrl?s&&"integration"===t.source.kind?(0,V.getIntegrationAbsoluteOrSsoLink)(t.externalUrl,{teamIdOrSlug:t.ownerId,integrationConfigurationId:t.source.integrationConfigurationId,externalResourceId:t.source.externalResourceId,projectId:t.projectId,checkId:t.id}):t.externalUrl:"integration"===t.source.kind?(0,V.getIntegrationDeepLink)({teamIdOrSlug:t.ownerId,integrationConfigurationId:t.source.integrationConfigurationId,externalResourceId:t.source.externalResourceId,projectId:t.projectId,checkId:t.id}):null,[t,s,n]),{name:l,status:o,conclusion:c}=t,d=(0,a.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:l}),m=(0,a.jsx)(eA,{check:{conclusion:c,status:o}});return(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial min-w-0",children:[m,(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial min-w-0",children:[(0,a.jsx)(eS,{check:t,integration:s}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:r?(0,a.jsx)(u.Link,{external:!0,href:r,children:d}):d}),t.conclusionText&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-copy-14 text-gray-900 flex-shrink-0",children:"·"}),(0,a.jsx)(C.Tooltip,{as:"div",className:"flex-1 min-w-0",text:t.conclusionText,children:(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsx)("p",{className:"text-copy-14 text-gray-900 truncate whitespace-nowrap overflow-hidden text-ellipsis",children:t.conclusionText})})})]})]})]})]})}function eS(e){let{check:t,integration:s}=e;return s?(0,a.jsx)(W.MarketplaceIntegrationCardIcon,{size:20,icon:s.icon,name:s.name}):"git-provider"===t.source.kind?(0,a.jsx)(P.LogoGithub,{size:20}):null}function eI(e){let{check:t,resource:s,teamSlug:n,deployment:r,canUpdateDeploymentRequirements:i,checkV1:o,mutateChecksV1:c}=e,{status:d,conclusion:m,source:p}=t,{data:h}=(0,O.useIntegration)("integration"===t.source.kind?t.source.integrationId:void 0),{mutate:x}=(0,H.useProjectCheckRuns)({deploymentId:r.id,enableCiChecksAndPolicies:!0}),g=(0,U.useSkipCheckRun)({teamId:r.team?.id,deploymentId:r.id,checkRunId:t.id,onSuccess:()=>{x()}}),y=(0,U.useSkipCheckV1)({teamId:n,deploymentId:r.id,checkId:t.id,onSuccess:()=>{c?.(),x()}}),j=async()=>{c?.(),await x()},v=()=>(0,l.clsx)("hover:bg-[var(--ds-gray-100)]"),b=s&&n&&(0,M.getResourceDetailsPath)(s,n),_=async()=>{o?await y.trigger():await g.trigger()},k="git-provider"===p.kind,w=i&&!k&&("running"===d||"queued"===d||"completed"===d&&"failed"===m),N=i&&"failed"===m&&!!o;return(0,a.jsxs)(eR,{className:v(),size:"sm","data-check-status":"failed"===m?"failed":d,children:["queued"===d?(0,a.jsx)(C.Tooltip,{text:"This requirement is expected to run, but has not provided a status yet.",children:(0,a.jsx)(eN,{check:t,integration:h,checkV1:o})}):(0,a.jsx)(eN,{check:t,integration:h,checkV1:o}),(0,a.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-4 flex-initial",children:[b?(0,a.jsx)(u.Link,{className:(0,l.clsx)(v(),"hidden flex-row items-center gap-2 bg-transparent text-gray-900 md:flex"),external:!0,href:b,children:(0,a.jsx)("p",{className:`text-copy-14 ${(0,l.clsx)(v(),"flex-row items-center gap-2 bg-transparent text-gray-900 flex")}`,children:s.name})}):null,N&&(0,a.jsx)(ev,{checkId:t.id,deploymentId:r.id,teamSlug:n,onSuccess:j,checksConclusion:r.checksConclusion}),w&&(0,a.jsx)(C.Tooltip,{text:"Skip this check",children:(0,a.jsx)(f.Button,{size:"small",type:"secondary",onClick:_,disabled:g.isMutating||y.isMutating,"aria-label":"Skip check",children:g.isMutating||y.isMutating?"Skipping…":"Skip"})})]})]})}function eA(e){let{check:t}=e;return t?.status==="running"?(0,a.jsx)(A.StatusBordered,{size:16,color:"amber-600"}):t?.status==="completed"&&"succeeded"===t.conclusion?(0,a.jsx)(_.CheckCircle,{size:16,color:"green-700"}):t?.status==="completed"&&"failed"===t.conclusion?(0,a.jsx)(R.Stop,{size:16,color:"red-700"}):t?.status==="completed"&&"neutral"===t.conclusion?(0,a.jsx)(T.Warning,{size:16,color:"amber-700"}):t?.status==="completed"&&"skipped"===t.conclusion||t?.status==="completed"&&"canceled"===t.conclusion||t?.status==="completed"&&"neutral"===t.conclusion||t?.status==="completed"&&"neutral"===t.conclusion?(0,a.jsx)(I.MinusCircle,{color:"gray-500",size:16}):t?.status==="queued"?(0,a.jsx)(k.Clock,{size:16}):(0,a.jsx)(w.CrossCircle,{color:"gray-500",size:16})}function eR(e){let{children:t,className:s,onClick:n,size:r="lg"}=e;return(0,a.jsx)("div",{onClick:n,className:`flex flex-row items-stretch justify-between gap-2 flex-initial ${(0,l.clsx)("hsla(var(--ds-gray-200-value),1) px-3 sm:px-[var(--geist-space-gap)] [&:not(:last-child)]:border-b",{"py-[var(--geist-space-4x)]":"lg"===r},{"py-[var(--geist-space-gap-half)]":"sm"===r},s)}`,children:t})}var eT=e.i(9031150),eP=e.i(6352514),eE=e.i(4759942),eL=e.i(4670733),eW=e.i(7837522),eM=e.i(7780974);class eB extends TransformStream{#e="";#t=!1;#s=!1;#n=e=>e;constructor(e){super({transform:(e,t)=>this.#a(e,t),flush:e=>this.#a("\r\n",e)}),this.#t=e?.allowCR??!1,this.#s=e?.returnEmptyLines??!1,this.#n=e?.mapperFun??this.#n}#a(e,t){for(e=this.#e+e;;){let s=e.indexOf("\n");if(this.#t){let n=e.indexOf("\r");if(-1!==n&&n!==e.length-1&&(-1===s||s-1>n)){let s=this.#n(e.slice(0,crOrLfIndex));(this.#s||s)&&t.enqueue(s),e=e.slice(n+1);continue}}if(-1!==s){let n=s;"\r"===e[s-1]&&n--;let a=this.#n(e.slice(0,n));(this.#s||a)&&t.enqueue(a),e=e.slice(s+1);continue}break}this.#e=e}}var eD=e.i(5802506),eV=e.i(4244280),eF=e.i(6549540);let eO=e=>e.type===eu.Delimiter,eH=e=>{let{url:t,onLog:s,onResponse:n,signal:a,since:r,deploymentRef:i}=e,l={builds:1,since:r,direction:"forward",follow:(0,eF.default)(i.current)?void 0:1},o=r??0;return fetch(`${t}${(0,ej.encode)(l)}`,{signal:a}).then(async e=>{if(n?.(e),e.status<200||e.status>=300){let t=await e.text();throw Error(`Failed to fetch log stream: ${e.status} ${t}`)}if(1!==l.follow){for(let t of(await e.json()))s(t);return}let r=e.body?.pipeThrough(new TextDecoderStream,{signal:a}).pipeThrough(new eB({mapperFun:e=>{try{return JSON.parse(e)}catch{return null}}}),{signal:a}).getReader();if(r){for(;;){let{value:e,done:t}=await r.read();if(a.aborted)return;if(t||!e)break;e.created&&(o=e.created+1,s(e))}if(await new Promise(e=>{setTimeout(e,1e3)}),!a.aborted)return eH({url:t,signal:a,deploymentRef:i,since:o,onLog:s,onResponse:n})}})};var eU=e.i(4470704),e$=e.i(6891161),ez=e.i(9318197),eq=e.i(455575);let eG=e=>{let{active:t,deployment:s,onClose:n,mutateDeployment:r}=e,[l,o]=(0,i.useState)(!1),c=(0,eq.useToasts)(),d=async()=>{o(!0);let{error:e}=await (0,ey.fetchAPI)(`/v1/deployments/${s?.id}/checks/skip${(0,ej.encode)({teamId:s.team?.id})}`,{method:"POST"});e&&c.error({text:e.message||"An error occurred while skipping checks"}),o(!1),n(),r?.()};return(0,a.jsxs)(e$.Modal.Modal,{active:t,onClickOutside:n,width:"500px",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center flex-initial",children:[(0,a.jsx)(ez.Spacer,{y:1}),(0,a.jsx)("h3",{className:"text-copy-24",children:"Skip Checks"})]}),(0,a.jsx)(e$.Modal.Body,{children:(0,a.jsx)("p",{className:"text-copy-14 text-center",children:"Are you sure you want to continue?"})}),(0,a.jsxs)(e$.Modal.Actions,{children:[(0,a.jsx)(e$.Modal.Action,{onClick:n,type:"secondary",children:"Cancel"}),(0,a.jsx)(e$.Modal.Action,{disabled:l,loading:l,onClick:d,children:"Skip Checks"})]})]})};var eY=e.i(7909933),eZ=e.i(9668517);function eJ(e){let{meta:t={}}=e??{};return"githubCommitRef"in t?{refType:"github",refValue:t.githubCommitRef??void 0}:"gitlabCommitRef"in t?{refType:"gitlab",refValue:t.gitlabCommitRef??void 0}:"bitbucketCommitRef"in t?{refType:"bitbucket",refValue:t.bitbucketCommitRef??void 0}:{}}var eK=e.i(3001456),eQ=e.i(7710663),eX=e.i(1116271);let e0=e=>(0,i.useEffect)(e,[]);var e1=e.i(1114103),e5=e.i(8436238),e2=e.i(1360174),e4=e.i(8320377),e9=e.i(9286433);function e3(e){let{label:t,latestLog:s,creationFlow:n,afterLabel:r}=e,[o,c]=(0,i.useState)(void 0),[d,u]=(0,i.useState)(!0),m=(0,i.useRef)((0,e2.default)(e=>{c(e)},250,{trailing:!0}));return(0,i.useEffect)(()=>{d||s?.text===""||(s?.text===void 0?c(void 0):m.current(s.text))},[d,s?.text]),(0,i.useEffect)(()=>{let e=m.current;return()=>{e.cancel()}},[]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{u(!1)},1e3);return()=>{clearInterval(e)}},[]),(0,a.jsxs)("div",{className:"flex flex-1 items-center gap-3 w-full",children:[(0,a.jsx)("span",{children:t}),r,(0,a.jsx)(e1.AnimatePresence,{mode:"popLayout",presenceAffectsLayout:!0,children:o?(0,a.jsx)("div",{className:e9.default.mask,id:"deploy-log-preview",children:(0,a.jsx)(e1.AnimatePresence,{mode:"popLayout",presenceAffectsLayout:!0,children:(0,a.jsx)(e5.motion.div,{animate:{y:0},className:(0,l.clsx)(e9.default.logPreviewText,{[e9.default.creationFlow]:n}),exit:{y:-24},initial:{y:24},style:{color:"var(--ds-gray-900)"},transition:{type:"tween",duration:.225},children:(0,a.jsx)("span",{className:"text-copy-14-mono text-gray-900",children:(0,a.jsx)(e4.Ansi,{disableColors:!0,children:o})})},o)})}):null})]})}var e7=e.i(8529990),e8=e.i(1474855),e6=e.i(3322724),te=e.i(2455417),tt=e.i(6143247),ts=e.i(6199768),tn=e.i(5883567);function ta(e){let{children:t}=e;return(0,a.jsx)("span",{className:"bg-background-100",children:t})}function tr(e){let{annotation:t}=e;if(!t)return null;let s={type:"tertiary",className:"!w-fit !px-3 font-sans font-normal *:flex *:gap-2 *:items-center *:!p-0 hover:!bg-transparent hover:!shadow-none hover:underline",prefix:t.icon};return"link"===t.type?(0,a.jsx)(ta,{children:(0,a.jsx)(u.ButtonLink,{href:t.href,...s,children:t.label})}):(0,a.jsx)(ta,{children:(0,a.jsx)(f.Button,{onClick:t.onClick,...s,children:t.label})})}var ti=e.i(1120768),tl=e.i(1136434),to=e.i(1230902);let tc=/^L(?<start>[0-9]+)(?:-L(?<end>[0-9]+))?/;function td(e){return e?`L${e.from+1}${e.from!==e.to?`-L${e.to+1}`:""}`:""}function tu(e){let t=tc.exec(e);return t?.groups?{from:Number(t.groups.start)-1,to:Number(t.groups.end||t.groups.start)-1}:null}function tm(e,t){return(0,to.format)(e,t?"HH:mm:ss":"HH:mm:ss.SSS")}function tp(e){return null===e?{index:"LAST"}:{index:"number"==typeof e?e:e.from,offset:-96}}function th(e,t){let s=[],n=null;for(let[a,r]of e.entries())r.level===t?n?n.to=a:(n={from:a,to:a},s.push(n)):n=null;return s}function tx(e){let{logs:t,className:s}=e,{hash:n,setHash:r}=(0,m.useHash)(),[l,o]=(0,i.useState)(null),c=(0,i.useMemo)(()=>({warning:th(t,"warning"),error:th(t,"error")}),[t]),[d,u]=(0,i.useState)(null),p=(0,i.useCallback)(e=>{if(l===e){u(null),o(null),r(null);return}o(e),u(0),r(td(c[e]?.[0]))},[l,c,r]),h=(0,i.useCallback)(e=>{let t=l?c[l]:null,s=t?.length;if(void 0===s)return;let n=(((d??0)+("next"===e?1:-1))%s+s)%s;u(n),r(td(t?.[n]??null))},[d,c,l,r]);return(0,i.useEffect)(()=>{let e=tu(n);function t(t){let s=e?c[t]?.findIndex(t=>{let{from:s,to:n}=t;return s===e.from&&n===e.to}):-1;return -1!==s&&(o(t),u(s),!0)}t("error")||t("warning")||(u(null),o(null))},[n,c]),(0,a.jsxs)("div",{className:(0,tt.cn)("flex items-center gap-2",s),children:[(0,a.jsx)(tf,{kind:"error",level:l,total:c.error.length,current:d,onSelect:p,onNavigation:h}),(0,a.jsx)(tf,{kind:"warning",level:l,total:c.warning.length,current:d,onSelect:p,onNavigation:h})]})}function tf(e){let{level:t,kind:s,total:n,current:r,onSelect:i,onNavigation:l}=e,o=Array.from({length:n.toString().length-((r??0)+1).toString().length},(e,t)=>(0,a.jsx)("span",{className:"opacity-0",children:"0"},t)),c="error"===s?(0,a.jsx)(w.CrossCircle,{color:t===s?"red-700":void 0}):(0,a.jsx)(T.Warning,{color:t===s?"amber-700":void 0}),d=t===s;return 0===n?null:(0,a.jsxs)("div",{className:(0,tt.cn)("inline-flex items-center rounded-full px-0 text-sm font-medium transition-all","border border-solid border-transparent",d?"!border border-solid border-gray-300 !bg-background-100":null!==t?"opacity-50":void 0),children:[(0,a.jsxs)(f.Button,{className:(0,tt.cn)("[&>*]:!px-2 [&>*]:!py-1.5 [&>*]:gap-1.5 [&>*]:flex [&>*]:items-center flex items-center hover:opacity-80 p-0 rounded-full text-sm",d?"hover:bg-transparent":"hover:bg-gray-200"),variant:"unstyled",onClick:()=>i(s),"aria-label":`${s} count: ${t===s?`${(r??0)+1} of ${n}`:n}`,children:[c,(0,a.jsxs)("div",{className:"tabular-nums flex items-center",children:[(0,a.jsx)("span",{children:t===s?(0,a.jsxs)(a.Fragment,{children:[o,(r??0)+1]}):n}),(0,a.jsx)(e1.AnimatePresence,{children:d&&(0,a.jsxs)(e5.motion.span,{className:"text-gray-800",initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.18},children:["/",n]})})]})]}),(0,a.jsx)(e1.AnimatePresence,{children:d&&(0,a.jsx)(e5.motion.div,{className:"flex items-center overflow-hidden",initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.18},children:(0,a.jsxs)(e5.motion.div,{className:"flex items-center p-1",initial:{scale:.7},animate:{scale:1},exit:{scale:.7},transition:{duration:.15,delay:.05},children:[(0,a.jsx)("div",{className:"border-l h-3 mr-1 border-gray-400"}),(0,a.jsx)(f.Button,{className:"[&>*]:!p-1 hover:bg-gray-200 rounded-full text-gray-900 hover:text-gray-800 active:bg-gray-300",variant:"unstyled",svgOnly:!0,onClick:()=>l("next"),"aria-label":`find next ${s}`,children:(0,a.jsx)(tl.ChevronDownSmall,{size:16})}),(0,a.jsx)(f.Button,{className:"[&>*]:!p-1 hover:bg-gray-200 rounded-full text-gray-900 hover:text-gray-800 active:bg-gray-300",variant:"unstyled",svgOnly:!0,onClick:()=>l("previous"),"aria-label":`find previous ${s}`,children:(0,a.jsx)(ti.ChevronUpSmall,{size:16})})]})})})]})}function tg(e){let{logs:t,className:s,onClick:n}=e,{setHash:r}=(0,m.useHash)(),l=(0,i.useMemo)(()=>({warning:th(t,"warning"),error:th(t,"error")}),[t]),o=(0,i.useCallback)(e=>{l[e]?.length&&(r(td(l[e][0])),n?.())},[l,r,n]);return(0,a.jsxs)("div",{className:(0,tt.cn)("flex items-center gap-2 text-sm font-normal",s),children:[l.error?.length?(0,a.jsx)(f.Button,{shape:"rounded",size:"small",type:"secondary",onClick:()=>o("error"),prefix:(0,a.jsx)(w.CrossCircle,{color:"red-700"}),children:(0,a.jsx)("span",{className:"inline-block -mx-1",children:l.error.length})}):null,l.warning?.length?(0,a.jsx)(f.Button,{shape:"rounded",size:"small",type:"secondary",onClick:()=>o("warning"),prefix:(0,a.jsx)(T.Warning,{color:"amber-700"}),children:(0,a.jsx)("span",{className:"inline-block -mx-1",children:l.warning.length})}):null]})}var ty=e.i(9130958);function tj(e){let{log:t,text:s}=e;if(!t.annotation)return(0,a.jsx)(e4.Ansi,{disableColors:!!t.level,linkifyInternalLink:!0,children:s});let n=s.indexOf(t.annotation.match);if(-1===n)return(0,a.jsx)(e4.Ansi,{disableColors:!!t.level,linkifyInternalLink:!0,children:s});let r=s.slice(0,n),i=s.slice(n,n+t.annotation.match.length),l=s.slice(n+t.annotation.match.length);return(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)(e4.Ansi,{disableColors:!!t.level,linkifyInternalLink:!0,children:r}),(0,a.jsx)("span",{className:"underline decoration-wavy underline-offset-2 font-medium",children:(0,a.jsx)(e4.Ansi,{disableColors:!!t.level,linkifyInternalLink:!0,children:i})}),l&&(0,a.jsx)(e4.Ansi,{disableColors:!!t.level,linkifyInternalLink:!0,children:l})]})}function tv(e){let{children:t,className:s}=e;return(0,a.jsx)("span",{className:(0,tt.cn)("inline-block whitespace-pre py-0.5 pr-3 md:pr-6",s),children:t})}let tb=(0,i.memo)(function(e){let{log:t,searchPosition:s,className:n}=e;if(!t.text)return null;if(!s)return(0,a.jsx)(tv,{className:n,children:(0,a.jsx)(tj,{log:t,text:t.text})});let r=(0,ty.highlightString)(t.text,s.text),i=0;return(0,a.jsx)(tv,{className:n,children:r.map(e=>e.highlighted?(0,a.jsx)("mark",{className:s.line===t.index&&s.column===i++?"bg-amber-800 dark:text-background-100":"bg-amber-400 dark:text-gray-1000",children:(0,a.jsx)(tj,{log:t,text:e.text})},e.id):(0,a.jsx)(tj,{log:t,text:e.text},e.id))})});var tC=e.i(7921976),t_=e.i(6357175),tk=e.i(9689002),tw=e.i(8835183),tN=e.i(3285452),tS=e.i(1663964),tI=e.i(6942035);let tA=(0,i.forwardRef)(function(e,t){let{logs:s,onNavigate:n,onClear:r}=e,l=(0,i.useRef)(null),[o,c]=(0,i.useState)(),[d,u]=(0,i.useState)(0),[m,p]=(0,i.useState)(),h=(0,t_.useDebouncedValue)(o,300),[x,g]=(0,i.useState)(),y=(0,i.useCallback)(()=>{c(""),p(void 0),r?.()},[r]),j=(0,i.useCallback)(e=>{u(0);let t=e.target.value;t?c(t):y()},[y]),v=(0,i.useCallback)(()=>{if(m?.count){let e=(d+1)%m.count;u(e),n?.(m.positions[e])}},[m,d,n]),b=(0,i.useCallback)(()=>{if(m?.count){let e=(0===d?m.count:d)-1;u(e),n?.(m.positions[e])}},[m,d,n]),C=(0,i.useCallback)(e=>{"Enter"===e.key&&(e.shiftKey?b():v())},[v,b]);if((0,i.useImperativeHandle)(t,()=>({clear:y}),[y]),h!==x){g(h);let e=function(e,t){if(!e||!t.length)return;let s=e.toLowerCase(),n={count:0,positions:[]};for(let a of t){let t=a.text.toLowerCase().split(s);if(t.length>1){let s=t.length-1;n.count+=s,n.positions.push(...Array.from({length:s},(t,s)=>({line:a.index,column:s,text:e})))}}return n}(o,s);p(e),e?.count?n?.(e.positions[d]):n?.(void 0)}return(0,i.useEffect)(()=>{function e(e){let t=document.activeElement?.tagName;(0,tC.isModifierPressed)(e)&&"f"===e.key&&l.current&&function(e){let{top:t,left:s,bottom:n,right:a}=e.getBoundingClientRect();return t>=10&&s>=0&&n<=window.innerHeight&&a<=window.innerWidth}(l.current)&&(document.activeElement===document.body||"INPUT"!==t&&"TEXTAREA"!==t)&&(e.preventDefault(),l.current.select(),l.current.focus())}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l]),(0,a.jsx)(tw.SearchInput,{clearable:!1,onChange:j,onKeyDown:C,placeholder:"Find in logs",ref:l,size:"small",suffix:(0,a.jsx)(e1.AnimatePresence,{children:(o?.length??0)>0?(0,a.jsxs)(e5.motion.div,{animate:{marginTop:0,opacity:1},className:"-mr-1 flex items-center gap-1 whitespace-nowrap",exit:{marginTop:-10,opacity:0},initial:{marginTop:-10,opacity:0},transition:{duration:.1},children:[m?.count===0&&"No results",m?.count?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"pr-1 text-xs",children:[d+1,"/",m.count]}),(0,a.jsx)(f.Button,{"aria-label":"find next occurence",onClick:v,shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",children:(0,a.jsx)(tN.ArrowDown,{})}),(0,a.jsx)(f.Button,{"aria-label":"find previous occurence",onClick:b,shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",children:(0,a.jsx)(tS.ArrowUp,{})})]}):null,(0,a.jsx)(f.Button,{"aria-label":"clear results",onClick:y,shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",children:(0,a.jsx)(tI.Cross,{className:"text-gray-900"})})]}):(0,a.jsx)(tk.Kbd,{className:"-mr-1",meta:!0,children:"F"})}),suffixStyling:!1,value:o,width:"270px"})});var tR=e.i(5356862);function tT(e){let{selectedRange:t,logs:s}=e,n=null!==t,r=n?t.to-t.from+1:0,i=t?s[t.to].created-s[t.from].created:0,l=n?s[t.from].level:null,o=s.filter(e=>"error"===e.level).length,c=s.filter(e=>"warning"===e.level).length;return(0,a.jsx)("div",{className:"flex items-center flex-1 whitespace-nowrap text-sm text-gray-900",children:n?(0,a.jsx)(a.Fragment,{children:"error"===l?`${o} error ${1===o?"line":"lines"}`:"warning"===l?`${c} warning ${1===c?"line":"lines"}`:(0,a.jsxs)(a.Fragment,{children:[r," ",1===r?"line":"lines"," ","selected",i>0?` (${(0,tR.formatDuration)(s[t.to].created-s[t.from].created)})`:""]})}):`${s.length} lines`})}var tP=e.i(7880321);let tE=()=>{let[e,t]=(0,tP.useQueryState)("environment-variable-details-open",tP.parseAsString);return{missingEnvVarKey:e,setMissingEnvVarKey:t}};e.s(["useOpenMissingEnvVar",0,tE],458149);var tL=e.i(8225664);function tW(e){let{selectedRange:t,logs:s}=e,n=null!==t,r=n?t.to-t.from+1:0,i=n?s[t.from].level:null,l="error"===i||"warning"===i,o=l?s.filter(e=>e.level===i):n?s.slice(t.from,t.to+1):s,c=l?o.length:r||"all",d=l?`${c} ${i} ${1===o.length?"line":"lines"}`:`${c} ${1===r?"line":"lines"}`,u=l?`Copy all ${i} lines to the clipboard`:`Copy ${n?"selected":"all"} lines to the clipboard`;return(0,a.jsx)(tL.CopyButton,{label:d,size:"small",textToCopy:o.map(e=>{let{created:t,text:s}=e;return`${tm(t)} ${s}`}).join("\n"),title:u,type:"tertiary"})}function tM(e){let{logs:t,enableLineHighlighting:s,startedAt:n,status:r,isLoading:l,context:o}=e,c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),p=(0,i.useRef)(null),h=(0,i.useRef)(t.length),x=(0,e6.useIsMobile)(),[f,g]=(0,i.useState)(null),[y,j]=(0,i.useState)(),[v,b]=(0,i.useState)(!0),[C,_]=(0,i.useState)(!0),[k,w]=(0,i.useState)(),[N,S]=(0,i.useState)(s),{hash:I,setHash:A}=(0,m.useHash)(),[R,T]=(0,i.useState)(!1),P=(0,E.useParams)(),{setMissingEnvVarKey:L}=tE(),W=(0,i.useMemo)(()=>t.map((e,t)=>{let s={...e,index:t};return s.annotation=((e,t,s,n)=>{if(null===t)return null;let{teamSlug:r,project:i}=t,l=(e=>{for(let{regex:t,groupIndex:s}of[{regex:/Error:\s*Environment variable\s*"(.+?)"\s*is required but was not specified\./i,groupIndex:1},{regex:/process\.env\.([A-Z0-9_]+)\s+is undefined/i,groupIndex:1},{regex:/(NEXT_PUBLIC_[A-Z0-9_]+)\s+is not defined/i,groupIndex:1},{regex:/process\.env\.([A-Z0-9_]+)\s+is not defined/i,groupIndex:1},{regex:/Error:\s*Missing environment variable:\s*([A-Z0-9_]+)\s*\(check your project settings\)/i,groupIndex:1},{regex:/The\s+([A-Z0-9_]+)\s+environment variable is missing or empty/i,groupIndex:1},{regex:/Error:\s*The\s+([A-Z0-9_]+)\s+environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI\(\{ apiKey: '.*?' \}\)\./i,groupIndex:1}]){let n=t.exec(e.text);if(n&&s&&n[s])return{name:n[s]}}return null})(e);return l?"deployment-details"===s?{type:"link",href:`/${r}/${i}/settings/environment-variables?new=${l.name}`,match:l.name,label:"Add Environment Variable",icon:(0,a.jsx)(tn.PlusCircle,{})}:{type:"button",onClick:()=>n?.addNewVariable(l.name)||(()=>{}),match:l.name,label:"Add Environment Variable",icon:(0,a.jsx)(tn.PlusCircle,{})}:null})(s,P,o,{addNewVariable:L}),s}),[t,P,o,L]);(0,i.useEffect)(()=>{W.length!==h.current&&"complete"!==r&&C&&setTimeout(()=>u.current?.scrollTo(0,u.current.scrollHeight),0),h.current=W.length},[W,r,C]),(0,i.useEffect)(()=>{if(!s)return;let e=tu(I);e!==f&&(e?.from!==f?.from||e?.to!==f?.to)&&(g(e),R&&T(!1),e&&!R&&c.current?.scrollToIndex(tp(e)))},[s,f,I,R]);let M=(0,i.useCallback)(e=>{e instanceof Window||(u.current=e)},[]);e0(()=>{s&&tu(I)&&p.current&&p.current.scrollIntoView({behavior:"smooth",block:"start"})});let B=(0,i.useCallback)((e,t)=>{let s=null;t&&f?s=e<f.from?{from:e,to:f.to}:{from:f.from,to:e}:f?.from!==e&&(s={from:e,to:e}),T(!0),A(s?td(s):null)},[f,A]),D=(0,i.useCallback)(e=>{w(e),e&&c.current?.scrollToIndex(tp(e.line))},[]),V=(0,i.useCallback)(e=>{let{item:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{"aria-hidden":!0,className:(0,tt.cn)("relative pl-1 py-0.5 md:pl-4 [&>*]:cursor-default text-gray-800",!N&&"select-none"),"data-timestamp":!0,children:[(0,a.jsx)(e8.TimestampTooltip,{content:{timestamp:t.created,startTimestamp:t.index>0?n:void 0,previousTimestamp:t.index>0?W[t.index-1].created:void 0},showRelativeToNow:!0,children:tm(t.created,x)}),(0,a.jsx)("span",{children:" "})]}),(0,a.jsxs)("div",{className:"inline-flex flex-col flex-1",children:[(0,a.jsx)(tb,{className:"pl-1 md:pl-3",log:t,searchPosition:k}),(0,a.jsx)(tr,{annotation:t.annotation})]})]})},[x,W,k,n,N]);return(0,a.jsx)("div",{className:"relative bg-background-200",ref:p,children:W.length&&!l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:(0,tt.cn)(v&&"border-b-transparent","flex flex-wrap min-h-11 w-full border-b p-2 items-start gap-1 md:items-center md:gap-2"),children:[(0,a.jsx)(tW,{logs:W,selectedRange:f}),(0,a.jsx)(tT,{logs:W,selectedRange:f}),(0,a.jsx)(tx,{logs:W}),x?null:(0,a.jsx)(tA,{logs:W,onClear:()=>w(void 0),onNavigate:D,ref:d})]}),(0,a.jsx)("div",{className:(0,tt.cn)("relative","overflow-hidden","before:content-['']","before:absolute","before:h-5","before:w-full","before:top-0","before:left-0","before:right-4","before:z-10","before:pointer-events-none","before:translate-y-0","before:bg-gradient-to-b","before:from-background-200","after:content-['']","after:absolute","after:h-5","after:w-full","after:bottom-0","after:left-0","after:right-4","after:z-10","after:pointer-events-none","after:translate-y-0","after:bg-gradient-to-t","after:from-background-200",v?"before:!-translate-y-5":null,C?"after:!translate-y-5":null),children:(0,a.jsx)(ts.Virtuoso,{atBottomStateChange:_,atBottomThreshold:48,atTopStateChange:b,components:{List:tB,Item:tD,Footer:tV},context:{selectedRange:f,handleLineClicked:B,canSelect:s,setTimestampSelectable:S},data:W,defaultItemHeight:24,initialTopMostItemIndex:tp(tu(I)),itemContent:(e,t)=>V({item:t,data:W,index:e}),ref:c,scrollerRef:M,style:{height:"60vh",maxHeight:y},totalListHeightChanged:j})})]}):(0,a.jsx)("div",{className:"p-4 text-center",children:l?(0,a.jsx)("span",{className:"flex items-center justify-center gap-2 text-gray-900",children:(0,a.jsx)(te.LoadingDots,{size:4,children:"Loading"})}):(0,a.jsx)("span",{children:"No logs to show"})})})}function tB(e){let{context:t,...s}=e;return(0,a.jsx)("div",{className:"inline-flex min-w-full flex-col",...s})}function tD(e){var t;let{item:{index:s,level:n},context:r,style:l,...o}=e,c=(0,i.useCallback)(e=>{if(!(!r?.canSelect||!r?.handleLineClicked||window.getSelection()?.toString())&&!e.target.closest("a"))return window.getSelection()?.removeAllRanges(),e.stopPropagation(),e.preventDefault(),r.handleLineClicked?.(s,e.shiftKey),!1},[r,s]),d=(0,i.useCallback)(e=>{let t=!!e.target.dataset.timestamp||!!e.target.parentElement?.dataset.timestamp;r?.setTimestampSelectable((r?.canSelect&&t)??!1)},[r]),u=!!(t=r?.selectedRange)&&s>=t.from&&s<=t.to,m="error"===n,p="warning"===n;return(0,a.jsx)("div",{className:(0,tt.cn)("cursor-default inline-flex w-full text-pretty align-top font-mono text-xs hover:bg-gray-300 md:text-sm border-l-2 border-l-transparent",u&&"border-l-black bg-gray-100",m&&"bg-red-200 text-red-900",p&&"bg-amber-200 text-amber-900",u&&m&&"bg-red-400",u&&p&&"bg-amber-400"),style:{...l,whiteSpace:"nowrap",userSelect:"text"},onMouseDown:d,onClick:c,...o})}function tV(){return(0,a.jsx)("span",{className:"inline-block"})}var tF=e.i(7921739),tO=e.i(5338940),tH=e.i(7808943),tU=e.i(1991452),t$=e.i(4450569),tz=e.i(4080109);function tq(e){let{type:t}=e;switch(t){case"warning":return(0,a.jsx)(t$.default,{className:"font-medium text-red-700",noWrap:!0,row:!0,vcenter:!0,children:(0,a.jsx)(R.Stop,{})});case"error":return(0,a.jsx)(t$.default,{className:"font-medium text-red-700",noWrap:!0,row:!0,vcenter:!0,children:(0,a.jsx)(ee.WarningFill,{})});case"success":return(0,a.jsx)(t$.default,{className:"text-gray-900",noWrap:!0,row:!0,vcenter:!0,children:(0,a.jsx)(X.CheckCircleFill,{className:"size-5",color:"green-700"})});case"spinner":case"loading":return(0,a.jsx)(t$.default,{row:!0,style:{color:"var(--geist-secondary)"},vcenter:!0,children:(0,a.jsx)(er.Spinner,{size:18})});default:return null}}function tG(e){let{domain:t,type:s,status:n,note:r}=e,i=(0,tU.useRouter)(),l={automatic:{name:"Learn More",href:"/docs/deployments/generated-urls"},custom:{name:"Manage",href:`/${i.query.teamSlug}/${i.query.project}/settings/domains`},user:{name:"Learn More",href:"/docs/domains/add-a-domain"}}[s];return(0,a.jsx)("div",{className:tz.default.wrapper,children:(0,a.jsxs)("div",{className:tz.default.header,children:[(0,a.jsx)(tq,{type:n}),(0,a.jsxs)("div",{className:tz.default.heading,children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-start md:items-center justify-start gap-0 md:gap-2 flex-initial overflow-hidden",children:[(0,a.jsx)("div",{className:tz.default.domainContainer,children:(0,a.jsx)(u.Link,{as:"a",className:tz.default.domain,external:!0,href:`http://${t.name}`,variant:"highlight",children:(0,a.jsx)("span",{className:"text-[14px] leading-[20px] font-medium text-blue-900 truncate",children:t.name})})}),(0,a.jsx)("span",{className:`text-copy-14 text-gray-900 ${tz.default.separator}`,children:"·"}),(0,a.jsx)("p",{className:"text-copy-14 text-gray-900 truncate",children:r||({automatic:"Automatic URL",custom:"Custom Domain",user:"Custom Domain"})[s]})]}),(0,a.jsx)(u.Link,{className:tz.default.action,external:!0,href:l.href,variant:"secondary",children:l.name})]})]})})}var tY=e.i(7784834),tZ=e.i(8091742);function tJ(e){let t,{id:s,name:n,deployment:r,disabled:l,skeleton:o,status:c,onComplete:d,startedAt:m,finishedAt:p}=e;(0,i.useEffect)(()=>{d&&(c===em.Complete||c===em.Skipped)&&d()},[c,d]);let{team:h}=(0,tO.useTeam)(),x=function(e,t,s){let n=(0,tZ.filterAutoAssignedDomains)(e,s.automaticAliases??[]).map(e=>({name:e,type:"automatic"})),a=t.filter(e=>void 0===n.find(t=>t.name===e)).map(e=>({name:e,type:"custom"})),r=[];if(r=r.concat(...a),"production"===s.target){let e=s.userAliases||[];r.concat(e.map(e=>({name:e,type:"user"})))}return r}(h,r.alias.filter(e=>!(r.automaticAliases||[]).includes(e)),r);function f(){return r.checks?.["deployment-alias"]?.state??null}function g(e){return"pending"===f()?"running checks":"failed"===f()?"failed checks":c===em.Pending||c===em.InProgress?"loading":c===em.Error||c===em.Warning?r.aliasWarning&&r.aliasWarning.message.includes(e.name)?"warning":r.aliasError&&r.aliasError.message.includes(e.name)?"error":"success":c===em.Complete?"success":"loading"}function y(e){return r.aliasWarning&&r.aliasWarning.message.includes(e.name)?r.aliasWarning.message:r.aliasError&&r.aliasError.message.includes(e.name)?r.aliasError.message:void 0}let j=c===em.Skipped,v="failed"===f()||"pending"===f();return(0,a.jsx)(ex,{disabled:l,finishedAt:"succeeded"!==f()?void 0:p,id:s,name:n,skeleton:o,startedAt:"succeeded"!==f()?void 0:m,status:(t=f(),v&&"PROMOTED"===r.readySubstate?em.Warning:"pending"===t?em.Pending:"failed"===t?em.Error:c),children:v&&"PROMOTED"===r.readySubstate?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:tY.default.stepMessage,children:"The deployment was force promoted, bypassing Deployment Checks."}),x.map(e=>(0,a.jsx)(tG,{domain:e,note:y(e),status:g(e),type:e.type},e.name))]}):v?(0,a.jsxs)("div",{className:tY.default.stepMessage,children:["Aliasing to custom domains is blocked by"," ",f()," deployment checks."]}):j?(0,a.jsxs)("div",{className:tY.default.stepMessage,children:["No custom domains have been assigned. This will happen if there are none defined in Project Settings or a Vercel CLI deploy was made with"," ",(0,a.jsx)(tH.default,{children:"vercel deploy --skip-domain"}),"."," ",(0,a.jsx)(u.Link,{external:!0,href:"https://vercel.com/docs/domains/add-a-domain",variant:"highlight",children:"Learn More"})]}):(0,a.jsx)(a.Fragment,{children:x.map(e=>(0,a.jsx)(tG,{domain:e,note:y(e),status:g(e),type:e.type},e.name))})})}var tK=e.i(4303122),tQ=e.i(3993360),tX=e.i(6280036),t0=e.i(4585051),t1=e.i(1727580),t5=e.i(9907554),t2=e.i(1867722),t4=e.i(261950),t9=e.i(7807066),t3=e.i(787358),t7=e.i(4333930),t8=e.i(2259462),t6=e.i(3487134),se=e.i(7087273),st=e.i(8557031),ss=e.i(1160917);function sn(e){let{children:t,onClick:s,active:n}=e;return(0,a.jsx)("button",{className:(0,l.clsx)(ss.default.badge,"invert-theme",{[ss.default.active]:n}),onClick:s,type:"button",children:(0,a.jsx)("p",{className:`text-[12px] leading-[16px] font-medium ${ss.default.badgeContent}`,children:t})})}var sa=e.i(9822914),sr=e.i(1201436),si=e.i(1438473),sl=e.i(9645681);let so=(0,K.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00736 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83579 1.5 1.5 1.83579 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00736 16 0 14.9926 0 13.75V2.25ZM9.24618 5C8.41986 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40882 12.5 4.75439 12.5H4.00439V11H4.75439C5.58039 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618Z" fill="currentColor"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 11.875C11.5 11.6679 11.6679 11.5 11.875 11.5H15.25H16V10H15.25H11.875C10.8395 10 10 10.8395 10 11.875C10 12.2971 10.1395 12.6866 10.3749 13C10.1395 13.3134 10 13.7029 10 14.125C10 15.1605 10.8395 16 11.875 16H15.25H16V14.5H15.25H11.875C11.6679 14.5 11.5 14.3321 11.5 14.125C11.5 13.9179 11.6679 13.75 11.875 13.75H14.25H15V12.25H14.25H11.875C11.6679 12.25 11.5 12.0821 11.5 11.875Z" fill="var(--ds-purple-700)"/>
  `);var sc=e.i(4830423);let sd=(0,K.withNewIcon)(`<path d="M15.7221 11.1407C15.1916 11.2818 14.8294 11.3877 14.3073 11.5288C14.181 11.5641 14.1726 11.5729 14.0631 11.4406C13.9368 11.2906 13.8441 11.1936 13.6673 11.1054C13.1368 10.832 12.6231 10.9113 12.143 11.2377C11.5704 11.6258 11.2756 12.1992 11.2841 12.9137C11.2925 13.6194 11.7557 14.2015 12.4209 14.2986C12.9936 14.3779 13.4736 14.1662 13.8526 13.7164C13.9284 13.6194 13.9957 13.5135 14.0799 13.39C13.7768 13.39 13.3978 13.39 12.4546 13.39C12.2778 13.39 12.2357 13.2753 12.2946 13.1254C12.4041 12.8519 12.6062 12.3933 12.7241 12.1639C12.7494 12.111 12.8083 12.0228 12.9346 12.0228C13.3641 12.0228 14.9473 12.0228 16 12.0228C15.9832 12.2609 15.9832 12.4991 15.9495 12.7373C15.8568 13.3724 15.6295 13.9545 15.2589 14.4662C14.6526 15.3041 13.861 15.8246 12.8588 15.9657C12.0336 16.0804 11.2672 15.9128 10.5935 15.3835C9.97034 14.8896 9.61664 14.2368 9.52401 13.4253C9.41453 12.4638 9.68401 11.5994 10.2398 10.8408C10.8377 10.0204 11.6293 9.50001 12.5978 9.31477C13.3894 9.16482 14.1473 9.26185 14.8294 9.747C15.2758 10.0557 15.5958 10.4791 15.8063 10.9907C15.8568 11.0701 15.8232 11.1142 15.7221 11.1407Z" fill="#00ACD7"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00735 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83578 1.5 1.5 1.83578 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00735 16 0 14.9926 0 13.75V2.25ZM6.25 6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618C8.41987 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40883 12.5 4.75439 12.5H4.00439V11H4.75439C5.5804 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618Z" fill="currentColor"/>
`),su=(0,K.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.25C0 1.00736 1.00736 0 2.25 0H13.75C14.9926 0 16 1.00735 16 2.25V8H14.5V2.25C14.5 1.83579 14.1642 1.5 13.75 1.5H2.25C1.83578 1.5 1.5 1.83578 1.5 2.25V13.75C1.5 14.1642 1.83579 14.5 2.25 14.5H8V16H2.25C1.00735 16 0 14.9926 0 13.75V2.25ZM6.25 6.49618C6.25 4.84144 7.59144 3.5 9.24618 3.5H9.99618V5H9.24618C8.41987 5 7.75 5.66986 7.75 6.49618V7H8.75H9.5V8.5H8.75H7.75V9.50439C7.75 11.1588 6.40883 12.5 4.75439 12.5H4.00439V11H4.75439C5.5804 11 6.25 10.3304 6.25 9.50439V8.5H5.25H4.5V7H5.25H6.25V6.49618Z" fill="currentColor"/>
  <path d="M15.7246 11.3857L14.548 10.0483H10.4518L9.27511 11.3857C8.92434 11.7843 8.94634 12.3876 9.3252 12.7597L12.4999 15.8775L15.6745 12.7597C16.0533 12.3876 16.0753 11.7844 15.7246 11.3857Z" fill="#CA2A30"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M12.4661 9.48831C13.6686 9.49258 14.8004 9.91649 14.7973 10.5166C14.7941 11.1166 13.7447 11.5332 12.5424 11.5287C11.3401 11.5242 10.1984 11.1295 10.2017 10.5296C10.2045 9.92962 11.2638 9.48383 12.4661 9.48831Z" fill="#F87274"/>`);var sm=e.i(6307178),sp=e.i(9655125),sh=e.i(559696),sx=e.i(1502273),sf=e.i(9568268),sg=e.i(6676443),sy=e.i(3306538),sj=e.i(8522580),sv=e.i(2988836),sb=e.i(1637579),sC=e.i(5166685),s_=e.i(1319302),sk=e.i(545405),sw=e.i(4006531),sN=e.i(2608999);let sS=["^/.*$","/:path*"],sI="All paths";function sA(e){let{asset:t}=e;return(0,a.jsx)("div",{style:{paddingLeft:34},title:t.matcher,children:(0,a.jsx)("p",{className:`font-mono text-[14px] leading-[20px] font-medium text-gray-900 ${(0,l.clsx)(sN.default.staticAssetGrid,sN.default.copyIconWrapper)}`,children:t.matcher!==sI?(0,a.jsxs)("button",{className:sN.default.pathWrapper,onClick:()=>{(0,sk.copyToClipboard)(t.matcher),eq.toasts.message("Copied to clipboard")},type:"button",children:[(0,a.jsx)("span",{children:t.matcher}),(0,a.jsx)("span",{className:sN.default.copyIcon,children:(0,a.jsx)(sr.Copy,{size:20})})]}):(0,a.jsx)("div",{className:(0,l.clsx)(sN.default.pathWrapper,sN.default.allPathsMiddlewareRow),children:(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[(0,a.jsx)("span",{className:"text-copy-14",children:t.matcher}),(0,a.jsx)(C.Tooltip,{text:(0,a.jsxs)(a.Fragment,{children:["Middleware is invoked on every path. This behavior can be modified by"," ",(0,a.jsx)(u.Link,{external:!0,href:"/docs/edge-middleware/middleware-api#match-paths-based-on-custom-matcher-config",type:"highlight",children:"configuring a matcher"}),"."]}),children:(0,a.jsx)(sv.InformationFillSmall,{className:sN.default.middlewareInfoIcon})})]})})})})}function sR(e){let{asset:t}=e;return(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",title:`${t.source} → ${t.destination}`,children:[(0,a.jsx)("div",{className:"w-2/5 md:w-[45%] truncate",children:(0,a.jsxs)("button",{className:(0,l.clsx)(sN.default.pathWrapper,sN.default.copyIconWrapper,"w-full"),onClick:()=>{(0,sk.copyToClipboard)(t.source),eq.toasts.message("Copied to clipboard")},type:"button",children:[(0,a.jsx)("p",{className:"text-copy-14-mono truncate max-w-[90%]",children:t.source}),(0,a.jsx)("span",{className:sN.default.copyIcon,children:(0,a.jsx)(sr.Copy,{size:20})})]})}),(0,a.jsxs)("div",{className:"w-1/5 md:w-[10%] flex items-center justify-center gap-4",children:[(0,a.jsx)(si.ArrowRight,{}),(0,a.jsx)(sy.Badge,{className:"cursor-default",variant:"gray-subtle",children:t.statusCode??(t.permanent?308:301)})]}),(0,a.jsx)("div",{className:"w-2/5 md:w-[45%] truncate",children:(0,a.jsxs)("button",{className:(0,l.clsx)(sN.default.pathWrapper,sN.default.copyIconWrapper,"w-full"),onClick:()=>{(0,sk.copyToClipboard)(t.destination),eq.toasts.message("Copied to clipboard")},type:"button",children:[(0,a.jsx)("p",{className:"text-copy-14-mono truncate max-w-[90%]",children:t.destination}),(0,a.jsx)("span",{className:sN.default.copyIcon,children:(0,a.jsx)(sr.Copy,{size:20})})]})})]})}function sT(e){let{asset:t}=e;return(0,a.jsx)("div",{title:t.key,children:(0,a.jsx)("p",{className:`text-copy-14-mono ${(0,l.clsx)(sN.default.variantItemGrid,sN.default.copyIconWrapper)}`,children:"string"==typeof t.origin?(0,a.jsx)(u.Link,{as:"a",className:sN.default.variantItemUpstream,external:!0,href:t.origin,rel:"noopener noreferrer",target:"_blank",children:t.key}):t.key})})}function sP(e){let{asset:t}=e,s=(0,sa.toString)(t.schedule);return(0,a.jsx)("div",{className:(0,l.clsx)(sN.default.copyIconWrapper),style:{paddingLeft:36},children:(0,a.jsxs)("p",{className:`text-copy-14-mono ${(0,l.clsx)(sN.default.cronJobItem)}`,children:[(0,a.jsx)("div",{title:t.path,children:t.path}),(0,a.jsx)("div",{title:t.schedule,children:t.schedule.split(" ").map(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:(0,l.clsx)({[sN.default.cronJobItemAsterisk]:"*"===e,[sN.default.singleDigit]:1===e.length&&"*"!==e}),children:e})," "]}))}),(0,a.jsx)("div",{title:s,children:s})]})},`${t.path}/${t.schedule}`)}function sE(e){let{asset:t}=e,s=(0,sw.sizeFormatter)(t.size),n=s.split(" ");return(0,a.jsx)("div",{style:{paddingLeft:34},title:t.path,children:(0,a.jsxs)("p",{className:`font-mono text-[14px] leading-[20px] font-medium text-gray-900 ${(0,l.clsx)(sN.default.staticAssetGrid,sN.default.copyIconWrapper)}`,children:[(0,a.jsxs)("button",{className:sN.default.pathWrapper,onClick:()=>{(0,sk.copyToClipboard)(t.path),eq.toasts.message("Copied to clipboard")},type:"button",children:[(0,a.jsx)("span",{children:t.path}),(0,a.jsx)("div",{className:sN.default.copyIcon,children:(0,a.jsx)(sr.Copy,{size:20})})]}),(0,a.jsx)("span",{style:{whiteSpace:"nowrap",textAlign:"right",minWidth:60,fontWeight:400},children:1===n[1].length?(0,a.jsxs)(a.Fragment,{children:[`${n[0]} ${n[1]}`," "]}):s})]})})}function sL(e){let{type:t}=e;switch(t){case"ISR":return(0,a.jsx)(sm.AcronymIsr,{className:sN.default.typeIcon});case"PPR":return(0,a.jsx)(sp.AcronymPpr,{className:sN.default.typeIcon});case"API":case"Serverless":return(0,a.jsx)(sx.AcronymApi,{className:sN.default.typeIcon});case"Page":return(0,a.jsx)(sh.AcronymPage,{className:sN.default.typeIcon});default:return(0,a.jsx)("div",{className:sN.default.typeBadgeContainer})}}function sW(e){let{asset:t}=e,s="size"in t&&"Meta"!==t.type?(0,sw.sizeFormatter)(t.size,"long",1):"-";return(0,a.jsx)("div",{className:sN.default.copyIconWrapper,title:t.path,children:(0,a.jsxs)("p",{className:"text-copy-14-mono text-gray-900",style:{display:"flex",alignItems:"center",gap:4},children:[(0,a.jsx)("div",{className:"w-6",children:(0,a.jsx)(sL,{type:t.type})}),(0,a.jsxs)("button",{className:(0,l.clsx)(sN.default.pathWrapper),onClick:()=>{(0,sk.copyToClipboard)(t.path),eq.toasts.message("Copied to clipboard")},type:"button",children:[(0,a.jsx)(s_.RouteHighlighter,{className:"!overflow-visible",route:t.path,segmentClassName:"bg-gray-200 px-0.5 !shadow-none !border-solid border !border-gray-200"}),(0,a.jsx)("div",{className:sN.default.copyIcon,children:(0,a.jsx)(sr.Copy,{size:20})})]}),(0,a.jsx)(sV,{runtime:"runtime"in t?t.runtime:void 0,runtimeLanguage:"runtimeLanguage"in t?t.runtimeLanguage:void 0}),(0,a.jsx)("span",{className:sN.default.size,style:{flexShrink:0,textAlign:"right",whiteSpace:"nowrap",marginLeft:4,fontWeight:400},children:s}),t.timeout?(0,a.jsx)(C.Tooltip,{text:"Maximum duration",children:(0,a.jsxs)("span",{className:"text-gray-900",style:{flexShrink:0,whiteSpace:"nowrap",width:"6ch",textAlign:"right",marginLeft:8},children:["≤",t.timeout,"s"]})}):null,(0,a.jsx)("div",{className:(0,l.clsx)("flex flex-row items-center justify-start flex-initial",sN.default.regionBadgeContainer),children:(0,a.jsx)(sO,{passiveRegions:Array.isArray(t.passiveRegions)?t.passiveRegions:void 0!==t.passiveRegions?[t.passiveRegions]:void 0,regions:t.regions})})]})})}function sM(e){let{asset:t}=e;return(0,a.jsxs)("div",{className:"flex flex-row justify-between",title:t.path,children:[(0,a.jsxs)("p",{className:"text-copy-14-mono text-gray-900",style:{display:"flex",alignItems:"center",gap:4},children:[(0,a.jsxs)("button",{className:(0,l.clsx)(sN.default.pathWrapper,sN.default.copyIconWrapper),onClick:()=>{(0,sk.copyToClipboard)(t.path),eq.toasts.message("Copied to clipboard")},style:{flexBasis:"fit-content",flexGrow:0},type:"button",children:[(0,a.jsx)(s_.RouteHighlighter,{className:"!overflow-visible",route:t.path,segmentClassName:"bg-gray-200 px-0.5 !shadow-none !border-solid border !border-gray-200"}),"/*"===t.path?(0,a.jsx)("p",{className:"text-copy-14 ml-4 italic",children:"(this application serves any path not matched below)"}):null,(0,a.jsx)("div",{className:sN.default.copyIcon,children:(0,a.jsx)(sr.Copy,{size:20})})]}),t.flag?(0,a.jsx)("div",{title:t.flag,className:(0,l.clsx)("flex flex-row items-stretch justify-start gap-2 flex-initial text-right whitespace-nowrap shrink-0 h-5 font-normal",sN.default.copyFlagIconWrapper),children:(0,a.jsxs)("button",{className:(0,l.clsx)(sN.default.pathWrapper),onClick:()=>{t.flag&&((0,sk.copyToClipboard)(t.flag),eq.toasts.message("Copied to clipboard"))},type:"button",children:[(0,a.jsx)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:(0,a.jsx)(C.Tooltip,{text:(0,a.jsxs)("p",{className:"text-copy-14",children:["requires flag"," ",(0,a.jsx)("span",{className:"text-copy-14-mono",children:t.flag})]}),children:(0,a.jsx)(sy.Badge,{size:"sm",style:{textTransform:"none"},variant:"purple-subtle",children:t.flag})})}),(0,a.jsx)("div",{className:sN.default.copyFlagIcon,children:(0,a.jsx)(sr.Copy,{size:20})})]})}):null]}),t.appName?(0,a.jsx)(sy.Badge,{className:"mr-2 normal-case",size:"sm",variant:"gray-subtle",children:t.appName}):null]})}function sB(e){let{isrFunction:t,accordionValue:s,setAccordionValue:n}=e,i="size"in t?(0,sw.sizeFormatter)(t.size,"long",1):"-",o=t.staticRoutes.length>0,c=`ISR-${t.type}-${t.path}`,d=s.includes(c);return(0,a.jsxs)(r.Item,{className:sN.default.isrFunctionRow,disabled:!o,value:c,children:[(0,a.jsx)(r.Header,{children:(0,a.jsxs)("div",{className:(0,l.clsx)("flex flex-row items-stretch justify-start flex-initial",sN.default.headerContent,{[sN.default.hasTrigger]:o}),children:[o?(0,a.jsx)(r.Trigger,{className:sN.default.trigger,children:(0,a.jsx)("div",{style:{transform:d?"rotate(90deg)":"none",transition:"transform 200ms",display:"flex",alignItems:"center",marginRight:3},children:(0,a.jsx)(t9.ChevronRight,{})})}):null,(0,a.jsx)("button",{className:sN.default.button,onClick:e=>{!e.defaultPrevented&&o&&(s.includes(c)?n(s.filter(e=>e!==c)):n([...s,c]))},style:{paddingLeft:o?5:void 0},type:"button",children:(0,a.jsx)("div",{className:sN.default.copyIconWrapper,title:t.path,children:(0,a.jsxs)("p",{className:"text-copy-14-mono text-gray-900",style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("span",{className:(0,l.clsx)(sN.default.pathWrapper),children:(0,a.jsx)("span",{children:t.path})}),(0,a.jsx)(sV,{runtime:"runtime"in t?t.runtime:void 0,runtimeLanguage:"runtimeLanguage"in t?t.runtimeLanguage:void 0}),(0,a.jsx)("span",{className:sN.default.size,style:{flexShrink:0,textAlign:"right",whiteSpace:"nowrap",fontWeight:400},children:i}),(0,a.jsx)("div",{className:(0,l.clsx)("flex flex-row items-center justify-start flex-initial",sN.default.regionBadgeContainer),children:(0,a.jsx)(sO,{passiveRegions:Array.isArray(t.passiveRegions)?t.passiveRegions:void 0!==t.passiveRegions?[t.passiveRegions]:void 0,regions:t.regions})})]})})})]})}),(0,a.jsx)(e1.AnimatePresence,{children:d?(0,a.jsx)(r.Content,{forceMount:!0,children:(0,a.jsx)(t2.m.div,{animate:{height:"auto",opacity:1},className:sN.default.staticRoutesContainer,exit:{height:0,opacity:0},initial:{height:0,opacity:0},transition:{duration:.2},children:t.staticRoutes.map(e=>(0,a.jsxs)("button",{className:sN.default.staticRouteButton,onClick:()=>{(0,sk.copyToClipboard)(e.path),eq.toasts.message("Copied to clipboard")},type:"button",children:[(0,a.jsx)("span",{className:(0,l.clsx)(sN.default.pathWrapper,sN.default.staticRoute),children:(0,a.jsx)("span",{children:e.path})}),(0,a.jsx)("div",{className:sN.default.copyIconContainer,children:(0,a.jsx)(sr.Copy,{})})]},e.path))})}):null})]})}let sD={nodejs:{logo:(0,a.jsx)(sl.FunctionNode,{}),label:"Node.js"},bun:{logo:(0,a.jsx)(sf.FunctionBun,{}),label:"Bun"},ruby:{logo:(0,a.jsx)(su,{}),label:"Ruby"},go:{logo:(0,a.jsx)(sd,{}),label:"Go"},python:{logo:(0,a.jsx)(sc.FunctionPython,{}),label:"Python"},rust:{logo:(0,a.jsx)(sg.FunctionRust,{}),label:"Rust"}};function sV(e){var t;let{runtime:s,runtimeLanguage:n}=e,[r,i]=(t=s||"",[/[a-zA-Z]+/.exec(t)?.[0]||"",/\d+(?<version>\.\w+)?/.exec(t)?.[0]||""]),l="executable"===s&&n?n:r,o=l in sD?sD[l]:void 0;return(0,a.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial text-right shrink-0 whitespace-nowrap font-normal h-5",children:(0,a.jsx)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{children:[o?.label||r," ",i]}),(0,a.jsx)("span",{style:{color:"var(--gray-1000)"},children:o?.logo})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Edge"}),(0,a.jsx)("span",{children:(0,a.jsx)(so,{color:"gray-100",size:16})})]})})})}function sF(e){let{prefix:t,items:s,totalCount:n}=e,[o,c]=(0,i.useState)(!0),[d,u]=(0,i.useState)(!0),m=(0,i.useRef)(null),[p,h]=(0,i.useState)([]);(0,i.useEffect)(()=>{m.current?.scrollToIndex({index:0})},[s]);let x=26.5*s.length,f=Math.min(530,x),g=(0,t1.isISRFunction)(s[0]),y=(0,i.useMemo)(()=>g&&0!==p.length?Math.min(20*s.filter(e=>{let t=`ISR-ISR-${e.path}`;return p.includes(t)}).reduce((e,t)=>e+t.staticRoutes.length,0)+26.5*s.length+12+6,530):f,[p,g,s,f]),j=n&&n>s.length;return(0,a.jsxs)(r.Root,{onValueChange:h,type:"multiple",value:p,children:[t,(0,a.jsx)("div",{className:(0,l.clsx)(sN.default.list,{[sN.default.virtualListAtTop]:!(x<530)&&!o,[sN.default.virtualListAtBottom]:!(x<530)&&!d}),children:(0,a.jsx)(ts.Virtuoso,{atBottomStateChange:e=>u(e),atTopStateChange:e=>c(e),data:s,itemContent:(e,t)=>(0,t1.isVariant)(t)?(0,a.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,a.jsx)(sT,{asset:t},t.key)}):(0,t1.isCronJob)(t)?(0,a.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,a.jsx)(sP,{asset:t})}):(0,t1.isMiddleware)(t)?(0,a.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,a.jsx)(sA,{asset:t},t.matcher)}):(0,t1.isMicrofrontendRoute)(t)?(0,a.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,a.jsx)(sM,{asset:t},t.path)}):(0,t1.isBulkRedirect)(t)?(0,a.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,a.jsx)(sR,{asset:t},`${t.source}-${t.destination}`)}):(0,t1.isStaticAsset)(t)?(0,a.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,a.jsx)(sE,{asset:t},t.path)}):(0,t1.isISRFunction)(t)?(0,a.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,a.jsx)(sB,{accordionValue:p,isrFunction:t,setAccordionValue:h},t.path)}):(0,a.jsx)("div",{className:sN.default.item,style:{paddingTop:3,paddingBottom:3},children:(0,a.jsx)(sW,{asset:t},t.path)}),ref:m,style:{height:y}})}),j?(0,a.jsxs)(sj.Note,{className:"flex items-center justify-center !border-transparent !text-gray-700",fill:!0,size:"small",children:["Showing the first ",s.length.toLocaleString()," results"]}):null]})}function sO(e){let{regions:t,passiveRegions:s}=e;if(!(t&&t.length>0))return(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:sN.default.regionBadge,children:"Global"})});let n=Array.isArray(t)?t:[t],r=void 0===s?void 0:s.length,i=void 0!==r&&r>0,l=i&&s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"text-[14px] leading-[20px] font-medium",children:["Function Failover Region",`${1===r?"":"s"}`]}),(0,a.jsx)("p",{className:"text-copy-14",children:`${(0,sC.toListSentence)(s.map(e=>e.toUpperCase()))}`})]}):void 0;return 1===n.length?(0,a.jsx)(C.Tooltip,{text:l,children:(0,a.jsx)("div",{children:(0,a.jsxs)("span",{className:sN.default.regionBadge,title:sb.FriendlyRegionNameMapping[n[0]],children:[n[0],i?` +${r}`:""]})})}):(0,a.jsx)(C.Tooltip,{text:`${(0,sC.toListSentence)(n.map(e=>e.toUpperCase()))}`,children:(0,a.jsx)("div",{children:(0,a.jsxs)("span",{className:sN.default.regionBadge,children:[n.length," Regions"]})})})}function sH(e,t,s){let n=e+t,a=0===n?0:Math.round(s/n*100);return{totalRedirects:n,usagePercentage:a,usageOverThreshold:a>95,usageOverLimit:a>=100,remainingRedirects:n-s}}var sU=e.i(6441512);function s$(e){let{className:t,onClick:s}=e,{data:n,isLoading:r}=(0,sU.useBulkRedirectsSettings)(),{usageOverThreshold:i,usageOverLimit:l}=sH(n?.freeAmount??0,n?.purchasedAmount??0,n?.redirectsUsedByProject??0);return r?null:l?(0,a.jsx)(f.Button,{className:t,shape:"rounded",size:"small",type:"secondary",svgOnly:!0,"aria-label":"View bulk redirects",onClick:s,children:(0,a.jsx)(w.CrossCircle,{color:"red-700"})}):i?(0,a.jsx)(f.Button,{className:t,shape:"rounded",size:"small",type:"secondary",svgOnly:!0,"aria-label":"View bulk redirects",onClick:s,children:(0,a.jsx)(T.Warning,{color:"amber-700"})}):null}function sz(e){return(0,a.jsx)(i.Suspense,{fallback:null,children:(0,a.jsx)(s$,{...e})})}var sq=e.i(2689376);function sG(e){let{stagingUsage:t=!1,redirectsUsed:s,redirectsUsedByProject:n,redirectsUsedByDeployment:r,freeAmount:i,purchasedAmount:l,teamSlug:o,project:c}=e,{usagePercentage:d,usageOverThreshold:m,usageOverLimit:p,remainingRedirects:h,totalRedirects:x}=sH(i,l,s),f=p?"You will not be able to create any more redirects until you purchase additional capacity.":m?`You have ${h.toLocaleString()} redirects remaining.  Purchase additional redirects to avoid hitting the limit.`:"",g=s>0&&n>0,y=s>0&&r>0;return(0,a.jsx)(sj.Note,{label:!1,type:p?"error":m?"warning":"secondary",fill:p||m,action:p||m?(0,a.jsx)(u.ButtonLink,{href:`/${o}/${c}/settings/advanced#bulk-redirects`,size:"small",type:p?"error":m?"warning":"secondary",children:"Purchase"}):(0,a.jsx)("div",{className:"w-20 h-8 bg-transparent"}),children:(0,a.jsxs)("span",{className:"flex flex-row items-center gap-1.5 w-full",children:[(0,a.jsx)(sq.Gauge,{size:"tiny",value:d,colors:{0:"var(--ds-green-700)",95:"var(--ds-amber-700)",100:"var(--ds-red-700)"}}),(0,a.jsxs)("span",{className:"flex flex-row items-center gap-1",children:[t?"Future":"Redirects"," usage:"," ",(0,a.jsx)("b",{children:s.toLocaleString()})," of",(0,a.jsx)("b",{children:x.toLocaleString()}),(0,a.jsx)(C.Tooltip,{disableTriggers:!(g||y),center:!1,delay:!1,text:(0,a.jsxs)("span",{className:"grid grid-cols-[auto_1fr] auto-rows-auto",children:[g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Redirects from project:"})," ",(0,a.jsx)("b",{className:"justify-self-end",children:n.toLocaleString()})]}):null,y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Redirects from deployment:"})," ",(0,a.jsx)("b",{className:"justify-self-end",children:r.toLocaleString()})]}):null,(0,a.jsx)("hr",{className:"col-span-2 border-gray-alpha-400 border-solid my-2"}),(0,a.jsx)("span",{children:"Total:"})," ",(0,a.jsx)("b",{className:"justify-self-end",children:s.toLocaleString()})]}),children:(0,a.jsx)(sv.InformationFillSmall,{})}),f]})]})})}function sY(){return(0,a.jsx)(sj.Note,{label:!1,type:"secondary",action:(0,a.jsx)("div",{className:"w-20 h-8 bg-transparent"}),children:(0,a.jsxs)("span",{className:"flex flex-row items-center gap-1.5 w-full",children:[(0,a.jsx)(sq.Gauge,{size:"tiny",value:0}),(0,a.jsx)("span",{children:"Redirects usage:"}),(0,a.jsx)(ea.Skeleton,{width:150})]})})}function sZ(){let{data:e,isLoading:t}=(0,sU.useBulkRedirectsSettings)(),{teamSlug:s,project:n}=(0,E.useParams)()??{};return t?(0,a.jsx)(sY,{}):(0,a.jsx)(sG,{redirectsUsed:e?.redirectsUsed??0,redirectsUsedByProject:e?.redirectsUsedByProject??0,redirectsUsedByDeployment:e?.redirectsUsedByDeployment??0,freeAmount:e?.freeAmount??0,purchasedAmount:e?.purchasedAmount??0,teamSlug:s??"",project:n??""})}function sJ(){return(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)(sY,{}),children:(0,a.jsx)(sZ,{})})}function sK(e){switch(e){case t1.ArtefactTypes.StaticAssets:return{name:"Static Assets",icon:(0,a.jsx)(t8.File,{})};case t1.ArtefactTypes.ServerlessFunctions:return{name:"Functions",icon:(0,a.jsx)(t7.FunctionSquare,{})};case t1.ArtefactTypes.IncrementalStaticRegeneration:return{name:"ISR Functions",icon:(0,a.jsx)(sQ,{children:"ISR"})};case t1.ArtefactTypes.PartialPrerender:return{name:"Partial Prerender Functions",icon:(0,a.jsx)(sQ,{children:"PPR"})};case t1.ArtefactTypes.EdgeMiddleware:return{name:"Edge Middleware",icon:(0,a.jsx)(t3.FunctionMiddleware,{})};case t1.ArtefactTypes.Variant:return{name:"Variants",icon:(0,a.jsx)(t4.ToggleOff,{})};case t1.ArtefactTypes.CronJobs:return{name:"Cron Jobs",icon:(0,a.jsx)(k.Clock,{})};case t1.ArtefactTypes.MicrofrontendRoutes:return{name:"Microfrontend Routes",icon:(0,a.jsx)(t6.Microfrontends,{})};case t1.ArtefactTypes.BulkRedirects:return{name:"Bulk Redirects",icon:(0,a.jsx)(st.BulkRedirectsIcon,{})};default:return{name:"Unknown",icon:(0,a.jsx)(t8.File,{})}}}function sQ(e){let{children:t}=e;return(0,a.jsx)("span",{className:`text-[10px] leading-[12px] font-bold text-inherit ${t5.default.badge}`,children:t})}function sX(e){let{type:t,artefacts:s,count:n,isOpen:o,open:c,toggleOpen:d}=e,[u,m]=(0,i.useState)("all"),{name:p,icon:h}=sK(t),x=function(e,t,s){if(0===e.length)return[];if((0,t1.isMiddleware)(e[0]))return[{type:"Custom Matcher",count:`${e.length} Paths`}];if(t===t1.ArtefactTypes.MicrofrontendRoutes)return[...new Set(e.map(e=>(0,t1.isMicrofrontendRoute)(e)?e.appName:void 0))].filter(Boolean).toSorted().map(t=>({type:t,count:e.filter(e=>(0,t1.isMicrofrontendRoute)(e)&&e.appName===t).length}));if(t===t1.ArtefactTypes.BulkRedirects){let t=e.length>0&&(0,t1.isBulkRedirect)(e[0])?s??e.length:e.length,n=e.length;return[{type:"Redirects",count:t>n?`${n.toLocaleString()} of ${t.toLocaleString()}`:t.toLocaleString()}]}let n=e.reduce((e,t)=>((e[t.type]=e[t.type]||[]).push(t),e),{}),a=[],r=Object.keys(n);return t===t1.ArtefactTypes.StaticAssets&&(r=t1.STATIC_TYPES.filter(e=>e in n)),r.forEach((e,t)=>{a[t]={type:e,count:n[e].length}}),a}(s,t,n),f=(0,i.useMemo)(()=>{if("all"===u||t===t1.ArtefactTypes.EdgeMiddleware||t===t1.ArtefactTypes.BulkRedirects){if(s[0]&&(0,t1.isMiddleware)(s[0])){let e=new Set;for(let t of s)if(Array.isArray(t.rawMatchers)&&t.rawMatchers.length)for(let s of t.rawMatchers)e.add(s);else e.add(t.matcher);let t=Array.from(e).sort().map(e=>({matcher:e}));return 1===t.length&&sS.includes(t[0].matcher)?[{matcher:sI}]:t}return s}return t===t1.ArtefactTypes.MicrofrontendRoutes?s.filter(e=>"all"===u||(0,t1.isMicrofrontendRoute)(e)&&e.appName===u):s.filter(e=>e.type===u)},[u,s,t]);return(0,i.useEffect)(()=>{o||m("all")},[o]),(0,a.jsxs)(r.Item,{className:t5.default.wrapper,value:t,children:[(0,a.jsxs)(r.Header,{className:t5.default.header,children:[(0,a.jsx)(r.Trigger,{className:t5.default.radixTrigger}),(0,a.jsxs)("div",{className:t5.default.trigger,onClick:e=>{e.defaultPrevented||d()},children:[(0,a.jsxs)(t$.default,{flex:"0 0 auto",row:!0,vcenter:!0,children:[(0,a.jsx)("div",{style:{transform:o?"rotate(90deg)":"none",transition:"transform 200ms",display:"flex",alignItems:"center",marginRight:3},children:(0,a.jsx)(t9.ChevronRight,{})}),(0,a.jsx)("div",{className:(0,l.clsx)(t5.default.iconWrapper,{[t5.default.isrIconWrapper]:t===t1.ArtefactTypes.PartialPrerender||t===t1.ArtefactTypes.PartialPrerenderDynamicContent}),children:h}),(0,a.jsx)("p",{className:"text-[14px] font-medium leading-[14px]",children:p})]}),t===t1.ArtefactTypes.BulkRedirects?(0,a.jsx)(sz,{onClick:c,className:o?"invisible":"visible"}):null,0===f.length?null:(0,a.jsx)(se.Scroller,{gradient:"var(--ds-background-200) 0, transparent 20px",overlayClassName:t5.default.scroller,children:(0,a.jsxs)("div",{className:t5.default.badgesWrapper,children:[x.length>=1&&(0,a.jsxs)(sn,{active:"all"===u&&o,onClick:e=>{e.preventDefault(),m("all"),c(),e.target.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},children:["All (",n??s.length.toLocaleString(),")"]}),x.length>1&&x.map(e=>(0,a.jsxs)(sn,{active:e.type===u||1===x.length&&o,onClick:t=>{t.preventDefault(),m(e.type),c(),t.target.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},children:[e.type," (",e.count.toLocaleString(),")"]},e.type))]})})]})]}),(0,a.jsx)(e1.AnimatePresence,{initial:!1,children:o?(0,a.jsx)(r.Content,{forceMount:!0,children:(0,a.jsx)(t2.m.div,{animate:{height:"auto",opacity:1},className:t5.default.content,exit:{height:0,opacity:0},initial:{height:0,opacity:0},transition:{duration:.2},children:(0,a.jsx)(sF,{prefix:t===t1.ArtefactTypes.BulkRedirects&&o?(0,a.jsx)("div",{className:"mt-5",children:(0,a.jsx)(sJ,{})}):null,items:f,totalCount:n})})}):null})]})}function s0(e){let{resolvedTheme:t}=(0,tX.useTheme)(),{selectedArtefacts:s,artefactGroups:n,filterArtefactsBy:i,setSelectedArtefacts:o,deployment:c,framework:d}=e;return(0,a.jsxs)(r.Root,{defaultValue:[],onValueChange:e=>{o(e)},type:"multiple",value:s,children:[i?null:(0,a.jsxs)("div",{className:(0,l.clsx)(t5.default.wrapper,t5.default.frameworkWrapper),style:{display:"flex",alignItems:"center",gap:5},children:[d?(0,a.jsxs)(a.Fragment,{children:[d.logo?(0,a.jsx)(t0.Avatar,{size:20,src:"dark"===t?d.darkModeLogo:d.logo,title:d.name}):null,(0,a.jsx)("p",{className:"text-[14px] font-medium leading-[14px]",children:d.name}),d.version?(0,a.jsxs)("p",{className:"text-[14px] font-medium leading-[14px]",children:["(",d.version,")"]}):null]}):(0,a.jsx)("p",{className:"text-[14px] font-medium leading-[14px]",children:"No framework detected"}),(0,a.jsx)(C.Tooltip,{desktopOnly:!0,maxWidth:400,style:{marginLeft:"auto"},text:"Download Deployment Data",children:(0,a.jsx)(f.Button,{"aria-label":"Download Deployment Data",className:t5.default.downloadButton,onClick:()=>{(e=>{let{artefactGroups:t,filename:s}=e,n=`path_name,size
`,a=encodeURI(`data:text/csv;charset=utf-8,${n}${t.flatMap(e=>e.artefacts.map(e=>(0,t1.isVariant)(e)||(0,t1.isCronJob)(e)||(0,t1.isMiddleware)(e)||(0,t1.isMicrofrontendRoute)(e)||(0,t1.isBulkRedirect)(e)?null:(0,t1.isStaticAsset)(e)||(0,t1.isServerlessFunction)(e)?`${e.path},${e.size}`:`${e.path},${Array.isArray(e.regions)?e.regions.join(","):e.regions||""}`)).join("\n")}`),r=document.createElement("a");r.setAttribute("href",a),r.setAttribute("download",s),document.body.appendChild(r),r.click(),document.body.removeChild(r)})({artefactGroups:n,filename:`${c.host.replace("-","_").replace(/\./g,"_")}_logs`})},shape:"square",size:"small",svgOnly:!0,type:"tertiary",children:(0,a.jsx)(tQ.Download,{})})}),(0,a.jsx)(C.Tooltip,{desktopOnly:!0,maxWidth:400,text:"Copy Deployment Data",children:(0,a.jsx)(tL.CopyButton,{label:"Copy Deployment Data",size:"small",textToCopy:JSON.stringify(n,null,2),type:"tertiary"})})]}),n.map(e=>{let{type:t,artefacts:n,count:r}=e;return(0,a.jsx)(sX,{artefacts:n,count:r,isOpen:s.includes(t),open:()=>{s.includes(t)||o([...s,t])},toggleOpen:()=>{s.includes(t)?o(s.filter(e=>e!==t)):o([...s,t])},type:t},t)})]})}var s1=e.i(1475672);function s5(e){let{active:t,onChange:s,items:n,open:r}=e;return(0,a.jsx)("div",{className:(0,l.clsx)(tK.default.collapsedBadgesWrapper,{[tK.default.closed]:!r}),children:(0,a.jsx)(s1.default,{active:t,className:tK.default.switcher,items:[...n.map(e=>{let{name:t,value:s,tooltip:n,buttonProps:r}=e;return{name:n?(0,a.jsx)(C.Tooltip,{className:tK.default.tooltip,text:n,children:t}):t,value:s,buttonProps:r}})],onChange:(e,t)=>{s(e,t)},size:"small"})})}var s2=e.i(1918911),s4=e.i(3277920),s9=e.i(7432042),s3=e.i(1594052),s7=e.i(6618181);function s8(e){let{title:t,metric:s}=e;return(0,a.jsxs)("div",{className:s7.default.headerStatContainer,children:[(0,a.jsx)("div",{className:s7.default.headerStatTitle,children:t}),(0,a.jsx)("div",{className:s7.default.headerStatMetric,children:s})]})}function s6(e){let{cachedTasks:t,totalTasks:s,timeSaved:n,totalDuration:r}=e;return(0,a.jsxs)("header",{className:s7.default.header,children:[(0,a.jsxs)("div",{className:s7.default.headerTitle,children:[(0,a.jsx)(s3.LogoTurborepo,{size:44}),(0,a.jsx)("div",{className:s7.default.headerTitleContainer,children:(0,a.jsx)("h1",{children:"Turborepo Run Summary"})})]}),(0,a.jsxs)("div",{className:s7.default.headerStats,children:[void 0!==t&&void 0!==s&&(0,a.jsx)(s8,{metric:`${t}/${s}`,title:"Cached Tasks"}),void 0!==n&&n>0&&(0,a.jsx)(s8,{metric:(0,s9.default)(n),title:"Time Saved"}),void 0!==r&&(0,a.jsx)(s8,{metric:(0,s9.default)(r),title:"Duration"})]})]})}var ne=e.i(6912485);function nt(e){let{cached:t,total:s}=e;return void 0!==t&&void 0!==s?(0,a.jsx)(ne.Progress,{className:"m-0 border border-solid border-gray-700 !bg-background-100",max:s,value:t,colors:{0:"linear-gradient(to right, #0096ff, #ff1e56)"},width:"50%"}):null}var ns=e.i(6881349);function nn(e){let{isCached:t}=e,s=t?X.CheckCircleFill:I.MinusCircle;return(0,a.jsx)("span",{className:(0,l.clsx)({"text-turbo-blue":t,"text-turbo-red":!t}),children:(0,a.jsx)(s,{})})}function na(e){let{taskId:t}=e,s=t.split("#");return 1===s.length?(0,a.jsx)("span",{children:t}):(0,a.jsxs)("span",{children:[s[0],(0,a.jsxs)("span",{className:"text-gray-900",children:["#",s[1]]})]})}function nr(e){let{taskId:t,isGlobal:s}=e;return s?'"globalCacheInputs": {':t?`"taskId": "${t}"`:void 0}function ni(e){let{onScrollToLine:t,taskId:s,taskStats:n}=e;return(0,a.jsx)(f.Button,{align:"flex-grow",className:"my-1 w-full px-0.5 py-3 font-mono text-sm font-normal disabled:border-transparent disabled:bg-transparent",onClick:()=>{t(nr({taskId:s})),eE.analytics.track(eP.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_TASK_CLICK)},prefix:(0,a.jsx)(nn,{isCached:n.isCached}),size:"small",title:`${s} - cache ${n.isCached?"hit":"miss"} ${n.cacheSource?`(${n.cacheSource.toLowerCase()})`:""}`,type:"tertiary",children:(0,a.jsxs)("span",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"w-3/4 overflow-hidden truncate text-left",children:(0,a.jsx)(na,{taskId:s})}),void 0!==n.duration?(0,a.jsx)("span",{children:(0,s9.default)(n.duration)}):void 0]})})}function nl(e){let{taskId:t,taskStats:s}=e;return(0,a.jsx)(ns.Combobox.Option,{prefix:(0,a.jsx)(nn,{isCached:s.isCached}),suffix:void 0!==s.duration?(0,a.jsx)("span",{children:(0,s9.default)(s.duration)}):void 0,value:t,children:(0,a.jsx)(na,{taskId:t})},t)}function no(e){let{onScrollToLine:t}=e;return(0,a.jsx)(f.Button,{className:"my-1 w-full px-0.5 py-3 font-mono text-sm font-normal disabled:border-transparent disabled:bg-transparent",onClick:()=>{t(nr({isGlobal:!0})),eE.analytics.track(eP.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_TASK_CLICK)},size:"small",type:"tertiary",children:"Global Hash Summary"})}var nc=e.i(7935689);function nd(e){let{onScrollToLine:t,stats:s}=e,{summary:n,tasks:r={}}=s||{};return(0,a.jsxs)("aside",{className:nc.default.sidebar,children:[(0,a.jsxs)("div",{className:(0,l.clsx)(nc.default.sidebarTitle,"mb-2"),children:["Cache Analysis"," ",n?.cachedTasks!==void 0&&void 0!==n.totalTasks?`(${n.cachedTasks}/${n.totalTasks})`:void 0,(0,a.jsx)(nt,{cached:n?.cachedTasks,total:n?.totalTasks})]}),(0,a.jsx)(no,{onScrollToLine:t}),(0,a.jsx)("hr",{className:nc.default.sidebarDivider}),(0,a.jsx)("div",{className:nc.default.sidebarTaskContainer,children:Object.keys(r).map(e=>(0,a.jsx)(ni,{onScrollToLine:t,taskId:e,taskStats:r[e]},e))}),(0,a.jsx)("div",{className:nc.default.sidebarFooter,children:(0,a.jsx)(u.Link,{external:!0,href:"/docs/monorepos/turborepo#debug-turborepo-cache-misses",variant:"highlight",children:"Learn More"})})]})}let nu=(0,K.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5 4.25H11C11.4142 4.25 11.75 4.58579 11.75 5V11C11.75 11.4142 11.4142 11.75 11 11.75H5C4.58579 11.75 4.25 11.4142 4.25 11V5C4.25 4.58579 4.58579 4.25 5 4.25ZM3 5C3 3.89543 3.89543 3 5 3H11C12.1046 3 13 3.89543 13 5V11C13 12.1046 12.1046 13 11 13H5C3.89543 13 3 12.1046 3 11V5ZM7.375 10.375V9.75V8.625H6.25H5.625V7.375H6.25H7.375V6.25V5.625H8.625V6.25V7.375H9.75H10.375V8.625H9.75H8.625V9.75V10.375H7.375Z" fill="currentColor"/>');var nm=e.i(3500331);function np(e){var t,s;let{summary:n}=e,{isReady:r,team:i}=(0,tO.useTeam)();return(0,a.jsx)(f.Button,{Component:"a",disabled:!r,download:`turborepo_summary_${n.source.id}.json`,href:(t=n.source.id,(s=i?new URLSearchParams({teamId:i.id}):void 0)?`/api/v6/deployments/${t}/files/turborepo-summary?${s.toString()}`:`/api/v6/deployments/${t}/files/turborepo-summary`),onClick:()=>eE.analytics.track(eP.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_DOWNLOAD),size:"small",suffix:(0,a.jsx)(tQ.Download,{}),target:"_blank",type:"secondary",children:"Download"},"download")}function nh(e){let{summaryData:t,isComparing:s,onCompare:n,onScrollToLine:r,hasPreviousSummary:o,onComparePrevious:c,stats:d}=e,[u,m]=(0,i.useState)(null),{summary:p,tasks:h={}}=d||{};return(0,a.jsxs)("div",{className:(0,l.clsx)("flex shrink grow basis-1/2 flex-col gap-4 p-4 lg:px-6","bg-background-100"),children:[(0,a.jsxs)("div",{className:"flex flex-col lg:hidden",children:[(0,a.jsxs)("div",{className:"flex min-h-8 w-full items-center justify-between gap-4 text-sm leading-4 text-gray-900",children:[(0,a.jsx)("span",{children:"Cache Analysis"}),(0,a.jsx)(nt,{cached:p?.cachedTasks,total:p?.totalTasks})]}),(0,a.jsxs)(ns.Combobox,{clearable:!1,onChange:e=>{e&&(m(e),r(nr({taskId:e})),eE.analytics.track(eP.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_TASK_CLICK))},placeholder:"Jump to task",value:u,children:[(0,a.jsx)(ns.Combobox.Input,{}),(0,a.jsx)(ns.Combobox.List,{children:Object.keys(h).map(e=>(0,a.jsx)(nl,{taskId:e,taskStats:h[e]},e))})]})]}),(0,a.jsx)("div",{className:"flex min-h-8 w-full items-center justify-between gap-4 text-sm leading-4 text-gray-900",children:(0,a.jsx)("span",{children:"Cache Inputs"})}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between gap-4 max-md:flex-wrap",children:[(0,a.jsx)("div",{className:"grow",children:(0,a.jsx)(nm.Input,{"aria-labelledby":"Label",disabled:!0,prefix:"This deployment",value:t.source.id})}),s?void 0:(0,a.jsx)(f.Button,{className:"max-md:w-full",onClick:o?c:n,suffix:(0,a.jsx)(nu,{}),children:o?"Compare to Previous":"Compare"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between max-lg:hidden",children:[(0,a.jsxs)("div",{className:"font-mono text-sm font-normal leading-4",children:["turbo@",t.summary.turboVersion]}),(0,a.jsx)(np,{summary:t})]})]})}var nx=e.i(6318858),nf=e.i(7749291),ng=e.i(7218483),ny=e.i(6625227),nj=e.i(8216525);function nv(e){let{item:t,isMainDeployment:s,isPrevDeployment:n,isComparisonDeployment:r,status:i,createdAt:l}=e,o=(0,ng.useAgo)(l,{justNowLabel:"just now"});return s?o="CURRENT":n&&(o="PREVIOUS"),(0,a.jsx)(ns.Combobox.Option,{className:"font-mono",disabled:s||r,prefix:(0,a.jsx)(nj.DeploymentStatus,{deployment:{readyState:i??"INITIALIZING",createdAt:l??0}}),suffix:(0,a.jsx)("span",{className:"text-xs text-gray-900",children:o}),value:t.source.id,children:(0,a.jsxs)("span",{className:"flex gap-1 text-xs text-foreground",children:[t.source.id,r?(0,a.jsx)(nx.Check,{}):void 0]})},t.source.id)}function nb(e){let{comparisons:t,comparisonsLoading:s,searchLoading:n,summaryData:r,deployment:i,onSelectCompare:o,onRemoveCompare:c,onSearch:d,prevDeploymentId:u}=e,{data:m}=(0,ny.default)(r?.source.id);return(0,a.jsxs)("div",{className:(0,l.clsx)("flex shrink grow basis-1/2 flex-col gap-4 p-4 lg:px-6","border-0 border-l border-solid border-gray-200 bg-background-200","max-lg:border-l-0 max-lg:border-t","max-sm:w-screen"),children:[(0,a.jsxs)("div",{className:"flex min-h-8 w-full items-center justify-between gap-4 text-sm leading-4 text-gray-900",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-mono text-sm text-red-500",children:"-"}),(0,a.jsx)("span",{className:"ml-1 mr-2 font-mono text-sm text-green-500",children:"+"}),"Comparing with:"]}),(0,a.jsx)(f.Button,{"aria-label":"Remove Comparison",onClick:c,size:"small",svgOnly:!0,type:"tertiary",children:(0,a.jsx)(tI.Cross,{})})]}),(0,a.jsxs)(ns.Combobox,{clearable:!1,disabled:s,onChange:o,placeholder:r?r.source.id:"Select a deployment",value:r?.source.id,children:[(0,a.jsx)(ns.Combobox.Input,{loading:s||n,onChange:e=>{""===e.target.value?d(void 0):d(e.target.value)}}),(0,a.jsx)(ns.Combobox.List,{emptyMessage:n?"Searching":"No previous deployments found",children:t.map((e,t)=>(0,a.jsx)(nv,{createdAt:e.source.meta.createdAt,isComparisonDeployment:e.source.id===r?.source.id,isMainDeployment:e.source.id===i.id,isPrevDeployment:e.source.id===u,item:e,status:e.source.meta.status},n?e.source.id:`${e.source.id}-${t}`))})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between max-lg:hidden",children:[(0,a.jsx)("div",{className:"font-mono text-sm font-normal leading-4",children:r?`turbo@${r.summary.turboVersion}`:void 0}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[m?.inspectorUrl?(0,a.jsx)(f.Button,{Component:"a","aria-label":`Open deployment with ID ${m.id} in a new tab`,href:m.inspectorUrl,onClick:()=>eE.analytics.track(eP.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_VIEW_DEPLOYMENT),size:"small",svgOnly:!0,target:"_blank",type:"secondary",children:(0,a.jsx)(nf.ExternalSmall,{})}):void 0,r?(0,a.jsx)(np,{summary:r}):void 0]})]})]})}function nC(e){let{deployment:t,showCompareHeader:s,hasPreviousSummary:n,isComparing:r,stats:i,onScrollToLine:l,onCompareRemove:o,onComparePrevious:c,onCompare:d,onCompareSelect:u,onCompareSearch:m,baseline:p,comparison:h,comparisons:x,comparisonsLoading:f,searchLoading:g,prevDeploymentId:y}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(nh,{hasPreviousSummary:n,isComparing:r,onCompare:d,onComparePrevious:c,onScrollToLine:l,stats:i,summaryData:p}),s?(0,a.jsx)(nb,{comparisons:x,comparisonsLoading:f,deployment:t,onRemoveCompare:o,onSearch:m,onSelectCompare:u,prevDeploymentId:y,searchLoading:g,summaryData:h}):null]})}var n_=e.i(3218771),nk=e.i(6440337);function nw(e){let{className:t="",isEnabled:s,onClick:n,mobileBreakpoint:r=600}=e,i=(0,e6.useMediaQuery)(r);return s?(0,a.jsx)(f.Button,{"aria-label":"Turborepo Run Summary",className:t,onClick:n,prefix:i?void 0:(0,a.jsx)(s3.LogoTurborepo,{size:20}),shape:i?"square":void 0,size:"small",svgOnly:i||void 0,type:"secondary",children:i?(0,a.jsx)(s3.LogoTurborepo,{size:20}):(0,a.jsx)("span",{children:"Run Summary"})}):null}function nN(e){return(0,a.jsxs)("span",{className:n_.default.codeFoldMessage,children:[(0,a.jsx)(s2.ChevronUpDown,{className:"text-sm"}),"Expand ",e," Lines"]})}function nS(e){let{size:t}=e;return(0,a.jsxs)("svg",{height:t,style:{color:"currentcolor",stroke:"currentcolor"},viewBox:"0 0 24 24",width:t,xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("title",{children:"Reset Folding"}),(0,a.jsx)("path",{d:"M17 3L12 8.517L9.5 5.7585L7 3M7 20.997L12 15.48L17 20.997",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})}function nI(e){let{onView:t}=e;return(0,a.jsxs)("div",{className:n_.default.noDifference,children:[(0,a.jsx)(X.CheckCircleFill,{size:54}),(0,a.jsx)("span",{children:"No Difference"}),(0,a.jsx)(f.Button,{onClick:t,size:"small",type:"secondary",children:"View"})]})}function nA(e){let t,{active:s,deployment:n,baseline:r,comparison:l,previous:o,initialLine:d,onClose:u}=e,[m,h]=(0,c.useQueryState)("line"),[x,g]=(0,c.useQueryState)("comparisonId",c.queryTypes.string.withDefault(l?.source.id??"")),{expandedBlocks:y,resetCodeBlocks:j,virtualizer:v,getIndex:b,items:C}=(0,p.useCodeCompare)(),_=(0,e6.useMediaQuery)(1024),k=(0,s4.useMounted)(),w=(0,i.useRef)(null),[N,S]=(0,i.useState)([]),[I,A]=(0,i.useState)(!d),[R,T]=(0,i.useState)(void 0),P=(0,t_.useDebouncedValue)(R,400),[E,L]=(0,i.useState)(l),[W,M]=(0,i.useState)(!0),[B,D]=(0,i.useState)(!1),[V,F]=(0,i.useState)(!1),[O,H]=(0,i.useState)(!!d),[U,$]=(0,i.useState)(),{resolvedTheme:z}=(0,tX.useTheme)(),{data:q,isLoading:G}=function(e){let{since:t,projectId:s,deploymentId:n,refType:a,refValue:r}=e,i=(0,eZ.useTeamSlug)();return(0,eY.default)(()=>i&&n&&s?`/api/turborepo/run-summary/comparisons${(0,ej.encode)({deploymentId:n,projectId:s,since:t,teamId:i,refType:a,refValue:r})}`:null,e=>(0,ey.fetchAPI)(e,{throwOnHTTPError:!0}),{refreshInterval:0,revalidateOnFocus:!1})}({since:n.createdAt,projectId:n.projectId,deploymentId:n.id,...eJ(n)}),{data:Y,isLoading:Z}=function(e){let{search:t}=e,s=(0,eZ.useTeamSlug)();return(0,eY.default)(()=>s&&t?`/api/turborepo/run-summary/query${(0,ej.encode)({search:t,teamId:s})}`:null,e=>(0,ey.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1})}({search:P}),J=async()=>{await u(),await h(null),await g(null)},K=e=>{if(e){let t=N.find(t=>t.source.id===e);t&&(L(t),eE.analytics.track(eP.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_SELECT_COMPARISON,{comparisonId:t.source.id,comparisonType:t.source.type}))}},Q=()=>{D(!1),L(void 0),M(!1),H(!1),eE.analytics.track(eP.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_REMOVE_COMPARISON)},X=(0,i.useCallback)(e=>{e>=0&&(v?.scrollToIndex(e,{align:"center"}),$(void 0))},[$,v]),ee=()=>{o?.source.id!==E?.source.id&&(L(o),M(!0),eE.analytics.track(eP.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_COMPARE_PREVIOUS))},et=e=>{if(e){let t=b(e);t<0?(F(!1),$(e)):X(t)}};(0,i.useEffect)(()=>{if(k&&!I&&d&&E?.summary){let[e,t]=d.split("-"),s=C.find(s=>"skipped"!==s.type&&s.data.line["L"===e?"left":"right"]?.lineNumber===Number(t));if(void 0!==s&&"skipped"!==s.type){let{index:e}=s.data;X(e),A(!0)}}},[I,d,k,E,C,X]),(0,i.useEffect)(()=>{!G&&q?.length&&S(q)},[G]),(0,i.useEffect)(()=>{if(!Z&&Y?.result!==void 0){let e=Y.result;N.find(t=>t.source.id===e.source.id)||S(t=>[e,...t])}},[Z,N]),(0,i.useEffect)(()=>{g(E?.source.id?E.source.id:null),E?.summary&&!d?F(!0):F(!1)},[E,g,d]),(0,i.useEffect)(()=>{!V&&U&&X(b(U))},[U,V,X,b]),(0,i.useEffect)(()=>{E?.summary&&!_?M(!0):M(!1)},[_,E]),(0,i.useEffect)(()=>{E?.summary&&H(!1)},[E]);let es=!!o,{totalTasks:en,cachedTasks:ea,totalDuration:er,timeSaved:ei}=r.stats.summary,el=JSON.stringify(E?.summary)===JSON.stringify(r.summary),eo=el&&!O;return(0,a.jsxs)(e$.Modal,{active:!!s,drawerClassname:n_.default.drawerStyles,drawerHeight:"max",drawerVerticalScroll:!1,onClickOutside:J,style:{width:E?.summary||B||_?"90vw":"80vw",maxWidth:"1600px",height:"80vh"},children:[(0,a.jsx)(s6,{cachedTasks:ea,timeSaved:ei,totalDuration:er,totalTasks:en}),(0,a.jsxs)("div",{className:n_.default.body,children:[(0,a.jsx)(nd,{onScrollToLine:et,stats:r.stats}),(0,a.jsxs)("div",{className:n_.default.content,children:[(0,a.jsx)("div",{className:n_.default.contentHeader,children:(0,a.jsx)(nC,{baseline:r,comparison:E,comparisons:N,comparisonsLoading:G,deployment:n,hasPreviousSummary:es,isComparing:!!E?.summary||B,onCompare:()=>D(!0),onComparePrevious:ee,onCompareRemove:Q,onCompareSearch:T,onCompareSelect:K,onScrollToLine:et,prevDeploymentId:o?.source.id,searchLoading:Z,showCompareHeader:!!(E?.summary||B),stats:r.stats})}),(0,a.jsxs)("div",{className:n_.default.diffViewer,id:"DiffViewer",ref:w,children:[(0,a.jsx)("div",{className:n_.default.contentHeaderMobile,children:(0,a.jsx)(nC,{baseline:r,comparison:E,comparisons:N,comparisonsLoading:G,deployment:n,hasPreviousSummary:es,isComparing:!!E?.summary||B,onCompare:()=>D(!0),onComparePrevious:ee,onCompareRemove:Q,onCompareSearch:T,onCompareSelect:K,onScrollToLine:et,prevDeploymentId:o?.source.id,searchLoading:Z,showCompareHeader:!!(E?.summary||B),stats:r.stats})}),eo?(0,a.jsx)(nI,{onView:()=>{F(!1),H(!0)}}):void 0,k&&!eo?(0,a.jsx)(p.ComparisonView,{codeFoldMessageRenderer:nN,compareMethod:p.DiffMethod.WORDS_WITH_SPACE,hideLineNumbers:!E?.summary,highlightLines:m?[m]:[],newValue:JSON.stringify(E?.summary?E.summary:r.summary,null,2),oldValue:JSON.stringify(r.summary,null,2),onLineNumberClick:(e,t)=>{m===e?h(null):h(e)},parentRef:w,renderContent:e=>(0,nk.SyntaxHighlighter)(e,r.stats.tasks),showDiffOnly:V,splitView:W,styles:(t="dark"===z?"dark":"light",E?.summary?W?(0,nk.splitViewStyles)({theme:t}):(0,nk.unifiedViewStyles)({theme:t}):(0,nk.noComparisonStyles)()),useDarkTheme:"dark"===z,useVirtual:!0,virtualizerOptions:{estimateSize:()=>20,overscan:15,scrollPaddingStart:_?-300:0},xSpacer:!0}):void 0,(0,a.jsx)(nk.SyntaxHighlightingStyles,{})]}),E?.summary&&!eo?(0,a.jsxs)("div",{className:n_.default.diffViewerBackground,children:[(0,a.jsx)("div",{className:n_.default.diffViewerBackgroundLeft}),(0,a.jsx)("div",{className:n_.default.diffViewerBackgroundRight})]}):null]}),!el&&y.length>0&&E?.summary||!el&&!V&&E?.summary?(0,a.jsx)(f.Button,{className:n_.default.resetFoldingButton,onClick:()=>{j(),F(!0),eE.analytics.track(eP.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_COLLAPSE_LINES)},size:"small",type:"secondary",children:(0,a.jsxs)("span",{className:n_.default.resetCodeFold,children:[(0,a.jsx)(nS,{size:14}),"Collapse Lines"]})}):void 0]})]})}function nR(e){let{shimmer:t=!1}=e;return(0,a.jsx)(a.Fragment,{children:J.map(e=>{let s=e,n=e;return(e!==Y||t||(n="Assigning Domains",s="Assigning Custom Domains"),t)?(0,a.jsx)(eh,{id:n,name:s},n):(0,a.jsx)(ex,{disabled:!0,id:n,name:s,status:em.Pending},n)})})}e.s(["DeployStepsSkeleton",0,nR],1367170);var nT=e.i(5779481),nP=e.i(4011256);function nE(e){let{resource:t,team:s}=e,{data:n}=(0,nT.useResourceItem)({resourceId:t.resourceId,skipMetadata:!0}),r=n?.store,i=r?(0,nP.getResourceDashboardLink)(r,{teamSlug:s.slug}):"";return(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[(0,a.jsx)(u.Link,{external:!0,href:i,children:(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[t.icon?(0,a.jsx)(t0.Avatar,{hash:t.icon,size:20}):null,t.name]})}),(0,a.jsx)(nL,{status:t.status})]})}function nL(e){let{status:t}=e;return(0,a.jsx)(C.Tooltip,{text:function(e){if(!e)return"Resource status is unknown";switch(e){case"ready":case"resumed":return"Resource is ready";case"pending":return"Resource is initializing";case"error":return"Resource has errors";case"skipped":return"Resource has been skipped or not configured";case"suspended":return"Resource has been suspended";case"uninstalled":return"Resource has been uninstalled";case"timeout":return"Resource provisioning timed out"}return null}(t),children:(0,a.jsx)("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:function(e){if(!e)return"var(--geist-secondary)";switch(e){case"ready":case"resumed":return"var(--geist-success)";case"pending":return"var(--geist-warning)";case"timeout":case"error":return"var(--geist-error)";default:return"var(--geist-secondary)"}}(t)}})})}function nW(e){let{action:t,deployment:s,team:n}=e;return(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-4 flex-initial",children:[t.resource?(0,a.jsx)(nM,{action:t,deployment:s,resource:t.resource,team:n}):(0,a.jsx)(nB,{action:t,deployment:s,team:n}),t.startedAt?(0,a.jsx)(nD,{action:t}):null,(0,a.jsx)(nV,{status:t.status}),(0,a.jsx)("p",{className:"text-copy-14",children:t.statusText})]})}function nM(e){let{action:t,resource:s,deployment:n,team:r}=e,{data:i}=(0,nT.useResourceItem)({resourceId:s.resourceId,skipMetadata:!0}),l=i?.store,o=t.statusUrl?(0,V.getIntegrationAbsoluteOrSsoLink)(t.statusUrl,{teamIdOrSlug:r.id,integrationConfigurationId:t.integrationConfigurationId,externalResourceId:s.externalResourceId,projectId:n.projectId,action:t.slug}):l?(0,nP.getResourceDashboardLink)(l,{teamSlug:r.slug,path:"projects"}):"";return(0,a.jsx)(u.Link,{external:!0,href:o,children:(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[t.icon?(0,a.jsx)(t0.Avatar,{hash:t.icon,size:20}):null,s.name,": ",t.name]})})}function nB(e){let{action:t,deployment:s,team:n}=e,r=t.statusUrl?(0,V.getIntegrationAbsoluteOrSsoLink)(t.statusUrl,{teamIdOrSlug:n.id,integrationConfigurationId:t.integrationConfigurationId,projectId:s.projectId,action:t.slug}):`/${n.slug}/~/integrations/${t.integrationConfigurationId}`;return(0,a.jsx)(u.Link,{external:!0,href:r,children:(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-1 flex-initial",children:[t.icon?(0,a.jsx)(t0.Avatar,{hash:t.icon,size:20}):null,t.name]})})}function nD(e){let{action:t}=e,{startedAt:s,completedAt:n}=t,[r,l]=(0,i.useState)(null);return((0,el.useInterval)(()=>{s&&l(Date.now()-s)},n?null:1e3,!0),(0,i.useEffect)(()=>{null===r&&s&&n&&l(n-s)},[r,n,s]),r)?(0,a.jsx)("span",{className:"text-copy-14 text-gray-900",children:(0,eo.age)(r||0,{includeSeconds:!0})}):null}function nV(e){let{status:t}=e;return(0,a.jsx)(C.Tooltip,{text:function(e){if(!e)return"Action has not started yet";switch(e){case"succeeded":return"Action has completed";case"running":return"Action is running";case"failed":return"Action has completed with errors";case"skipped":return"Action has been skipped or not configured";case"uninstalled":return"Action or resource have been uninstalled";case"timeout":return"Action has timed out"}return null}(t),children:(0,a.jsx)("div",{style:{width:12,height:12,borderRadius:"50%",backgroundColor:function(e){if(!e)return"var(--geist-warning)";switch(e){case"succeeded":return"var(--geist-success)";case"running":return"var(--geist-warning)";case"timeout":case"failed":return"var(--geist-error)";default:return"var(--geist-secondary)"}}(t)}})})}function nF(e){let{deployment:t}=e,{team:s}=(0,tO.useTeam)(),n=t.integrations;return s&&n?(0,a.jsx)(ex,{action:(0,a.jsx)(nH,{deployment:t}),finishedAt:n.completedAt,id:"Integrations",name:"Provisioning Integrations",paddingType:"vertical",showDurationWhenSkipped:!0,startedAt:n.startedAt,status:function(e){if(!e)return em.NoData;switch(e){case"pending":return em.InProgress;case"ready":return em.Complete;case"error":case"timeout":return em.Error;case"skipped":return em.Skipped}return em.NoData}(n.status),children:(0,a.jsx)(nO,{deployment:t,team:s})}):null}function nO(e){let{team:t,deployment:s}=e,{data:n}=(0,eY.default)(`/api/v13/deployments/${s.id}/integrations?teamId=${s.ownerId}`,ey.fetchAPI);return(0,a.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial px-6",children:n?(0,a.jsxs)(a.Fragment,{children:[n.resources?.map(e=>(0,a.jsx)(nE,{resource:e,team:t},e.resourceId)),n.actions?.map(e=>(0,a.jsx)(nW,{action:e,deployment:s,team:t},`${e.integrationConfigurationId}:${e.slug}`))]}):(0,a.jsx)("p",{className:"text-copy-14",children:"Loading…"})})}function nH(e){let{deployment:t}=e,s=t.integrations;return s?.status!=="pending"?null:(0,a.jsx)(f.Button,{onClick:()=>{(0,ey.fetchAPI)(`/api/v13/deployments/${t.id}/integrations/skip`,{method:"POST",throwOnHTTPError:!0,body:{}})},size:"small",type:"secondary",children:"Skip"})}var nU=e.i(1288475),n$=e.i(1000921);function nz(e){let{check:t}=e;return t?.status==="running"?(0,a.jsx)(nU.Status,{size:16,color:"amber-700"}):t?.status==="completed"&&"succeeded"===t.conclusion?(0,a.jsx)(nx.Check,{size:16,color:"green-700"}):t?.status==="completed"&&"failed"===t.conclusion?(0,a.jsx)(tI.Cross,{size:16,color:"red-700"}):t?.status==="completed"&&"neutral"===t.conclusion?(0,a.jsx)(T.Warning,{size:16,color:"amber-700"}):t?.status==="completed"&&"canceled"===t.conclusion?(0,a.jsxs)("svg",{fill:"none",height:"16",viewBox:"0 0 20 20",width:"16",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_3889:22791)",children:[(0,a.jsx)("path",{d:"M9.99984 18.3338C14.6022 18.3338 18.3332 14.6028 18.3332 10.0004C18.3332 5.39807 14.6022 1.66711 9.99984 1.66711C5.39746 1.66711 1.6665 5.39807 1.6665 10.0004C1.6665 14.6028 5.39746 18.3338 9.99984 18.3338Z",stroke:"#999999",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,a.jsx)("path",{d:"M12.5 7.50049H7.5V12.5005H12.5V7.50049Z",fill:"#999999",stroke:"#999999",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_3889:22791",children:(0,a.jsx)("rect",{fill:"white",height:"20",transform:"translate(0 0.000488281)",width:"20"})})})]}):t?.status==="completed"&&"skipped"===t.conclusion?(0,a.jsx)(n$.ArrowCircleRight,{color:"gray-500",size:20}):t?.status==="completed"&&"stale"===t.conclusion?(0,a.jsx)(I.MinusCircle,{color:"gray-500",size:20}):(0,a.jsx)(w.CrossCircle,{color:"gray-500",size:20})}function nq(e){let{checks:t,isExpanded:s,filterChecksBy:n,onChange:r}=e,i=t.filter(e=>"succeeded"===e.conclusion).length,o=t.filter(e=>"running"===e.status).length,c=t.filter(e=>"failed"===e.conclusion).length,d=[{name:(0,a.jsx)("span",{className:"text-[14px] leading-[20px] font-medium text-gray-900",children:"All"}),value:"all"},i?{name:(0,a.jsx)(nG,{count:i,type:"succeeded"}),value:"succeeded"}:void 0,o?{name:(0,a.jsx)(nG,{count:o,type:"running"}),value:"running"}:void 0,c?{name:(0,a.jsx)(nG,{count:c,type:"failed"}),value:"failed"}:void 0].filter(Boolean);return d.length>2?(0,a.jsx)(b.Switch,{name:"ci-checks-filter",onClick:e=>{s&&e.stopPropagation()},size:"small",children:d.map(e=>(0,a.jsx)(b.Switch.Control,{checked:n===e.value,className:(0,l.clsx)({"[&>div]:px-0":"all"!==e.value},{"[&>div]:px-2":"all"===e.value}),label:e.name,onChange:()=>{r(e.value)},value:e.value},e.value))}):(0,a.jsxs)("span",{children:[i?(0,a.jsx)(nG,{count:i,suffix:"completed",type:"succeeded"}):null,o?(0,a.jsx)(nG,{count:o,suffix:"running",type:"neutral"}):null,c?(0,a.jsx)(nG,{count:c,suffix:"failed",type:"failed"}):null]})}function nG(e){let{count:t,suffix:s,type:n}=e;return(0,a.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1 flex-initial px-1.5",children:[(0,a.jsx)(nz,{check:{conclusion:n,status:"running"===n?"running":"completed"}}),(0,a.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium text-gray-900",children:[t,s?` ${s}`:""]})]})}var nY=e.i(8159863);function nZ(e){let{checks:t,filterChecksBy:s,teamSlug:n,mutate:r}=e,{data:i}=(0,nY.useCurrentDashboardDeploymentInterval)(),{can:l,isLoading:o}=(0,h.default)(),c=!o&&l(x.Action.Update,null===i.target?x.Resource.DeploymentCheckPreview:x.Resource.DeploymentCheck),d=t.filter(e=>"failed"===e.conclusion),u=t.filter(e=>"succeeded"===e.conclusion),m=t.filter(e=>"running"===e.status);return(0,a.jsxs)(a.Fragment,{children:[("all"===s||"failed"===s)&&d.length>0?(0,a.jsx)(nK,{checks:d,expanded:"failed"===s,type:"failed",canUpdateDeploymentCheck:c,teamSlug:n,onRerunSuccess:async()=>{await r()}}):null,("all"===s||"running"===s)&&m.length>0?(0,a.jsx)(nK,{checks:m,expanded:"running"===s,type:"running"}):null,("all"===s||"succeeded"===s)&&u.length>0?(0,a.jsx)(nK,{checks:u,expanded:"succeeded"===s,type:"succeeded"}):null]})}function nJ(e){let{children:t,className:s,onClick:n,size:r="lg"}=e;return(0,a.jsx)("div",{onClick:n,className:(0,l.clsx)("flex flex-row items-stretch justify-between gap-2 flex-initial hsla(var(--ds-gray-200-value),1) px-[var(--geist-space-gap)] [&:not(:last-child)]:border-b",{"py-[var(--geist-space-4x)]":"lg"===r},{"py-[var(--geist-space-gap-half)]":"sm"===r},s),children:t})}function nK(e){let{checks:t,type:s,expanded:n,canUpdateDeploymentCheck:r,teamSlug:o,onRerunSuccess:c}=e,[d,u]=(0,i.useState)(n);return(0,a.jsxs)("div",{className:(0,l.clsx)("flex flex-col items-stretch justify-start flex-initial",{"[&:not(:last-child)]:border-b ":d}),children:[(0,a.jsx)(nJ,{className:(0,l.clsx)("cursor-pointer",{"border-b":!d},{"border-none":d}),onClick:()=>u(e=>!e),children:(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial pl-2",children:[(0,a.jsx)(t9.ChevronRight,{color:"gray-700",size:20,style:{transition:"transform 200ms ease",transform:d?"rotate(90deg)":"rotate(0deg)"}}),(0,a.jsx)(nz,{check:{conclusion:s,status:"running"===s?"running":"completed"}}),"failed"===s?(0,a.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[t.length," Failing"]}):null,"running"===s?(0,a.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[t.length," Running"]}):null,"succeeded"===s?(0,a.jsxs)("span",{className:"text-[14px] leading-[20px] font-medium",children:[t.length," Successful"]}):null]})}),(0,a.jsx)("div",{className:(0,l.clsx)("flex flex-col items-stretch justify-start gap-0 flex-initial max-h-0 overflow-hidden transition-all duration-300",{"overflow-y-scroll max-h-96":d}),children:t.map(e=>(0,a.jsx)(nQ,{...e,canUpdateDeploymentCheck:r,teamSlug:o,onRerunSuccess:c},e.id))})]})}function nQ(e){let{name:t,status:s,conclusion:n,detailsUrl:r,externalUrl:i,integrationId:l,canUpdateDeploymentCheck:o,teamSlug:c,onRerunSuccess:d,id:m}=e,{data:p,isLoading:h}=(0,O.useIntegration)(l),{data:x}=(0,nY.useCurrentDashboardDeploymentInterval)(),f=i||r;return(0,a.jsxs)(nJ,{className:"hover:bg-[var(--ds-gray-100)]",size:"sm",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial pl-5 ml-4",children:[(0,a.jsx)(nz,{check:{conclusion:n,status:s}}),p?.icon?(0,a.jsx)(t0.Avatar,{hash:p.icon,size:18}):h?(0,a.jsx)("div",{className:"size-[16px]"}):(0,a.jsx)(P.LogoGithub,{}),(0,a.jsx)("span",{className:"text-label-14 font-medium",children:t})]}),(0,a.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-4 flex-initial",children:[p&&"failed"===n&&o?(0,a.jsx)(ev,{checkId:m,deploymentId:x.id,teamSlug:c,onSuccess:d,checksConclusion:x.checksConclusion}):null,f?(0,a.jsx)(u.Link,{className:"flex flex-row items-center gap-2 text-gray-900",external:!0,href:f,children:(0,a.jsx)("p",{className:"text-copy-14 text-gray-900",children:"View details"})}):null]})]})}function nX(e){let{expandedSteps:t,deployment:s,checks:n,mutateDeployment:r,teamSlug:l,mutate:o}=e,[c,u]=(0,i.useState)("all"),m=(0,d.useServerFlag)("enable-deployment-checks-empty-state",!1),p=em.Pending;0===n.length?em.Pending:n.some(e=>"failed"===e.conclusion)?p=em.Error:n.some(e=>"running"===e.status)?p=em.InProgress:n.every(e=>"succeeded"===e.conclusion)&&(p=em.Complete);let f=t.includes("CI Checks"),{areChecksRunning:g}=(0,B.getDeploymentStatus)(s),{can:y,isLoading:j}=(0,h.default)(),[v,b]=(0,i.useState)(!1),C=!j&&y(x.Action.Update,null===s.target?x.Resource.DeploymentCheckPreview:x.Resource.DeploymentCheck),_="failed"===s.checksConclusion||g,k="READY"!==s.readyState,w=!!s.checksState,{checksFinishedAt:N,checksStartedAt:S}=(0,tR.getChecksTimes)(n,s);return w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n0,{canSkipChecks:_,canUpdateDeploymentCheck:C,onSkip:()=>{_&&b(!0)},filterChecksBy:c,isExpanded:f,handleChecksFilterChange:e=>{u(e)},checksStartedAt:S,checksFinishedAt:N,isChecksDisabled:k,combinedStatus:p,checks:n,teamSlug:l,mutate:o}),_?(0,a.jsx)(eG,{active:v,deployment:s,mutateDeployment:r,onClose:()=>b(!1)}):null]}):m?(0,a.jsx)(ex,{id:q,name:q,status:em.Pending,children:(0,a.jsx)(eg.EmptyChecksCard,{})}):null}function n0(e){let{canSkipChecks:t,canUpdateDeploymentCheck:s,onSkip:n,filterChecksBy:r,isExpanded:i,handleChecksFilterChange:l,checksStartedAt:o,checksFinishedAt:c,isChecksDisabled:d,combinedStatus:u,checks:m,teamSlug:p,mutate:h}=e;return(0,a.jsx)(ex,{action:(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsx)(C.Tooltip,{forceHide:s,text:s?null:"Missing required permission to skip checks",children:(0,a.jsx)(f.Button,{disabled:!s,onClick:n,size:"small",type:"secondary",children:"Skip"})}):null,(0,a.jsx)(nq,{checks:m,filterChecksBy:r,isExpanded:i,onChange:l})]}),id:q,startedAt:o,finishedAt:c,disabled:d,name:q,paddingType:"none",status:u,children:(0,a.jsx)(nZ,{checks:m,filterChecksBy:r,teamSlug:p,mutate:h})})}var n1=e.i(3850869);let n5=e=>e===ed.Building?"Build Logs":"Unknown",n2=(e,t)=>{let s="finishedAt"in e?e.finishedAt:null,n=t.errorStep??null,a="CANCELED"===t.readyState,r="READY"===t.readyState,i="ERROR"===t.readyState;return"placeholder"in e&&!(a||r||i)?em.Pending:s&&r?em.Complete:s&&i||e.name===n?em.Error:a?em.Canceled:em.InProgress},n4=[ed.Building],n9=[ed.Building,z,Z,Y,G];e.s(["DeploySteps",0,function(e){let{creationFlow:t,deployment:s,teamSlug:n,mutateDeployment:f,onComplete:g,onExpandedStepsChange:y,expandedSteps:j,enableLineHighlighting:v,context:b}=e,{can:C,isLoading:_,accessInfo:k}=(0,h.default)(),w=(0,E.useSearchParams)(),[N,S]=(0,c.useQueryState)("turboRunSummary",c.queryTypes.boolean),[I,A]=(0,i.useState)({}),[R,T]=(0,i.useState)([]),P=(0,eL.useFeedbackVariantsDeployStep)(),W=(0,eL.useShowCronJobsSummary)(),M=(0,ef.useChecksPrivateBetaFlag)(),D=(0,ef.useCiChecksAndPoliciesFlagV2)(),V=(0,d.useServerFlag)("enable-deployment-resources-page",!1),F=(0,e7.getGitInfoFromDeployment)(s),{steps:H,loading:U}=function(e){let[t,s]=(0,i.useState)([]),[n,a]=(0,i.useState)(!0),r=(0,i.useRef)(void 0),l=(0,i.useRef)([]),o=(0,i.useRef)(void 0),c=(0,i.useRef)(void 0);c.current=e;let d=e?.createdAt,u=e?.id,m=(0,i.useCallback)(e=>{let t=[...l.current,e];1e4===t.length&&(t[0].level="warning",t[0].text="Warning: You're seeing the last 10000 lines of logs. Any lines before that were automatically truncated."),l.current=t,s(l.current)},[]),p=u?(0,eV.API_DEPLOYMENT_EVENTS)(u):"";return(0,i.useEffect)(()=>{if(!u){s([]),l.current=[];return}a(!0),d!==r.current&&(r.current=d,s([]),l.current=[]);let e=new AbortController,t=e.signal;return o.current&&(o.current.abort(),s([]),l.current=[]),o.current=e,eH({url:p,onLog:m,onResponse:()=>a(!1),signal:t,deploymentRef:c}).catch(e=>{a(!1),e instanceof Error&&"AbortError"===e.name||(0,eD.captureError)(e,{attributes:{"extras.type":"Log Stream"}})}),()=>e.abort()},[m,d,u,p]),{steps:(0,i.useMemo)(()=>{let s=[];for(let n of t)if(!eO(n)){s[0]||s.push({finishedAt:null,logs:[],name:ed.Building,startedAt:e?.buildingAt??n.created});let t=s[0];switch(t.logs.push(n),e?.readyState){case"READY":case"ERROR":t.finishedAt=("readyStateAt"in e?e.readyStateAt:e.ready)??null;break;default:t.finishedAt=null}}return s},[e?.buildingAt,t,e,e?.ready,e?.readyStateAt,e?.readyState]),loading:n}}(s),[q,G]=(0,i.useState)(!1),[J,K]=(0,i.useState)(""),{data:Q}=function(e,t){let{since:s,projectId:n,deploymentId:a,comparisonId:r,refType:i,refValue:l}=e,o=(0,eZ.useTeamSlug)();return(0,eY.default)(()=>o&&a&&n?`/api/turborepo/run-summary${(0,ej.encode)({deploymentId:a,projectId:n,comparisonId:r,since:s,teamId:o,refType:i,refValue:l})}`:null,e=>(0,ey.fetchAPI)(e,{throwOnHTTPError:!0}),t)}({since:s?.createdAt,projectId:s?.projectId,deploymentId:s?.id,comparisonId:I.comparisonId,...eJ(s)},{keepPreviousData:!0});(0,i.useEffect)(()=>{w&&A({comparisonId:w.get("comparisonId")??void 0,selectedLine:w.get("line")??void 0})},[w]);let{data:X,isLoading:ee}=(0,eK.useDeployLogs)({deployment:s,throwOnHTTPError:!s?.public}),{data:et}=(0,eX.useMicrofrontendsConfig)({deploymentId:s?.microfrontends?s?.id:void 0}),{data:es}=(0,eQ.useFrameworks)(),en=function(e,t){if(!t?.framework)return;let s=e?.find(e=>e.slug===t.framework),n=s?.name||t.framework,a=s?.slug||void 0,r=s?.logo,i=s?.darkModeLogo;return{name:n,slug:a,logo:r||i,darkModeLogo:i||r,version:t.frameworkVersion}}(es,X||null),ea=H.length>=1;(0,i.useEffect)(()=>{f&&s?.readyState==="QUEUED"&&ea&&f({...s,readyState:"BUILDING"})},[f,s,ea]);let{areChecksRunning:er}=(0,B.getDeploymentStatus)(s),{checks:ei,mutate:el}=(0,$.default)({deploymentId:s?.id,teamId:n},{refreshInterval:2e3*!!er}),eo=ei.length>0,ec=((e,t)=>{if(t&&"running"===t.checksState||t?.checksState==="registered"&&t?.readyState==="READY")return em.InProgress;if(t&&"checksConclusion"in t)switch(t.checksConclusion){case"succeeded":case"skipped":return em.Complete;case"failed":return em.Error;default:return em.Pending}return t?.readyState==="READY"?e?em.Complete:em.Skipped:em.Pending})(eo,s),eu=(e=>{if(!e)return em.Pending;if(e.aliasError)return em.Error;if(e.aliasWarning)return em.Warning;if("READY"!==e.readyState||"running"===e.checksState||"registered"===e.checksState)return em.Pending;if(0===e.alias.filter(t=>!(e.automaticAliases||[]).includes(t)).length)return em.Skipped;if(e&&"checksConclusion"in e)switch(e.checksConclusion){case"succeeded":case"skipped":return em.Complete;default:return em.Pending}return e?.aliasAssigned?em.Complete:em.InProgress})(s),{checksFinishedAt:ep}=(0,tR.getChecksTimes)(ei,s),eh=s?.readyState==="QUEUED",eg=s?.readyState==="READY",ev=(0,eU.getFinishedState)(s),eb=!!s?.buildSkipped,e_=!eg,ek=ec!==em.Pending&&ec!==em.Skipped&&ec!==em.Complete||s?.readyState!=="READY"||er,ew=s&&("failed"===s.checksConclusion||er),eN=!s||eh,eS=C(x.Action.Read,x.Resource.Logs),eI=s?.flags,eA=s?.crons;(0,i.useEffect)(()=>{0===ei.length||Promise.all([...new Set(ei.map(e=>e.integrationId))].map(O.prefetchIntegration)).catch(console.error)},[ei,s?.id]);let eR=(0,i.useMemo)(()=>et?.config&&"applications"in et.config?et.config.applications:{},[et]),eB=Object.values(eR).find(e=>e.projectId===s?.projectId),eF=(0,i.useMemo)(()=>X?(0,tR.mapTechnicalPrimitivesToPlatformPrimitives)(Object.entries(X).filter(e=>{let[t,s]=e;return Array.isArray(s)&&s.length>0}).map(e=>{let[t,s]=e;return{type:t,artefacts:s}}),P?eI:void 0,W?eA:void 0,eB,eR,X.bulkRedirectsMetadata):[],[X,eI,P,eA,W,eB,eR]),e$=(0,i.useMemo)(()=>{let e=eF;return J&&(e=[eF.find(e=>{let{type:t}=e;return t===J})]),e.map(e=>({...e,artefacts:e.artefacts.sort((e,t)=>{if((0,t1.isMicrofrontendRoute)(e)&&(0,t1.isMicrofrontendRoute)(t))return e.appName===t.appName?e.path.localeCompare(t.path):e.appName?t.appName?e.appName.localeCompare(t.appName):1:-1;let s=(0,t1.isVariant)(e)?e.key:(0,t1.isMiddleware)(e)?e.rawMatchers?.[0]||e.matcher:(0,t1.isBulkRedirect)(e)?e.source:e.path,n=(0,t1.isVariant)(t)?t.key:(0,t1.isMiddleware)(t)?t.rawMatchers?.[0]||t.matcher:(0,t1.isBulkRedirect)(t)?t.source:t.path;return!s.includes("_next")&&n.includes("_next")?-1:s.includes("_next")&&!n.includes("_next")?1:s.localeCompare(n)})}))},[J,eF]);(0,i.useEffect)(()=>{if(!j.includes(Z)){let e=setTimeout(()=>{K("")},100);return()=>clearTimeout(e)}},[j]);let ez=H.find(e=>e.name===ed.Building),eq=void 0!==X&&e$.length>0;(0,i.useEffect)(()=>{(async()=>{await el()})().catch(e=>console.error(e))},[s?.readyState,el]);let e1=(0,i.useMemo)(()=>(e=>{let{deployStep:t,deployment:s,hasDeployData:n,hasFinished:a,logs:r,isLoading:i}=e;return s?.buildSkipped?em.Canceled:s?.readyState==="READY"?em.Complete:i?em.InProgress:t?s&&(!r||"error"in r)&&a&&n2(t,s)===em.Complete?em.NoData:s&&!n?n2(t,s)===em.Complete?(0,eU.getFinishedState)(s)?em.Complete:em.InProgress:em.Pending:em.Complete:em.Pending})({hasDeployData:eq,hasFinished:ev,logs:X||null,deployment:s,deployStep:ez,isLoading:ee}),[eq,ez,s,X,ev,ee]),{hash:e5}=(0,m.useHash)();e0(()=>{v&&tc.test(e5)&&!j.includes(n9[0])&&y([n9[0],...j])});let e2=(0,i.useCallback)(()=>{y([n9[0],...j])},[j,y]),e4=(0,i.useCallback)(()=>{y([Z,...j])},[j,y]),e9=()=>{S(!0),eE.analytics.track(eP.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_OPEN)},e8=async()=>{await S(null),eE.analytics.track(eP.AnalyticsEvent.TURBOREPO_RUN_SUMMARY_CLOSE)},e6=!ev||e1===em.Pending,te=(0,i.useMemo)(()=>j.filter(e=>e===Z?!e6:e===z?!e_:e!==Y||!ek),[ek,j,e_,e6]),{track:tt}=(0,eW.useTrackActivity)(),ts=!_&&!eS;return(0,a.jsxs)(r.Root,{className:tF.default.accordion,defaultValue:[],disabled:eb,onValueChange:e=>{(0,eT.awaitPaint)().then(()=>{e.includes(z)&&!j.includes(z)&&eE.analytics.track(eP.AnalyticsEvent.DEPLOYMENT_CHECK_STEP_CLICKED,{source:t?"project creation flow":"deployment view"}),!e.includes(Z)&&j.includes(Z)&&T([]),e.includes(Z)&&!j.includes(Z)&&tt(eM.VercelActivityAction.DeploymentOverviewSummaryClick,{}),y(e)})},type:"multiple",value:te,children:[eN?(0,a.jsx)(nR,{shimmer:!t}):(0,a.jsxs)(a.Fragment,{children:[s.integrations?(0,a.jsx)(nF,{deployment:s}):null,H.map(e=>{let n=n2(e,s),r=e.logs,i=n===em.InProgress?r.at(-1):void 0;return(0,a.jsx)(ex,{action:(0,a.jsxs)(a.Fragment,{children:[j.includes(e.name)?null:(0,a.jsx)(tg,{logs:r,className:"pr-2",onClick:e2}),(0,a.jsx)(nw,{className:"flex-none",isEnabled:!!Q?.baseline,onClick:e9})]}),finishedAt:X?.deployStepStart||!ee?((e,t)=>{if(e.finishedAt)return e.finishedAt;let s="CANCELED"===t.readyState||"ERROR"===t.readyState;if(e.logs.length&&s)return e.logs[e.logs.length-1].created})(e,s):void 0,id:e.name,name:e.name===ed.Building?(0,a.jsx)(e3,{creationFlow:t,label:n5(e.name),latestLog:i}):n5(e.name),paddingType:"none",startedAt:ee?void 0:e.startedAt,status:n,children:ts?(0,a.jsx)(n1.AdditionalPermissionsRequired,{team:k?.team??null,resource:"build logs"}):(0,a.jsx)(tM,{context:b,enableLineHighlighting:v,isLoading:U,logs:r,startedAt:Math.min(r.at(0)?.created||s.buildingAt,s.buildingAt),status:n})},e.name)}),n4.slice(H.length).map(e=>{let t=n2({name:e,placeholder:!0},s);return(0,a.jsx)(ex,{id:e,name:n5(e),paddingType:"none",status:ts?em.MissingPermissions:t,disabled:ts,children:ts?(0,a.jsx)(n1.AdditionalPermissionsRequired,{team:k?.team??null,resource:"build logs"}):(0,a.jsx)(tM,{context:b,isLoading:!0,logs:[],startedAt:s.createdAt,status:t})},e)}),(0,a.jsx)(ex,{action:eq&&e1===em.Complete?(0,a.jsxs)(a.Fragment,{children:[j.includes(Z)?null:(0,a.jsx)(sz,{onClick:e4}),V?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.DashboardButtonLink,{className:"md:hidden",route:"/[teamSlug]/[project]/[id]/resources",shape:"square",size:"small",svgOnly:!0,type:"secondary",children:(0,a.jsx)(o.ListFilter,{color:"gray-900"})}),(0,a.jsx)(L.DashboardButtonLink,{className:"hidden md:flex",prefix:(0,a.jsx)(o.ListFilter,{color:"gray-900"}),route:"/[teamSlug]/[project]/[id]/resources",size:"small",type:"secondary",children:"Resources"})]}):(0,a.jsx)(s5,{active:J,items:[{name:(0,a.jsx)("span",{className:(0,l.clsx)(tK.default.tooltip,{[tK.default.closedAll]:!open}),children:"All"}),value:"",buttonProps:{"aria-label":"All"}},...eF.map(e=>{let{type:t,artefacts:s,count:n}=e,{icon:r,name:i}=sK(t),l=[i,[t===t1.ArtefactTypes.IncrementalStaticRegeneration?"ISR":void 0,t===t1.ArtefactTypes.PartialPrerender?"PPR":void 0,t===t1.ArtefactTypes.EdgeMiddleware?void 0:t===t1.ArtefactTypes.BulkRedirects&&s.length>0&&(0,t1.isBulkRedirect)(s[0])?n?.toLocaleString():void 0].filter(Boolean).join("")].filter(Boolean).join(" ");return{name:(0,a.jsxs)("span",{className:tK.default.iconLabel,children:[r,t!==t1.ArtefactTypes.EdgeMiddleware&&(t===t1.ArtefactTypes.BulkRedirects&&s.length>0&&(0,t1.isBulkRedirect)(s[0])?n?.toLocaleString():void 0)]}),value:t,tooltip:i,buttonProps:{"aria-label":l}}})],onChange:(e,t)=>{j.includes(Z)&&t.stopPropagation(),K(e),T([e])},open:j.includes(Z)})]}):void 0,customDuration:X?.deployStepTime,disabled:e6,id:Z,name:Z,paddingType:"none",status:e1,children:eq?(0,a.jsx)(s0,{artefactGroups:e$,deployment:s,filterArtefactsBy:J,framework:en,selectedArtefacts:R,setSelectedArtefacts:T}):(0,a.jsx)("div",{className:tF.default.noData,children:(0,a.jsx)("p",{className:"text-copy-14 text-gray-900",children:(0,a.jsxs)(a.Fragment,{children:["This deployment does not have a deployment summary."," ",(0,a.jsx)(u.Link,{external:!0,href:"https://vercel.com/docs/deployments#deployment-summary",target:"_blank",type:"highlight",children:"Learn more"})]})})})}),F&&s?M||D?(0,a.jsx)(eC,{expandedSteps:j,deployment:s,teamSlug:n,onExpandedStepsChange:y}):(0,a.jsx)(nX,{expandedSteps:j,checks:ei,deployment:s,mutateDeployment:f,mutate:el,teamSlug:n}):null,(0,a.jsx)(tJ,{deployment:s,disabled:ek,finishedAt:ek?void 0:s.aliasAssignedAt,id:Y,name:"Assigning Custom Domains",onComplete:g,startedAt:ek?void 0:eo&&ep?ep:ez?.finishedAt||void 0,status:eu})]}),s&&ew?(0,a.jsx)(eG,{active:q,deployment:s,mutateDeployment:f,onClose:()=>G(!1)}):null,Q&&s&&N?(0,a.jsx)(p.CodeCompareProvider,{children:(0,a.jsx)(nA,{active:N,baseline:Q.baseline,comparison:Q.other||Q.previous,deployment:s,initialLine:I.selectedLine,onClose:e8,previous:Q.previous})}):void 0]},s?.id)},"STEPS",0,n9],7442785),e.s([],5224197),e.s(["useExpandedSteps",0,function(e){let[t,s]=(0,i.useState)([]),n=e?.readyState==="ERROR",a=!!e?.buildSkipped;return(0,i.useEffect)(()=>{!a&&n&&(0,i.startTransition)(()=>{s([n9[0]])})},[n,a]),{expandedSteps:t,setExpandedSteps:s}}],855127)}]);

//# debugId=d47a76ca-f52b-8939-810d-73e9a876f82e
//# sourceMappingURL=098260a65b5a4fc1.js.map