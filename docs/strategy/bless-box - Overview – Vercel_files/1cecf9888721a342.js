;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="58856e51-850d-f332-753e-8dd73be6eb82")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3938505,e=>{"use strict";var t=e.i(847684),s=e.i(57106),r=e.i(2504781),o=e.i(6198010),i=e.i(7185353),c=e.i(4325157),n=e.i(7609806),a=e.i(1282571);function l(e){let{size:s=24,limit:r=3}=e,{data:o}=(0,c.useMarketplaceIntegrations)({protocolType:"checks"});if(!o||0===o.length)return null;let i=o.map(e=>({uid:e.id,component:(0,t.jsx)(a.MarketplaceIntegrationCardIcon,{icon:e.icon,name:e.name,size:s})}));return(0,t.jsx)(n.AvatarGroup,{members:i,size:s,limit:r})}e.i(3092247);var d=e.i(397510);e.i(3182268);var u=e.i(7849855),h=e.i(5074599);e.i(5463680);var p=e.i(6356390);e.i(7037808);var m=e.i(7137779),x=e.i(8824424);e.i(8564753);var g=e.i(9584471);e.i(6887680);var f=e.i(1414602);e.i(553769);var j=e.i(3758860),k=e.i(8711152),y=e.i(1017032),b=e.i(6060673),C=e.i(9668517),v=e.i(4245131),S=e.i(6891161);e.i(8703064);var w=e.i(6798946);function N(e){return(0,t.jsx)("div",{className:"flex flex-col gap-2",children:e.availableProducts.map(s=>{let{product:r,integration:o}=s;return(0,t.jsx)(w.CreateResourceCard,{description:r.shortDescription,icon:{url:r.iconUrl},isDisabled:!e.canCreateResource,isSelected:!!(e.selectedProductOrResource&&"product"===e.selectedProductOrResource.type&&e.selectedProductOrResource.value.product.id===r.id),name:r.name,onClick:()=>{e.setStep({step:"select",productOrResource:{value:{product:r,integration:o},type:"product"}})},showCreateButton:!1,tooltip:{isEnabled:!e.canCreateResource,text:"You do not have permission to create a Checks product."}},r.id)})})}var I=e.i(7218483);function P(e){let{Badge:s,resource:r,isSelected:o,onSelect:i,isDisabled:c,tooltip:n}=e,a=(0,I.useAgo)(r.createdAt,{formatYearsWeeksMonths:!0});return(0,t.jsx)(w.CreateResourceCard,{Badge:s,RightAction:(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:[(0,t.jsx)("span",{className:"geist-hide-on-mobile",children:"Created "}),a]}),description:r.product.name,icon:{url:r.product.iconUrl},isDisabled:c,isSelected:o,name:r.name,onClick:i,showCreateButton:!1,tooltip:n})}function _(e){return(0,t.jsx)("div",{className:"flex flex-col gap-2",children:e.resources.map(s=>(0,t.jsx)(P,{isDisabled:!e.canUpdateResource,isSelected:!!(e.selectedProductOrResource&&"resource"===e.selectedProductOrResource.type&&e.selectedProductOrResource.value.id===s.id),onSelect:()=>{e.setStep({step:"select",productOrResource:{value:s,type:"resource"}})},resource:s,tooltip:{isEnabled:!e.canUpdateResource,text:"You do not have permission to update a Checks product."}},s.id))})}let R="Add Checks";function B(e){let{active:s,availableList:r,onClose:o}=e,[c,n]=(0,i.useState)({step:"select",productOrResource:null}),a=()=>{n({step:"select",productOrResource:null}),o()};return(0,t.jsx)(S.Modal.Modal,{active:s,onClickOutside:a,children:(0,t.jsx)(T,{availableList:r,modalState:[c,n],onResetStateAndClose:a,onResetState:()=>{n({step:"select",productOrResource:null})}})})}function T(e){let{availableList:s,modalState:r,onResetStateAndClose:o,onResetState:c}=e,{data:n}=(0,y.useConfigurations)({type:"provisioning",skipBillingData:!0}),{mutateResourceListAndProject:a}=(0,g.useMutateResourceCache)(),[l,w]=r,{resources:I,availableProducts:P}=s,{permissions:B}=(0,f.useResourcePermissions)(),{projectSlug:T,hasProject:O}=(0,u.useProjectSlug)(),E=(0,C.useTeamSlug)(),{data:A}=(0,b.useProject)(T),[$,L]=(0,i.useState)(null),F=(O?A:$)??null;if(!E)return null;switch(l.step){case"select":{let{productOrResource:e}=l,s=e?.type==="resource"&&(0,j.isConnectedToProject)(T)(e.value);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:(0,t.jsx)(S.Modal.Title,{center:!0,children:R})}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[I&&I.length>0?(0,t.jsx)(v.Description,{content:(0,t.jsx)(_,{resources:I,selectedProductOrResource:l.productOrResource,canUpdateResource:B.update,projectSlug:T,setStep:w}),title:"Installed Checks"}):null,P&&P.length>0?(0,t.jsx)(v.Description,{content:(0,t.jsx)(N,{availableProducts:P,selectedProductOrResource:l.productOrResource,canCreateResource:B.create,setStep:w}),title:"Available Providers"}):null]})})]})}),(0,t.jsxs)(S.Modal.Actions,{children:[(0,t.jsx)(S.Modal.Action,{onClick:o,type:"secondary",children:"Cancel"}),s?(0,t.jsx)(d.OpenInPartnerDashboardButton,{buttonVariant:"secondary",componentType:"button",integrationConfigurationId:e.value.product.integrationConfigurationId,onClick:o,label:"Configure",productId:e.value.product.id,externalResourceId:e.value.externalResourceId,size:"medium",teamIdOrSlug:e.value.ownerId,projectId:F?.id}):(0,t.jsx)(S.Modal.Action,{buttonType:"button",disabled:!e,onClick:()=>{e&&w({step:"create",productOrResource:e})},type:"secondary",children:"Continue"})]})]})}case"create":{let{productOrResource:e}=l;switch(e.type){case"product":{let{integration:s,product:r}=e.value;return(0,t.jsx)(p.CreateResourceModal,{cancelLabel:"Back",initialConfigurationStatus:(0,k.getConfigurationStatusByIntegrationId)(n,s.id),integration:s,onBack:c,onIntegrationResourceCreate:e=>{w({step:"create",productOrResource:{type:"resource",value:e}})},product:(0,j.getProductWithSupportedProtocols)(r),teamSlug:E})}case"resource":{let s=e.value;return(0,t.jsx)(m.CreateResourceConnectionModalStep,{ProjectSelector:T?void 0:(0,t.jsx)(x.ResourceProjectSelector,{account:E,allowSelectConnectedProjects:(0,j.isProtocolSupported)(s.product,"checks"),connectedProjectIds:s.projectsMetadata.map(e=>e.projectId),onProjectSelected:e=>{L(e)},resource:s,resourceTitle:(0,h.getResourceTitleByResource)(s),selectedProject:F}),backOrCancelLabel:"Back",onBack:c,onClickOutside:o,onConnectionCreated:()=>{T&&a(T,"checks")},project:O?A:F,resourceId:s.id,store:s,title:O?`${R} to ${F?.name}`:R})}default:return null}}}}e.s(["InstallChecksButton",0,function(e){let{availableList:c,showLearnMoreLink:n=!0,showPlusSuffix:a=!0}=e,[d,u]=(0,i.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,t.jsx)(r.Button,{onClick:()=>u(!0),typeName:"button",loading:!c.isReady,disabled:!c.isChecksAvailable,type:"secondary",size:"small",prefix:(0,t.jsx)(l,{}),suffix:a?(0,t.jsx)(o.Plus,{}):void 0,children:c.isReady&&!c.isChecksAvailable?"Checks unavailable":"Install Checks Provider"}),n?(0,t.jsx)(s.Link,{href:"/docs/checks",external:!0,children:"Learn more about checks"}):null]}),(0,t.jsx)(B,{active:d,availableList:c,onClose:()=>u(!1)})]})}],3938505)},847180,e=>{"use strict";var t=e.i(4603164),s=e.i(4005781),r=e.i(277234),o=e.i(8042625);e.s(["useDeleteProjectCheck",0,function(e){let{teamId:t,projectId:i,checkId:c}=e;return(0,s.default)(`/v2/projects/${i}/checks/${c}`,async e=>{await (0,r.fetchAPI)(`${e}${(0,o.encode)({teamId:t})}`,{method:"DELETE",throwOnHTTPError:!0})})},"useProjectChecks",0,function(e){let{teamId:s,projectId:r,blocks:o,enableCiChecksAndPolicies:i}=e,c=(0,t.useTypedSWR)("/v2/projects/{projectIdOrName}/checks",i&&s&&r?{teamId:s,projectIdOrName:r}:null);return{...c,data:c.data?{checks:o?c.data.checks.filter(e=>e.blocks===o):c.data.checks}:void 0}},"useSkipCheckRun",0,function(e){let{teamId:t,deploymentId:i,checkRunId:c,onSuccess:n}=e;return(0,s.default)(`/v2/deployments/${i}/check-runs/${c}`,async e=>{let s=await (0,r.fetchAPI)(`${e}${(0,o.encode)({teamId:t})}`,{method:"PATCH",body:JSON.stringify({status:"completed",conclusion:"skipped"}),throwOnHTTPError:!0});return n?.(),s})},"useSkipCheckV1",0,function(e){let{teamId:t,deploymentId:i,checkId:c,onSuccess:n}=e;return(0,s.default)(`/v1/deployments/${i}/checks/${c}/skip`,async e=>{let s=await (0,r.fetchAPI)(`${e}${(0,o.encode)({teamId:t})}`,{method:"POST",throwOnHTTPError:!0});return n?.(),s})},"useUpdateProjectCheckBlockingStatus",0,function(e){let{teamId:t,projectId:i,checkId:c}=e;return(0,s.default)(`/v2/projects/${i}/checks/${c}`,async(e,s)=>{let{arg:{blocking:i}}=s;return await (0,r.fetchAPI)(`${e}${(0,o.encode)({teamId:t})}`,{method:"PATCH",body:JSON.stringify({blocks:i?"deployment-alias":"none"}),throwOnHTTPError:!0})})}])},5838262,9099168,e=>{"use strict";var t=e.i(847684),s=e.i(3938505),r=e.i(2504781),o=e.i(5468328),i=e.i(7185353),c=e.i(6198010),n=e.i(5255926),a=e.i(1848296),l=e.i(6891161),d=e.i(5806401),u=e.i(6352514),h=e.i(4759942),p=e.i(7674801),m=e.i(6942035),x=e.i(109803),g=e.i(8238875),f=e.i(6060673),j=e.i(847180),k=e.i(277234),y=e.i(5338940),b=e.i(4005781),C=e.i(472117),v=e.i(4325157),S=e.i(6143247),w=e.i(4597921),N=e.i(1282571),I=e.i(3869281),P=e.i(8161149),_=e.i(3500331),R=e.i(3306538),B=e.i(5838627),T=e.i(2753950),O=e.i(4788623),E=e.i(7087273),A=e.i(1906681),$=e.i(8522580),L=e.i(455575),F=e.i(57106),M=e.i(818351),z=e.i(2686817);let H="vercel/repository-dispatch/actions/status@v1",D=e=>`Vercel - ${e||"{projectName}"}: `,U=e=>{let{workflowDirectoryUrl:s}=e,{project:r}=(0,g.useParams)()??{},[o,c]=(0,i.useState)(""),n="lint",a=D(r),l=`- name: 'notify vercel'
  uses: '${H}'
  with:
    name: ${a}${o||n}`;return(0,t.jsxs)("section",{className:"flex flex-col gap-y-6 pb-6",children:[(0,t.jsx)(_.Input,{id:"check-name",label:"Check Name",placeholder:`ex. ${n}`,className:"w-full",value:o,onChange:e=>c(e.target.value)}),(0,t.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,t.jsxs)("p",{className:"text-label-14 text-gray-900",children:["Add this snippet to a"," ",s?(0,t.jsx)(F.Link,{external:!0,href:s,type:"highlight",children:"GitHub Actions workflow"}):"GitHub Actions workflow"," ","to automatically update workflow checks as deployment checks."]}),(0,t.jsx)(B.CodeBlock,{"aria-label":"GitHub Actions workflow snippet",language:"yaml",className:"my-0",trackCopy:()=>{h.analytics.track(u.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_import_github_modal_copy_snippet",click_value:"Clicked on code copy snippet in import github sheet"})},children:l})]})]})},G=e=>{let{check:s}=e,r=s.sha.slice(0,7),o=(0,t.jsx)(R.Badge,{capitalize:!1,size:"sm",variant:"gray-subtle",children:(0,t.jsx)("code",{children:r})});return s.url?(0,t.jsx)(F.Link,{href:s.url,target:"_blank",rel:"noopener noreferrer",children:o}):o};function V(e){let{projectInfo:s,teamSlug:o,checkedItems:c,setCheckedItems:a,isCheckAlreadyPresent:l,onBack:m,onClose:x,trigger:f,refetchChecks:j,isMutating:y,isOpen:b}=e,{project:C}=(0,g.useParams)()??{},[v,w]=(0,i.useState)(""),[N,R]=(0,i.useState)(""),[B,V]=(0,i.useState)(""),[q,K]=(0,i.useState)(!1),W=(0,L.useToasts)();(0,i.useEffect)(()=>{let e=setTimeout(()=>{V(N)},300);return()=>clearTimeout(e)},[N]);let{data:Y,error:J,isLoading:Q}=function(e){let{projectId:t,teamId:s,ref:r,shouldFetch:o=!0}=e,i=`/v1/integrations/${t}/recommended/checks`,c=new URLSearchParams({teamId:s});r&&c.set("ref",r);let n=(0,z.swrRequest)(`${i}?${c.toString()}`);return(0,M.useIsomorphicSWR)(t&&o?n:null,async e=>await (0,k.fetchAPI)(e,{throwOnHTTPError:!0}))}({projectId:s?.id??"",teamId:o??"",shouldFetch:b,ref:B});(0,i.useEffect)(()=>{q&&h.analytics.track(u.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_import_github_modal_show_all_checks",click_value:"Clicked on show all checks in import github sheet"})},[q]);let X=D(C),Z=Y?.recent.filter(e=>{let t=e.name.toLowerCase().includes(v.toLowerCase()),s=e.name.startsWith(X),r=l(e.name);return t&&(q||s||r)}).sort((e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()))??[],ee=Z.filter(e=>!l(e.name)),et=ee.length>0&&ee.every(e=>c[e.name]),es=ee.length>0,er=async()=>{try{await f(),await j(),a({}),W.success("New deployment checks will take effect on your next production deployment."),h.analytics.track(u.AnalyticsEvent.PROMOTION_REQUIREMENTS_CHECKS_ADDED,{numberOfChecks:Object.values(c).filter(Boolean).length,teamId:o,projectId:s?.id,foundBySearchingWithCustomSha:""!==B}),x()}catch(e){W.error(e.message||"Failed to add checks. Please try again.")}},eo=()=>{a({}),m()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(O.CollapseGroup,{children:[(0,t.jsx)(T.Collapse,{title:"Send workflow updates to Vercel",size:"small",className:"[&_[role='region']>div]:overflow-y-clip [&_[role='region']]:overflow-y-clip",defaultExpanded:!es,children:(0,t.jsx)(U,{workflowDirectoryUrl:(e=>{if(e&&"github"===e.type&&e.org&&e.repo&&e.productionBranch)return`https://github.com/${e.org}/${e.repo}/tree/${e.productionBranch}/.github/workflows`})(s?.link)})}),(0,t.jsx)(T.Collapse,{title:"Select checks to add",size:"small",className:"[&_[role='region']>div]:overflow-y-clip [&_[role='region']]:overflow-y-clip",defaultExpanded:es,children:(0,t.jsx)("div",{className:"flex flex-col gap-y-6 pb-6",children:(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-3 sm:gap-6",children:[(0,t.jsx)(_.Input,{id:"ref-sha",bypassCasing:!0,label:"Enter a GitHub SHA",placeholder:"ex. d94b5f7",value:N,onChange:e=>R(e.target.value),className:"w-full"}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-4 md:flex-row md:items-center [&>:first-child]:flex-1",children:[(0,t.jsx)(_.Input,{id:"search-checks",bypassCasing:!0,placeholder:"Search...",label:"Search for GitHub Checks",value:v,onChange:e=>w(e.target.value),className:"w-full"}),(0,t.jsx)(I.Checkbox,{checked:et,onChange:()=>{let e=!et;a(t=>{let s={...t};return Z.forEach(t=>{l(t.name)||(s[t.name]=e)}),s})},label:"â€‹",children:"Select all"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-copy-13 text-gray-900",children:"Import the Following Checks"}),Y?.recent?.length&&(0,t.jsx)(A.Toggle,{checked:q,onChange:K,children:"Show all checks"})]}),q?(0,t.jsxs)($.Note,{type:"warning",children:["To trigger checks via"," ",(0,t.jsx)(F.Link,{external:!0,href:"https://docs.github.com/en/actions/reference/workflows-and-actions/events-that-trigger-workflows#repository_dispatch",children:(0,t.jsx)("code",{children:"repository_dispatch"})}),", use the ",(0,t.jsx)("code",{children:H})," action to notify Vercel."," ",(0,t.jsx)(F.Link,{href:"/docs/checks/promotion-requirements#limitations",children:"Learn more"}),"."]}):null,(()=>{if(Q)return(0,t.jsx)(n.Skeleton,{className:"h-[359px]",width:"100%"});if(J)return(0,t.jsx)(P.EmptyState.Root,{className:"h-[359px]",icon:(0,t.jsx)(P.EmptyState.Icon,{icon:(0,t.jsx)(p.LogoGithub,{size:32})}),title:"not_connected"===J.code?"GitHub connection required":"Unable to load checks",description:J.message||"Failed to load checks. Please try again",children:J.link?(0,t.jsx)(F.Link,{external:!0,href:J.link,type:"blend",children:J.action??"Learn More"}):null});if(0===Z.length){if(v)return(0,t.jsx)(P.EmptyState.Root,{className:"h-[359px]",title:(0,t.jsxs)(t.Fragment,{children:['No checks found for "',v,'"']}),description:"Try adjusting your search terms or clearing the search to see all checks.",children:(0,t.jsx)(r.Button,{type:"secondary",size:"small",onClick:()=>w(""),children:"Clear search"})});let e=!!Y?.recent?.length;return(0,t.jsx)(P.EmptyState.Root,{className:"h-[359px]",icon:(0,t.jsx)(P.EmptyState.Icon,{icon:(0,t.jsx)(p.LogoGithub,{size:32})}),title:N?(0,t.jsxs)(t.Fragment,{children:["No",e?" configured":""," checks found for commit ",(0,t.jsx)("code",{children:N})]}):`No${e?" configured":""} checks found`,description:N?`This commit may not have any commit checks${e?" configured for Vercel":""}, or they may not have completed yet.`:`No checks${e?" configured for Vercel":""} were found for the latest commit on the default branch. Try entering a specific commit SHA that has CI checks.`,children:(0,t.jsx)(F.Link,{href:"https://vercel.com/docs/checks/requirements",target:"_blank",rel:"noopener noreferrer",children:"Learn more about checks"})})}return(0,t.jsx)(E.Scroller,{height:359,overflow:"y",width:"100%",children:(0,t.jsx)("div",{className:"flex flex-col gap-y-4",children:Z.map(e=>{let s=l(e.name),r=!s;return(0,t.jsxs)(I.Checkbox,{className:"text-[16px]",checked:c[e.name]||s,onChange:()=>{var t;l(t=e.name)||(h.analytics.track(u.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_import_github_modal_select_check",click_value:`Clicked to select "${t}"`}),a(e=>({...e,[t]:!e[t]})))},disabled:s,children:[(0,t.jsx)("span",{className:(0,S.cn)({"text-gray-500":s,"mr-2":r}),children:e.name}),r?(0,t.jsx)(G,{check:e}):null]},e.name)})})})})()]})})})]}),(0,t.jsxs)(d.SheetFooter,{className:"flex justify-between gap-4 sm:mt-6 sm:hidden sm:justify-between",children:[(0,t.jsx)(r.Button,{onClick:eo,size:"small",type:"secondary",children:"Back"}),(0,t.jsx)(r.Button,{size:"small",onClick:er,disabled:0===Object.entries(c).filter(e=>{let[t,s]=e;return s&&!l(t)}).length||y,children:y?"Adding...":"Add"})]}),(0,t.jsxs)(d.SheetFooter,{className:"mt-auto bg-background-200 hidden sm:flex sm:justify-between border-t border-solid border-gray-alpha-400 gap-4 px-6 py-4 -mx-6 -mb-6 rounded-b-md sticky bottom-3",children:[(0,t.jsx)(r.Button,{onClick:eo,type:"secondary",children:"Back"}),(0,t.jsx)(r.Button,{onClick:er,disabled:0===Object.entries(c).filter(e=>{let[t,s]=e;return s&&!l(t)}).length||y,children:y?"Adding...":"Add"})]})]})}var q=e.i(9957872);e.i(6887680);var K=e.i(6810699),W=e.i(3584802);e.i(8703064);var Y=e.i(648779);e.i(553769);var J=e.i(3758860),Q=e.i(397510);function X(e,t){if(t)return e.projectsMetadata.find(e=>e.name===t)}function Z(e){let s,c,{integration:a,teamSlug:l,projectSlug:u,onBack:h,onClose:p,onShowConnectionModal:m}=e,[g,j]=(0,i.useState)(""),{data:k}=(0,f.useProject)(u||void 0),{data:y,hasResources:b,isReady:C}=(0,K.useResourceList)({integrationIdOrSlug:a.slug,teamSlug:l}),v=(0,i.useMemo)(()=>y?.stores?y.stores.filter(e=>(0,J.isProtocolSupported)(e.product,"checks")):[],[y]),S=()=>{h()},w=()=>{g&&m(g)},N=v.find(e=>e.id===g),I=N&&(s=X(N,u),!!s?.id),_=N&&(c=X(N,u),c?.id);return C?b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex flex-col gap-4",children:(0,t.jsx)(q.ChoiceboxGroup,{type:"radio",label:"Select resource",direction:"row",value:g,onChange:e=>{j(e)},className:"[&>ul]:grid [&>ul]:grid-cols-2 [&>ul]:gap-3 [&_label>div>span:first-child]:overflow-hidden [&_label>div>span:first-child>span]:overflow-hidden",children:v.map(e=>(0,t.jsx)(q.ChoiceboxGroup.Item,{value:e.id,title:(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,t.jsx)("div",{className:"shrink-0",children:(0,t.jsx)(Y.ProductIcon,{icon:e.product.iconUrl,size:"large"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1 overflow-hidden",children:[(0,t.jsx)(o.Tooltip,{text:e.name,className:"block truncate",children:(0,t.jsx)("span",{className:"truncate text-sm font-medium block",children:e.name})}),(0,t.jsxs)("div",{className:"truncate text-sm text-gray-600",title:`${e.product.name}${e.billingPlan?.name?` - ${e.billingPlan.name}`:""}`,children:[e.product.name,e.billingPlan?.name?` - ${e.billingPlan.name}`:""]})]})]})},e.id))})}),(0,t.jsxs)(d.SheetFooter,{className:"flex justify-between gap-4 sm:mt-6 sm:hidden sm:justify-between",children:[(0,t.jsx)(r.Button,{onClick:S,size:"small",type:"secondary",children:"Back"}),N&&(I?(0,t.jsx)(Q.OpenInPartnerDashboardButton,{label:"Configure",componentType:"button",buttonVariant:"secondary",integrationConfigurationId:N.product.integrationConfigurationId,teamIdOrSlug:l,projectId:k?.id,productId:N.product.id,externalResourceId:N.externalResourceId,checkId:_,size:"small",onClick:()=>p()}):(0,t.jsx)(r.Button,{size:"small",onClick:w,children:"Connect"}))]}),(0,t.jsxs)(d.SheetFooter,{className:"mt-auto bg-background-200 hidden sm:flex sm:justify-between border-t border-solid border-gray-alpha-400 gap-4 px-6 py-4 -mx-6 -mb-6 rounded-b-md sticky bottom-3",children:[(0,t.jsx)(r.Button,{onClick:S,type:"secondary",children:"Back"}),N&&(I?(0,t.jsx)(Q.OpenInPartnerDashboardButton,{label:"Configure",componentType:"button",buttonVariant:"secondary",integrationConfigurationId:N.product.integrationConfigurationId,teamIdOrSlug:l,projectId:k?.id,productId:N.product.id,externalResourceId:N.externalResourceId,checkId:_,size:"medium",onClick:()=>p()}):(0,t.jsx)(r.Button,{onClick:w,children:"Connect"}))]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.EmptyState.Root,{className:"h-[400px]",title:`No ${a.name} resources`,description:`Install ${a.name} to add checks to your project.`,children:(0,t.jsx)(r.Button,{onClick:()=>{let e=a.products?.find(e=>e.protocols?.checks);if(e){let t=(0,W.getIntegrationCheckoutUrl)({params:{teamSlug:l,integrationSlug:a.slug},searchParams:{productSlug:e.slug,projectSlug:u||void 0,cancelUrl:window.location.href}});window.open(t,"_blank")}},prefix:(0,t.jsx)(x.External,{}),children:"Install"})}),(0,t.jsx)(d.SheetFooter,{className:"flex justify-between gap-4 sm:mt-6 sm:hidden sm:justify-between",children:(0,t.jsx)(r.Button,{onClick:S,size:"small",type:"secondary",children:"Back"})}),(0,t.jsx)(d.SheetFooter,{className:"mt-auto bg-background-200 hidden sm:flex sm:justify-between border-t border-solid border-gray-alpha-400 gap-4 px-6 py-4 -mx-6 -mb-6 rounded-b-md sticky bottom-3",children:(0,t.jsx)(r.Button,{onClick:S,type:"secondary",children:"Back"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(n.Skeleton,{height:100,width:"100%"}),(0,t.jsx)(n.Skeleton,{height:100,width:"100%"})]}),(0,t.jsx)(d.SheetFooter,{className:"flex justify-between gap-4 sm:mt-6 sm:hidden sm:justify-between",children:(0,t.jsx)(r.Button,{onClick:S,size:"small",type:"secondary",children:"Back"})}),(0,t.jsx)(d.SheetFooter,{className:"mt-auto bg-background-200 hidden sm:flex sm:justify-between border-t border-solid border-gray-alpha-400 gap-4 px-6 py-4 -mx-6 -mb-6 rounded-b-md sticky bottom-3",children:(0,t.jsx)(r.Button,{onClick:S,type:"secondary",children:"Back"})})]})}var ee=e.i(7137779);let et=e=>{let{value:s,icon:r,className:o,title:i,description:c,disabled:n}=e,{component:l}=(0,a.useRadio)({value:s,disabled:n??!1});return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("label",{className:(0,S.cn)("last-of-type:rounded-b-md first-of-type:rounded-t-md first-of-type:border-t last-of-type:border-b border-x flex items-center gap-x-4 p-4",{"hover:cursor-not-allowed opacity-50":n,"hover:cursor-pointer hover:bg-background-200":!n},o),children:[r,(0,t.jsxs)("div",{className:"flex items-center justify-between w-full gap-x-2",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,t.jsx)("span",{className:"text-label-14 font-medium",children:i}),c?(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:c}):null]}),l]})]})})},es=e=>{let{selectedProvider:s,onProviderChange:r,isProjectLoading:o,isProjectLinkedToGitHub:i,enableIntegrationsInAddCheck:c}=e,{data:l,isLoading:d,error:u}=(0,v.useMarketplaceIntegrations)({protocolType:"checks"}),h=o||!i;return u?(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"text-heading-16 font-medium",children:"Select Checks Provider"}),(0,t.jsx)("p",{className:"text-gray-900",children:"Error loading integrations. Please try again."})]}):d||!l?(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"text-heading-16 font-medium",children:"Select Checks Provider"}),(0,t.jsx)(n.Skeleton,{className:"h-[80px]",width:"100%"})]}):(0,t.jsx)("section",{className:"flex flex-col gap-y-4",children:(0,t.jsxs)(a.RadioGroup,{value:s,onChange:r,disabled:h,children:[(0,t.jsx)("h3",{className:"text-heading-16 font-medium mb-3",children:"Import from GitHub"}),(0,t.jsx)(et,{value:"github",className:"border rounded-md",title:"GitHub",disabled:h,description:i?"Import GitHub checks to require before a deployment can be promoted to production.":"Project is not linked to a GitHub repository.",icon:(0,t.jsx)(p.LogoGithub,{size:32})}),c&&l.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:"text-heading-16 font-medium mb-3 mt-4",children:"Native Integrations"}),(0,t.jsx)("div",{className:"flex flex-col divide-y",children:l.filter(e=>{let t=e.products.find(e=>e.protocols?.checks);return t&&"checks"===(0,J.getPrimaryProtocolByProduct)(t)}).map(e=>{let s=e.products.find(e=>e.protocols?.checks);return(0,t.jsx)(et,{value:e.slug,icon:e.icon?(0,t.jsx)(N.MarketplaceIntegrationCardIcon,{icon:e.icon,name:e.name,size:32}):null,title:e.name,description:e.shortDescription||s?.shortDescription},e.slug)})})]})]})})};function er(e){let{isOpen:s,onClose:o}=e,{project:c,teamSlug:n}=(0,g.useParams)()??{},a=(0,C.useChecksPrivateBetaFlag)(),p=(0,C.useCiChecksAndPoliciesFlagV2)(),S=(0,w.useServerFlag)("enable-integrations-in-add-check",!1),{data:N}=(0,v.useMarketplaceIntegrations)({protocolType:"checks"}),{data:I,mutate:P}=(0,j.useProjectChecks)({teamId:n??"",projectId:c??"",enableCiChecksAndPolicies:a||p}),[_,R]=(0,i.useState)("select-provider"),[B,T]=(0,i.useState)(""),[O,E]=(0,i.useState)(!1),[A,$]=(0,i.useState)(null),L=N?.find(e=>e.slug===B),{data:F}=(0,K.useResourceList)({integrationIdOrSlug:B||"",teamSlug:n??""}),M=(F?.stores?.length??0)>0,z=S&&B&&"github"!==B&&!M,[H,D]=(0,i.useState)(()=>{let e={};return I?.checks.forEach(t=>{"git-provider"===t.source.kind&&t.source.externalCheckName&&(e[t.source.externalCheckName]=!0)}),e}),{data:U,isLoading:G}=(0,f.useProject)(c),q=e=>I?.checks.some(t=>"git-provider"===t.source.kind&&t.source.externalCheckName===e)??!1,{trigger:Y,isMutating:J}=function(e){let{projectId:t,checks:s,swrOptions:r}=e,{team:o}=(0,y.useTeam)();return(0,b.default)(`/v2/projects/${t}/checks-bulk?teamId=${o?.id}`,async e=>await (0,k.fetchAPI)(e,{method:"POST",body:{checks:s},throwOnHTTPError:!0}),r)}({projectId:U?.id??"",checks:Object.entries(H).filter(e=>{let[t,s]=e;return s&&!q(t)}).map(e=>{let[t]=e;return{name:t,requires:"none",source:{kind:"git-provider",provider:"github",externalCheckName:t}}})}),Q=async()=>{await Y()},X=async()=>{await P()},et=e=>{let{fromUser:t=!1}=e;t&&h.analytics.track(u.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_import_github_modal_close",click_value:"Clicked to close import checks sheet"}),R("select-provider"),T(""),D({}),E(!1),$(null),o()},er=()=>{E(!1),$(null)},eo=()=>{if(h.analytics.track(u.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_import_github_modal_next",click_value:"Clicked to go to next step in import checks sheet"}),z&&L){let e=L.products?.find(e=>e.protocols?.checks);if(e){let t=(0,W.getIntegrationCheckoutUrl)({params:{teamSlug:n??"",integrationSlug:L.slug},searchParams:{productSlug:e.slug,projectSlug:c||void 0,cancelUrl:window.location.href}});window.open(t,"_blank")}return}R("import")},ei=U?.link?.type==="github",ec=()=>{h.analytics.track(u.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_import_github_modal_back",click_value:"Clicked to go back to select provider in import checks sheet"}),R("select-provider")},en={initial:{title:"Add checks",description:"Select a checks provider to get started with import.",content:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(es,{selectedProvider:B,onProviderChange:T,isProjectLoading:G,isProjectLinkedToGitHub:!!ei,enableIntegrationsInAddCheck:S}),(0,t.jsxs)(d.SheetFooter,{className:"flex justify-between gap-4 sm:mt-6 sm:hidden sm:justify-between",children:[(0,t.jsx)(r.Button,{onClick:()=>et({fromUser:!0}),size:"small",type:"secondary",children:"Cancel"}),(0,t.jsx)(r.Button,{size:"small",onClick:eo,disabled:!B,prefix:z?(0,t.jsx)(x.External,{}):void 0,children:z?"Install":"Next"})]}),(0,t.jsxs)(d.SheetFooter,{className:"mt-auto bg-background-200 hidden sm:flex sm:justify-between border-t border-solid border-gray-alpha-400 gap-4 px-6 py-4 -mx-6 -mb-6 rounded-b-md sticky bottom-3",children:[(0,t.jsx)(r.Button,{onClick:()=>et({fromUser:!0}),type:"secondary",children:"Cancel"}),(0,t.jsx)(r.Button,{onClick:eo,disabled:!B,prefix:z?(0,t.jsx)(x.External,{}):void 0,children:z?"Install":"Next"})]})]})},"import-github-step":{title:"Connect GitHub Actions",description:"Add the checks you want to require before a deployment can be promoted to production. You can also add from a GitHub SHA.",content:(0,t.jsx)(V,{projectInfo:U,teamSlug:n??"",checkedItems:H,setCheckedItems:D,isCheckAlreadyPresent:q,onBack:ec,onClose:()=>et({fromUser:!1}),trigger:Q,refetchChecks:X,isMutating:J,isOpen:s})},"configure-integration-step":L?{title:`Connect ${L.name}`,description:`Select ${L.name} resources to configure as checks.`,content:(0,t.jsx)(Z,{integration:L,teamSlug:n??"",projectSlug:c??null,onBack:ec,onClose:()=>et({fromUser:!1}),onShowConnectionModal:e=>{o(),$(e),E(!0)}})}:null}["select-provider"===_?"initial":"github"===B?"import-github-step":"configure-integration-step"];if(!en)return(0,t.jsx)(d.Sheet,{open:s,onOpenChange:()=>et({fromUser:!0})});let ea=A&&F?.stores?F.stores.find(e=>e.id===A):null;return(0,t.jsxs)(t.Fragment,{children:[!O&&(0,t.jsx)(d.Sheet,{open:s,onOpenChange:()=>et({fromUser:!0}),children:(0,t.jsxs)(d.SheetContent,{onClick:e=>e.stopPropagation(),className:"m-3 flex h-[calc(100%-1.5rem)] gap-y-6 flex-col rounded-md bg-background-100 w-full max-w-full md:max-w-screen-md",children:[(0,t.jsxs)(d.SheetHeader,{className:"flex flex-col gap-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-3",children:[(0,t.jsx)(d.SheetTitle,{className:"text-heading-20 font-medium",children:en.title}),(0,t.jsx)(d.SheetClose,{asChild:!0,children:(0,t.jsx)(r.Button,{"aria-label":"Close",shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(m.Cross,{})})})]}),(0,t.jsx)(d.SheetDescription,{className:"text-label-14 text-gray-900",children:en.description})]}),en.content]})}),O&&ea&&U&&"integration"===ea.type&&(0,t.jsx)(l.Modal,{active:!0,allowOverflow:!0,onClickOutside:er,width:540,children:(0,t.jsx)(ee.CreateResourceConnectionModalStep,{store:ea,project:U,onClickOutside:er,onConnectionCreated:()=>{E(!1),$(null)},title:`Connect ${ea.name}`,backOrCancelLabel:"Cancel",onBack:er,resourceId:ea.id})})]})}function eo(e){let{disabled:s=!1,disabledTooltipText:n}=e,[a,l]=(0,i.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Tooltip,{text:n,forceHide:!s||!n,children:(0,t.jsx)(r.Button,{"aria-label":"Add Checks",onClick:()=>{h.analytics.track(u.AnalyticsEvent.CLICK_EVENT,{click_name:"promotion_requirements_add_checks_button_click",click_value:"Clicked on add checks button"}),l(!0)},prefix:(0,t.jsx)(c.Plus,{}),disabled:s,size:"small",type:"secondary",children:"Add Checks"})}),(0,t.jsx)(er,{isOpen:a,onClose:()=>l(!1)})]})}e.s(["AddChecksButton",0,eo],9099168),e.i(3092247),e.i(3182268);var ei=e.i(7849855),ec=e.i(6798946),en=e.i(1017032),ea=e.i(1991452),el=e.i(9668517),ed=e.i(6159310),eu=e.i(8525850);function eh(e){let{children:s}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-start gap-6 flex-initial p-6",children:[(0,t.jsx)("p",{className:"text-[16px] leading-[24px] font-medium text-gray-1000",children:"No checks configured"}),(0,t.jsx)("div",{className:"flex  flex-col gap-6",children:s})]})}function ep(){let{projectSlug:e}=(0,ei.useProjectSlug)(),{data:t}=(0,en.useConfigurations)({skipBillingData:!0}),{data:s,isReady:r}=(0,K.useResourceList)({protocolType:"checks"}),o=s?.stores.filter(e=>(0,J.isProtocolSupported)(e.product,"checks")),{data:i}=(0,v.useMarketplaceIntegrations)({protocolType:"checks"}),c=i?.flatMap(e=>e.products.filter(e=>(0,J.isProtocolSupported)(e,"checks")).map(t=>({product:t,integration:e})));return{marketplaceConfigurations:t?.filter(e=>"marketplace"===e.installationType),resources:o,availableProducts:c,resourcesForProject:o?.filter((0,J.isConnectedToProject)(e)),isReady:!!i&&r,isChecksAvailable:null!=o&&null!=c&&(o.length>0||c.length>0)}}e.s(["EmptyChecksCard",0,function(){let e=ep(),{projectSlug:r}=(0,ei.useProjectSlug)(),{data:o}=(0,f.useProject)(r),i=(0,C.useCiChecksAndPoliciesFlagV2)(),c=(0,C.useChecksPrivateBetaFlag)(),a=(0,C.useChecksSettingsFlag)(),l=(0,w.useServerFlag)("enable-integrations-in-add-check",!1),d=(0,g.usePathname)(),u=(0,ea.useRouter)(),h=(0,el.useTeamSlug)(),p=d?.includes("/settings/"),m=i&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 sm:flex-row",children:[p||!a?(0,t.jsx)(eo,{}):(0,t.jsx)(ed.DashboardButtonLink,{route:"/[teamSlug]/[project]/settings/build-and-deployment",hash:"#deployment-checks",size:"small",type:"secondary",prefix:(0,t.jsx)(x.External,{color:"gray-900"}),target:"_blank",children:"Add Checks"}),c&&!l&&(0,t.jsx)(s.InstallChecksButton,{availableList:e,showLearnMoreLink:!1})]});if(!e.resources||!h)return(0,t.jsx)(eh,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsx)(n.Skeleton,{height:20,width:300}),m]})});let j=e.resources.filter(e=>e.projectsMetadata.some(e=>e.name===r));return j.length?(0,t.jsxs)(eh,{children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:`You have ${j.length} Checks Products installed for this project, but no checks configured.`}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:j.map(e=>(0,t.jsx)(ec.CreateResourceCard,{RightAction:(0,t.jsx)(Q.OpenInPartnerDashboardButton,{buttonVariant:"secondary",componentType:"button",integrationConfigurationId:e.product.integrationConfigurationId,label:"Configure",productId:e.product.id,externalResourceId:e.externalResourceId,size:"small",teamIdOrSlug:e.ownerId,projectId:o?.id}),description:e.product.name,icon:{url:e.product.iconUrl},isDisabled:!1,isSelected:!1,name:e.name,onClick:()=>{u.push((0,eu.getResourceDetailsPath)(e,h,r))},showCreateButton:!1},e.id))}),(0,t.jsxs)("div",{className:"flex w-full flex-col items-center justify-center gap-6",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"or"}),m]})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(eh,{children:(0,t.jsxs)("div",{className:"flex max-w-[340px] flex-col items-center gap-6 text-center",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Use events or statuses from your checks provider to determine when a deployment is promoted to Production."}),m]})})})},"useChecksData",0,ep],5838262)}]);

//# debugId=58856e51-850d-f332-753e-8dd73be6eb82
//# sourceMappingURL=3eb6d7c3e6f274b8.js.map