;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="5ae960c7-5d55-d544-e56c-f227c6c420f7")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1000921,e=>{"use strict";let t=(0,e.i(9334638).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25 7.25H4.5V8.75H5.25H9.43934L7.96967 10.2197L7.43934 10.75L8.5 11.8107L9.03033 11.2803L11.7803 8.53033C12.0732 8.23744 12.0732 7.76256 11.7803 7.46967L9.03033 4.71967L8.5 4.18934L7.43934 5.25L7.96967 5.78033L9.43934 7.25H5.25ZM8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8C14.5 11.5899 11.5899 14.5 8 14.5ZM0 8C0 12.4183 3.58172 16 8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8Z" fill="currentColor"/>');e.s(["ArrowCircleRight",0,t])},8587921,7873387,e=>{"use strict";var t=e.i(7185353),n=e.i(7909933),r=e.i(3924999),i=e.i(8042625),a=e.i(277234),s=e.i(4244280),o=e.i(9668517),l=e.i(5338940),d=e.i(1717203),c=e.i(7557283);let u=e=>(n,r,i)=>{let a=(0,t.useRef)(void 0),s=e(n,r,i);(0,t.useEffect)(()=>{void 0!==s.data&&(a.current=s.data)},[s.data]);let o=(0,t.useCallback)(()=>{a.current=void 0},[]);return{...s,data:void 0===s.data?a.current:s.data,isLagging:void 0===s.data&&void 0!==a.current,resetLaggy:o}};e.s(["default",0,u],7873387),e.s(["MEMBERS_LIMIT",0,20,"default",0,function(){let{sort:e="date_desc",limit:t=20,filterByUserIds:r,until:o,role:u,includeEntitlements:m,includePermissionRequests:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:h,team:p}=(0,l.useTeam)(),{isLoading:x,can:v}=(0,d.default)(),E=!x&&v(c.Action.List,c.Resource.TeamFellowMembership);return(0,n.default)(()=>h&&p&&E?`${s.API_TEAMS_MEMBERS_V3}/${p.id}/members${(0,i.encode)({sort:e,until:o,limit:t,role:u,filterByUserIds:r,includeEntitlements:m,includePermissionRequests:g})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),f)},"useMembersForTeam",0,function(e){let{limit:t=20,until:r,role:o,sort:l="date_desc"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,n.default)(()=>e?`${s.API_TEAMS_MEMBERS_V3}/${e.id}/members${(0,i.encode)({until:r,limit:t,role:o,sort:l})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),d)},"useMembersInfinite",0,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{search:m,limit:g,role:f,eligibleMembersForProjectId:h,sort:p="date_desc",filterByUserIds:x,includeEntitlements:v,mfaStateFilter:E,includePermissionRequests:C}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=arguments.length>2&&void 0!==arguments[2]&&arguments[2],y=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{isReady:T,team:b}=(0,l.useTeam)(),{isLoading:P,can:S}=(0,d.default)(),I=!P&&S(c.Action.List,c.Resource.TeamFellowMembership),A=(0,o.useTeamSlug)(),R=g||20,N=(0,r.default)((e,t)=>{if(!T||!b||!I)return null;if(0===e)return`${s.API_TEAMS_MEMBERS_V3}/${b.id}/members${(0,i.encode)({sort:p,limit:R,search:m,role:f,eligibleMembersForProjectId:h,filterByUserIds:x,includeEntitlements:!!v||void 0,filterByMfaState:"all"!==E?E:void 0,includePermissionRequests:C})}`;let n=t?.pagination.nextPageCursor;return n?`${s.API_TEAMS_MEMBERS_V3}/${b.id}/members${(0,i.encode)({sort:p,limit:R,nextPageCursor:n,search:m,role:f,eligibleMembersForProjectId:h,includeEntitlements:!!v||void 0,filterByMfaState:"all"!==E?E:void 0,includePermissionRequests:C})}`:null},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),{...e,use:j?[u]:[]});(0,t.useEffect)(()=>{j&&N.resetLaggy()},[A,j]);let M=(0,t.useMemo)(()=>N.data?.flatMap(e=>e.members.slice(0,R))||[],[N.data,R]),_=(0,t.useMemo)(()=>N.data?.flatMap(e=>e.permissionRequests||[])||[],[N.data]),w=!!N.data,$=w&&0===M.length,L=!!(w&&N.data&&N.size>N.data.length),O=!!(w&&N.data&&!N.data[N.data.length-1]?.pagination?.nextPageCursor);return(0,n.default)(()=>{if(!y||!N.data||O||!T||!b)return null;let e=N.data[N.data.length-1].pagination.nextPageCursor;return`${s.API_TEAMS_MEMBERS_V3}/${b.id}/members${(0,i.encode)({sort:p,limit:R,nextPageCursor:e,search:m,role:f,eligibleMembersForProjectId:h,includeEntitlements:v,filterByMfaState:"all"!==E?E:void 0,includePermissionRequests:C})}`},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0})),[N,{members:M,permissionRequests:_.filter(e=>null!=e),initialDataLoaded:w,isEmpty:$,loadMore:()=>N.setSize(N.size+1),isLoadingMore:L,isReachingEnd:O,isLagging:N.isLagging}]},"useSuggestedMembersInfinite",0,function(){let{limit:e=25,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{can:s,isLoading:u}=(0,d.default)(),m=!u&&s(c.Action.Create,c.Resource.TeamFellowMembership),{isReady:g,team:f}=(0,l.useTeam)(),h=(0,o.useTeamSlug)(),p=(0,r.default)((t,n)=>{if(!g||!f||!m)return null;if(!t)return`/api/teams/${h}/members/suggested${(0,i.encode)({limit:e})}`;let r=n?.members,a=r?.length===e?r[r.length-1].email:null;return a?`/api/teams/${h}/members/suggested${(0,i.encode)({limit:e,from:a})}`:null},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),n),x=(0,t.useMemo)(()=>p.data?.flatMap(t=>t.members.slice(0,e))||[],[p.data,e]),v=!!p.data,E=v&&0===x.length,C=!!(v&&p.data&&p.size>p.data.length),j=!!(v&&p.data&&p.data[p.data.length-1]?.members.length<e);return[p,{members:x,initialDataLoaded:v,isEmpty:E,loadMore:()=>p.setSize(p.size+1),isLoadingMore:C,isReachingEnd:j}]}],8587921)},4723202,e=>{"use strict";var t=e.i(847684),n=e.i(7185353),r=e.i(2504781),i=e.i(5255926),a=e.i(455575),s=e.i(5468328),o=e.i(277234),l=e.i(5338940),d=e.i(8587921),c=e.i(5140444),u=e.i(8248823),m=e.i(57106);async function g(e,t){await (0,o.fetchAPI)(`/api/teams/${e}/role-requests?teamId=${e}`,{method:"POST",body:JSON.stringify({teamRoles:[t]}),throwOnHTTPError:!0})}e.s(["RequestRoleButton",0,function(e){let{teamRole:o,variant:f="card"}=e,{team:h,isLoading:p}=(0,l.useTeam)(),{hasRequestedRole:x,mutate:v,isLoading:E}=function(e){let{user:t,isLoading:n}=(0,c.useUser)(),{data:r,mutate:i,isLoading:a}=(0,d.default)({includePermissionRequests:!0}),s=r?.permissionRequests;return{hasRequestedRole:s?.some(n=>n.uid===t?.uid&&n.requestedTeamRole.includes(e))??!1,mutate:i,isLoading:n||a}}(o),[C,j]=(0,n.useState)(!1),[y,T]=(0,n.useState)(!1);if(h?.membership?.role!=="VIEWER_FOR_PLUS")return null;let b=x||y;return(0,t.jsx)(i.Skeleton,{show:E||p,children:(0,t.jsx)(s.Tooltip,{disableTriggers:!b,text:(0,t.jsxs)(t.Fragment,{children:["An Owner of the team can accept your request. Requests are managed in the"," ",(0,t.jsx)(m.Link,{href:`/${h?.slug}/~/settings/members`,type:"highlight",children:"team members page"}),"."]}),children:(0,t.jsx)(r.Button,{disabled:b,loading:C,className:"card"===f?"text-label-14 font-medium":void 0,onClick:async()=>{if(h?.id){j(!0);try{await g(h.id,o),v(),T(!0),a.toasts.success("Request for the Member role has been sent")}catch(e){a.toasts.error((0,u.errorToString)(e,"Failed to send request"))}finally{j(!1)}}},size:"card"===f?"small":void 0,type:"card"===f?"tertiary":void 0,children:b?"Access Requested":"Request Access"})})})}])},8556491,e=>{"use strict";var t=e.i(847684),n=e.i(4723202),r=e.i(57106),i=e.i(1235157),a=e.i(6352514),s=e.i(4759942);e.s(["AdditionalPermissionsRequiredModal",0,function(e){let{role:o,team:l,actionLabel:d,dataTestId:c}=e;return(0,t.jsx)("div",{className:"absolute inset-0 z-[100] flex items-center justify-center bg-[rgba(255,255,255,0.5)] dark:bg-[rgba(0,0,0,0.5)]",children:(0,t.jsx)("div",{className:"absolute top-0 md:top-[80px] left-1/2 -translate-x-1/2 z-[101] w-full max-w-[560px] animate-[fadeIn_300ms_ease-in-out_forwards] pointer-events-auto","data-testid":c,children:(0,t.jsxs)("div",{className:"shadow-lg md:rounded-lg max-w-full bg-white overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,t.jsx)("span",{className:"text-heading-24",children:"Additional Permissions Required"}),(0,t.jsxs)("div",{children:["As a ",(0,t.jsx)("strong",{children:o?(0,i.getRoleName)(o):"Viewer"})," user on the ",(0,t.jsx)("strong",{children:l?.name})," team, you do not have permission to ",d,"."]}),(0,t.jsxs)("div",{className:"text-center break-words pt-2 text-gray-900",children:["Learn more about"," ",(0,t.jsx)(r.Link,{external:!0,href:"/docs/rbac/access-roles",onClick:()=>{s.analytics.track(a.AnalyticsEvent.PERMISSIONS_CLICKED_LEARN_MORE)},type:"highlight",children:"Roles and Permissions"})]})]}),"VIEWER_FOR_PLUS"===o?(0,t.jsx)("div",{className:"flex justify-end items-center bg-background-200 p-4 border-t mt-2",children:(0,t.jsx)(n.RequestRoleButton,{teamRole:"MEMBER",variant:"modal"})}):null]})})})}])},1068837,e=>{"use strict";var t=e.i(847684),n=e.i(1717203),r=e.i(8556491);e.s(["AdditionalPermissionsRequiredModalClient",0,function(e){let{actionLabel:i,permissionChecks:a}=e,{can:s,isLoading:o,accessInfo:l}=(0,n.default)(),d=a.every(e=>{let[t,n]=e;return s(t,n)});return o||d?null:(0,t.jsx)(r.AdditionalPermissionsRequiredModal,{role:l?.role,team:l?.team??void 0,actionLabel:i})}])},2843591,e=>{"use strict";var t=e.i(7909933),n=e.i(7185353),r=e.i(3924999),i=e.i(8042625),a=e.i(277234),s=e.i(4244280),o=e.i(5338940);e.i(6887680);var l=e.i(6810699);e.s(["mapEdgeConfigToStoreType",0,function(e){let{edgeConfig:t,project:n}=e;return{...t,type:"edge-config",projectsMetadata:n?[{projectId:n.id,name:n.name,framework:n.framework,id:"",environments:[],environmentVariables:[],envVarPrefix:null}]:[],name:t.slug,status:"available",totalConnectedProjects:+!!n}},"useEdgeConfig",0,function(e,n){let{isReady:r,team:l}=(0,o.useTeam)();return(0,t.default)(()=>e&&r?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),n)},"useEdgeConfigBackup",0,function(e,n,r){let{isReady:l,team:d}=(0,o.useTeam)();return(0,t.default)(()=>e&&n&&"current"!==n&&l?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/backups/${encodeURIComponent(n)}${(0,i.encode)({teamId:d?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),r)},"useEdgeConfigBackupsInfinite",0,function(e,t,n){let{isReady:l,team:d}=(0,o.useTeam)();return(0,r.default)((t,r)=>{if(!e||!l||r&&!r.pagination.hasNext)return null;let a={teamId:d?.id,metadata:n?.metadata?"true":void 0,limit:n?.limit||25,next:r?.pagination.next};0===t&&(a.limit+=1);let o=`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/backups`;return`${o}${(0,i.encode)(a)}`},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateFirstPage:!1,revalidateOnFocus:!1,...t})},"useEdgeConfigItems",0,function(e,n){let{isReady:r,team:l}=(0,o.useTeam)();return(0,t.default)(()=>e&&r?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/items${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),n)},"useEdgeConfigSchema",0,function(e,n){let{isReady:r,team:l}=(0,o.useTeam)();return(0,t.default)(()=>e&&r?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/schema${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),n)},"useEdgeConfigTokens",0,function(e,n){let{isReady:r,team:l}=(0,o.useTeam)();return(0,t.default)(()=>e&&r?`${s.API_EDGE_CONFIG}/${encodeURIComponent(e)}/tokens${(0,i.encode)({teamId:l?.id})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),n)},"useEdgeConfigs",0,function(){let e=(0,l.useResourceList)({protocolType:"storage"});return{data:(0,n.useMemo)(()=>e.data?.stores.filter(e=>"edge-config"===e.type),[e.data?.stores])}}])},5919007,e=>{"use strict";e.s(["EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH",0,52,"getMaxEdgeConfigs",0,function(e){if("number"==typeof e.resourceConfig?.edgeConfigs)return e.resourceConfig.edgeConfigs;switch(e.billing?.plan){case"enterprise":return 10;case"pro":return"trialing"===e.billing.status?1:3;default:return 1}},"getSizeLimitInBytes",0,function(e){if("number"==typeof e.resourceConfig?.edgeConfigSize)return 1e3*e.resourceConfig.edgeConfigSize;switch(e.billing?.plan){case"enterprise":return 512e3;case"pro":return 64e3;default:return 8e3}}])},4348614,e=>{e.v({expanderWrapper:"store-advanced-options-expander-module__QIqk3G__expanderWrapper",expanderWrapperExpanded:"store-advanced-options-expander-module__QIqk3G__expanderWrapperExpanded"})},1261558,e=>{"use strict";var t=e.i(847684),n=e.i(9722978);e.i(8703064);var r=e.i(7507521),i=e.i(4348614);e.s(["StoreAdvancedOptionsExpander",0,function(e){let{children:a,isExpandedDefault:s}=e;return(0,t.jsx)(r.Expander,{className:(0,n.clsx)(i.default.expanderWrapper),expandedClassName:i.default.expanderWrapperExpanded,isExpandedDefault:s,title:(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-1 flex-initial px-3 py-2",children:[(0,t.jsx)(r.ExpanderTrigger,{}),(0,t.jsx)("p",{className:"text-[13px] leading-[18px] font-medium text-gray-900",children:"Advanced Options"})]}),children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial px-3 py-2",children:a})})}])},8206804,e=>{"use strict";var t=e.i(847684);e.s(["default",0,function(e){let{margin:n=50,className:r}=e;return(0,t.jsx)("hr",{className:r,style:{border:"0",borderTop:"1px solid var(--accents-2)",margin:"number"==typeof n?`${n}px 0`:`${n} 0`}})}])},9512272,e=>{"use strict";var t=e.i(8042625),n=e.i(277234),r=e.i(4244280),i=e.i(5927860);function a(e){return e.startsWith("VERCEL_")&&!e.startsWith("VERCEL_APP_")}function s(e){return e.map(e=>{let t,n=e.type;return void 0===n&&(n=a(e.name)?i.EnvType.System:i.EnvType.Encrypted),e.target&&(t=Array.isArray(e.target)?e.target:[e.target]),{type:n,key:e.name,value:n===i.EnvType.System?e.name:e.value,target:t??[i.EnvTarget.Production,i.EnvTarget.Preview,i.EnvTarget.Development],gitBranch:e.gitBranch,comment:e.comment,customEnvironmentIds:e.customEnvironmentIds}})}async function o(e,i,a){let o=s(i);return(0,n.fetchAPI)(`${(0,r.API_PROJECTS_VERSION)("v10")}/${e}/env${(0,t.encode)({teamId:a})}`,{method:"POST",body:JSON.stringify(o),throwOnHTTPError:!0})}async function l(e,i,a){await (0,n.fetchAPI)(`${(0,r.API_PROJECTS_VERSION)("v4")}/${e}/env/${i.key}${(0,t.encode)({teamId:a,target:i.target})}`,{method:"DELETE",throwOnHTTPError:!0})}e.s(["addEncryptedEnvs",0,s,"addEnvs",0,o,"isSystemEnv",0,a,"legacyRemoveEnv",0,l])},4429570,e=>{"use strict";var t=e.i(847684),n=e.i(6891161),r=e.i(455575),i=e.i(4030453),a=e.i(7185353),s=e.i(8042625),o=e.i(277234),l=e.i(4244280),d=e.i(5927860),c=e.i(7917902),u=e.i(4422059),m=e.i(4004502),g=e.i(5919007),f=e.i(9512272);e.i(7037808);var h=e.i(8824424);e.i(8564753);var p=e.i(9584471),x=e.i(3500331),v=e.i(8206804),E=e.i(2014455),C=e.i(1261558);function j(e){let{advancedOptions:n,tokenLabelPlaceholder:r,onAdvancedOptionsChange:i,isLoading:a}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)(E.ResourceEnvironmentSelector,{environments:n.environments,error:n.error?.environments,onChange:e=>i({...n,environments:e,error:{...n.error,environments:void 0}}),resourceTitle:"store"}),(0,t.jsx)(C.StoreAdvancedOptionsExpander,{isExpandedDefault:!!n.error,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:(0,t.jsx)(x.Input,{"aria-label":"Environment Variable",disabled:a,error:n.error?.envVarName,label:"Environment Variable",onChange:e=>i({...n,envVarName:e.currentTarget.value,error:{...n.error,envVarName:void 0}}),placeholder:"EDGE_CONFIG",value:n.envVarName,width:"100%"})}),(0,t.jsx)(v.default,{margin:0}),(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:(0,t.jsx)(x.Input,{"aria-label":"Token label",disabled:a,label:"Token label",maxLength:g.EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH,onChange:e=>i({...n,tokenName:e.currentTarget.value}),placeholder:r,value:n.tokenName,width:"100%"})})]})})]})}function y(e){let{backOrCancelLabel:h,edgeConfig:x,title:v,subtitle:E,ProjectSelector:C,onClickOutside:y,onConnectionCreated:T,onBack:b,project:P}=e,{mutateByProtocol:S}=(0,p.useMutateResourceCache)(),[I,A]=(0,a.useState)({envVarName:"",tokenName:"",environments:{[d.EnvTarget.Development]:!0,[d.EnvTarget.Preview]:!0,[d.EnvTarget.Production]:!0,...P?.customEnvironments?.reduce((e,t)=>(e[t.slug]=!0,e),{})??{}}}),[R,N]=(0,a.useState)(!1),[M,_]=(0,a.useState)(null),{team:w}=(0,c.useAccount)(),$=(0,u.usePrevious)(P);(0,a.useEffect)(()=>{null!==I.error&&(!P||$&&P.id!==$.id)&&A({...I,error:null}),P&&(null===$||$&&P.id!==$.id)&&A({...I,environments:{[d.EnvTarget.Development]:!0,[d.EnvTarget.Preview]:!0,[d.EnvTarget.Production]:!0,...P.customEnvironments?.reduce((e,t)=>(e[t.slug]=!0,e),{})??{}}})},[I,$,P]);let L=(0,a.useMemo)(()=>{if(!P)return"";let e=P.name.slice(0,g.EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH-6);return`${e.replace(/-*$/g,"")}-token`},[P]),O=I.tokenName||L,k=I.envVarName||"EDGE_CONFIG",B=(0,a.useCallback)(async e=>{if(e.preventDefault(),!x||R||!P)return;let t=[d.EnvTarget.Production,d.EnvTarget.Preview,d.EnvTarget.Development,...P.customEnvironments?.map(e=>e.slug)||[]].filter(e=>I.environments[e]);try{if(_(null),N(!0),A({...I,error:null}),0===t.length){A({...I,error:{environments:"Select at least one Environment for your Environment Variable"}}),N(!1);return}if(P.env&&P.env.some(e=>e.key===k&&("string"==typeof e.target?t.includes(e.target):e.target.some(e=>t.includes(e))))){A({...I,error:{envVarName:1===t.length?`This project already has an environment variable called ${k} in the chosen environment.`:`This project already has an environment variable called ${k} in one of the chosen environments.`}}),N(!1);return}let e=await (0,o.fetchAPI)(`${l.API_EDGE_CONFIG}/${x.id}/token${(0,s.encode)({teamId:w?.id})}`,{method:"POST",throwOnHTTPError:!0,body:{label:O}});await (0,f.addEnvs)(P.id,[{name:k,value:`https://edge-config.vercel.com/${x.id}?token=${e.token}`,type:d.EnvType.Encrypted,target:t.filter(e=>(0,d.isSystemEnvTarget)(e)),customEnvironmentIds:t.filter(e=>!(0,d.isSystemEnvTarget)(e)).map(e=>{let t=P.customEnvironments?.find(t=>t.slug===e);return t?.id}).filter(e=>void 0!==e)}],w?.id),await T(),y(),r.toasts.success({text:`Connected Project ${P.name} to Edge Config ${x.slug}`,key:x.slug}),await S("storage")}catch(e){if(e instanceof Error)_(e);else throw e}finally{N(!1)}},[x,R,P,I,w?.id,O,k,T,y,S]);return(0,t.jsxs)("form",{onSubmit:e=>void B(e),children:[(0,t.jsx)(n.Modal.Body,{children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(n.Modal.Title,{center:!0,children:v}),E?(0,t.jsx)(n.Modal.Subtitle,{children:E}):null]}),(0,t.jsx)(n.Modal.Inset,{last:!0,children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[C,(0,t.jsx)(j,{advancedOptions:I,isLoading:R,onAdvancedOptionsChange:A,tokenLabelPlaceholder:P?L:""}),M?(0,t.jsx)(i.Error,{children:M.message}):null]})})]})}),(0,t.jsxs)(n.Modal.Actions,{children:[(0,t.jsx)(n.Modal.Action,{onClick:b,type:"secondary",children:h}),(0,t.jsx)(n.Modal.Action,{buttonType:"submit","data-testid":(0,m.tid)("connect-edge-config-modal","connect-button"),disabled:!P||""===k.trim()||""===O.trim(),loading:R,children:"Connect"})]})]})}e.s(["ConnectEdgeConfigModal",0,function(e){let{active:r,edgeConfig:i,onClickOutside:s,onConnectionCreated:o,onAnimationDone:l}=e,[d,u]=(0,a.useState)(null),{team:m,user:g}=(0,c.useAccount)(),f=m?m.slug:g?.username;return(0,t.jsx)(n.Modal.Modal,{active:r,allowOverflow:!0,onAnimationDone:l,onClickOutside:s,width:540,children:(0,t.jsx)(y,{ProjectSelector:(0,t.jsx)(h.ResourceProjectSelector,{account:f,allowSelectConnectedProjects:!0,includedInConnectedProjects:e=>e?.env?.some(e=>e.edgeConfigId===i?.id)??!1,onProjectSelected:e=>{u(e)},resourceTitle:"store",selectedProject:d}),backOrCancelLabel:"Cancel",edgeConfig:i,onBack:s,onClickOutside:s,onConnectionCreated:o,project:d,title:"Connect Project"})})},"CreateEdgeConfigConnectionModalStep",0,y],4429570)},5377189,e=>{"use strict";var t=e.i(5757634),n=e.i(1717203);e.i(717172);var r=e.i(5993275);e.s(["useStorePermissions",0,function(e){let{storeType:i,teamSlug:a}=e,{fallback:s}=(0,t.useSWRConfig)(),{can:o,isLoading:l}=(0,n.default)(),d=a?s[i?`store:preload-data:${a}`:`store:list-preload-data:${a}`]:null;return{permissions:d?.permissions??(0,r.getStoreItemPermissions)({storeType:i,can:o,isLoading:l})}}],5377189)},8564753,e=>{"use strict";e.i(9584471),e.s([])},1758334,e=>{"use strict";var t=e.i(7185353);e.i(6887680);var n=e.i(6810699),r=e.i(3798983);function i(e){return"edge-config"===e?64:32}e.s(["MAX_STORE_NAME_LENGTH",0,32,"getStoreNameLengthByType",0,i,"useStoreName",0,e=>{let{storeType:a,storeId:s,...o}=e,l=(0,t.useMemo)(()=>{if("projectName"in o&&o.projectName){let e=r.storeDefaultNameSuffix[a];return[o.projectName.replaceAll("_","-").slice(0,i(a)-e.length),e].join("")}return"storeName"in o?o.storeName??"":""},[o,a]),[d,c]=(0,t.useState)(),[u,m]=(0,t.useState)(),{isNameTaken:g}=(0,n.useResourceList)({protocolType:"storage"});return{storeNameError:d,name:u??l,setName:(0,t.useCallback)(e=>{let t=e.trim(),n=i(a),r="edge-config"===a?1:5;c(void 0),m(t),t.length<r?c(`The name must be at least ${r} characters.`):t.length>n?c(`The name must be at most ${n} characters.`):/^[a-zA-Z0-9_-\s]*$/.test(t)?g({name:t,storeType:a,storeId:s})&&c("This name is already in use by another store"):c("The name can only contain letters, numbers, and the following characters: _ - ")},[g,a,s]),touched:!!u&&u!==l}}])},5463680,6769352,e=>{"use strict";e.i(6356390),e.i(15312);var t=e.i(7897830);e.i(39509);var n=e.i(847684),r=e.i(2504781),i=e.i(5468328);e.i(3182268);var a=e.i(7849855);e.i(6887680);var s=e.i(6810699),o=e.i(1414602),l=e.i(5074599);function d(){return(0,n.jsx)("div",{style:{height:40}})}e.s(["CreateResourceButton",0,function(e){let{onSuccess:c,protocolType:u,label:m,hideIfHasNoStores:g=!0,buttonType:f="default"}=e,{projectSlug:h}=(0,a.useProjectAndTeamSlug)(),{data:p}=(0,s.useResourceList)({projectSlug:h,protocolType:u}),{openBrowseProducts:x}=(0,t.useResourceModals)({onSuccess:c}),{permissions:v,isLoading:E}=(0,o.useResourcePermissions)();if(E)return(0,n.jsx)(d,{});let C=!!(p&&p.stores.length>0);return g&&!C?(0,n.jsx)(d,{}):(0,n.jsx)(i.Tooltip,{disableTriggers:v.create,text:(0,l.missingPermissionLabel)("create",u),children:(0,n.jsx)(r.Button,{disabled:!v.create,onClick:()=>x("browse-new"),type:f,typeName:"button",children:m??(0,l.createResourceButtonLabel)(u)})})}],6769352),e.i(3800789),e.s([],5463680)},7037808,e=>{"use strict";e.i(2014455),e.i(8824424),e.i(7137779),e.i(5098510),e.i(2483721),e.s([])},2886798,e=>{"use strict";e.i(9691190),e.i(1055938),e.i(680627),e.i(3183079),e.i(7512194),e.i(3788585),e.s([])},3322174,e=>{"use strict";var t=e.i(847684),n=e.i(7185353),r=e.i(6060673);e.i(7037808);var i=e.i(7137779);e.i(5463680);var a=e.i(39509);e.i(3182268);var s=e.i(7849855);e.i(2886798);var o=e.i(3183079),l=e.i(4429570),d=e.i(3703009),c=e.i(2782729);e.s(["ConnectStoreSwitch",0,function(e){let{store:u}=e,{projectSlug:m}=(0,s.useProjectSlug)(),g=(0,r.useProject)(m),{onBack:f,onClose:h,state:p,onResourceUpdated:x}=(0,o.useResourceModalsContext)(),{type:v}=u,E=(0,n.useCallback)(()=>{x({resource:u,isConnected:!0})},[u,x]);if(p.type!==a.ResourceModalsActionTypes.CreateEnvs)return null;switch(v){case"edge-config":return(0,t.jsx)(l.CreateEdgeConfigConnectionModalStep,{backOrCancelLabel:p.backOrCancelLabel,edgeConfig:{id:u.id,slug:u.name},onBack:f,onClickOutside:h,onConnectionCreated:E,project:g.data,subtitle:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1.5 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Connect to"}),(0,t.jsx)(d.StoreIconOrAvatar,{icon:(0,c.getStoreIcon)(u),size:"small",type:u.type,useColor:!0}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-gray-1000",children:u.name})]}),title:`Configure ${g.data?.name??""}`});case"blob":case"integration":return(0,t.jsx)(i.CreateResourceConnectionModalStep,{backOrCancelLabel:p.backOrCancelLabel,onBack:f,onClickOutside:h,onConnectionCreated:E,project:g.data,resourceId:u.id,store:u,subtitle:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1.5 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Connect to"}),(0,t.jsx)(d.StoreIconOrAvatar,{icon:(0,c.getStoreIcon)(u),size:"small",type:u.type,useColor:!0}),(0,t.jsx)("p",{className:"text-[14px] leading-[20px] font-medium text-gray-1000",children:u.name})]}),title:`Configure ${g.data?.name??""}`});default:return null}},"ConnectStoreSwitchWithoutProject",0,function(e){let{active:n,store:r,key:a}=e,{onClose:s,onAnimationDone:d,onResourceUpdated:c}=(0,o.useResourceModalsContext)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.ConnectEdgeConfigModal,{active:"edge-config"===r.type&&n,edgeConfig:r,onAnimationDone:d,onClickOutside:s,onConnectionCreated:s},a),(0,t.jsx)(i.CreateResourceConnectionModal,{active:"edge-config"!==r.type&&n,onAnimationDone:d,onClickOutside:s,onConnectionCreated:()=>c({resource:r,isConnected:!0}),resourceId:r.id,store:r},a)]})}])},4174946,e=>{"use strict";var t=e.i(847684),n=e.i(7185353),r=e.i(5155984),i=e.i(57106),a=e.i(1000921),s=e.i(2652226),o=e.i(3798983),l=e.i(5551580);e.i(2886798);var d=e.i(7512194),c=e.i(2782729),u=e.i(8922739),m=e.i(1068837),g=e.i(7557283),f=e.i(60582);let h=(0,n.createContext)(null);function p(e){let{teamSlug:n,projectSlug:r,children:l,buttons:d}=e,u=(0,c.hasProjectSlug)(r);return(0,t.jsx)(s.default,{buttons:d,title:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)("div",{className:"flex flex-row items-stretch justify-start gap-3 flex-initial",children:(0,t.jsx)("h1",{className:"text-[32px] leading-[40px] tracking-[-0.79px] font-medium",children:"Storage"})}),u?(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Read and write directly to databases and stores connected to this project."," ",(0,t.jsx)(i.Link,{href:n?`/${n}/~/stores`:"/dashboard/stores",type:"highlight",children:(0,t.jsxs)("span",{className:"flex flex-row items-center justify-start gap-1 flex-initial",style:{display:"inline-flex"},children:[(0,t.jsx)("span",{children:"View All Databases"}),(0,t.jsx)(a.ArrowCircleRight,{})]})})]}):(0,t.jsxs)("p",{className:"text-copy-14 text-gray-900",children:["Read and write directly to databases and stores from your projects."," ",(0,t.jsx)(i.Link,{external:!0,href:o.docs.createDatabase,type:"highlight",children:"Learn more"})]})]}),children:(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-4 flex-initial",children:[(0,t.jsx)(m.AdditionalPermissionsRequiredModalClient,{actionLabel:"view Storage",permissionChecks:[[g.Action.Read,g.Resource.EdgeConfig],[g.Action.Read,g.Resource.Blob]]}),l]})})}e.s(["StoreListLayout",0,function(e){let{teamSlug:i,project:a,children:s,createDatabaseButton:o}=e;return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(p,{buttons:null,projectSlug:a,teamSlug:i,children:(0,t.jsx)(l.ResourceListPlaceholder,{protocolType:"storage"})}),children:(0,t.jsx)(r.CompatRouterAllowed,{children:(0,t.jsx)(d.ResourceModalsProviderBase,{Modal:(0,t.jsx)(u.CreateStoreModal,{}),protocolType:"storage",children:(0,t.jsx)(h.Provider,{value:f.IS_DASH?o:null,children:(0,t.jsx)(p,{buttons:o,projectSlug:a,teamSlug:i,children:s})})})})})},"useStoreActionButtons",0,function(){return(0,n.useContext)(h)}],4174946)},4553963,e=>{"use strict";var t=e.i(847684),n=e.i(2504781),r=e.i(6864621);e.s(["CreateDatabaseModalTrigger",0,function(e){let{setShowCreateDatabaseModal:i}=(0,r.useCreateDatabaseModal)();return(0,t.jsx)(n.Button,{onClick:()=>i(!0),...e})}])}]);

//# debugId=5ae960c7-5d55-d544-e56c-f227c6c420f7
//# sourceMappingURL=9579814a9c374821.js.map