;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="166d4855-3e2c-bafb-bbc9-83e74db5d60b")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6582838,e=>{"use strict";var t=e.i(215852),i=e.i(9998527);e.s(["useDashboardProject",0,function(e,n){let a=(0,i.getDashboardProjectEndpoint)(e);return(0,t.useIsomorphicSuspenseSWR)(a,n)}])},5343305,e=>{"use strict";var t=e.i(8238875),i=e.i(6582838);e.s(["useCurrentDashboardProject",0,function(e){let n=(0,t.useParams)()??{teamSlug:"",project:""};return(0,i.useDashboardProject)(n,e)}])},6450656,e=>{"use strict";var t=e.i(2466450);let i={fee:1e3,rate:{hobby:0,pro:3e3,plus:3e3},allocation:{hobby:5e4,pro:1e5,plus:1e5},reportingWindow:{hobby:"30 days",pro:"12 months",plus:"24 months"},bundle:"1M events prorated",bundleTooltip:"you'll be charged per event.\n\nFor example, {allocation} extra events will cost $3.",plusDescription:"Unlocks advanced UI features and view up to {reportingWindow} of data for all your projects. {fee} per month."},n=new Intl.NumberFormat("en-US");e.s(["pricingModel",0,i,"withPricing",0,function(e){let{offering:a="pro",currency:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.replace(/{plusDescription}/g,i.plusDescription).replace(/{bundleTooltip}/g,i.bundleTooltip).replace(/{fee}/g,(0,t.formatCurrency)(i.fee,s)).replace(/{allocation}/g,n.format(i.allocation[a])).replace(/{rate}/g,(0,t.formatCurrency)(i.rate[a],s)).replace(/{bundle}/g,i.bundle).replace(/{reportingWindow}/g,i.reportingWindow[a])}])},2924439,e=>{"use strict";var t=e.i(6450656);let i=Object.freeze({pro:{title:"Pro",price:2e3,subLineItems:[],credit:2e3},teamSeats:{title:"Additional Team Seats",price:2e3,subLineItems:[]},concurrentBuilds:{title:"Concurrent Builds",price:5e3,subLineItems:[{title:"1 Free Concurrent Build",price:0,unit:"month"}]},bandwidth:{title:"Bandwidth – Overage Fee",price:4e3,batch:100,threshold:1e3,unit:"GB",subLineItems:[]},serverlessFunctionExecution:{title:"Serverless Function Execution – Overage Fee",price:4e3,batch:100,threshold:1e3,unit:"GB-Hours",subLineItems:[]},artifacts:{title:"Vercel Remote Caching",price:50,batch:1,threshold:10,unit:"GB",subLineItems:[]},edgeMiddlewareInvocations:{title:"Edge Middleware Invocations",price:65,batch:1e6,threshold:1e6,unit:"invocations",subLineItems:[]},edgeFunctionExecutionUnits:{title:"Edge Function Execution Units",price:200,batch:1e6,threshold:1e6,unit:"execution units",subLineItems:[]},sourceImages:{title:"Source Images",price:500,batch:1e3,threshold:5e3,subLineItems:[]},speedInsights:{title:"Speed Insights",price:1e3,unit:"month",subLineItems:[{title:"On-Demand Events",billedAfter:"Billed after 10k events",price:65,batch:1e4,threshold:1e4,unit:"10k"}]},observabilityPlus:{title:"Observability Plus",price:1e3,subLineItems:[]},passwordProtection:{title:"Advanced Deployment Protection",price:15e3,subLineItems:[{title:"Password Protection",price:0},{title:"Deployment Protection Exceptions",price:0},{title:"Private Production Deployments",price:0}]},previewDeploymentSuffix:{title:"Preview Deployment Suffix",price:1e4,subLineItems:[]},webAnalytics:{title:t.withPricing("Web Analytics with {allocation} Events"),price:0,threshold:t.pricingModel.allocation.pro,limit:1,subLineItems:[{title:"On-Demand Events",billedAfter:t.withPricing("Billed after {allocation} Events"),price:t.pricingModel.rate.pro,threshold:t.pricingModel.allocation.pro,batch:0,unit:t.withPricing("{bundle}")}]},webAnalyticsPlus:{title:"Web Analytics Plus",price:t.pricingModel.fee,unit:"month",threshold:t.pricingModel.allocation.plus,limit:1,subLineItems:[]},monitoring:{title:"Monitoring with 250k Data Points",price:1e3,unit:"month",subLineItems:[{title:"On-Demand Data Points",billedAfter:"Billed after 250k data points",price:120,threshold:25e4,batch:1e6,unit:"million"}]},storage:{title:"5 KV Databases",price:0,subLineItems:[]}});e.s(["pricingMenu",0,i])},1649649,e=>{"use strict";var t=e.i(7917902),i=e.i(2924439);e.s(["getWebAnalyticsEventsMaxLimit",0,e=>{let{plan:t,isPlus:n}=e;if("hobby"===t)return 2500;if("pro"===t){if(n){if(!i.pricingMenu.webAnalyticsPlus.limit)throw Error("pricingMenu.webAnalyticsPlus.limit is not defined");return i.pricingMenu.webAnalyticsPlus.limit}if(!i.pricingMenu.webAnalytics.limit)throw Error("pricingMenu.webAnalytics.limit is not defined");return i.pricingMenu.webAnalytics.limit}return 1/0},"useIsWebAnalyticsBilling",0,function(){let{team:e,mutate:i}=(0,t.useAccount)(),n=e?.billing?.plan||"hobby",a=e?.billing?.planIteration||"legacy",s=e?.billing?.status==="trialing";return"pro"===n&&e?.enabledInvoiceItems?.webAnalytics?.enabled?{isPlus:!0,mutate:i,isTrialTeam:s,plan:n,planIteration:a,isSubscribed:!0}:{isPlus:!1,mutate:i,plan:n,planIteration:a,isTrialTeam:s,isSubscribed:"hobby"===n||(e?.enabledInvoiceItems?.webAnalyticsEvent?.enabled??!1)}}])},579135,e=>{"use strict";var t=e.i(5343305),i=e.i(8633387);let n={refreshInterval:0,revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateIfStale:!1};e.s(["useCurrentProjectNameAndId",0,function(){let{data:e}=(0,i.useDashboardProject)({config:n});return e?{name:e.name,id:e.id}:void 0},"useCurrentProjectNameAndIdSuspense",0,function(){let{data:e}=(0,t.useCurrentDashboardProject)(n);return{name:e.name,id:e.id}}])},9928621,9576722,e=>{"use strict";e.s(["DefaultValuesSetter",()=>p,"WebAnalyticsContextProvider",()=>d,"useWebAnalyticsContext",()=>b],9928621);var t=e.i(847684),i=e.i(7185353);e.s(["useWebAnalyticsStatus",()=>c],9576722);var n=e.i(7432042),a=e.i(7909933),s=e.i(8042625),l=e.i(277234),r=e.i(8633387),o=e.i(9668517);function c(){let e=(0,o.useTeamSlug)(),{data:t}=(0,r.useDashboardProject)(),{isFeatureEnabled:c,hasData:u}=b(),d=!!(c&&t?.microfrontendsConfig?.enabled&&!("isDefaultApp"in t.microfrontendsConfig&&t.microfrontendsConfig.isDefaultApp)&&!("routeObservabilityToThisProject"in t.microfrontendsConfig&&t.microfrontendsConfig.routeObservabilityToThisProject)),{data:p,mutate:h,isLoading:g}=(0,a.default)(t&&`/api/v1/web/insights/enabled${(0,s.encode)({projectId:t.id,teamId:e??""})}`,l.fetchAPI,{refreshInterval:e=>e?.isEnabled&&!e.hasData?(0,n.default)("5s"):0});return{isEnabled:p?.isEnabled??c,hasData:p?.hasData??u,isLoading:g||!p,enabledAt:p?.enabledAt??0,showPlaceholder:!c||d,revalidateStatus:(0,i.useCallback)(()=>{h()},[h])}}let u=(0,i.createContext)({setDefaultValues:()=>{},upgradeModalSource:null,setUpgradeModalSource:()=>{},isLoadingDefaults:!0,isFeatureEnabled:!1,hasData:!1,microfrontendsDataInDefaultApp:!1,enableBreakdown:!1});function d(e){let{children:n}=e,[a,s]=(0,i.useState)({hasData:!0,isLoadingDefaults:!0,isFeatureEnabled:!0,microfrontendsDataInDefaultApp:!1}),[l,r]=(0,i.useState)(null),o=(0,i.useMemo)(()=>({setDefaultValues:s,setUpgradeModalSource:r,upgradeModalSource:l,...a}),[l,a]);return(0,t.jsx)(u.Provider,{value:o,children:n})}function b(){return(0,i.useContext)(u)}function p(e){let{defaultValues:t}=e,n=c(),a=n.isLoading||n.hasData,{setDefaultValues:s}=b();return(0,i.useEffect)(()=>{s({...t,hasData:a})},[t,a,s]),null}u.displayName="WebAnalyticsContext"},3343953,72887,e=>{"use strict";var t=e.i(847684),i=e.i(8876434),n=e.i(8674454),a=e.i(6694387),s=e.i(4991687),l=e.i(8459493),r=e.i(455575),o=e.i(8238875),c=e.i(7185353),u=e.i(6352514),d=e.i(4759942),b=e.i(5338940),p=e.i(9928621),h=e.i(1138941),g=e.i(8042625),m=e.i(57106),y=e.i(7722264),f=e.i(277234),v=e.i(4030453),A=e.i(6891161),I=e.i(8522580);e.i(1585898);var j=e.i(2066827),S=e.i(3343142);let x={surveyName:"Disable Web Analytics User Feedback",surveySlug:"disable-web-analytics-user-feedback",surveySteps:[{title:"Web Analytics has been disabled",description:"Help us improve by sharing your feedback. Select all that apply.",fields:[{type:"select",id:"reasons-why",label:"Any reasons for disabling Web Analytics?",selectMultiple:!0,options:[{id:"missing-features",label:"Missing features",reveals:{id:"what-were-you-missing",label:"What were you missing?"}},{id:"too-expensive",label:"Too expensive"},{id:"prefer-another-product",label:"I prefer another product",reveals:{id:"preferred-product",label:"Which product do you prefer?"}},{id:"not-working-as-expected",label:"It is not working as expected",reveals:{id:"what-was-not-working",label:"What was not working?"}},{id:"just-looking-around",label:"I was just looking around"},{id:"other",label:"Other",reveals:{id:"other-reason",label:"Additional comments"}}]}]}]};function w(e){let[i,n]=(0,c.useState)(!0);return(0,t.jsx)(j.SurveyModal,{active:i,onSubmit:async t=>{await (0,S.createSurveyEntry)({data:t}),e.onSubmitted?.(),n(!1)},setActive:n,surveyInfo:x})}var D=e.i(579135);function P(e){let{active:i,close:n,revalidateFeatureState:a}=e,[s,l]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1),[j,S]=(0,c.useState)(),x=(0,r.useToasts)(),P=(0,h.useProjectIdOrName)(),C=(0,D.useCurrentProjectNameAndIdSuspense)(),{team:M}=(0,b.useTeam)(),k=M?.enabledInvoiceItems?.webAnalytics?.enabled;async function L(){try{l(!0),await (0,f.fetchAPI)(`/api/v1/web/insights/toggle${(0,g.encode)({projectId:C.id,teamId:M?.id})}`,{method:"POST",body:{value:!1},throwOnHTTPError:!0}),d.analytics.track(u.AnalyticsEvent.ANALYTICS_DISABLED,{teamId:M?.id,projectId:P}),p(!0),x.success("Disabled Web Analytics successfully."),n()}catch(e){S("Something went wrong."),(0,y.isErrorLike)(e)&&d.analytics.track(u.AnalyticsEvent.ERROR,{message:e.message,name:e.name,teamId:M?.id})}finally{l(!1)}}return o?(0,t.jsx)(w,{onSubmitted:()=>{a()}}):(0,t.jsxs)(A.Modal.Modal,{active:i,onClickOutside:s?()=>void 0:n,children:[(0,t.jsxs)(A.Modal.Body,{children:[(0,t.jsx)(A.Modal.Header,{children:(0,t.jsx)(A.Modal.Title,{children:"Disable Web Analytics"})}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-6 flex-initial",children:[(0,t.jsx)("p",{className:"text-copy-14 text-gray-900",children:"Web Analytics tracking for your project will be disabled immediately."}),k?(0,t.jsxs)(I.Note,{children:["This action will not disable Web Analytics Plus. To manage this add-on, please go to"," ",(0,t.jsx)(m.Link,{href:`/${M.slug}/~/settings/billing#web-analytics`,variant:"highlight",children:"Billing"}),"."]}):null,j?(0,t.jsx)(v.Error,{error:j}):null]})]}),(0,t.jsxs)(A.Modal.Actions,{children:[(0,t.jsx)(A.Modal.Action,{disabled:s,onClick:n,type:"secondary",children:"Cancel"}),(0,t.jsx)(A.Modal.Action,{loading:s,onClick:L,children:"Disable"})]})]})}e.s(["DisableModal",0,P],72887);var C=e.i(1649649),M=e.i(7837522),k=e.i(7780974),L=e.i(7589392),E=e.i(1717203),T=e.i(7557283),W=e.i(60582);e.s(["OptionsMenu",0,function(e){let{revalidateFeatureState:h,buttonClassName:g}=e,{setUpgradeModalSource:m}=(0,p.useWebAnalyticsContext)(),[y,f]=(0,c.useState)(!1),v=(0,o.useRouter)(),{success:A}=(0,r.useToasts)(),{team:I,isLoading:j}=(0,b.useTeam)(),{isPlus:S,plan:x}=(0,C.useIsWebAnalyticsBilling)(),{track:w}=(0,M.useTrackActivity)(),[D,O]=(0,c.useState)(!1),B=(0,o.useParams)(),{can:F,isLoading:N}=(0,E.default)(),R=I?.billing?.plan==="hobby",U=I?.billing?.plan==="pro"&&"trialing"===I.billing.status,V=F(T.Action.Create,T.Resource.Drain)&&!(R||U),H=j||N,$=(0,c.useCallback)(e=>{w(k.VercelActivityAction.DrainsModalConverted,{source:"web-analytics-options-menu",drainType:e.drainType,kind:e.kind,isLegacy:e.isLegacy}),B?.teamSlug&&B?.project&&A({text:"Drain successfully added",action:"View project drains",actionHref:`/${B.teamSlug}/${B.project}/settings/drains`})},[w,B?.teamSlug,B?.project,A]),_=(0,c.useCallback)(()=>{"pro"===x&&S?v.push(I?`/${I.slug}/~/settings/billing#web-analytics`:"/account/billing#web-analytics"):(d.analytics.track(u.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:x,teamId:I?.id,type:"three-dots"}),m("menu"))},[S,x,v,m,I]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.MenuContainer,{position:"bottom-end",children:[(0,t.jsx)(a.MenuButton,{"aria-label":"More Actions",className:g,shape:"square",svgOnly:!0,type:W.IS_DASH?"tertiary":"secondary",children:(0,t.jsx)(i.MoreHorizontal,{})}),(0,t.jsxs)(n.Menu,{width:213,children:["enterprise"!==x?(0,t.jsx)(l.MenuItem,{disabled:j,onClick:_,children:"hobby"===x?"Upgrade to Pro":S?"Go to Billing":"Upgrade to Plus"}):null,(0,t.jsx)(l.MenuItem,{external:!0,href:"/docs/analytics",isLink:!0,target:"_blank",children:"Go to Docs"}),H?null:(0,t.jsx)(l.MenuItem,{disabled:!V,onClick:()=>{O(!0),w(k.VercelActivityAction.DrainsModalOpened,{source:"web-analytics-options-menu"})},children:"Add Drain"}),(0,t.jsx)(l.MenuItem,{onClick:()=>f(!0),type:"error",children:"Disable Web Analytics"})]})]}),(0,t.jsx)(c.Suspense,{fallback:null,children:(0,t.jsx)(P,{active:y,close:()=>f(!1),revalidateFeatureState:h})}),B?.teamSlug?(0,t.jsx)(L.DrainModals,{isOpen:D,closeModal:()=>O(!1),teamSlug:B.teamSlug,projectIdOrSlug:B.project,onDrainCreated:$,drain:null,drainType:"analytics"}):null]})}],3343953)},1187354,e=>{"use strict";var t=e.i(847684),i=e.i(7185353),n=e.i(8238875),a=e.i(5757634),s=e.i(6352514),l=e.i(4759942),r=e.i(5338940),o=e.i(9928621),c=e.i(72887),u=e.i(1649649),d=e.i(7837522),b=e.i(7780974),p=e.i(7589392),h=e.i(1717203),g=e.i(7557283),m=e.i(5343305),y=e.i(7952834),f=e.i(1295503),v=e.i(60582),A=e.i(3343953);function I(){return v.IS_DASH?(0,t.jsx)(i.Suspense,{fallback:null,children:(0,t.jsx)(S,{})}):(0,t.jsx)(j,{})}function j(){let e=(0,n.useRouter)(),{mutate:i}=(0,a.useSWRConfig)(),{data:s}=(0,m.useCurrentDashboardProject)();return(0,t.jsx)(A.OptionsMenu,{buttonClassName:"!w-[36px]",revalidateFeatureState:()=>{(0,y.revalidateProject)(i,s),e.refresh()}})}function S(){let e=(0,n.useRouter)(),{mutate:v}=(0,a.useSWRConfig)(),{data:A}=(0,m.useCurrentDashboardProject)(),{setUpgradeModalSource:I}=(0,o.useWebAnalyticsContext)(),{team:j,isLoading:S}=(0,r.useTeam)(),{isPlus:x,plan:w}=(0,u.useIsWebAnalyticsBilling)(),{track:D}=(0,d.useTrackActivity)(),P=(0,n.useParams)(),{can:C,isLoading:M}=(0,h.default)(),[k,L]=(0,i.useState)(!1),[E,T]=(0,i.useState)(!1),W=j?.billing?.plan==="hobby",O=j?.billing?.plan==="pro"&&"trialing"===j.billing.status,B=C(g.Action.Create,g.Resource.Drain)&&!(W||O),F=S||M,N=(0,i.useCallback)(e=>{D(b.VercelActivityAction.DrainsModalConverted,{source:"web-analytics-options-menu",drainType:e.drainType,kind:e.kind,isLegacy:e.isLegacy})},[D]),R=(0,i.useCallback)(()=>{"pro"===w&&x?e.push(j?`/${j.slug}/~/settings/billing#web-analytics`:"/account/billing#web-analytics"):(l.analytics.track(s.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:w,teamId:j?.id,type:"three-dots"}),I("menu"))},[x,w,e,I,j]),U=(0,i.useCallback)(()=>{(0,y.revalidateProject)(v,A),e.refresh()},[v,A,e]);return(0,t.jsxs)(t.Fragment,{children:["enterprise"!==w?(0,t.jsx)(f.ActionMenuItem,{disabled:S,onClick:R,children:"hobby"===w?"Upgrade to Pro":x?"Go to Billing":"Upgrade to Plus"}):null,(0,t.jsx)(f.ActionMenuLink,{href:"/docs/analytics",external:!0,children:"Go to Docs"}),F?null:(0,t.jsx)(f.ActionMenuItem,{disabled:!B,onClick:()=>{T(!0),D(b.VercelActivityAction.DrainsModalOpened,{source:"web-analytics-options-menu"})},children:"Add Drain"}),(0,t.jsx)(f.ActionMenuItem,{onClick:()=>L(!0),type:"error",children:"Disable Web Analytics"}),(0,t.jsx)(i.Suspense,{fallback:null,children:(0,t.jsx)(c.DisableModal,{active:k,close:()=>L(!1),revalidateFeatureState:U})}),P?.teamSlug?(0,t.jsx)(p.DrainModals,{isOpen:E,closeModal:()=>T(!1),teamSlug:P.teamSlug,projectIdOrSlug:P.project,onDrainCreated:N,drain:null,drainType:"analytics"}):null]})}e.s(["default",0,function(){return(0,t.jsx)(I,{})}],1187354)}]);

//# debugId=166d4855-3e2c-bafb-bbc9-83e74db5d60b
//# sourceMappingURL=65c9a9719c7bdb40.js.map